{"version":3,"file":"change-password.js","sources":["../../js/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../js/node_modules/@babel/runtime/helpers/esm/createClass.js","../../js/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../../js/node_modules/@babel/runtime/helpers/esm/inherits.js","../../js/node_modules/@babel/runtime/helpers/esm/typeof.js","../../js/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../../js/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../../js/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../../js/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../js/modules/Errors.js","../../js/node_modules/inputmask/lib/getPrototypeOf.js","../../js/node_modules/inputmask/lib/validation-tests.js","../../js/node_modules/inputmask/lib/environment.js","../../js/node_modules/inputmask/lib/inputHandling.js","../../js/node_modules/inputmask/lib/eventhandlers.js","../../js/node_modules/inputmask/lib/validation.js","../../js/node_modules/inputmask/lib/positioning.js","../../js/node_modules/inputmask/lib/eventruler.js","../../js/node_modules/inputmask/lib/mask.js","../../js/node_modules/inputmask/lib/dependencyLibs/extend.js","../../js/node_modules/inputmask/lib/global/window.js","../../js/node_modules/inputmask/lib/dependencyLibs/data.js","../../js/node_modules/inputmask/lib/dependencyLibs/events.js","../../js/node_modules/inputmask/lib/dependencyLibs/inputmask.dependencyLib.js","../../js/node_modules/inputmask/lib/mask-lexer.js","../../js/node_modules/inputmask/lib/definitions.js","../../js/node_modules/inputmask/lib/defaults.js","../../js/node_modules/inputmask/lib/inputmask.js","../../js/components/KbfForm.js","../../js/node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","../../js/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../../js/node_modules/@babel/runtime/helpers/esm/construct.js","../../js/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","../../js/components/KbfPreloaderButton.js","../../js/components/KbfFooterTop.js","../../js/change-password/components/App.js","../../js/change-password/entry.js"],"sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import _typeof from \"@babel/runtime/helpers/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","let errors = {};\r\n\r\n// Wyjatki\r\n\r\n// Nie znaleziono elementu DOM\r\nerrors.elementNotFound = function (selector) {\r\n    return new Error(`Cannot find elements with selector \"${selector}\"`);\r\n}\r\n\r\n// Nie znaleziono formularza\r\nerrors.formNotFound = function (formName) {\r\n    return new Error(`Cannot find form with name \"${formName}\"`);\r\n}\r\n\r\n// Nie podano argumentu\r\nerrors.argumentNotFound = function (argumentName) {\r\n    return new Error(`${argumentName.substring(0, 1).toUpperCase() + argumentName.substring(1)} argument cannot be empty`);\r\n}\r\n\r\n// Brak walidatora dla formularza\r\nerrors.noValidator = function () {\r\n    return new Error(`No JQuery validator plugin`);\r\n}\r\n\r\n// Nie podano wspolrzednych geograficznych\r\nerrors.noGeoCoords = function () {\r\n    return new Error(`You must provide geo coordinates.`);\r\n}\r\n\r\nexport default errors;","if (typeof Object.getPrototypeOf !== \"function\") {\n\tObject.getPrototypeOf = typeof \"test\".__proto__ === \"object\" ? function (object) {\n\t\treturn object.__proto__;\n\t} : function (object) {\n\t\treturn object.constructor.prototype;\n\t};\n}","export {determineTestTemplate, getDecisionTaker, getMaskTemplate, getPlaceholder, getTest, getTests, getTestTemplate};\n\nfunction getLocator(tst, align) { //need to align the locators to be correct\n\tvar locator = (tst.alternation != undefined ? tst.mloc[getDecisionTaker(tst)] : tst.locator).join(\"\");\n\tif (locator !== \"\") while (locator.length < align) locator += \"0\";\n\treturn locator;\n}\n\nfunction getDecisionTaker(tst) {\n\tvar decisionTaker = tst.locator[tst.alternation];\n\tif (typeof decisionTaker == \"string\" && decisionTaker.length > 0) { //no decision taken ~ take first one as decider\n\t\tdecisionTaker = decisionTaker.split(\",\")[0];\n\t}\n\treturn decisionTaker !== undefined ? decisionTaker.toString() : \"\";\n}\n\n//tobe put on prototype?\nfunction getPlaceholder(pos, test, returnPL) {\n\tconst inputmask = this,\n\t\topts = this.opts,\n\t\tmaskset = this.maskset;\n\n\ttest = test || getTest.call(inputmask, pos).match;\n\tif (test.placeholder !== undefined || returnPL === true) {\n\t\treturn typeof test.placeholder === \"function\" ? test.placeholder(opts) : test.placeholder;\n\t} else if (test.static === true) {\n\t\tif (pos > -1 && maskset.validPositions[pos] === undefined) {\n\t\t\tvar tests = getTests.call(inputmask, pos),\n\t\t\t\tstaticAlternations = [],\n\t\t\t\tprevTest;\n\t\t\tif (tests.length > 1 + (tests[tests.length - 1].match.def === \"\" ? 1 : 0)) {\n\t\t\t\tfor (var i = 0; i < tests.length; i++) {\n\t\t\t\t\tif (tests[i].match.def !== \"\" && tests[i].match.optionality !== true && tests[i].match.optionalQuantifier !== true &&\n\t\t\t\t\t\t(tests[i].match.static === true || (prevTest === undefined || tests[i].match.fn.test(prevTest.match.def, maskset, pos, true, opts) !== false))) {\n\t\t\t\t\t\tstaticAlternations.push(tests[i]);\n\t\t\t\t\t\tif (tests[i].match.static === true) prevTest = tests[i];\n\t\t\t\t\t\tif (staticAlternations.length > 1) {\n\t\t\t\t\t\t\tif (/[0-9a-bA-Z]/.test(staticAlternations[0].match.def)) {\n\t\t\t\t\t\t\t\treturn opts.placeholder.charAt(pos % opts.placeholder.length);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn test.def;\n\t}\n\n\treturn opts.placeholder.charAt(pos % opts.placeholder.length);\n}\n\n//tobe put on prototype?\nfunction getMaskTemplate(baseOnInput, minimalPos, includeMode, noJit, clearOptionalTail) {\n\t//includeMode true => input, undefined => placeholder, false => mask\n\n\tvar inputmask = this,\n\t\topts = this.opts,\n\t\tmaskset = this.maskset;\n\n\n\tvar greedy = opts.greedy;\n\tif (clearOptionalTail) opts.greedy = false;\n\tminimalPos = minimalPos || 0;\n\tvar maskTemplate = [],\n\t\tndxIntlzr, pos = 0,\n\t\ttest, testPos, jitRenderStatic;\n\tdo {\n\t\tif (baseOnInput === true && maskset.validPositions[pos]) {\n\t\t\ttestPos = (clearOptionalTail && maskset.validPositions[pos].match.optionality === true\n\t\t\t\t&& maskset.validPositions[pos + 1] === undefined\n\t\t\t\t&& (maskset.validPositions[pos].generatedInput === true || (maskset.validPositions[pos].input == opts.skipOptionalPartCharacter && pos > 0)))\n\t\t\t\t? determineTestTemplate.call(inputmask, pos, getTests.call(inputmask, pos, ndxIntlzr, pos - 1))\n\t\t\t\t: maskset.validPositions[pos];\n\t\t\ttest = testPos.match;\n\t\t\tndxIntlzr = testPos.locator.slice();\n\t\t\tmaskTemplate.push(includeMode === true ? testPos.input : includeMode === false ? test.nativeDef : getPlaceholder.call(inputmask, pos, test));\n\t\t} else {\n\t\t\ttestPos = getTestTemplate.call(inputmask, pos, ndxIntlzr, pos - 1);\n\t\t\ttest = testPos.match;\n\t\t\tndxIntlzr = testPos.locator.slice();\n\t\t\tvar jitMasking = noJit === true ? false : (opts.jitMasking !== false ? opts.jitMasking : test.jit);\n\t\t\t//check for groupSeparator is a hack for the numerics as we don't want the render of the groupSeparator beforehand\n\t\t\tjitRenderStatic = (jitRenderStatic && test.static && test.def !== opts.groupSeparator && test.fn === null) || (maskset.validPositions[pos - 1] && test.static && test.def !== opts.groupSeparator && test.fn === null);\n\t\t\tif (jitRenderStatic || jitMasking === false || jitMasking === undefined /*|| pos < lvp*/ || (typeof jitMasking === \"number\" && isFinite(jitMasking) && jitMasking > pos)) {\n\t\t\t\tmaskTemplate.push(includeMode === false ? test.nativeDef : getPlaceholder.call(inputmask, pos, test));\n\t\t\t} else {\n\t\t\t\tjitRenderStatic = false;\n\t\t\t}\n\t\t}\n\n\t\tpos++;\n\t} while ((inputmask.maxLength === undefined || pos < inputmask.maxLength) && (test.static !== true || test.def !== \"\") || minimalPos > pos);\n\tif (maskTemplate[maskTemplate.length - 1] === \"\") {\n\t\tmaskTemplate.pop(); //drop the last one which is empty\n\t}\n\tif (includeMode !== false || //do not alter the masklength when just retrieving the maskdefinition\n\t\tmaskset.maskLength === undefined) //just make sure the maskLength gets initialized in all cases (needed for isValid)\n\t{\n\t\tmaskset.maskLength = pos - 1;\n\t}\n\n\topts.greedy = greedy;\n\treturn maskTemplate;\n}\n\n//tobe put on prototype?\nfunction getTestTemplate(pos, ndxIntlzr, tstPs) {\n\tvar inputmask = this,\n\t\tmaskset = this.maskset;\n\n\treturn maskset.validPositions[pos] || determineTestTemplate.call(inputmask, pos, getTests.call(inputmask, pos, ndxIntlzr ? ndxIntlzr.slice() : ndxIntlzr, tstPs));\n}\n\n//tobe put on prototype?\nfunction determineTestTemplate(pos, tests) {\n\tvar inputmask = this,\n\t\topts = this.opts;\n\n\tpos = pos > 0 ? pos - 1 : 0;\n\tvar altTest = getTest.call(inputmask, pos), targetLocator = getLocator(altTest), tstLocator, closest, bestMatch;\n\tfor (var ndx = 0; ndx < tests.length; ndx++) { //find best matching\n\t\tvar tst = tests[ndx];\n\t\ttstLocator = getLocator(tst, targetLocator.length);\n\t\tvar distance = Math.abs(tstLocator - targetLocator);\n\t\tif (closest === undefined\n\t\t\t|| (tstLocator !== \"\" && distance < closest)\n\t\t\t|| (bestMatch && !opts.greedy && bestMatch.match.optionality && bestMatch.match.newBlockMarker === \"master\" && (!tst.match.optionality || !tst.match.newBlockMarker))\n\t\t\t|| (bestMatch && bestMatch.match.optionalQuantifier && !tst.match.optionalQuantifier)) {\n\t\t\tclosest = distance;\n\t\t\tbestMatch = tst;\n\t\t}\n\t}\n\n\treturn bestMatch;\n}\n\n//tobe put on prototype?\nfunction getTest(pos, tests) {\n\tvar inputmask = this,\n\t\tmaskset = this.maskset;\n\n\tif (maskset.validPositions[pos]) {\n\t\treturn maskset.validPositions[pos];\n\t}\n\treturn (tests || getTests.call(inputmask, pos))[0];\n}\n\n//tobe put on prototype?\nfunction getTests(pos, ndxIntlzr, tstPs) {\n\tvar inputmask = this,\n\t\t$ = this.dependencyLib,\n\t\tmaskset = this.maskset,\n\t\topts = this.opts,\n\t\tel = this.el,\n\t\tmaskTokens = maskset.maskToken,\n\t\ttestPos = ndxIntlzr ? tstPs : 0,\n\t\tndxInitializer = ndxIntlzr ? ndxIntlzr.slice() : [0],\n\t\tmatches = [],\n\t\tinsertStop = false,\n\t\tlatestMatch,\n\t\tcacheDependency = ndxIntlzr ? ndxIntlzr.join(\"\") : \"\";\n\n\tfunction resolveTestFromToken(maskToken, ndxInitializer, loopNdx, quantifierRecurse) { //ndxInitializer contains a set of indexes to speedup searches in the mtokens\n\t\tfunction handleMatch(match, loopNdx, quantifierRecurse) {\n\t\t\tfunction isFirstMatch(latestMatch, tokenGroup) {\n\t\t\t\tvar firstMatch = tokenGroup.matches.indexOf(latestMatch) === 0;\n\t\t\t\tif (!firstMatch) {\n\t\t\t\t\ttokenGroup.matches.every(function (match, ndx) {\n\t\t\t\t\t\tif (match.isQuantifier === true) {\n\t\t\t\t\t\t\tfirstMatch = isFirstMatch(latestMatch, tokenGroup.matches[ndx - 1]);\n\t\t\t\t\t\t} else if (Object.prototype.hasOwnProperty.call(match, \"matches\")) firstMatch = isFirstMatch(latestMatch, match);\n\t\t\t\t\t\tif (firstMatch) return false;\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn firstMatch;\n\t\t\t}\n\n\t\t\tfunction resolveNdxInitializer(pos, alternateNdx, targetAlternation) {\n\t\t\t\tvar bestMatch, indexPos;\n\n\t\t\t\tif (maskset.tests[pos] || maskset.validPositions[pos]) {\n\t\t\t\t\t(maskset.tests[pos] || [maskset.validPositions[pos]]).every(function (lmnt, ndx) {\n\t\t\t\t\t\tif (lmnt.mloc[alternateNdx]) {\n\t\t\t\t\t\t\tbestMatch = lmnt;\n\t\t\t\t\t\t\treturn false; //break\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar alternation = targetAlternation !== undefined ? targetAlternation : lmnt.alternation,\n\t\t\t\t\t\t\tndxPos = lmnt.locator[alternation] !== undefined ? lmnt.locator[alternation].toString().indexOf(alternateNdx) : -1;\n\t\t\t\t\t\tif ((indexPos === undefined || ndxPos < indexPos) && ndxPos !== -1) {\n\t\t\t\t\t\t\tbestMatch = lmnt;\n\t\t\t\t\t\t\tindexPos = ndxPos;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (bestMatch) {\n\t\t\t\t\tvar bestMatchAltIndex = bestMatch.locator[bestMatch.alternation];\n\t\t\t\t\tvar locator = bestMatch.mloc[alternateNdx] || bestMatch.mloc[bestMatchAltIndex] || bestMatch.locator;\n\t\t\t\t\treturn locator.slice((targetAlternation !== undefined ? targetAlternation : bestMatch.alternation) + 1);\n\t\t\t\t} else {\n\t\t\t\t\treturn targetAlternation !== undefined ? resolveNdxInitializer(pos, alternateNdx) : undefined;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction isSubsetOf(source, target) {\n\t\t\t\tfunction expand(pattern) {\n\t\t\t\t\tvar expanded = [], start = -1, end;\n\t\t\t\t\tfor (var i = 0, l = pattern.length; i < l; i++) {\n\t\t\t\t\t\tif (pattern.charAt(i) === \"-\") {\n\t\t\t\t\t\t\tend = pattern.charCodeAt(i + 1);\n\t\t\t\t\t\t\twhile (++start < end) expanded.push(String.fromCharCode(start));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstart = pattern.charCodeAt(i);\n\t\t\t\t\t\t\texpanded.push(pattern.charAt(i));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn expanded.join(\"\");\n\t\t\t\t}\n\n\t\t\t\tif (source.match.def === target.match.nativeDef) return true;\n\t\t\t\tif ((opts.regex || (source.match.fn instanceof RegExp && target.match.fn instanceof RegExp)) && source.match.static !== true && target.match.static !== true) { //is regex a subset\n\t\t\t\t\treturn expand(target.match.fn.toString().replace(/[[\\]/]/g, \"\")).indexOf(expand(source.match.fn.toString().replace(/[[\\]/]/g, \"\"))) !== -1;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tfunction staticCanMatchDefinition(source, target) {\n\t\t\t\treturn source.match.static === true && target.match.static !== true ? target.match.fn.test(source.match.def, maskset, pos, false, opts, false) : false;\n\t\t\t}\n\n\t\t\t//mergelocators for retrieving the correct locator match when merging\n\t\t\tfunction setMergeLocators(targetMatch, altMatch) {\n\t\t\t\tvar alternationNdx = targetMatch.alternation,\n\t\t\t\t\tshouldMerge = altMatch === undefined || (alternationNdx === altMatch.alternation &&\n\t\t\t\t\t\ttargetMatch.locator[alternationNdx].toString().indexOf(altMatch.locator[alternationNdx]) === -1);\n\t\t\t\tif (!shouldMerge && alternationNdx > altMatch.alternation) {\n\t\t\t\t\tfor (var i = altMatch.alternation; i < alternationNdx; i++) {\n\t\t\t\t\t\tif (targetMatch.locator[i] !== altMatch.locator[i]) {\n\t\t\t\t\t\t\talternationNdx = i;\n\t\t\t\t\t\t\tshouldMerge = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (shouldMerge) {\n\t\t\t\t\ttargetMatch.mloc = targetMatch.mloc || {};\n\t\t\t\t\tvar locNdx = targetMatch.locator[alternationNdx];\n\t\t\t\t\tif (locNdx === undefined) {\n\t\t\t\t\t\ttargetMatch.alternation = undefined;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (typeof locNdx === \"string\") locNdx = locNdx.split(\",\")[0];\n\t\t\t\t\t\tif (targetMatch.mloc[locNdx] === undefined) targetMatch.mloc[locNdx] = targetMatch.locator.slice();\n\t\t\t\t\t\tif (altMatch !== undefined) {\n\t\t\t\t\t\t\tfor (var ndx in altMatch.mloc) {\n\t\t\t\t\t\t\t\tif (typeof ndx === \"string\") ndx = ndx.split(\",\")[0];\n\t\t\t\t\t\t\t\tif (targetMatch.mloc[ndx] === undefined) targetMatch.mloc[ndx] = altMatch.mloc[ndx];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttargetMatch.locator[alternationNdx] = Object.keys(targetMatch.mloc).join(\",\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tfunction isSameLevel(targetMatch, altMatch) {\n\t\t\t\tif (targetMatch.locator.length !== altMatch.locator.length) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tfor (let locNdx = targetMatch.alternation + 1; locNdx < targetMatch.locator.length; locNdx++) {\n\t\t\t\t\tif (targetMatch.locator[locNdx] !== altMatch.locator[locNdx]) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (testPos > (pos + opts._maxTestPos)) {\n\t\t\t\tthrow \"Inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. \" + maskset.mask;\n\t\t\t}\n\t\t\tif (testPos === pos && match.matches === undefined) {\n\t\t\t\tmatches.push({\n\t\t\t\t\t\"match\": match,\n\t\t\t\t\t\"locator\": loopNdx.reverse(),\n\t\t\t\t\t\"cd\": cacheDependency,\n\t\t\t\t\t\"mloc\": {}\n\t\t\t\t});\n\t\t\t\treturn true;\n\t\t\t} else if (match.matches !== undefined) {\n\t\t\t\tif (match.isGroup && quantifierRecurse !== match) { //when a group pass along to the quantifier\n\t\t\t\t\tmatch = handleMatch(maskToken.matches[maskToken.matches.indexOf(match) + 1], loopNdx, quantifierRecurse);\n\t\t\t\t\tif (match) return true;\n\t\t\t\t} else if (match.isOptional) {\n\t\t\t\t\tvar optionalToken = match, mtchsNdx = matches.length;\n\t\t\t\t\tmatch = resolveTestFromToken(match, ndxInitializer, loopNdx, quantifierRecurse);\n\t\t\t\t\tif (match) {\n\t\t\t\t\t\t//mark optionality in matches\n\t\t\t\t\t\tmatches.forEach(function (mtch, ndx) {\n\t\t\t\t\t\t\tif (ndx >= mtchsNdx) {\n\t\t\t\t\t\t\t\tmtch.match.optionality = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tlatestMatch = matches[matches.length - 1].match;\n\t\t\t\t\t\tif (quantifierRecurse === undefined && isFirstMatch(latestMatch, optionalToken)) { //prevent loop see #698\n\t\t\t\t\t\t\tinsertStop = true; //insert a stop\n\t\t\t\t\t\t\ttestPos = pos; //match the position after the group\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (match.isAlternator) {\n\t\t\t\t\tvar alternateToken = match,\n\t\t\t\t\t\tmalternateMatches = [],\n\t\t\t\t\t\tmaltMatches,\n\t\t\t\t\t\tcurrentMatches = matches.slice(),\n\t\t\t\t\t\tloopNdxCnt = loopNdx.length;\n\t\t\t\t\tvar altIndex = ndxInitializer.length > 0 ? ndxInitializer.shift() : -1;\n\t\t\t\t\tif (altIndex === -1 || typeof altIndex === \"string\") {\n\t\t\t\t\t\tvar currentPos = testPos,\n\t\t\t\t\t\t\tndxInitializerClone = ndxInitializer.slice(),\n\t\t\t\t\t\t\taltIndexArr = [],\n\t\t\t\t\t\t\tamndx;\n\t\t\t\t\t\tif (typeof altIndex == \"string\") {\n\t\t\t\t\t\t\taltIndexArr = altIndex.split(\",\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfor (amndx = 0; amndx < alternateToken.matches.length; amndx++) {\n\t\t\t\t\t\t\t\taltIndexArr.push(amndx.toString());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (maskset.excludes[pos] !== undefined) {\n\t\t\t\t\t\t\tvar altIndexArrClone = altIndexArr.slice();\n\t\t\t\t\t\t\tfor (var i = 0, exl = maskset.excludes[pos].length; i < exl; i++) {\n\t\t\t\t\t\t\t\tvar excludeSet = maskset.excludes[pos][i].toString().split(\":\");\n\t\t\t\t\t\t\t\tif (loopNdx.length == excludeSet[1]) {\n\t\t\t\t\t\t\t\t\taltIndexArr.splice(altIndexArr.indexOf(excludeSet[0]), 1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (altIndexArr.length === 0) { //fully alternated => reset\n\t\t\t\t\t\t\t\tdelete maskset.excludes[pos];\n\t\t\t\t\t\t\t\taltIndexArr = altIndexArrClone;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (opts.keepStatic === true || (isFinite(parseInt(opts.keepStatic)) && currentPos >= opts.keepStatic)) altIndexArr = altIndexArr.slice(0, 1);\n\t\t\t\t\t\tvar unMatchedAlternation = false;\n\t\t\t\t\t\tfor (var ndx = 0; ndx < altIndexArr.length; ndx++) {\n\t\t\t\t\t\t\tamndx = parseInt(altIndexArr[ndx]);\n\t\t\t\t\t\t\tmatches = [];\n\t\t\t\t\t\t\t//set the correct ndxInitializer\n\t\t\t\t\t\t\tndxInitializer = typeof altIndex === \"string\" ? resolveNdxInitializer(testPos, amndx, loopNdxCnt) || ndxInitializerClone.slice() : ndxInitializerClone.slice();\n\t\t\t\t\t\t\tif (alternateToken.matches[amndx] && handleMatch(alternateToken.matches[amndx], [amndx].concat(loopNdx), quantifierRecurse)) {\n\t\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t\t} else if (ndx === 0) {\n\t\t\t\t\t\t\t\tunMatchedAlternation = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tmaltMatches = matches.slice();\n\t\t\t\t\t\t\ttestPos = currentPos;\n\t\t\t\t\t\t\tmatches = [];\n\n\t\t\t\t\t\t\t//fuzzy merge matches\n\t\t\t\t\t\t\tfor (var ndx1 = 0; ndx1 < maltMatches.length; ndx1++) {\n\t\t\t\t\t\t\t\tvar altMatch = maltMatches[ndx1],\n\t\t\t\t\t\t\t\t\tdropMatch = false;\n\t\t\t\t\t\t\t\taltMatch.match.jit = altMatch.match.jit || unMatchedAlternation; //mark jit when there are unmatched alternations  ex: mask: \"(a|aa)\"\n\t\t\t\t\t\t\t\taltMatch.alternation = altMatch.alternation || loopNdxCnt;\n\t\t\t\t\t\t\t\tsetMergeLocators(altMatch);\n\t\t\t\t\t\t\t\tfor (var ndx2 = 0; ndx2 < malternateMatches.length; ndx2++) {\n\t\t\t\t\t\t\t\t\tvar altMatch2 = malternateMatches[ndx2];\n\t\t\t\t\t\t\t\t\tif (typeof altIndex !== \"string\" || (altMatch.alternation !== undefined && altIndexArr.includes(altMatch.locator[altMatch.alternation].toString()))) {\n\t\t\t\t\t\t\t\t\t\tif (altMatch.match.nativeDef === altMatch2.match.nativeDef) {\n\t\t\t\t\t\t\t\t\t\t\tdropMatch = true;\n\t\t\t\t\t\t\t\t\t\t\tsetMergeLocators(altMatch2, altMatch);\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t} else if (isSubsetOf(altMatch, altMatch2)) {\n\t\t\t\t\t\t\t\t\t\t\tif (setMergeLocators(altMatch, altMatch2)) {\n\t\t\t\t\t\t\t\t\t\t\t\tdropMatch = true;\n\t\t\t\t\t\t\t\t\t\t\t\tmalternateMatches.splice(malternateMatches.indexOf(altMatch2), 0, altMatch);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t} else if (isSubsetOf(altMatch2, altMatch)) {\n\t\t\t\t\t\t\t\t\t\t\tsetMergeLocators(altMatch2, altMatch);\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t} else if (staticCanMatchDefinition(altMatch, altMatch2)) {\n\t\t\t\t\t\t\t\t\t\t\tif (!isSameLevel(altMatch, altMatch2) && el.inputmask.userOptions.keepStatic === undefined) {\n\t\t\t\t\t\t\t\t\t\t\t\topts.keepStatic = true;\n\t\t\t\t\t\t\t\t\t\t\t} else if (setMergeLocators(altMatch, altMatch2)) {\n\t\t\t\t\t\t\t\t\t\t\t\t//insert match above general match\n\t\t\t\t\t\t\t\t\t\t\t\tdropMatch = true;\n\t\t\t\t\t\t\t\t\t\t\t\tmalternateMatches.splice(malternateMatches.indexOf(altMatch2), 0, altMatch);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (!dropMatch) {\n\t\t\t\t\t\t\t\t\tmalternateMatches.push(altMatch);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmatches = currentMatches.concat(malternateMatches);\n\t\t\t\t\t\ttestPos = pos;\n\t\t\t\t\t\tinsertStop = matches.length > 0; //insert a stopelemnt when there is an alternate - needed for non-greedy option\n\t\t\t\t\t\tmatch = malternateMatches.length > 0; //set correct match state\n\n\t\t\t\t\t\t//cloneback\n\t\t\t\t\t\tndxInitializer = ndxInitializerClone.slice();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmatch = handleMatch(alternateToken.matches[altIndex] || maskToken.matches[altIndex], [altIndex].concat(loopNdx), quantifierRecurse);\n\t\t\t\t\t}\n\t\t\t\t\tif (match) return true;\n\t\t\t\t} else if (match.isQuantifier && quantifierRecurse !== maskToken.matches[maskToken.matches.indexOf(match) - 1]) {\n\t\t\t\t\tvar qt = match;\n\t\t\t\t\tfor (var qndx = (ndxInitializer.length > 0) ? ndxInitializer.shift() : 0; (qndx < (isNaN(qt.quantifier.max) ? qndx + 1 : qt.quantifier.max)) && testPos <= pos; qndx++) {\n\t\t\t\t\t\tvar tokenGroup = maskToken.matches[maskToken.matches.indexOf(qt) - 1];\n\t\t\t\t\t\tmatch = handleMatch(tokenGroup, [qndx].concat(loopNdx), tokenGroup); //set the tokenGroup as quantifierRecurse marker\n\t\t\t\t\t\tif (match) {\n\t\t\t\t\t\t\t//get latest match\n\t\t\t\t\t\t\tlatestMatch = matches[matches.length - 1].match;\n\t\t\t\t\t\t\t//mark optionality\n\t\t\t\t\t\t\t//TODO FIX RECURSIVE QUANTIFIERS\n\t\t\t\t\t\t\tlatestMatch.optionalQuantifier = qndx >= qt.quantifier.min;\n\t\t\t\t\t\t\t// console.log(pos + \" \" + qt.quantifier.min + \" \" + latestMatch.optionalQuantifier);\n\t\t\t\t\t\t\tlatestMatch.jit = (qndx || 1) * tokenGroup.matches.indexOf(latestMatch) >= qt.quantifier.jit;\n\t\t\t\t\t\t\tif (latestMatch.optionalQuantifier && isFirstMatch(latestMatch, tokenGroup)) {\n\t\t\t\t\t\t\t\tinsertStop = true;\n\t\t\t\t\t\t\t\ttestPos = pos; //match the position after the group\n\t\t\t\t\t\t\t\tbreak; //stop quantifierloop && search for next possible match\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (latestMatch.jit /*&& !latestMatch.optionalQuantifier*/) {\n\t\t\t\t\t\t\t\t//always set jitOffset, isvalid checks when to apply\n\t\t\t\t\t\t\t\tmaskset.jitOffset[pos] = tokenGroup.matches.length - tokenGroup.matches.indexOf(latestMatch);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tmatch = resolveTestFromToken(match, ndxInitializer, loopNdx, quantifierRecurse);\n\t\t\t\t\tif (match) return true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttestPos++;\n\t\t\t}\n\t\t}\n\n\t\t//the offset is set in the quantifierloop when git masking is used\n\t\tfor (var tndx = (ndxInitializer.length > 0 ? ndxInitializer.shift() : 0); tndx < maskToken.matches.length; tndx++) {\n\t\t\tif (maskToken.matches[tndx].isQuantifier !== true) {\n\t\t\t\tvar match = handleMatch(maskToken.matches[tndx], [tndx].concat(loopNdx), quantifierRecurse);\n\t\t\t\tif (match && testPos === pos) {\n\t\t\t\t\treturn match;\n\t\t\t\t} else if (testPos > pos) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction mergeLocators(pos, tests) {\n\t\tlet locator = [], alternation;\n\t\tif (!Array.isArray(tests)) tests = [tests];\n\n\t\tif (tests.length > 0) {\n\t\t\tif (tests[0].alternation === undefined || opts.keepStatic === true) {\n\t\t\t\tlocator = determineTestTemplate.call(inputmask, pos, tests.slice()).locator.slice();\n\t\t\t\tif (locator.length === 0) locator = tests[0].locator.slice();\n\t\t\t} else {\n\t\t\t\ttests.forEach(function (tst) {\n\t\t\t\t\tif (tst.def !== \"\") {\n\t\t\t\t\t\tif (locator.length === 0) {\n\t\t\t\t\t\t\talternation = tst.alternation;\n\t\t\t\t\t\t\tlocator = tst.locator.slice();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (tst.locator[alternation] && locator[alternation].toString().indexOf(tst.locator[alternation]) === -1) {\n\t\t\t\t\t\t\t\tlocator[alternation] += \",\" + tst.locator[alternation];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn locator;\n\t}\n\n\tif (pos > -1 && (inputmask.maxLength === undefined || pos < inputmask.maxLength)) {\n\t\tif (ndxIntlzr === undefined) { //determine index initializer\n\t\t\tvar previousPos = pos - 1,\n\t\t\t\ttest;\n\t\t\twhile ((test = maskset.validPositions[previousPos] || maskset.tests[previousPos]) === undefined && previousPos > -1) {\n\t\t\t\tpreviousPos--;\n\t\t\t}\n\t\t\tif (test !== undefined && previousPos > -1) {\n\t\t\t\tndxInitializer = mergeLocators(previousPos, test);\n\t\t\t\tcacheDependency = ndxInitializer.join(\"\");\n\t\t\t\ttestPos = previousPos;\n\t\t\t}\n\t\t}\n\t\tif (maskset.tests[pos] && maskset.tests[pos][0].cd === cacheDependency) { //cacheDependency is set on all tests, just check on the first\n\t\t\treturn maskset.tests[pos];\n\t\t}\n\t\tfor (var mtndx = ndxInitializer.shift(); mtndx < maskTokens.length; mtndx++) {\n\t\t\tvar match = resolveTestFromToken(maskTokens[mtndx], ndxInitializer, [mtndx]);\n\t\t\tif ((match && testPos === pos) || testPos > pos) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tif (matches.length === 0 || insertStop) {\n\t\tmatches.push({\n\t\t\tmatch: {\n\t\t\t\tfn: null,\n\t\t\t\tstatic: true,\n\t\t\t\toptionality: false,\n\t\t\t\tcasing: null,\n\t\t\t\tdef: \"\",\n\t\t\t\tplaceholder: \"\"\n\t\t\t},\n\t\t\tlocator: [],\n\t\t\tmloc: {},\n\t\t\tcd: cacheDependency\n\t\t});\n\t}\n\n\tif (ndxIntlzr !== undefined && maskset.tests[pos]) { //prioritize full tests for caching\n\t\treturn $.extend(true, [], matches);\n\t}\n\tmaskset.tests[pos] = $.extend(true, [], matches); //set a clone to prevent overwriting some props\n\t// console.log(pos + \" - \" + JSON.stringify(matches));\n\treturn maskset.tests[pos];\n}\n","const ua = (window.navigator && window.navigator.userAgent) || \"\",\n\tie = (ua.indexOf(\"MSIE \") > 0) || (ua.indexOf(\"Trident/\") > 0),\n\tmobile = \"ontouchstart\" in window, //not entirely correct but will currently do\n\tiemobile = /iemobile/i.test(ua),\n\tiphone = /iphone/i.test(ua) && !iemobile;\n\nexport {ua, ie, mobile, iemobile, iphone};","import keyCode from \"./keycode.json\";\nimport {getMaskTemplate, getPlaceholder, getTest} from \"./validation-tests\";\nimport {\n\tcaret,\n\tdetermineNewCaretPosition,\n\tgetBuffer, getBufferTemplate,\n\tgetLastValidPosition,\n\tisMask,\n\tresetMaskSet,\n\tseekNext\n} from \"./positioning\";\nimport {isComplete, isValid, refreshFromBuffer} from \"./validation\";\nimport {ie} from \"./environment\";\nimport {EventHandlers} from \"./eventhandlers\";\n\n\nexport {applyInputValue, clearOptionalTail, checkVal, HandleNativePlaceholder, unmaskedvalue, writeBuffer};\n\nfunction applyInputValue(input, value) {\n\tconst inputmask = input ? input.inputmask : this, opts = inputmask.opts;\n\n\tinput.inputmask.refreshValue = false;\n\tif (typeof opts.onBeforeMask === \"function\") value = opts.onBeforeMask.call(inputmask, value, opts) || value;\n\tvalue = value.toString().split(\"\");\n\tcheckVal(input, true, false, value);\n\tinputmask.undoValue = getBuffer.call(inputmask).join(\"\");\n\tif ((opts.clearMaskOnLostFocus || opts.clearIncomplete) && input.inputmask._valueGet() === getBufferTemplate.call(inputmask).join(\"\") && getLastValidPosition.call(inputmask) === -1) {\n\t\tinput.inputmask._valueSet(\"\");\n\t}\n}\n\n//todo put on prototype?\nfunction clearOptionalTail(buffer) {\n\tconst inputmask = this;\n\n\tbuffer.length = 0;\n\tvar template = getMaskTemplate.call(inputmask, true, 0, true, undefined, true), lmnt;\n\twhile ((lmnt = template.shift()) !== undefined) buffer.push(lmnt);\n\treturn buffer;\n}\n\nfunction checkVal(input, writeOut, strict, nptvl, initiatingEvent) {\n\tconst inputmask = input ? input.inputmask : this,\n\t\tmaskset = inputmask.maskset,\n\t\topts = inputmask.opts,$ = inputmask.dependencyLib;\n\n\tvar inputValue = nptvl.slice(),\n\t\tcharCodes = \"\",\n\t\tinitialNdx = -1,\n\t\tresult = undefined, skipOptionalPartCharacter = opts.skipOptionalPartCharacter;\n\topts.skipOptionalPartCharacter = \"\"; //see issue #2311\n\n\tfunction isTemplateMatch(ndx, charCodes) {\n\t\tvar targetTemplate = getMaskTemplate.call(inputmask, true, 0).slice(ndx, seekNext.call(inputmask, ndx)).join(\"\").replace(/'/g, \"\"),\n\t\t\tcharCodeNdx = targetTemplate.indexOf(charCodes);\n\t\t//strip spaces from targetTemplate\n\t\twhile (charCodeNdx > 0 && targetTemplate[charCodeNdx - 1] === \" \") charCodeNdx--;\n\n\t\tvar match = charCodeNdx === 0 && !isMask.call(inputmask, ndx)\n\t\t\t&& (getTest.call(inputmask, ndx).match.nativeDef === charCodes.charAt(0)\n\t\t\t\t|| (getTest.call(inputmask, ndx).match.static === true && getTest.call(inputmask, ndx).match.nativeDef === (\"'\" + charCodes.charAt(0)))\n\t\t\t\t|| (getTest.call(inputmask, ndx).match.nativeDef === \" \" && (getTest.call(inputmask, ndx + 1).match.nativeDef === charCodes.charAt(0)\n\t\t\t\t\t|| (getTest.call(inputmask, ndx + 1).match.static === true && getTest.call(inputmask, ndx + 1).match.nativeDef === (\"'\" + charCodes.charAt(0))))));\n\n\t\tif (!match && charCodeNdx > 0 && !isMask.call(inputmask, ndx, false, true)) {\n\t\t\tvar nextPos = seekNext.call(inputmask, ndx);\n\t\t\tif (inputmask.caretPos.begin < nextPos) {\n\t\t\t\tinputmask.caretPos = {begin: nextPos};\n\t\t\t}\n\t\t}\n\t\treturn match;\n\t}\n\n\tresetMaskSet.call(inputmask);\n\tmaskset.tests = {}; //reset tests ~ possible after alternating\n\tinitialNdx = opts.radixPoint ? determineNewCaretPosition.call(inputmask, {begin: 0, end: 0}).begin : 0;\n\tmaskset.p = initialNdx;\n\tinputmask.caretPos = {begin: initialNdx};\n\n\tvar staticMatches = [], prevCaretPos = inputmask.caretPos;\n\tinputValue.forEach( function ( charCode, ndx) {\n\t\tif (charCode !== undefined) { //inputfallback strips some elements out of the inputarray.  $.each logically presents them as undefined\n\t\t\tif (maskset.validPositions[ndx] === undefined && inputValue[ndx] === getPlaceholder.call(inputmask, ndx) && isMask.call(inputmask, ndx, true) &&\n\t\t\t\tisValid.call(inputmask, ndx, inputValue[ndx], true, undefined, undefined, true) === false) {\n\t\t\t\tmaskset.p++;\n\t\t\t} else {\n\t\t\t\tvar keypress = new $.Event(\"_checkval\");\n\t\t\t\tkeypress.which = charCode.toString().charCodeAt(0);\n\t\t\t\tcharCodes += charCode;\n\t\t\t\tvar lvp = getLastValidPosition.call(inputmask, undefined, true);\n\t\t\t\tif (!isTemplateMatch(initialNdx, charCodes)) {\n\t\t\t\t\tresult = EventHandlers.keypressEvent.call(input || inputmask, keypress, true, false, strict, inputmask.caretPos.begin);\n\n\t\t\t\t\tif (result) {\n\t\t\t\t\t\tinitialNdx = inputmask.caretPos.begin + 1;\n\t\t\t\t\t\tcharCodes = \"\";\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresult = EventHandlers.keypressEvent.call(input || inputmask, keypress, true, false, strict, lvp + 1);\n\t\t\t\t}\n\t\t\t\tif (result) {\n\t\t\t\t\tif (result.pos !== undefined && maskset.validPositions[result.pos] && maskset.validPositions[result.pos].match.static === true && maskset.validPositions[result.pos].alternation === undefined) {\n\t\t\t\t\t\tstaticMatches.push(result.pos);\n\t\t\t\t\t\tif (!inputmask.isRTL) {\n\t\t\t\t\t\t\tresult.forwardPosition = result.pos + 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\twriteBuffer.call(inputmask, undefined, getBuffer.call(inputmask), result.forwardPosition, keypress, false);\n\t\t\t\t\tinputmask.caretPos = {begin: result.forwardPosition, end: result.forwardPosition};\n\t\t\t\t\tprevCaretPos = inputmask.caretPos;\n\t\t\t\t} else {\n\t\t\t\t\tinputmask.caretPos = prevCaretPos;\n\t\t\t\t}  //restore the caret position from before the failed validation\n\t\t\t}\n\t\t}\n\t});\n\tif (staticMatches.length > 0) {\n\t\tvar sndx, validPos, nextValid = seekNext.call(inputmask, -1, undefined, false);\n\t\tif ((!isComplete.call(inputmask, getBuffer.call(inputmask)) && staticMatches.length <= nextValid)\n\t\t\t|| (isComplete.call(inputmask, getBuffer.call(inputmask)) && staticMatches.length > 0 && (staticMatches.length !== nextValid && staticMatches[0] === 0))) { //should check if is sequence starting from 0\n\t\t\tvar nextSndx = nextValid;\n\t\t\twhile ((sndx = staticMatches.shift()) !== undefined) {\n\t\t\t\tvar keypress = new $.Event(\"_checkval\");\n\t\t\t\tvalidPos = maskset.validPositions[sndx];\n\t\t\t\tvalidPos.generatedInput = true;\n\t\t\t\tkeypress.which = validPos.input.charCodeAt(0);\n\t\t\t\tresult = EventHandlers.keypressEvent.call(input, keypress, true, false, strict, nextSndx);\n\t\t\t\tif (result && result.pos !== undefined && result.pos !== sndx && maskset.validPositions[result.pos] && maskset.validPositions[result.pos].match.static === true) {\n\t\t\t\t\tstaticMatches.push(result.pos);\n\t\t\t\t} else if (!result) break;\n\t\t\t\tnextSndx++;\n\t\t\t}\n\t\t} else { //mark al statics as generated\n\t\t\t// while ((sndx = staticMatches.pop())) {\n\t\t\t// \tvalidPos = maskset.validPositions[sndx];\n\t\t\t// \tif (validPos) {\n\t\t\t// \t\tvalidPos.generatedInput = true;\n\t\t\t// \t}\n\t\t\t// }\n\t\t}\n\t}\n\tif (writeOut) {\n\t\twriteBuffer.call(inputmask, input, getBuffer.call(inputmask), result ? result.forwardPosition : inputmask.caretPos.begin, initiatingEvent || new $.Event(\"checkval\"), initiatingEvent && initiatingEvent.type === \"input\" && inputmask.undoValue !== getBuffer.call(inputmask).join(\"\"));\n\t\t// for (var vndx in maskset.validPositions) {\n\t\t// \tif (maskset.validPositions[vndx].match.generated !== true) { //only remove non forced generated\n\t\t// \t\tdelete maskset.validPositions[vndx].generatedInput; //clear generated markings ~ consider initializing with a  value as fully typed\n\t\t// \t}\n\t\t// }\n\t}\n\topts.skipOptionalPartCharacter = skipOptionalPartCharacter;\n}\n\nfunction HandleNativePlaceholder(npt, value) {\n\tconst inputmask = npt ? npt.inputmask : this;\n\n\tif (ie) {\n\t\tif (npt.inputmask._valueGet() !== value && (npt.placeholder !== value || npt.placeholder === \"\")) {\n\t\t\tvar buffer = getBuffer.call(inputmask).slice(),\n\t\t\t\tnptValue = npt.inputmask._valueGet();\n\t\t\tif (nptValue !== value) {\n\t\t\t\tvar lvp = getLastValidPosition.call(inputmask);\n\t\t\t\tif (lvp === -1 && nptValue === getBufferTemplate.call(inputmask).join(\"\")) {\n\t\t\t\t\tbuffer = [];\n\t\t\t\t} else if (lvp !== -1) { //clearout optional tail of the mask\n\t\t\t\t\tclearOptionalTail.call(inputmask, buffer);\n\t\t\t\t}\n\t\t\t\twriteBuffer(npt, buffer);\n\t\t\t}\n\t\t}\n\t} else if (npt.placeholder !== value) {\n\t\tnpt.placeholder = value;\n\t\tif (npt.placeholder === \"\") npt.removeAttribute(\"placeholder\");\n\t}\n}\n\nfunction unmaskedvalue(input) {\n\tconst inputmask = input ? input.inputmask : this,\n\t\topts = inputmask.opts,\n\t\tmaskset = inputmask.maskset;\n\n\tif (input) {\n\t\tif (input.inputmask === undefined) {\n\t\t\treturn input.value;\n\t\t}\n\t\tif (input.inputmask && input.inputmask.refreshValue) { //forced refresh from the value form.reset\n\t\t\tapplyInputValue(input, input.inputmask._valueGet(true));\n\t\t}\n\t}\n\tvar umValue = [],\n\t\tvps = maskset.validPositions;\n\tfor (var pndx in vps) {\n\t\tif (vps[pndx] && vps[pndx].match && (vps[pndx].match.static != true || (Array.isArray(maskset.metadata) && vps[pndx].generatedInput !== true))) {\n\t\t\t//only include generated input with multiple masks (check on metadata)\n\t\t\tumValue.push(vps[pndx].input);\n\t\t}\n\t}\n\tvar unmaskedValue = umValue.length === 0 ? \"\" : (inputmask.isRTL ? umValue.reverse() : umValue).join(\"\");\n\tif (typeof opts.onUnMask === \"function\") {\n\t\tvar bufferValue = (inputmask.isRTL ? getBuffer.call(inputmask).slice().reverse() : getBuffer.call(inputmask)).join(\"\");\n\t\tunmaskedValue = opts.onUnMask.call(inputmask, bufferValue, unmaskedValue, opts);\n\t}\n\treturn unmaskedValue;\n}\n\nfunction writeBuffer(input, buffer, caretPos, event, triggerEvents) {\n\tconst inputmask = input ? input.inputmask : this,\n\t\topts = inputmask.opts,\n\t\t$ = inputmask.dependencyLib;\n\n\tif (event && typeof opts.onBeforeWrite === \"function\") {\n\t\t//    buffer = buffer.slice(); //prevent uncontrolled manipulation of the internal buffer\n\t\tvar result = opts.onBeforeWrite.call(inputmask, event, buffer, caretPos, opts);\n\t\tif (result) {\n\t\t\tif (result.refreshFromBuffer) {\n\t\t\t\tvar refresh = result.refreshFromBuffer;\n\t\t\t\trefreshFromBuffer.call(inputmask, refresh === true ? refresh : refresh.start, refresh.end, result.buffer || buffer);\n\t\t\t\tbuffer = getBuffer.call(inputmask, true);\n\t\t\t}\n\t\t\tif (caretPos !== undefined) caretPos = result.caret !== undefined ? result.caret : caretPos;\n\t\t}\n\t}\n\tif (input !== undefined) {\n\t\tinput.inputmask._valueSet(buffer.join(\"\"));\n\t\tif (caretPos !== undefined && (event === undefined || event.type !== \"blur\")) {\n\t\t\tcaret.call(inputmask, input, caretPos, undefined, undefined, (event !== undefined && event.type === \"keydown\" && (event.keyCode === keyCode.DELETE || event.keyCode === keyCode.BACKSPACE)));\n\t\t}\n\t\tif (triggerEvents === true) {\n\t\t\tvar $input = $(input), nptVal = input.inputmask._valueGet();\n\t\t\tinput.inputmask.skipInputEvent = true;\n\t\t\t$input.trigger(\"input\");\n\t\t\tsetTimeout(function () { //timeout needed for IE\n\t\t\t\tif (nptVal === getBufferTemplate.call(inputmask).join(\"\")) {\n\t\t\t\t\t$input.trigger(\"cleared\");\n\t\t\t\t} else if (isComplete.call(inputmask, buffer) === true) {\n\t\t\t\t\t$input.trigger(\"complete\");\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t}\n\t}\n}\n","import {\n\tcaret, determineNewCaretPosition,\n\tgetBuffer, getBufferTemplate,\n\tgetLastValidPosition, isMask,\n\tresetMaskSet,\n\tseekNext,\n\tseekPrevious,\n\ttranslatePosition\n} from \"./positioning\";\nimport keyCode from \"./keycode.json\";\nimport {iemobile, iphone} from \"./environment\";\nimport {handleRemove, isComplete, isValid} from \"./validation\";\nimport {applyInputValue, checkVal, clearOptionalTail, HandleNativePlaceholder, writeBuffer} from \"./inputHandling\";\nimport {getPlaceholder, getTest} from \"./validation-tests\";\n\nexport {EventHandlers};\n\nvar EventHandlers = {\n\tkeydownEvent: function (e) {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts, $ = inputmask.dependencyLib,\n\t\t\tmaskset = inputmask.maskset;\n\n\t\tvar input = this,\n\t\t\t$input = $(input),\n\t\t\tk = e.keyCode,\n\t\t\tpos = caret.call(inputmask, input);\n\n\t\tvar kdResult = opts.onKeyDown.call(this, e, getBuffer.call(inputmask), pos, opts);\n\t\tif (kdResult !== undefined) return kdResult;\n\n\t\t//backspace, delete, and escape get special treatment\n\t\tif (k === keyCode.BACKSPACE || k === keyCode.DELETE || (iphone && k === keyCode.BACKSPACE_SAFARI) || (e.ctrlKey && k === keyCode.X && !(\"oncut\" in input))) { //backspace/delete\n\t\t\te.preventDefault(); //stop default action but allow propagation\n\t\t\thandleRemove.call(inputmask, input, k, pos);\n\t\t\twriteBuffer(input, getBuffer.call(inputmask, true), maskset.p, e, input.inputmask._valueGet() !== getBuffer.call(inputmask).join(\"\"));\n\t\t} else if (k === keyCode.END || k === keyCode.PAGE_DOWN) { //when END or PAGE_DOWN pressed set position at lastmatch\n\t\t\te.preventDefault();\n\t\t\tvar caretPos = seekNext.call(inputmask, getLastValidPosition.call(inputmask));\n\t\t\tcaret.call(inputmask, input, e.shiftKey ? pos.begin : caretPos, caretPos, true);\n\t\t} else if ((k === keyCode.HOME && !e.shiftKey) || k === keyCode.PAGE_UP) { //Home or page_up\n\t\t\te.preventDefault();\n\t\t\tcaret.call(inputmask, input, 0, e.shiftKey ? pos.begin : 0, true);\n\t\t} else if (((opts.undoOnEscape && k === keyCode.ESCAPE) || (k === 90 && e.ctrlKey)) && e.altKey !== true) { //escape && undo && #762\n\t\t\tcheckVal(input, true, false, inputmask.undoValue.split(\"\"));\n\t\t\t$input.trigger(\"click\");\n\t\t\t// } else if (k === keyCode.INSERT && !(e.shiftKey || e.ctrlKey) && inputmask.userOptions.insertMode === undefined) { //insert\n\t\t\t// \topts.insertMode = !opts.insertMode;\n\t\t\t// \tcaret(input, pos.begin, pos.end);\n\t\t} else if (opts.tabThrough === true && k === keyCode.TAB) {\n\t\t\tif (e.shiftKey === true) {\n\t\t\t\tpos.end = seekPrevious.call(inputmask, pos.end, true);\n\t\t\t\tif (getTest.call(inputmask, pos.end - 1).match.static === true) {\n\t\t\t\t\tpos.end--;\n\t\t\t\t}\n\t\t\t\tpos.begin = seekPrevious.call(inputmask, pos.end, true);\n\t\t\t\tif (pos.begin >= 0 && pos.end > 0) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tcaret.call(inputmask, input, pos.begin, pos.end);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tpos.begin = seekNext.call(inputmask, pos.begin, true);\n\t\t\t\tpos.end = seekNext.call(inputmask, pos.begin, true);\n\t\t\t\tif (pos.end < maskset.maskLength) pos.end--;\n\t\t\t\tif (pos.begin <= maskset.maskLength) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tcaret.call(inputmask, input, pos.begin, pos.end);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!e.shiftKey) {\n\t\t\tif (opts.insertModeVisual && opts.insertMode === false) {\n\t\t\t\tif (k === keyCode.RIGHT) {\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tvar caretPos = caret.call(inputmask, input);\n\t\t\t\t\t\tcaret.call(inputmask, input, caretPos.begin);\n\t\t\t\t\t}, 0);\n\t\t\t\t} else if (k === keyCode.LEFT) {\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tvar caretPos = {\n\t\t\t\t\t\t\tbegin: translatePosition.call(inputmask, input.inputmask.caretPos.begin),\n\t\t\t\t\t\t\tend: translatePosition.call(inputmask, input.inputmask.caretPos.end)\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (inputmask.isRTL) {\n\t\t\t\t\t\t\tcaret.call(inputmask, input, caretPos.begin + (caretPos.begin === maskset.maskLength ? 0 : 1));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcaret.call(inputmask, input, caretPos.begin - (caretPos.begin === 0 ? 0 : 1));\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tinputmask.ignorable = opts.ignorables.includes(k);\n\t},\n\tkeypressEvent: function (e, checkval, writeOut, strict, ndx) {\n\t\tconst inputmask = this.inputmask || this, opts = inputmask.opts, $ = inputmask.dependencyLib,\n\t\t\tmaskset = inputmask.maskset;\n\n\t\tvar input = inputmask.el,\n\t\t\t$input = $(input),\n\t\t\tk = e.which || e.charCode || e.keyCode;\n\n\t\tif (checkval !== true && (!(e.ctrlKey && e.altKey) && (e.ctrlKey || e.metaKey || inputmask.ignorable))) {\n\t\t\tif (k === keyCode.ENTER && inputmask.undoValue !== getBuffer.call(inputmask).join(\"\")) {\n\t\t\t\tinputmask.undoValue = getBuffer.call(inputmask).join(\"\");\n\t\t\t\t// e.preventDefault();\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t$input.trigger(\"change\");\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t\tinputmask.skipInputEvent = true; //skip the input as otherwise the skipped char could be picked up for validation by the inputfallback\n\t\t\treturn true;\n\t\t} else if (k) {\n\t\t\t//special treat the decimal separator\n\t\t\tif ((k === 44 || k === 46) && e.location === 3 && opts.radixPoint !== \"\") k = opts.radixPoint.charCodeAt(0);\n\t\t\tvar pos = checkval ? {\n\t\t\t\t\tbegin: ndx,\n\t\t\t\t\tend: ndx\n\t\t\t\t} : caret.call(inputmask, input),\n\t\t\t\tforwardPosition, c = String.fromCharCode(k);\n\n\t\t\tmaskset.writeOutBuffer = true;\n\t\t\tvar valResult = isValid.call(inputmask, pos, c, strict, undefined, undefined, undefined, checkval);\n\t\t\tif (valResult !== false) {\n\t\t\t\tresetMaskSet.call(inputmask, true);\n\t\t\t\tforwardPosition = valResult.caret !== undefined ? valResult.caret : seekNext.call(inputmask, valResult.pos.begin ? valResult.pos.begin : valResult.pos);\n\t\t\t\tmaskset.p = forwardPosition; //needed for checkval\n\t\t\t}\n\n\t\t\tforwardPosition = ((opts.numericInput && valResult.caret === undefined) ? seekPrevious.call(inputmask, forwardPosition) : forwardPosition);\n\t\t\tif (writeOut !== false) {\n\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\topts.onKeyValidation.call(input, k, valResult);\n\t\t\t\t}, 0);\n\t\t\t\tif (maskset.writeOutBuffer && valResult !== false) {\n\t\t\t\t\tvar buffer = getBuffer.call(inputmask);\n\t\t\t\t\twriteBuffer(input, buffer, forwardPosition, e, checkval !== true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\te.preventDefault();\n\n\t\t\tif (checkval) {\n\t\t\t\tif (valResult !== false) valResult.forwardPosition = forwardPosition;\n\t\t\t\treturn valResult;\n\t\t\t}\n\t\t}\n\t},\n\tkeyupEvent: function (e) {\n\t\tconst inputmask = this.inputmask;\n\n\t\tif (inputmask.isComposing && (e.keyCode === keyCode.KEY_229 || e.keyCode === keyCode.ENTER)) {\n\t\t\tinputmask.$el.trigger(\"input\");\n\t\t}\n\t},\n\tpasteEvent: function (e) {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts;\n\n\t\tvar input = this,\n\t\t\tinputValue = inputmask._valueGet(true),\n\t\t\tcaretPos = caret.call(inputmask, input),\n\t\t\ttempValue;\n\n\t\tif (inputmask.isRTL) {\n\t\t\ttempValue = caretPos.end;\n\t\t\tcaretPos.end = caretPos.begin;\n\t\t\tcaretPos.begin = tempValue;\n\t\t}\n\n\t\tvar valueBeforeCaret = inputValue.substr(0, caretPos.begin),\n\t\t\tvalueAfterCaret = inputValue.substr(caretPos.end, inputValue.length);\n\n\t\tif (valueBeforeCaret == (inputmask.isRTL ? getBufferTemplate.call(inputmask).slice().reverse() : getBufferTemplate.call(inputmask)).slice(0, caretPos.begin).join(\"\")) valueBeforeCaret = \"\";\n\t\tif (valueAfterCaret == (inputmask.isRTL ? getBufferTemplate.call(inputmask).slice().reverse() : getBufferTemplate.call(inputmask)).slice(caretPos.end).join(\"\")) valueAfterCaret = \"\";\n\n\t\tif (window.clipboardData && window.clipboardData.getData) { // IE\n\t\t\tinputValue = valueBeforeCaret + window.clipboardData.getData(\"Text\") + valueAfterCaret;\n\t\t} else if (e.clipboardData && e.clipboardData.getData) {\n\t\t\tinputValue = valueBeforeCaret + e.clipboardData.getData(\"text/plain\") + valueAfterCaret;\n\t\t} else {\n\t\t\treturn true;\n\t\t} //allow native paste event as fallback ~ masking will continue by inputfallback\n\n\t\tvar pasteValue = inputValue;\n\t\tif (typeof opts.onBeforePaste === \"function\") {\n\t\t\tpasteValue = opts.onBeforePaste.call(inputmask, inputValue, opts);\n\t\t\tif (pasteValue === false) {\n\t\t\t\treturn e.preventDefault();\n\t\t\t}\n\t\t\tif (!pasteValue) {\n\t\t\t\tpasteValue = inputValue;\n\t\t\t}\n\t\t}\n\t\tcheckVal(input, true, false, pasteValue.toString().split(\"\"), e);\n\t\t// writeBuffer(input, getBuffer(), seekNext(getLastValidPosition()), e, inputmask.undoValue !== getBuffer().join(\"\"));\n\n\t\treturn e.preventDefault();\n\t},\n\tinputFallBackEvent: function (e) { //fallback when keypress is not triggered\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts, $ = inputmask.dependencyLib;\n\n\t\tfunction ieMobileHandler(input, inputValue, caretPos) {\n\t\t\tif (iemobile) { //iemobile just sets the character at the end althought the caret position is correctly set\n\t\t\t\tvar inputChar = inputValue.replace(getBuffer.call(inputmask).join(\"\"), \"\");\n\t\t\t\tif (inputChar.length === 1) {\n\t\t\t\t\tvar iv = inputValue.split(\"\");\n\t\t\t\t\tiv.splice(caretPos.begin, 0, inputChar);\n\t\t\t\t\tinputValue = iv.join(\"\");\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn inputValue;\n\t\t}\n\n\t\tfunction analyseChanges(inputValue, buffer, caretPos) {\n\t\t\tvar frontPart = inputValue.substr(0, caretPos.begin).split(\"\"),\n\t\t\t\tbackPart = inputValue.substr(caretPos.begin).split(\"\"),\n\t\t\t\tfrontBufferPart = buffer.substr(0, caretPos.begin).split(\"\"),\n\t\t\t\tbackBufferPart = buffer.substr(caretPos.begin).split(\"\");\n\n\t\t\tvar fpl = frontPart.length >= frontBufferPart.length ? frontPart.length : frontBufferPart.length,\n\t\t\t\tbpl = backPart.length >= backBufferPart.length ? backPart.length : backBufferPart.length,\n\t\t\t\tbl, i, action = \"\", data = [], marker = \"~\", placeholder;\n\n\t\t\t//align buffers\n\t\t\twhile (frontPart.length < fpl) frontPart.push(marker);\n\t\t\twhile (frontBufferPart.length < fpl) frontBufferPart.push(marker);\n\t\t\twhile (backPart.length < bpl) backPart.unshift(marker);\n\t\t\twhile (backBufferPart.length < bpl) backBufferPart.unshift(marker);\n\n\t\t\tvar newBuffer = frontPart.concat(backPart);\n\t\t\tvar oldBuffer = frontBufferPart.concat(backBufferPart);\n\n\t\t\t// console.log(\"N \" + newBuffer);\n\t\t\t// console.log(\"O \" + oldBuffer);\n\n\t\t\tfor (i = 0, bl = newBuffer.length; i < bl; i++) {\n\t\t\t\tplaceholder = getPlaceholder.call(inputmask, translatePosition.call(inputmask, i));\n\t\t\t\tswitch (action) {\n\t\t\t\t\tcase \"insertText\":\n\t\t\t\t\t\tif (oldBuffer[i - 1] === newBuffer[i] && caretPos.begin == newBuffer.length - 1) {\n\t\t\t\t\t\t\tdata.push(newBuffer[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\ti = bl;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"insertReplacementText\":\n\t\t\t\t\t\tif (newBuffer[i] === marker) { //extend selection\n\t\t\t\t\t\t\tcaretPos.end++;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// breakout loop\n\t\t\t\t\t\t\ti = bl;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"deleteContentBackward\":\n\t\t\t\t\t\tif (newBuffer[i] === marker) {\n\t\t\t\t\t\t\tcaretPos.end++;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t//breakout loop\n\t\t\t\t\t\t\ti = bl;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif (newBuffer[i] !== oldBuffer[i]) {\n\t\t\t\t\t\t\tif ((newBuffer[i + 1] === marker || newBuffer[i + 1] === placeholder || newBuffer[i + 1] === undefined) && ((oldBuffer[i] === placeholder && oldBuffer[i + 1] === marker) || oldBuffer[i] === marker)) {  //basic insert\n\t\t\t\t\t\t\t\taction = \"insertText\";\n\t\t\t\t\t\t\t\tdata.push(newBuffer[i]);\n\t\t\t\t\t\t\t\tcaretPos.begin--;\n\t\t\t\t\t\t\t\tcaretPos.end--;\n\t\t\t\t\t\t\t} else if (oldBuffer[i + 1] === marker && oldBuffer[i] === newBuffer[i + 1]) { //insert between\n\t\t\t\t\t\t\t\taction = \"insertText\";\n\t\t\t\t\t\t\t\tdata.push(newBuffer[i]);\n\t\t\t\t\t\t\t\tcaretPos.begin--;\n\t\t\t\t\t\t\t\tcaretPos.end--;\n\t\t\t\t\t\t\t} else if (newBuffer[i] !== placeholder && newBuffer[i] !== marker &&\n\t\t\t\t\t\t\t\t(newBuffer[i + 1] === marker || (oldBuffer[i] !== newBuffer[i] && oldBuffer[i + 1] === newBuffer[i + 1] /*single char replacement*/))) { //replace selection\n\t\t\t\t\t\t\t\taction = \"insertReplacementText\";\n\t\t\t\t\t\t\t\tdata.push(newBuffer[i]);\n\t\t\t\t\t\t\t\tcaretPos.begin--;\n\t\t\t\t\t\t\t} else if (newBuffer[i] === marker) {  //delete~backspace\n\t\t\t\t\t\t\t\taction = \"deleteContentBackward\";\n\t\t\t\t\t\t\t\tif (isMask.call(inputmask, translatePosition.call(inputmask, i), true) || oldBuffer[i] === opts.radixPoint) caretPos.end++;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ti = bl;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\taction: action,\n\t\t\t\tdata: data,\n\t\t\t\tcaret: caretPos\n\t\t\t};\n\t\t}\n\n\t\tvar input = this,\n\t\t\tinputValue = input.inputmask._valueGet(true),\n\t\t\tbuffer = (inputmask.isRTL ? getBuffer.call(inputmask).slice().reverse() : getBuffer.call(inputmask)).join(\"\"),\n\t\t\tcaretPos = caret.call(inputmask, input, undefined, undefined, true);\n\n\t\tif (buffer !== inputValue) {\n\t\t\t// inputValue = radixPointHandler(input, inputValue, caretPos);\n\t\t\tinputValue = ieMobileHandler(input, inputValue, caretPos);\n\n\t\t\tvar changes = analyseChanges(inputValue, buffer, caretPos);\n\n\t\t\t// console.log(JSON.stringify(changes));\n\t\t\tif ((input.inputmask.shadowRoot || document).activeElement !== input) {\n\t\t\t\tinput.focus();\n\t\t\t}\n\t\t\twriteBuffer(input, getBuffer.call(inputmask));\n\t\t\tcaret.call(inputmask, input, caretPos.begin, caretPos.end, true);\n\t\t\tswitch (changes.action) {\n\t\t\t\tcase \"insertText\":\n\t\t\t\tcase \"insertReplacementText\":\n\t\t\t\t\tchanges.data.forEach(function (entry, ndx) {\n\t\t\t\t\t\tvar keypress = new $.Event(\"keypress\");\n\t\t\t\t\t\tkeypress.which = entry.charCodeAt(0);\n\t\t\t\t\t\tinputmask.ignorable = false; //make sure ignorable is ignored ;-)\n\t\t\t\t\t\tEventHandlers.keypressEvent.call(input, keypress);\n\t\t\t\t\t});\n\t\t\t\t\tsetTimeout(function () {  //#2195 trigger keyup to help some other plugins to track changes\n\t\t\t\t\t\tinputmask.$el.trigger(\"keyup\");\n\t\t\t\t\t}, 0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"deleteContentBackward\":\n\t\t\t\t\tvar keydown = new $.Event(\"keydown\");\n\t\t\t\t\tkeydown.keyCode = keyCode.BACKSPACE;\n\t\t\t\t\tEventHandlers.keydownEvent.call(input, keydown);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tapplyInputValue(input, inputValue);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\te.preventDefault();\n\t\t}\n\t},\n\tcompositionendEvent: function (e) {\n\t\tconst inputmask = this.inputmask;\n\n\t\tinputmask.isComposing = false;\n\t\tinputmask.$el.trigger(\"input\");\n\t},\n\tsetValueEvent: function (e) {\n\t\tconst inputmask = this.inputmask;\n\t\tvar input = this,\n\t\t\tvalue = (e && e.detail) ? e.detail[0] : arguments[1];\n\n\t\tif (value === undefined) {\n\t\t\tvalue = input.inputmask._valueGet(true);\n\t\t}\n\n\t\tapplyInputValue(input, value);\n\n\t\tif ((e.detail && e.detail[1] !== undefined) || arguments[2] !== undefined) {\n\t\t\tcaret.call(inputmask, input, e.detail ? e.detail[1] : arguments[2]);\n\t\t}\n\t}\n\t,\n\tfocusEvent: function (e) {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts;\n\t\tvar input = this,\n\t\t\tnptValue = input.inputmask._valueGet();\n\n\t\tif (opts.showMaskOnFocus) {\n\t\t\tif (nptValue !== getBuffer.call(inputmask).join(\"\")) {\n\t\t\t\twriteBuffer(input, getBuffer.call(inputmask), seekNext.call(inputmask, getLastValidPosition.call(inputmask)));\n\t\t\t} /*else if (mouseEnter === false) { //only executed on focus without mouseenter\n\t\t\t\t\tcaret(input, seekNext(getLastValidPosition()));\n\t\t\t\t}*/\n\t\t}\n\t\tif (opts.positionCaretOnTab === true && inputmask.mouseEnter === false && (!isComplete.call(inputmask, getBuffer.call(inputmask)) || getLastValidPosition.call(inputmask) === -1)) {\n\t\t\tEventHandlers.clickEvent.apply(input, [e, true]);\n\t\t}\n\t\tinputmask.undoValue = getBuffer.call(inputmask).join(\"\");\n\t},\n\tinvalidEvent: function (e) {\n\t\tthis.inputmask.validationEvent = true;\n\t},\n\tmouseleaveEvent: function () {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts;\n\n\t\tvar input = this;\n\t\tinputmask.mouseEnter = false;\n\t\tif (opts.clearMaskOnLostFocus && (input.inputmask.shadowRoot || document).activeElement !== input) {\n\t\t\tHandleNativePlaceholder(input, inputmask.originalPlaceholder);\n\t\t}\n\t},\n\tclickEvent: function (e, tabbed) {\n\t\tconst inputmask = this.inputmask;\n\n\t\tvar input = this;\n\t\tif ((input.inputmask.shadowRoot || document).activeElement === input) {\n\t\t\tvar newCaretPosition = determineNewCaretPosition.call(inputmask, caret.call(inputmask, input), tabbed);\n\t\t\tif (newCaretPosition !== undefined) {\n\t\t\t\tcaret.call(inputmask, input, newCaretPosition);\n\t\t\t}\n\t\t}\n\t},\n\tcutEvent: function (e) {\n\t\tconst inputmask = this.inputmask, maskset = inputmask.maskset;\n\n\t\tvar input = this,\n\t\t\tpos = caret.call(inputmask, input);\n\n\t\t//correct clipboardData\n\t\tvar clipboardData = window.clipboardData || e.clipboardData,\n\t\t\tclipData = inputmask.isRTL ? getBuffer.call(inputmask).slice(pos.end, pos.begin) : getBuffer.call(inputmask).slice(pos.begin, pos.end);\n\t\tclipboardData.setData(\"text\", inputmask.isRTL ? clipData.reverse().join(\"\") : clipData.join(\"\"));\n\t\tif (document.execCommand) document.execCommand(\"copy\"); // copy selected content to system clipbaord\n\n\t\thandleRemove.call(inputmask, input, keyCode.DELETE, pos);\n\t\twriteBuffer(input, getBuffer.call(inputmask), maskset.p, e, inputmask.undoValue !== getBuffer.call(inputmask).join(\"\"));\n\t}\n\t,\n\tblurEvent: function (e) {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts, $ = inputmask.dependencyLib;\n\n\t\tvar $input = $(this),\n\t\t\tinput = this;\n\t\tif (input.inputmask) {\n\t\t\tHandleNativePlaceholder(input, inputmask.originalPlaceholder);\n\t\t\tvar nptValue = input.inputmask._valueGet(),\n\t\t\t\tbuffer = getBuffer.call(inputmask).slice();\n\n\t\t\tif (nptValue !== \"\") {\n\t\t\t\tif (opts.clearMaskOnLostFocus) {\n\t\t\t\t\tif (getLastValidPosition.call(inputmask) === -1 && nptValue === getBufferTemplate.call(inputmask).join(\"\")) {\n\t\t\t\t\t\tbuffer = [];\n\t\t\t\t\t} else { //clearout optional tail of the mask\n\t\t\t\t\t\tclearOptionalTail.call(inputmask, buffer);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (isComplete.call(inputmask, buffer) === false) {\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t$input.trigger(\"incomplete\");\n\t\t\t\t\t}, 0);\n\t\t\t\t\tif (opts.clearIncomplete) {\n\t\t\t\t\t\tresetMaskSet.call(inputmask);\n\t\t\t\t\t\tif (opts.clearMaskOnLostFocus) {\n\t\t\t\t\t\t\tbuffer = [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tbuffer = getBufferTemplate.call(inputmask).slice();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\twriteBuffer(input, buffer, undefined, e);\n\t\t\t}\n\n\t\t\tif (inputmask.undoValue !== getBuffer.call(inputmask).join(\"\")) {\n\t\t\t\tinputmask.undoValue = getBuffer.call(inputmask).join(\"\");\n\t\t\t\t$input.trigger(\"change\");\n\t\t\t}\n\t\t}\n\t}\n\t,\n\tmouseenterEvent: function () {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts;\n\n\t\tvar input = this;\n\t\tinputmask.mouseEnter = true;\n\t\tif ((input.inputmask.shadowRoot || document).activeElement !== input) {\n\t\t\tif (inputmask.originalPlaceholder == undefined && input.placeholder !== inputmask.originalPlaceholder) {\n\t\t\t\tinputmask.originalPlaceholder = input.placeholder;\n\t\t\t}\n\t\t\tif (opts.showMaskOnHover) {\n\t\t\t\tHandleNativePlaceholder(input, (inputmask.isRTL ? getBufferTemplate.call(inputmask).slice().reverse() : getBufferTemplate.call(inputmask)).join(\"\"));\n\t\t\t}\n\t\t}\n\t}\n\t,\n\tsubmitEvent: function () { //trigger change on submit if any\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts;\n\n\t\tif (inputmask.undoValue !== getBuffer.call(inputmask).join(\"\")) {\n\t\t\tinputmask.$el.trigger(\"change\");\n\t\t}\n\t\tif (opts.clearMaskOnLostFocus && getLastValidPosition.call(inputmask) === -1 && inputmask._valueGet && inputmask._valueGet() === getBufferTemplate.call(inputmask).join(\"\")) {\n\t\t\tinputmask._valueSet(\"\"); //clear masktemplete on submit and still has focus\n\t\t}\n\t\tif (opts.clearIncomplete && isComplete.call(inputmask, getBuffer.call(inputmask)) === false) {\n\t\t\tinputmask._valueSet(\"\");\n\t\t}\n\t\tif (opts.removeMaskOnSubmit) {\n\t\t\tinputmask._valueSet(inputmask.unmaskedvalue(), true);\n\t\t\tsetTimeout(function () {\n\t\t\t\twriteBuffer(inputmask.el, getBuffer.call(inputmask));\n\t\t\t}, 0);\n\t\t}\n\t},\n\tresetEvent: function () {\n\t\tconst inputmask = this.inputmask;\n\n\t\tinputmask.refreshValue = true; //indicate a forced refresh when there is a call to the value before leaving the triggering event fn\n\t\tsetTimeout(function () {\n\t\t\tapplyInputValue(inputmask.el, inputmask._valueGet(true));\n\t\t}, 0);\n\t}\n};\n","import {\n\tdetermineTestTemplate,\n\tgetDecisionTaker,\n\tgetPlaceholder,\n\tgetTest,\n\tgetTests,\n\tgetTestTemplate\n} from \"./validation-tests\";\nimport keyCode from \"./keycode.json\";\nimport {\n\tdetermineLastRequiredPosition, determineNewCaretPosition,\n\tgetBuffer,\n\tgetLastValidPosition,\n\tisMask,\n\tresetMaskSet,\n\tseekNext,\n\tseekPrevious\n} from \"./positioning\";\nimport {EventHandlers} from \"./eventhandlers\";\n\nexport {alternate, checkAlternationMatch, isComplete, isValid, refreshFromBuffer, revalidateMask, handleRemove};\n\n//tobe put on prototype?\nfunction alternate(maskPos, c, strict, fromIsValid, rAltPos, selection) { //pos == true => generalize\n\tconst inputmask = this,\n\t\t$ = this.dependencyLib,\n\t\topts = this.opts,\n\t\tmaskset = inputmask.maskset;\n\n\tvar validPsClone = $.extend(true, {}, maskset.validPositions),\n\t\ttstClone = $.extend(true, {}, maskset.tests),\n\t\tlastAlt,\n\t\talternation,\n\t\tisValidRslt = false, returnRslt = false,\n\t\taltPos, prevAltPos, i, validPos,\n\t\tdecisionPos,\n\t\tlAltPos = rAltPos !== undefined ? rAltPos : getLastValidPosition.call(inputmask), nextPos, input, begin, end;\n\n\tif (selection) {\n\t\tbegin = selection.begin;\n\t\tend = selection.end;\n\t\tif (selection.begin > selection.end) {\n\t\t\tbegin = selection.end;\n\t\t\tend = selection.begin;\n\t\t}\n\t}\n\tif (lAltPos === -1 && rAltPos === undefined) { //do not recurse when already paste the beginning\n\t\tlastAlt = 0;\n\t\tprevAltPos = getTest.call(inputmask, lastAlt);\n\t\talternation = prevAltPos.alternation;\n\t} else {\n\t\t//find last modified alternation\n\t\tfor (; lAltPos >= 0; lAltPos--) {\n\t\t\taltPos = maskset.validPositions[lAltPos];\n\t\t\tif (altPos && altPos.alternation !== undefined) {\n\t\t\t\tif (prevAltPos && prevAltPos.locator[altPos.alternation] !== altPos.locator[altPos.alternation]) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tlastAlt = lAltPos;\n\t\t\t\talternation = maskset.validPositions[lastAlt].alternation;\n\t\t\t\tprevAltPos = altPos;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (alternation !== undefined) {\n\t\tdecisionPos = parseInt(lastAlt);\n\t\tmaskset.excludes[decisionPos] = maskset.excludes[decisionPos] || [];\n\t\tif (maskPos !== true) { //generalize\n\t\t\tmaskset.excludes[decisionPos].push(getDecisionTaker(prevAltPos) + \":\" + prevAltPos.alternation);\n\t\t}\n\n\t\tvar validInputs = [], resultPos = -1;\n\t\tfor (i = decisionPos; i < getLastValidPosition.call(inputmask, undefined, true) + 1; i++) {\n\t\t\tif (resultPos === -1 && maskPos <= i && c !== undefined) {\n\t\t\t\tvalidInputs.push(c);\n\t\t\t\tresultPos = validInputs.length - 1;\n\t\t\t}\n\t\t\tvalidPos = maskset.validPositions[i];\n\t\t\tif (validPos && validPos.generatedInput !== true && (selection === undefined || (i < begin || i >= end))) {\n\t\t\t\tvalidInputs.push(validPos.input);\n\t\t\t}\n\t\t\tdelete maskset.validPositions[i];\n\t\t}\n\t\tif (resultPos === -1 && c !== undefined) {\n\t\t\tvalidInputs.push(c);\n\t\t\tresultPos = validInputs.length - 1;\n\t\t}\n\n\t\twhile (maskset.excludes[decisionPos] !== undefined && maskset.excludes[decisionPos].length < 10) {\n\t\t\t// maskset.tests[decisionPos] = undefined; //clear decisionPos\n\t\t\tmaskset.tests = {};  //clear all\n\t\t\tresetMaskSet.call(inputmask, true); //clear getbuffer\n\t\t\tisValidRslt = true;\n\t\t\tfor (i = 0; i < validInputs.length; i++) {\n\t\t\t\tnextPos = isValidRslt.caret || (getLastValidPosition.call(inputmask, undefined, true) + 1);\n\t\t\t\tinput = validInputs[i];\n\t\t\t\tif (!(isValidRslt = isValid.call(inputmask, nextPos, input, false, fromIsValid, true))) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (i === resultPos) {\n\t\t\t\t\treturnRslt = isValidRslt;\n\t\t\t\t}\n\t\t\t\tif (maskPos == true && isValidRslt) {  //return validposition on generalise\n\t\t\t\t\treturnRslt = {caretPos: i};\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!isValidRslt) {\n\t\t\t\tresetMaskSet.call(inputmask);\n\t\t\t\tprevAltPos = getTest.call(inputmask, decisionPos);  //get the current decisionPos to exclude ~ needs to be before restoring the initial validation\n\t\t\t\t//reset & revert\n\t\t\t\tmaskset.validPositions = $.extend(true, {}, validPsClone);\n\t\t\t\tmaskset.tests = $.extend(true, {}, tstClone); //refresh tests after possible alternating\n\t\t\t\tif (maskset.excludes[decisionPos]) {\n\t\t\t\t\tvar decisionTaker = getDecisionTaker(prevAltPos);\n\t\t\t\t\tif (maskset.excludes[decisionPos].indexOf(decisionTaker + \":\" + prevAltPos.alternation) !== -1) {\n\t\t\t\t\t\treturnRslt = alternate.call(inputmask, maskPos, c, strict, fromIsValid, decisionPos - 1, selection);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tmaskset.excludes[decisionPos].push(decisionTaker + \":\" + prevAltPos.alternation);\n\t\t\t\t\tfor (i = decisionPos; i < getLastValidPosition.call(inputmask, undefined, true) + 1; i++) delete maskset.validPositions[i];\n\t\t\t\t} else { //latest alternation\n\t\t\t\t\treturnRslt = alternate.call(inputmask, maskPos, c, strict, fromIsValid, decisionPos - 1, selection);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\t//reset alternation excludes\n\tif (!returnRslt || opts.keepStatic !== false) {\n\t\tdelete maskset.excludes[decisionPos];\n\t}\n\treturn returnRslt;\n}\n\nfunction casing(elem, test, pos) {\n\tconst opts = this.opts,\n\t\tmaskset = this.maskset;\n\n\tswitch (opts.casing || test.casing) {\n\t\tcase \"upper\":\n\t\t\telem = elem.toUpperCase();\n\t\t\tbreak;\n\t\tcase \"lower\":\n\t\t\telem = elem.toLowerCase();\n\t\t\tbreak;\n\t\tcase \"title\":\n\t\t\tvar posBefore = maskset.validPositions[pos - 1];\n\t\t\tif (pos === 0 || posBefore && posBefore.input === String.fromCharCode(keyCode.SPACE)) {\n\t\t\t\telem = elem.toUpperCase();\n\t\t\t} else {\n\t\t\t\telem = elem.toLowerCase();\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tif (typeof opts.casing === \"function\") {\n\t\t\t\tvar args = Array.prototype.slice.call(arguments);\n\t\t\t\targs.push(maskset.validPositions);\n\t\t\t\telem = opts.casing.apply(this, args);\n\t\t\t}\n\t}\n\n\treturn elem;\n}\n\n//tobe put on prototype?\nfunction checkAlternationMatch(altArr1, altArr2, na) {\n\tconst opts = this.opts;\n\n\tvar altArrC = opts.greedy ? altArr2 : altArr2.slice(0, 1),\n\t\tisMatch = false,\n\t\tnaArr = na !== undefined ? na.split(\",\") : [],\n\t\tnaNdx;\n\n\t//remove no alternate indexes from alternation array\n\tfor (var i = 0; i < naArr.length; i++) {\n\t\tif ((naNdx = altArr1.indexOf(naArr[i])) !== -1) {\n\t\t\taltArr1.splice(naNdx, 1);\n\t\t}\n\t}\n\n\tfor (var alndx = 0; alndx < altArr1.length; alndx++) {\n\t\tif (altArrC.includes(altArr1[alndx])) {\n\t\t\tisMatch = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn isMatch;\n}\n\n//tobe put on prototype?\nfunction handleRemove(input, k, pos, strict, fromIsValid) {\n\tconst inputmask = this, maskset = this.maskset, opts = this.opts;\n\n\tif (opts.numericInput || inputmask.isRTL) {\n\t\tif (k === keyCode.BACKSPACE) {\n\t\t\tk = keyCode.DELETE;\n\t\t} else if (k === keyCode.DELETE) {\n\t\t\tk = keyCode.BACKSPACE;\n\t\t}\n\n\t\tif (inputmask.isRTL) {\n\t\t\tvar pend = pos.end;\n\t\t\tpos.end = pos.begin;\n\t\t\tpos.begin = pend;\n\t\t}\n\t}\n\n\tvar lvp = getLastValidPosition.call(inputmask, undefined, true);\n\tif (pos.end >= getBuffer.call(inputmask).length && lvp >= pos.end) { //handle numeric negate symbol offset, due to  dynamic jit masking\n\t\tpos.end = lvp + 1;\n\t}\n\n\tif (k === keyCode.BACKSPACE) {\n\t\tif ((pos.end - pos.begin < 1)) {\n\t\t\tpos.begin = seekPrevious.call(inputmask, pos.begin);\n\t\t}\n\t} else if (k === keyCode.DELETE) {\n\t\tif (pos.begin === pos.end) {\n\t\t\tpos.end = isMask.call(inputmask, pos.end, true, true) ? pos.end + 1 : seekNext.call(inputmask, pos.end) + 1;\n\t\t}\n\t}\n\tvar offset;\n\tif ((offset = revalidateMask.call(inputmask, pos)) !== false) {\n\t\tif (strict !== true && opts.keepStatic !== false || (opts.regex !== null && getTest.call(inputmask, pos.begin).match.def.indexOf(\"|\") !== -1)) { //TODO NEEDS BETTER CHECK WHEN TO ALTERNATE  ~ opts regex isn\"t good enough\n\t\t\tvar result = alternate.call(inputmask, true);\n\t\t\tif (result) {\n\t\t\t\tvar newPos = result.caret !== undefined ? result.caret : (result.pos ? seekNext.call(inputmask, result.pos.begin ? result.pos.begin : result.pos) : getLastValidPosition.call(inputmask, -1, true));\n\t\t\t\tif (k !== keyCode.DELETE || pos.begin > newPos) {\n\t\t\t\t\tpos.begin == newPos;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (strict !== true) {\n\t\t\tmaskset.p = k === keyCode.DELETE ? pos.begin + offset : pos.begin;\n\t\t}\n\t}\n}\n\n//tobe put on prototype?\nfunction isComplete(buffer) { //return true / false / undefined (repeat *)\n\tconst inputmask = this, opts = this.opts, maskset = this.maskset;\n\n\tif (typeof opts.isComplete === \"function\") return opts.isComplete(buffer, opts);\n\tif (opts.repeat === \"*\") return undefined;\n\tvar complete = false,\n\t\tlrp = determineLastRequiredPosition.call(inputmask, true),\n\t\taml = seekPrevious.call(inputmask, lrp.l);\n\n\tif (lrp.def === undefined || lrp.def.newBlockMarker || lrp.def.optionality || lrp.def.optionalQuantifier) {\n\t\tcomplete = true;\n\t\tfor (var i = 0; i <= aml; i++) {\n\t\t\tvar test = getTestTemplate.call(inputmask, i).match;\n\t\t\tif ((test.static !== true && maskset.validPositions[i] === undefined && test.optionality !== true && test.optionalQuantifier !== true) || (test.static === true && buffer[i] !== getPlaceholder.call(inputmask, i, test))) {\n\t\t\t\tcomplete = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn complete;\n}\n\n//tobe put on prototype?\nfunction isValid(pos, c, strict, fromIsValid, fromAlternate, validateOnly, fromCheckval) { //strict true ~ no correction or autofill\n\tconst inputmask = this,\n\t\t$ = this.dependencyLib,\n\t\topts = this.opts,\n\t\tel = inputmask.el,\n\t\tmaskset = inputmask.maskset;\n\n\tfunction isSelection(posObj) {\n\t\treturn inputmask.isRTL ? (posObj.begin - posObj.end) > 1 || ((posObj.begin - posObj.end) === 1) :\n\t\t\t(posObj.end - posObj.begin) > 1 || ((posObj.end - posObj.begin) === 1);\n\t}\n\n\tstrict = strict === true; //always set a value to strict to prevent possible strange behavior in the extensions\n\n\tvar maskPos = pos;\n\tif (pos.begin !== undefined) { //position was a position object - used to handle a delete by typing over a selection\n\t\tmaskPos = inputmask.isRTL ? pos.end : pos.begin;\n\t}\n\n\tfunction processCommandObject(commandObj) {\n\t\tif (commandObj !== undefined) {\n\t\t\tif (commandObj.remove !== undefined) { //remove position(s)\n\t\t\t\tif (!Array.isArray(commandObj.remove)) commandObj.remove = [commandObj.remove];\n\t\t\t\tcommandObj.remove.sort(function (a, b) {\n\t\t\t\t\treturn b.pos - a.pos;\n\t\t\t\t}).forEach(function (lmnt) {\n\t\t\t\t\trevalidateMask.call(inputmask, {begin: lmnt, end: lmnt + 1});\n\t\t\t\t});\n\t\t\t\tcommandObj.remove = undefined;\n\t\t\t}\n\t\t\tif (commandObj.insert !== undefined) { //insert position(s)\n\t\t\t\tif (!Array.isArray(commandObj.insert)) commandObj.insert = [commandObj.insert];\n\t\t\t\tcommandObj.insert.sort(function (a, b) {\n\t\t\t\t\treturn a.pos - b.pos;\n\t\t\t\t}).forEach(function (lmnt) {\n\t\t\t\t\tif (lmnt.c !== \"\") {\n\t\t\t\t\t\tisValid.call(inputmask, lmnt.pos, lmnt.c, lmnt.strict !== undefined ? lmnt.strict : true, lmnt.fromIsValid !== undefined ? lmnt.fromIsValid : fromIsValid);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tcommandObj.insert = undefined;\n\t\t\t}\n\n\t\t\tif (commandObj.refreshFromBuffer && commandObj.buffer) {\n\t\t\t\tvar refresh = commandObj.refreshFromBuffer;\n\t\t\t\trefreshFromBuffer.call(inputmask, refresh === true ? refresh : refresh.start, refresh.end, commandObj.buffer);\n\t\t\t\tcommandObj.refreshFromBuffer = undefined;\n\t\t\t}\n\n\t\t\tif (commandObj.rewritePosition !== undefined) {\n\t\t\t\tmaskPos = commandObj.rewritePosition;\n\t\t\t\t// commandObj.rewritePosition = undefined;\n\t\t\t\tcommandObj = true;\n\t\t\t}\n\t\t}\n\t\treturn commandObj;\n\t}\n\n\tfunction _isValid(position, c, strict) {\n\t\tvar rslt = false;\n\n\t\tgetTests.call(inputmask, position).every(function (tst, ndx) {\n\t\t\tvar test = tst.match;\n\t\t\t//make sure the buffer is set and correct\n\t\t\tgetBuffer.call(inputmask, true);\n\t\t\t//return is false or a json object => { pos: ??, c: ??} or true\n\t\t\trslt = test.fn != null ?\n\t\t\t\ttest.fn.test(c, maskset, position, strict, opts, isSelection(pos)) : (c === test.def || c === opts.skipOptionalPartCharacter) && test.def !== \"\" ? //non mask\n\t\t\t\t\t{\n\t\t\t\t\t\tc: getPlaceholder.call(inputmask, position, test, true) || test.def,\n\t\t\t\t\t\tpos: position\n\t\t\t\t\t} : false;\n\n\t\t\tif (rslt !== false) {\n\t\t\t\tvar elem = rslt.c !== undefined ? rslt.c : c, validatedPos = position;\n\t\t\t\telem = (elem === opts.skipOptionalPartCharacter && test.static === true) ?\n\t\t\t\t\t(getPlaceholder.call(inputmask, position, test, true) || test.def) : elem;\n\n\t\t\t\trslt = processCommandObject(rslt);\n\n\t\t\t\tif (rslt !== true && rslt.pos !== undefined && rslt.pos !== position) { //their is a position offset\n\t\t\t\t\tvalidatedPos = rslt.pos;\n\t\t\t\t}\n\n\t\t\t\tif (rslt !== true && rslt.pos === undefined && rslt.c === undefined) {\n\t\t\t\t\treturn false; //breakout if nothing to insert\n\t\t\t\t}\n\n\t\t\t\tif (revalidateMask.call(inputmask, pos, $.extend({}, tst, {\n\t\t\t\t\t\"input\": casing.call(inputmask, elem, test, validatedPos)\n\t\t\t\t}), fromIsValid, validatedPos) === false) {\n\t\t\t\t\trslt = false;\n\t\t\t\t}\n\t\t\t\treturn false; //break from loop\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\t\treturn rslt;\n\t}\n\n\tvar result = true,\n\t\tpositionsClone = $.extend(true, {}, maskset.validPositions); //clone the currentPositions\n\n\tif (opts.keepStatic === false && maskset.excludes[maskPos] !== undefined && fromAlternate !== true && fromIsValid !== true) {\n\t\tfor (var i = maskPos; i < (inputmask.isRTL ? pos.begin : pos.end); i++) {\n\t\t\tif (maskset.excludes[i] !== undefined) {\n\t\t\t\tmaskset.excludes[i] = undefined;\n\t\t\t\tdelete maskset.tests[i];\n\t\t\t}\n\t\t}\n\t}\n\n\tif (typeof opts.preValidation === \"function\" && fromIsValid !== true && validateOnly !== true) {\n\t\tresult = opts.preValidation.call(el, getBuffer.call(inputmask), maskPos, c, isSelection(pos), opts, maskset, pos, strict || fromAlternate);\n\t\tresult = processCommandObject(result);\n\t}\n\tif (result === true) { //preValidation result\n\t\tif (inputmask.maxLength === undefined || maskPos < inputmask.maxLength) {\n\t\t\tresult = _isValid(maskPos, c, strict);\n\t\t\tif ((!strict || fromIsValid === true) && result === false && validateOnly !== true) {\n\t\t\t\tvar currentPosValid = maskset.validPositions[maskPos];\n\t\t\t\tif (currentPosValid && currentPosValid.match.static === true && (currentPosValid.match.def === c || c === opts.skipOptionalPartCharacter)) {\n\t\t\t\t\tresult = {\n\t\t\t\t\t\t\"caret\": seekNext.call(inputmask, maskPos)\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tif (opts.insertMode || maskset.validPositions[seekNext.call(inputmask, maskPos)] === undefined || pos.end > maskPos) { //does the input match on a further position?\n\t\t\t\t\t\tvar skip = false;\n\t\t\t\t\t\tif (maskset.jitOffset[maskPos] && maskset.validPositions[seekNext.call(inputmask, maskPos)] === undefined) {\n\t\t\t\t\t\t\tresult = isValid.call(inputmask, maskPos + maskset.jitOffset[maskPos], c, true);\n\t\t\t\t\t\t\tif (result !== false) {\n\t\t\t\t\t\t\t\tif (fromAlternate !== true) result.caret = maskPos;\n\t\t\t\t\t\t\t\tskip = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (pos.end > maskPos) {\n\t\t\t\t\t\t\tmaskset.validPositions[maskPos] = undefined;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!skip && !isMask.call(inputmask, maskPos, opts.keepStatic && maskPos === 0)) {\n\t\t\t\t\t\t\tfor (var nPos = maskPos + 1, snPos = seekNext.call(inputmask, maskPos, false, maskPos !== 0); nPos <= snPos; nPos++) {\n\t\t\t\t\t\t\t\t// if (!isMask(nPos, true)) {\n\t\t\t\t\t\t\t\t// \tcontinue;\n\t\t\t\t\t\t\t\t// }\n\t\t\t\t\t\t\t\tresult = _isValid(nPos, c, strict);\n\t\t\t\t\t\t\t\tif (result !== false) {\n\t\t\t\t\t\t\t\t\tresult = trackbackPositions.call(inputmask, maskPos, result.pos !== undefined ? result.pos : nPos) || result;\n\t\t\t\t\t\t\t\t\tmaskPos = nPos;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tresult = false;\n\t\t}\n\n\n\t\tif (result === false && opts.keepStatic && (isComplete.call(inputmask, getBuffer.call(inputmask)) || maskPos === 0) && !strict && fromAlternate !== true) { //try fuzzy alternator logic\n\t\t\tresult = alternate.call(inputmask, maskPos, c, strict, fromIsValid, undefined, pos);\n\t\t} else if (isSelection(pos) && maskset.tests[maskPos] && maskset.tests[maskPos].length > 1 && opts.keepStatic && !strict && fromAlternate !== true) { //selection clears an alternated keepstatic mask ~ #2189\n\t\t\tresult = alternate.call(inputmask, true);\n\t\t}\n\n\t\tif (result === true) {\n\t\t\tresult = {\n\t\t\t\t\"pos\": maskPos\n\t\t\t};\n\t\t}\n\t}\n\tif (typeof opts.postValidation === \"function\" && fromIsValid !== true && validateOnly !== true) {\n\t\tvar postResult = opts.postValidation.call(el, getBuffer.call(inputmask, true), pos.begin !== undefined ? (inputmask.isRTL ? pos.end : pos.begin) : pos, c, result, opts, maskset, strict, fromCheckval);\n\t\tif (postResult !== undefined) {\n\t\t\tresult = postResult === true ? result : postResult;\n\t\t}\n\t}\n\n\tif (result && result.pos === undefined) {\n\t\tresult.pos = maskPos;\n\t}\n\n\tif (result === false || validateOnly === true) {\n\t\tresetMaskSet.call(inputmask, true);\n\t\tmaskset.validPositions = $.extend(true, {}, positionsClone); //revert validation changes\n\t} else {\n\t\ttrackbackPositions.call(inputmask, undefined, maskPos, true);\n\t}\n\n\tvar endResult = processCommandObject(result);\n\t// console.log(\"returned result \" + JSON.stringify(endResult));\n\treturn endResult;\n}\n\n//tobe put on prototype?\nfunction positionCanMatchDefinition(pos, testDefinition, opts) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset;\n\n\tvar valid = false,\n\t\ttests = getTests.call(inputmask, pos);\n\tfor (var tndx = 0; tndx < tests.length; tndx++) {\n\t\tif (tests[tndx].match &&\n\t\t\t((tests[tndx].match[\"nativeDef\"] === testDefinition.match[opts.shiftPositions ? \"def\" : \"nativeDef\"] && (!opts.shiftPositions || !testDefinition.match.static)) ||\n\t\t\t\ttests[tndx].match[\"nativeDef\"] === testDefinition.match[\"nativeDef\"])) {\n\t\t\tvalid = true;\n\t\t\tbreak;\n\t\t} else if (tests[tndx].match && tests[tndx].match[\"def\"] === testDefinition.match[\"nativeDef\"]) {\n\t\t\tvalid = undefined;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (valid === false) {\n\t\tif (maskset.jitOffset[pos] !== undefined) {\n\t\t\tvalid = positionCanMatchDefinition.call(inputmask, pos + maskset.jitOffset[pos], testDefinition, opts);\n\t\t}\n\t}\n\treturn valid;\n}\n\n//tobe put on prototype?\nfunction refreshFromBuffer(start, end, buffer) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset,\n\t\topts = this.opts,\n\t\t$ = this.dependencyLib,\n\t\tel = inputmask.el;\n\n\t// checkVal.call(inputmask, el, false, true, isRTL ? buffer.reverse() : buffer);\n\tvar i, p, skipOptionalPartCharacter = opts.skipOptionalPartCharacter,\n\t\tbffr = inputmask.isRTL ? buffer.slice().reverse() : buffer;\n\topts.skipOptionalPartCharacter = \"\";\n\tif (start === true) {\n\t\tresetMaskSet.call(inputmask);\n\t\tmaskset.tests = {}; //refresh tests after possible alternating\n\t\tstart = 0;\n\t\tend = buffer.length;\n\t\tp = determineNewCaretPosition.call(inputmask, {begin: 0, end: 0}, false).begin;\n\t} else {\n\t\tfor (i = start; i < end; i++) {\n\t\t\tdelete maskset.validPositions[i];\n\t\t}\n\t\tp = start;\n\t}\n\n\tvar keypress = new $.Event(\"keypress\");\n\tfor (i = start; i < end; i++) {\n\t\tkeypress.which = bffr[i].toString().charCodeAt(0);\n\t\tinputmask.ignorable = false; //make sure ignorable is ignored ;-)\n\t\tvar valResult = EventHandlers.keypressEvent.call(el, keypress, true, false, false, p);\n\t\tif (valResult !== false) {\n\t\t\tp = valResult.forwardPosition;\n\t\t}\n\t}\n\n\topts.skipOptionalPartCharacter = skipOptionalPartCharacter;\n}\n\n//tobe put on prototype?\n//fill in best positions according the current input\nfunction trackbackPositions(originalPos, newPos, fillOnly) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset,\n\t\t$ = this.dependencyLib;\n\n\t// console.log(\"trackbackPositions \" + originalPos + \" \" + newPos);\n\tif (originalPos === undefined) {\n\t\t//find previous valid\n\t\tfor (originalPos = newPos - 1; originalPos > 0; originalPos--) {\n\t\t\tif (maskset.validPositions[originalPos]) break;\n\t\t}\n\t}\n\tfor (var ps = originalPos; ps < newPos; ps++) {\n\t\tif (maskset.validPositions[ps] === undefined && !isMask.call(inputmask, ps, true)) {\n\t\t\tvar vp = ps == 0 ? getTest.call(inputmask, ps) : maskset.validPositions[ps - 1];\n\t\t\tif (vp) {\n\t\t\t\tvar tests = getTests.call(inputmask, ps).slice();\n\t\t\t\tif (tests[tests.length - 1].match.def === \"\") tests.pop();\n\t\t\t\tvar bestMatch = determineTestTemplate.call(inputmask, ps, tests), np;\n\t\t\t\tif (bestMatch && (bestMatch.match.jit !== true || (bestMatch.match.newBlockMarker === \"master\" && (np = maskset.validPositions[ps + 1]) && np.match.optionalQuantifier === true))) {\n\t\t\t\t\tbestMatch = $.extend({}, bestMatch, {\n\t\t\t\t\t\t\"input\": getPlaceholder.call(inputmask, ps, bestMatch.match, true) || bestMatch.match.def\n\t\t\t\t\t});\n\t\t\t\t\tbestMatch.generatedInput = true;\n\t\t\t\t\trevalidateMask.call(inputmask, ps, bestMatch, true);\n\n\t\t\t\t\tif (fillOnly !== true) {\n\t\t\t\t\t\t//revalidate the new position to update the locator value\n\t\t\t\t\t\tvar cvpInput = maskset.validPositions[newPos].input;\n\t\t\t\t\t\tmaskset.validPositions[newPos] = undefined;\n\t\t\t\t\t\treturn isValid.call(inputmask, newPos, cvpInput, true, true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n//tobe put on prototype?\nfunction revalidateMask(pos, validTest, fromIsValid, validatedPos) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset,\n\t\topts = this.opts,\n\t\t$ = this.dependencyLib;\n\n\tfunction IsEnclosedStatic(pos, valids, selection) {\n\t\tvar posMatch = valids[pos];\n\t\tif (posMatch !== undefined && posMatch.match.static === true && posMatch.match.optionality !== true && (valids[0] === undefined || valids[0].alternation === undefined)) {\n\t\t\tvar prevMatch = selection.begin <= pos - 1 ? valids[pos - 1] && valids[pos - 1].match.static === true && valids[pos - 1] : valids[pos - 1],\n\t\t\t\tnextMatch = selection.end > pos + 1 ? valids[pos + 1] && valids[pos + 1].match.static === true && valids[pos + 1] : valids[pos + 1];\n\t\t\treturn prevMatch && nextMatch;\n\t\t}\n\t\treturn false;\n\t}\n\n\tvar offset = 0, begin = pos.begin !== undefined ? pos.begin : pos, end = pos.end !== undefined ? pos.end : pos;\n\tif (pos.begin > pos.end) {\n\t\tbegin = pos.end;\n\t\tend = pos.begin;\n\t}\n\n\tvalidatedPos = validatedPos !== undefined ? validatedPos : begin;\n\tif (begin !== end || (opts.insertMode && maskset.validPositions[validatedPos] !== undefined && fromIsValid === undefined) || validTest === undefined) {\n\t\t//reposition & revalidate others\n\t\tvar positionsClone = $.extend(true, {}, maskset.validPositions),\n\t\t\tlvp = getLastValidPosition.call(inputmask, undefined, true),\n\t\t\ti;\n\t\tmaskset.p = begin; //needed for alternated position after overtype selection\n\n\t\tfor (i = lvp; i >= begin; i--) {\n\t\t\tdelete maskset.validPositions[i];\n\t\t\tif (validTest === undefined) delete maskset.tests[i + 1];\n\t\t}\n\n\t\tvar valid = true, j = validatedPos,\n\t\t\tposMatch = j, t, canMatch;\n\n\t\tif (validTest) {\n\t\t\tmaskset.validPositions[validatedPos] = $.extend(true, {}, validTest);\n\t\t\tposMatch++;\n\t\t\tj++;\n\t\t}\n\n\t\tfor (i = validTest ? end : end - 1; i <= lvp; i++) {\n\t\t\tif ((t = positionsClone[i]) !== undefined && t.generatedInput !== true &&\n\t\t\t\t(i >= end || (i >= begin && IsEnclosedStatic(i, positionsClone, {\n\t\t\t\t\tbegin: begin,\n\t\t\t\t\tend: end\n\t\t\t\t})))) {\n\t\t\t\twhile (getTest.call(inputmask, posMatch).match.def !== \"\") { //loop needed to match further positions\n\t\t\t\t\tif ((canMatch = positionCanMatchDefinition.call(inputmask, posMatch, t, opts)) !== false || t.match.def === \"+\") { //validated match //we still need some hackery for the + validator (numeric alias)\n\t\t\t\t\t\tif (t.match.def === \"+\") getBuffer.call(inputmask, true);\n\t\t\t\t\t\tvar result = isValid.call(inputmask, posMatch, t.input, t.match.def !== \"+\", t.match.def !== \"+\");\n\t\t\t\t\t\tvalid = result !== false;\n\t\t\t\t\t\tj = (result.pos || posMatch) + 1;\n\t\t\t\t\t\tif (!valid && canMatch) break;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t}\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\tif (validTest === undefined && t.match.static && i === pos.begin) offset++;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (!valid && posMatch > maskset.maskLength) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tposMatch++;\n\t\t\t\t}\n\t\t\t\tif (getTest.call(inputmask, posMatch).match.def == \"\") {\n\t\t\t\t\tvalid = false;\n\t\t\t\t}\n\t\t\t\t//restore position\n\t\t\t\tposMatch = j;\n\t\t\t}\n\t\t\tif (!valid) break;\n\t\t}\n\n\t\tif (!valid) {\n\t\t\tmaskset.validPositions = $.extend(true, {}, positionsClone);\n\t\t\tresetMaskSet.call(inputmask, true);\n\t\t\treturn false;\n\t\t}\n\t} else if (validTest && getTest.call(inputmask, validatedPos).match.cd === validTest.match.cd) {\n\t\tmaskset.validPositions[validatedPos] = $.extend(true, {}, validTest);\n\t}\n\n\tresetMaskSet.call(inputmask, true);\n\treturn offset;\n}\n","import {\n\tdetermineTestTemplate,\n\tgetMaskTemplate,\n\tgetPlaceholder,\n\tgetTest,\n\tgetTests,\n\tgetTestTemplate\n} from \"./validation-tests\";\nimport {checkAlternationMatch} from \"./validation\";\nimport {mask} from \"./mask\";\n\nexport {\n\tcaret,\n\tdetermineLastRequiredPosition,\n\tdetermineNewCaretPosition,\n\tgetBuffer,\n\tgetBufferTemplate,\n\tgetLastValidPosition,\n\tisMask,\n\tresetMaskSet,\n\tseekNext,\n\tseekPrevious,\n\ttranslatePosition\n};\n\n//tobe put on prototype?\nfunction caret(input, begin, end, notranslate, isDelete) {\n\tconst inputmask = this,\n\t\topts = this.opts;\n\n\tvar range;\n\tif (begin !== undefined) {\n\t\tif (Array.isArray(begin)) {\n\t\t\tend = inputmask.isRTL ? begin[0] : begin[1];\n\t\t\tbegin = inputmask.isRTL ? begin[1] : begin[0];\n\t\t}\n\t\tif (begin.begin !== undefined) {\n\t\t\tend = inputmask.isRTL ? begin.begin : begin.end;\n\t\t\tbegin = inputmask.isRTL ? begin.end : begin.begin;\n\t\t}\n\t\tif (typeof begin === \"number\") {\n\t\t\tbegin = notranslate ? begin : translatePosition.call(inputmask, begin);\n\t\t\tend = notranslate ? end : translatePosition.call(inputmask, end);\n\t\t\tend = (typeof end == \"number\") ? end : begin;\n\t\t\t// if (!$(input).is(\":visible\")) {\n\t\t\t// \treturn;\n\t\t\t// }\n\n\t\t\tvar scrollCalc = parseInt(((input.ownerDocument.defaultView || window).getComputedStyle ? (input.ownerDocument.defaultView || window).getComputedStyle(input, null) : input.currentStyle).fontSize) * end;\n\t\t\tinput.scrollLeft = scrollCalc > input.scrollWidth ? scrollCalc : 0;\n\t\t\tinput.inputmask.caretPos = {begin: begin, end: end}; //track caret internally\n\t\t\tif (opts.insertModeVisual && opts.insertMode === false && begin === end) {\n\t\t\t\tif (!isDelete) {\n\t\t\t\t\tend++; //set visualization for insert/overwrite mode\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (input === (input.inputmask.shadowRoot || document).activeElement) {\n\t\t\t\tif (\"setSelectionRange\" in input) {\n\t\t\t\t\tinput.setSelectionRange(begin, end);\n\t\t\t\t} else if (window.getSelection) {\n\t\t\t\t\trange = document.createRange();\n\t\t\t\t\tif (input.firstChild === undefined || input.firstChild === null) {\n\t\t\t\t\t\tvar textNode = document.createTextNode(\"\");\n\t\t\t\t\t\tinput.appendChild(textNode);\n\t\t\t\t\t}\n\t\t\t\t\trange.setStart(input.firstChild, begin < input.inputmask._valueGet().length ? begin : input.inputmask._valueGet().length);\n\t\t\t\t\trange.setEnd(input.firstChild, end < input.inputmask._valueGet().length ? end : input.inputmask._valueGet().length);\n\t\t\t\t\trange.collapse(true);\n\t\t\t\t\tvar sel = window.getSelection();\n\t\t\t\t\tsel.removeAllRanges();\n\t\t\t\t\tsel.addRange(range);\n\t\t\t\t\t//input.focus();\n\t\t\t\t} else if (input.createTextRange) {\n\t\t\t\t\trange = input.createTextRange();\n\t\t\t\t\trange.collapse(true);\n\t\t\t\t\trange.moveEnd(\"character\", end);\n\t\t\t\t\trange.moveStart(\"character\", begin);\n\t\t\t\t\trange.select();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (\"selectionStart\" in input && \"selectionEnd\" in input) {\n\t\t\tbegin = input.selectionStart;\n\t\t\tend = input.selectionEnd;\n\t\t} else if (window.getSelection) {\n\t\t\trange = window.getSelection().getRangeAt(0);\n\t\t\tif (range.commonAncestorContainer.parentNode === input || range.commonAncestorContainer === input) {\n\t\t\t\tbegin = range.startOffset;\n\t\t\t\tend = range.endOffset;\n\t\t\t}\n\t\t} else if (document.selection && document.selection.createRange) {\n\t\t\trange = document.selection.createRange();\n\t\t\tbegin = 0 - range.duplicate().moveStart(\"character\", -input.inputmask._valueGet().length);\n\t\t\tend = begin + range.text.length;\n\t\t}\n\n\t\t// if (opts.insertModeVisual && opts.insertMode === false && begin === (end - 1)) end--; //correct caret for insert/overwrite mode\n\n\t\t/*eslint-disable consistent-return */\n\t\treturn {\n\t\t\t\"begin\": notranslate ? begin : translatePosition.call(inputmask, begin),\n\t\t\t\"end\": notranslate ? end : translatePosition.call(inputmask, end)\n\t\t};\n\t\t/*eslint-enable consistent-return */\n\t}\n}\n\n//tobe put on prototype?\nfunction determineLastRequiredPosition(returnDefinition) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset,\n\t\t$ = this.dependencyLib;\n\n\tvar buffer = getMaskTemplate.call(inputmask, true, getLastValidPosition.call(inputmask), true, true),\n\t\tbl = buffer.length,\n\t\tpos, lvp = getLastValidPosition.call(inputmask),\n\t\tpositions = {},\n\t\tlvTest = maskset.validPositions[lvp],\n\t\tndxIntlzr = lvTest !== undefined ? lvTest.locator.slice() : undefined,\n\t\ttestPos;\n\tfor (pos = lvp + 1; pos < buffer.length; pos++) {\n\t\ttestPos = getTestTemplate.call(inputmask, pos, ndxIntlzr, pos - 1);\n\t\tndxIntlzr = testPos.locator.slice();\n\t\tpositions[pos] = $.extend(true, {}, testPos);\n\t}\n\n\tvar lvTestAlt = lvTest && lvTest.alternation !== undefined ? lvTest.locator[lvTest.alternation] : undefined;\n\tfor (pos = bl - 1; pos > lvp; pos--) {\n\t\ttestPos = positions[pos];\n\t\tif ((testPos.match.optionality ||\n\t\t\t(testPos.match.optionalQuantifier && testPos.match.newBlockMarker) ||\n\t\t\t(lvTestAlt &&\n\t\t\t\t(\n\t\t\t\t\t(lvTestAlt !== positions[pos].locator[lvTest.alternation] && testPos.match.static != true) ||\n\t\t\t\t\t(testPos.match.static === true &&\n\t\t\t\t\t\ttestPos.locator[lvTest.alternation] &&\n\t\t\t\t\t\tcheckAlternationMatch.call(inputmask, testPos.locator[lvTest.alternation].toString().split(\",\"), lvTestAlt.toString().split(\",\")) &&\n\t\t\t\t\t\tgetTests.call(inputmask, pos)[0].def !== \"\")\n\t\t\t\t)\n\t\t\t)) &&\n\t\t\tbuffer[pos] === getPlaceholder.call(inputmask, pos, testPos.match)) {\n\t\t\tbl--;\n\t\t} else {\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn returnDefinition ? {\n\t\t\"l\": bl,\n\t\t\"def\": positions[bl] ? positions[bl].match : undefined\n\t} : bl;\n}\n\n//tobe put on prototype?\nfunction determineNewCaretPosition(selectedCaret, tabbed) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset,\n\t\topts = this.opts;\n\n\tfunction doRadixFocus(clickPos) {\n\t\tif (opts.radixPoint !== \"\" && opts.digits !== 0) {\n\t\t\tvar vps = maskset.validPositions;\n\t\t\tif (vps[clickPos] === undefined || (vps[clickPos].input === getPlaceholder.call(inputmask, clickPos))) {\n\t\t\t\tif (clickPos < seekNext.call(inputmask, -1)) return true;\n\t\t\t\tvar radixPos = getBuffer.call(inputmask).indexOf(opts.radixPoint);\n\t\t\t\tif (radixPos !== -1) {\n\t\t\t\t\tfor (var vp in vps) {\n\t\t\t\t\t\tif (vps[vp] && radixPos < vp && vps[vp].input !== getPlaceholder.call(inputmask, vp)) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tif (tabbed) {\n\t\tif (inputmask.isRTL) {\n\t\t\tselectedCaret.end = selectedCaret.begin;\n\t\t} else {\n\t\t\tselectedCaret.begin = selectedCaret.end;\n\t\t}\n\t}\n\tif (selectedCaret.begin === selectedCaret.end) {\n\t\tswitch (opts.positionCaretOnClick) {\n\t\t\tcase \"none\":\n\t\t\t\tbreak;\n\t\t\tcase \"select\":\n\t\t\t\tselectedCaret = {begin: 0, end: getBuffer.call(inputmask).length};\n\t\t\t\tbreak;\n\t\t\tcase \"ignore\":\n\t\t\t\tselectedCaret.end = selectedCaret.begin = seekNext.call(inputmask, getLastValidPosition.call(inputmask));\n\t\t\t\tbreak;\n\t\t\tcase \"radixFocus\":\n\t\t\t\tif (doRadixFocus(selectedCaret.begin)) {\n\t\t\t\t\tvar radixPos = getBuffer.call(inputmask).join(\"\").indexOf(opts.radixPoint);\n\t\t\t\t\tselectedCaret.end = selectedCaret.begin = opts.numericInput ? seekNext.call(inputmask, radixPos) : radixPos;\n\t\t\t\t\tbreak;\n\t\t\t\t} //fallback to lvp\n\t\t\t// eslint-disable-next-line no-fallthrough\n\t\t\tdefault: //lvp:\n\t\t\t\tvar clickPosition = selectedCaret.begin,\n\t\t\t\t\tlvclickPosition = getLastValidPosition.call(inputmask, clickPosition, true),\n\t\t\t\t\tlastPosition = seekNext.call(inputmask, (lvclickPosition === -1 && !isMask.call(inputmask, 0)) ? -1 : lvclickPosition);\n\n\t\t\t\tif (clickPosition <= lastPosition) {\n\t\t\t\t\tselectedCaret.end = selectedCaret.begin = !isMask.call(inputmask, clickPosition, false, true) ? seekNext.call(inputmask, clickPosition) : clickPosition;\n\t\t\t\t} else {\n\t\t\t\t\tvar lvp = maskset.validPositions[lvclickPosition],\n\t\t\t\t\t\ttt = getTestTemplate.call(inputmask, lastPosition, lvp ? lvp.match.locator : undefined, lvp),\n\t\t\t\t\t\tplaceholder = getPlaceholder.call(inputmask, lastPosition, tt.match);\n\t\t\t\t\tif ((placeholder !== \"\" && getBuffer.call(inputmask)[lastPosition] !== placeholder && tt.match.optionalQuantifier !== true && tt.match.newBlockMarker !== true) || (!isMask.call(inputmask, lastPosition, opts.keepStatic, true) && tt.match.def === placeholder)) {\n\t\t\t\t\t\tvar newPos = seekNext.call(inputmask, lastPosition);\n\t\t\t\t\t\tif (clickPosition >= newPos || clickPosition === lastPosition) {\n\t\t\t\t\t\t\tlastPosition = newPos;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tselectedCaret.end = selectedCaret.begin = lastPosition;\n\t\t\t\t}\n\t\t}\n\n\t\treturn selectedCaret;\n\t}\n}\n\n\n//tobe put on prototype?\nfunction getBuffer(noCache) {\n\tconst inputmask = this, maskset = this.maskset;\n\n\tif (maskset.buffer === undefined || noCache === true) {\n\t\tmaskset.buffer = getMaskTemplate.call(inputmask, true, getLastValidPosition.call(inputmask), true);\n\t\tif (maskset._buffer === undefined) maskset._buffer = maskset.buffer.slice();\n\t}\n\treturn maskset.buffer;\n}\n\n//tobe put on prototype?\nfunction getBufferTemplate() {\n\tconst inputmask = this, maskset = this.maskset;\n\n\tif (maskset._buffer === undefined) {\n\t\t//generate template\n\t\tmaskset._buffer = getMaskTemplate.call(inputmask, false, 1);\n\t\tif (maskset.buffer === undefined) maskset.buffer = maskset._buffer.slice();\n\t}\n\treturn maskset._buffer;\n}\n\n//tobe put on prototype?\nfunction getLastValidPosition(closestTo, strict, validPositions) {\n\tconst maskset = this.maskset;\n\n\tvar before = -1,\n\t\tafter = -1,\n\t\tvalids = validPositions || maskset.validPositions; //for use in valhook ~ context switch\n\tif (closestTo === undefined) closestTo = -1;\n\tfor (var posNdx in valids) {\n\t\tvar psNdx = parseInt(posNdx);\n\t\tif (valids[psNdx] && (strict || valids[psNdx].generatedInput !== true)) {\n\t\t\tif (psNdx <= closestTo) before = psNdx;\n\t\t\tif (psNdx >= closestTo) after = psNdx;\n\t\t}\n\t}\n\treturn (before === -1 || before == closestTo) ? after : after == -1 ? before : (closestTo - before) < (after - closestTo) ? before : after;\n}\n\n//tobe put on prototype?\nfunction isMask(pos, strict, fuzzy) {\n\tconst inputmask = this, maskset = this.maskset;\n\n\tvar test = getTestTemplate.call(inputmask, pos).match;\n\tif (test.def === \"\") test = getTest.call(inputmask, pos).match;\n\n\tif (test.static !== true) {\n\t\treturn test.fn;\n\t}\n\tif (fuzzy === true && (maskset.validPositions[pos] !== undefined && maskset.validPositions[pos].generatedInput !== true)) {\n\t\treturn true;\n\t}\n\n\tif (strict !== true && pos > -1) {\n\t\tif (fuzzy) { //check on the number of tests\n\t\t\tvar tests = getTests.call(inputmask, pos);\n\t\t\treturn tests.length > (1 + (tests[tests.length - 1].match.def === \"\" ? 1 : 0));\n\t\t}\n\t\t//else based on the template\n\t\tvar testTemplate = determineTestTemplate.call(inputmask, pos, getTests.call(inputmask, pos));\n\t\tvar testPlaceHolder = getPlaceholder.call(inputmask, pos, testTemplate.match);\n\t\treturn testTemplate.match.def !== testPlaceHolder;\n\n\t}\n\treturn false;\n}\n\n//tobe put on prototype?\nfunction resetMaskSet(soft) {\n\tconst maskset = this.maskset;\n\n\tmaskset.buffer = undefined;\n\tif (soft !== true) {\n\t\tmaskset.validPositions = {};\n\t\tmaskset.p = 0;\n\t}\n}\n\n//tobe put on prototype?\nfunction seekNext(pos, newBlock, fuzzy) {\n\tconst inputmask = this;\n\n\tif (fuzzy === undefined) fuzzy = true;\n\tvar position = pos + 1;\n\twhile (getTest.call(inputmask, position).match.def !== \"\" &&\n\t((newBlock === true && (getTest.call(inputmask, position).match.newBlockMarker !== true || !isMask.call(inputmask, position, undefined, true))) ||\n\t\t(newBlock !== true && !isMask.call(inputmask, position, undefined, fuzzy)))) {\n\t\tposition++;\n\t}\n\treturn position;\n}\n\n//tobe put on prototype?\nfunction seekPrevious(pos, newBlock) {\n\tconst inputmask = this;\n\n\tvar position = pos - 1;\n\tif (pos <= 0) return 0;\n\n\twhile (position > 0 &&\n\t((newBlock === true && (getTest.call(inputmask, position).match.newBlockMarker !== true || !isMask.call(inputmask, position, undefined, true))) ||\n\t\t(newBlock !== true && !isMask.call(inputmask, position, undefined, true)))) {\n\t\tposition--;\n\t}\n\treturn position;\n}\n\n//tobe put on prototype?\nfunction translatePosition(pos) {\n\tconst inputmask = this,\n\t\topts = this.opts,\n\t\tel = this.el;\n\n\tif (inputmask.isRTL && typeof pos === \"number\" && (!opts.greedy || opts.placeholder !== \"\") && el) {\n\t\tpos = inputmask._valueGet().length - pos;\n\t}\n\treturn pos;\n}\n","import Inputmask from \"./inputmask\";\nimport keyCode from \"./keycode.json\";\nimport {getBufferTemplate} from \"./positioning\";\nimport {HandleNativePlaceholder} from \"./inputHandling\";\n\nexport {EventRuler};\n\nvar EventRuler = {\n\ton: function (input, eventName, eventHandler) {\n\t\tconst $ = input.inputmask.dependencyLib;\n\n\t\tvar ev = function (e) {\n\t\t\tif (e.originalEvent) {\n\t\t\t\te = e.originalEvent || e; //get original event from jquery evenbt\n\t\t\t\targuments[0] = e;\n\t\t\t}\n\t\t\t// console.log(e.type);\n\t\t\tvar that = this, args, inputmask = that.inputmask, opts = inputmask ? inputmask.opts : undefined,\n\t\t\t\t$ = inputmask.dependencyLib;\n\t\t\tif (inputmask === undefined && this.nodeName !== \"FORM\") { //happens when cloning an object with jquery.clone\n\t\t\t\tvar imOpts = $.data(that, \"_inputmask_opts\");\n\t\t\t\t$(that).off(); //unbind all events\n\t\t\t\tif (imOpts) {\n\t\t\t\t\t(new Inputmask(imOpts)).mask(that);\n\t\t\t\t}\n\t\t\t} else if (e.type !== \"setvalue\" && this.nodeName !== \"FORM\" && (that.disabled || (that.readOnly && !(e.type === \"keydown\" && (e.ctrlKey && e.keyCode === 67) || (opts.tabThrough === false && e.keyCode === keyCode.TAB))))) {\n\t\t\t\te.preventDefault();\n\t\t\t} else {\n\t\t\t\tswitch (e.type) {\n\t\t\t\t\tcase \"input\":\n\t\t\t\t\t\tif (inputmask.skipInputEvent === true || (e.inputType && e.inputType === \"insertCompositionText\")) {\n\t\t\t\t\t\t\tinputmask.skipInputEvent = false;\n\t\t\t\t\t\t\treturn e.preventDefault();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// if (mobile) { //this causes problem see #2220\n\t\t\t\t\t\t// \targs = arguments;\n\t\t\t\t\t\t// \tsetTimeout(function () { //needed for caret selection when entering a char on Android 8 - #1818\n\t\t\t\t\t\t// \t\teventHandler.apply(that, args);\n\t\t\t\t\t\t// \t\tcaret(that, that.inputmask.caretPos, undefined, true);\n\t\t\t\t\t\t// \t}, 0);\n\t\t\t\t\t\t// \treturn false;\n\t\t\t\t\t\t// }\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"keydown\":\n\t\t\t\t\t\t//Safari 5.1.x - modal dialog fires keypress twice workaround\n\t\t\t\t\t\tinputmask.skipKeyPressEvent = false;\n\t\t\t\t\t\tinputmask.skipInputEvent = inputmask.isComposing = e.keyCode === keyCode.KEY_229;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"keyup\":\n\t\t\t\t\tcase \"compositionend\":\n\t\t\t\t\t\tif (inputmask.isComposing) {\n\t\t\t\t\t\t\tinputmask.skipInputEvent = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"keypress\":\n\t\t\t\t\t\tif (inputmask.skipKeyPressEvent === true) {\n\t\t\t\t\t\t\treturn e.preventDefault();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tinputmask.skipKeyPressEvent = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"click\":\n\t\t\t\t\tcase \"focus\":\n\t\t\t\t\t\tif (inputmask.validationEvent) { // #841\n\t\t\t\t\t\t\tinputmask.validationEvent = false;\n\t\t\t\t\t\t\tinput.blur();\n\t\t\t\t\t\t\tHandleNativePlaceholder(input, (inputmask.isRTL ? getBufferTemplate.call(inputmask).slice().reverse() : getBufferTemplate.call(inputmask)).join(\"\"));\n\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\t\t}, 3000);\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\targs = arguments;\n\t\t\t\t\t\tsetTimeout(function () { //needed for Chrome ~ initial selection clears after the clickevent\n\t\t\t\t\t\t\tif (!input.inputmask) {\n\t\t\t\t\t\t\t\t// `inputmask.remove()` was called before this callback\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\teventHandler.apply(that, args);\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvar returnVal = eventHandler.apply(that, arguments);\n\t\t\t\tif (returnVal === false) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\treturn returnVal;\n\t\t\t}\n\t\t};\n\t\t//keep instance of the event\n\t\tinput.inputmask.events[eventName] = input.inputmask.events[eventName] || [];\n\t\tinput.inputmask.events[eventName].push(ev);\n\n\t\tif ([\"submit\", \"reset\"].includes(eventName)) {\n\t\t\tif (input.form !== null) $(input.form).on(eventName, ev.bind(input));\n\t\t} else {\n\t\t\t$(input).on(eventName, ev);\n\t\t}\n\t},\n\toff: function (input, event) {\n\t\tif (input.inputmask && input.inputmask.events) {\n\t\t\tconst $ = input.inputmask.dependencyLib;\n\t\t\tlet events = input.inputmask.events;\n\t\t\tif (event) {\n\t\t\t\tevents = [];\n\t\t\t\tevents[event] = input.inputmask.events[event];\n\t\t\t}\n\t\t\tfor (let eventName in events) {\n\t\t\t\tlet evArr = events[eventName];\n\t\t\t\twhile (evArr.length > 0) {\n\t\t\t\t\tlet ev = evArr.pop();\n\t\t\t\t\tif ([\"submit\", \"reset\",].includes(eventName)) {\n\t\t\t\t\t\tif (input.form !== null) $(input.form).off(eventName, ev);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(input).off(eventName, ev);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdelete input.inputmask.events[eventName];\n\t\t\t}\n\t\t}\n\t}\n};","import \"./getPrototypeOf\";\nimport keyCode from \"./keycode.json\";\nimport {caret, getBuffer, getBufferTemplate, getLastValidPosition, resetMaskSet, seekNext} from \"./positioning\";\nimport {applyInputValue, clearOptionalTail, writeBuffer} from \"./inputHandling\";\nimport {EventRuler} from \"./eventruler\";\nimport {iphone, mobile} from \"./environment\";\nimport {isComplete} from \"./validation\";\nimport {EventHandlers} from \"./eventhandlers\";\n\nexport{mask};\n\n//todo put on the prototype?\nfunction mask() {\n\tconst inputmask = this,\n\t\topts= this.opts,\n\tel=this.el,$=this.dependencyLib;\n\n\n\tfunction isElementTypeSupported(input, opts) {\n\t\tfunction patchValueProperty(npt) {\n\t\t\tvar valueGet;\n\t\t\tvar valueSet;\n\n\t\t\tfunction patchValhook(type) {\n\t\t\t\tif ($.valHooks && ($.valHooks[type] === undefined || $.valHooks[type].inputmaskpatch !== true)) {\n\t\t\t\t\tvar valhookGet = $.valHooks[type] && $.valHooks[type].get ? $.valHooks[type].get : function (elem) {\n\t\t\t\t\t\treturn elem.value;\n\t\t\t\t\t};\n\t\t\t\t\tvar valhookSet = $.valHooks[type] && $.valHooks[type].set ? $.valHooks[type].set : function (elem, value) {\n\t\t\t\t\t\telem.value = value;\n\t\t\t\t\t\treturn elem;\n\t\t\t\t\t};\n\n\t\t\t\t\t$.valHooks[type] = {\n\t\t\t\t\t\tget: function (elem) {\n\t\t\t\t\t\t\tif (elem.inputmask) {\n\t\t\t\t\t\t\t\tif (elem.inputmask.opts.autoUnmask) {\n\t\t\t\t\t\t\t\t\treturn elem.inputmask.unmaskedvalue();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tvar result = valhookGet(elem);\n\t\t\t\t\t\t\t\t\treturn getLastValidPosition.call(inputmask, undefined, undefined, elem.inputmask.maskset.validPositions) !== -1 || opts.nullable !== true ? result : \"\";\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn valhookGet(elem);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tset: function (elem, value) {\n\t\t\t\t\t\t\tvar result = valhookSet(elem, value);\n\t\t\t\t\t\t\tif (elem.inputmask) {\n\t\t\t\t\t\t\t\tapplyInputValue(elem, value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinputmaskpatch: true\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction getter() {\n\t\t\t\tif (this.inputmask) {\n\t\t\t\t\treturn this.inputmask.opts.autoUnmask ?\n\t\t\t\t\t\tthis.inputmask.unmaskedvalue() :\n\t\t\t\t\t\t(getLastValidPosition.call(inputmask) !== -1 || opts.nullable !== true ?\n\t\t\t\t\t\t\t((this.inputmask.shadowRoot || document.activeElement) === this && opts.clearMaskOnLostFocus ?\n\t\t\t\t\t\t\t\t(inputmask.isRTL ? clearOptionalTail.call(inputmask,getBuffer.call(inputmask).slice()).reverse() : clearOptionalTail.call(inputmask,getBuffer.call(inputmask).slice())).join(\"\") :\n\t\t\t\t\t\t\t\tvalueGet.call(this)) :\n\t\t\t\t\t\t\t\"\");\n\t\t\t\t} else {\n\t\t\t\t\treturn valueGet.call(this);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction setter(value) {\n\t\t\t\tvalueSet.call(this, value);\n\t\t\t\tif (this.inputmask) {\n\t\t\t\t\tapplyInputValue(this, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction installNativeValueSetFallback(npt) {\n\t\t\t\tEventRuler.on(npt, \"mouseenter\", function () {\n\t\t\t\t\tvar input = this,\n\t\t\t\t\t\tvalue = input.inputmask._valueGet(true);\n\t\t\t\t\tif (value !== (inputmask.isRTL ? getBuffer.call(inputmask).reverse() : getBuffer.call(inputmask)).join(\"\")) { //Is this correct? to apply RTL? TOCHECK\n\t\t\t\t\t\tapplyInputValue(input, value);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (!npt.inputmask.__valueGet) {\n\t\t\t\tif (opts.noValuePatching !== true) {\n\t\t\t\t\tif (Object.getOwnPropertyDescriptor) {\n\t\t\t\t\t\tvar valueProperty = Object.getPrototypeOf ? Object.getOwnPropertyDescriptor(Object.getPrototypeOf(npt), \"value\") : undefined;\n\t\t\t\t\t\tif (valueProperty && valueProperty.get && valueProperty.set) {\n\t\t\t\t\t\t\tvalueGet = valueProperty.get;\n\t\t\t\t\t\t\tvalueSet = valueProperty.set;\n\t\t\t\t\t\t\tObject.defineProperty(npt, \"value\", {\n\t\t\t\t\t\t\t\tget: getter,\n\t\t\t\t\t\t\t\tset: setter,\n\t\t\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else if (npt.tagName.toLowerCase() !== \"input\") {\n\t\t\t\t\t\t\tvalueGet = function () {\n\t\t\t\t\t\t\t\treturn this.textContent;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tvalueSet = function (value) {\n\t\t\t\t\t\t\t\tthis.textContent = value;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tObject.defineProperty(npt, \"value\", {\n\t\t\t\t\t\t\t\tget: getter,\n\t\t\t\t\t\t\t\tset: setter,\n\t\t\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (document.__lookupGetter__ && npt.__lookupGetter__(\"value\")) {\n\t\t\t\t\t\tvalueGet = npt.__lookupGetter__(\"value\");\n\t\t\t\t\t\tvalueSet = npt.__lookupSetter__(\"value\");\n\n\t\t\t\t\t\tnpt.__defineGetter__(\"value\", getter);\n\t\t\t\t\t\tnpt.__defineSetter__(\"value\", setter);\n\t\t\t\t\t}\n\t\t\t\t\tnpt.inputmask.__valueGet = valueGet; //store native property getter\n\t\t\t\t\tnpt.inputmask.__valueSet = valueSet; //store native property setter\n\t\t\t\t}\n\t\t\t\tnpt.inputmask._valueGet = function (overruleRTL) {\n\t\t\t\t\treturn inputmask.isRTL && overruleRTL !== true ? valueGet.call(this.el).split(\"\").reverse().join(\"\") : valueGet.call(this.el);\n\t\t\t\t};\n\t\t\t\tnpt.inputmask._valueSet = function (value, overruleRTL) { //null check is needed for IE8 => otherwise converts to \"null\"\n\t\t\t\t\tvalueSet.call(this.el, (value === null || value === undefined) ? \"\" : ((overruleRTL !== true && inputmask.isRTL) ? value.split(\"\").reverse().join(\"\") : value));\n\t\t\t\t};\n\n\t\t\t\tif (valueGet === undefined) { //jquery.val fallback\n\t\t\t\t\tvalueGet = function () {\n\t\t\t\t\t\treturn this.value;\n\t\t\t\t\t};\n\t\t\t\t\tvalueSet = function (value) {\n\t\t\t\t\t\tthis.value = value;\n\t\t\t\t\t};\n\t\t\t\t\tpatchValhook(npt.type);\n\t\t\t\t\tinstallNativeValueSetFallback(npt);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (input.tagName.toLowerCase() !== \"textarea\") {\n\t\t\topts.ignorables.push(keyCode.ENTER);\n\t\t}\n\n\t\tvar elementType = input.getAttribute(\"type\");\n\t\tvar isSupported = (input.tagName.toLowerCase() === \"input\" && opts.supportsInputType.includes(elementType)) || input.isContentEditable || input.tagName.toLowerCase() === \"textarea\";\n\t\tif (!isSupported) {\n\t\t\tif (input.tagName.toLowerCase() === \"input\") {\n\t\t\t\tvar el = document.createElement(\"input\");\n\t\t\t\tel.setAttribute(\"type\", elementType);\n\t\t\t\tisSupported = el.type === \"text\"; //apply mask only if the type is not natively supported\n\t\t\t\tel = null;\n\t\t\t} else {\n\t\t\t\tisSupported = \"partial\";\n\t\t\t}\n\t\t}\n\t\tif (isSupported !== false) {\n\t\t\tpatchValueProperty(input);\n\t\t} else {\n\t\t\tinput.inputmask = undefined;\n\t\t}\n\t\treturn isSupported;\n\t}\n\n\t//unbind all events - to make sure that no other mask will interfere when re-masking\n\tEventRuler.off(el);\n\tvar isSupported = isElementTypeSupported(el, opts);\n\tif (isSupported !== false) {\n\t\tinputmask.originalPlaceholder = el.placeholder;\n\n\t\t//read maxlength prop from el\n\t\tinputmask.maxLength = el !== undefined ? el.maxLength : undefined;\n\t\tif (inputmask.maxLength === -1) inputmask.maxLength = undefined;\n\t\tif (\"inputMode\" in el && el.getAttribute(\"inputmode\") === null) {\n\t\t\tel.inputMode = opts.inputmode;\n\t\t\tel.setAttribute(\"inputmode\", opts.inputmode);\n\t\t}\n\n\n\t\tif (isSupported === true) {\n\t\t\topts.showMaskOnFocus = opts.showMaskOnFocus && [\"cc-number\", \"cc-exp\"].indexOf(el.autocomplete) === -1;\n\t\t\tif (iphone) { //selecting the caret shows as a slection on iphone\n\t\t\t\topts.insertModeVisual = false;\n\t\t\t}\n\n\t\t\t//bind events\n\t\t\tEventRuler.on(el, \"submit\", EventHandlers.submitEvent);\n\t\t\tEventRuler.on(el, \"reset\", EventHandlers.resetEvent);\n\t\t\tEventRuler.on(el, \"blur\", EventHandlers.blurEvent);\n\t\t\tEventRuler.on(el, \"focus\", EventHandlers.focusEvent);\n\t\t\tEventRuler.on(el, \"invalid\", EventHandlers.invalidEvent);\n\t\t\tEventRuler.on(el, \"click\", EventHandlers.clickEvent);\n\t\t\tEventRuler.on(el, \"mouseleave\", EventHandlers.mouseleaveEvent);\n\t\t\tEventRuler.on(el, \"mouseenter\", EventHandlers.mouseenterEvent);\n\t\t\tEventRuler.on(el, \"paste\", EventHandlers.pasteEvent);\n\t\t\tEventRuler.on(el, \"cut\", EventHandlers.cutEvent);\n\t\t\tEventRuler.on(el, \"complete\", opts.oncomplete);\n\t\t\tEventRuler.on(el, \"incomplete\", opts.onincomplete);\n\t\t\tEventRuler.on(el, \"cleared\", opts.oncleared);\n\t\t\tif (opts.inputEventOnly !== true) {\n\t\t\t\tEventRuler.on(el, \"keydown\", EventHandlers.keydownEvent);\n\t\t\t\tEventRuler.on(el, \"keypress\", EventHandlers.keypressEvent);\n\t\t\t\tEventRuler.on(el, \"keyup\", EventHandlers.keyupEvent);\n\t\t\t}\n\t\t\tif (mobile || opts.inputEventOnly) {\n\t\t\t\tel.removeAttribute(\"maxLength\");\n\t\t\t}\n\t\t\tEventRuler.on(el, \"input\", EventHandlers.inputFallBackEvent);\n\t\t\tEventRuler.on(el, \"compositionend\", EventHandlers.compositionendEvent);\n\t\t\t// EventRuler.on(el, \"beforeinput\", EventHandlers.beforeInputEvent); //https://github.com/w3c/input-events - to implement\n\t\t}\n\t\tEventRuler.on(el, \"setvalue\", EventHandlers.setValueEvent);\n\n\t\t//apply mask\n\t\tinputmask.undoValue = getBufferTemplate.call(inputmask).join(\"\"); //initialize the buffer and getmasklength\n\t\tvar activeElement = (el.inputmask.shadowRoot || document).activeElement;\n\t\tif (el.inputmask._valueGet(true) !== \"\" || opts.clearMaskOnLostFocus === false || activeElement === el) {\n\t\t\tapplyInputValue(el, el.inputmask._valueGet(true), opts);\n\t\t\tvar buffer = getBuffer.call(inputmask).slice();\n\t\t\tif (isComplete.call(inputmask, buffer) === false) {\n\t\t\t\tif (opts.clearIncomplete) {\n\t\t\t\t\tresetMaskSet.call(inputmask);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (opts.clearMaskOnLostFocus && activeElement !== el) {\n\t\t\t\tif (getLastValidPosition.call(inputmask) === -1) {\n\t\t\t\t\tbuffer = [];\n\t\t\t\t} else {\n\t\t\t\t\tclearOptionalTail.call(inputmask, buffer);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (opts.clearMaskOnLostFocus === false || (opts.showMaskOnFocus && activeElement === el) || el.inputmask._valueGet(true) !== \"\") {\n\t\t\t\twriteBuffer(el, buffer);\n\t\t\t}\n\t\t\tif (activeElement === el) { //position the caret when in focus\n\t\t\t\tcaret.call(inputmask,el, seekNext.call(inputmask, getLastValidPosition.call(inputmask)));\n\t\t\t}\n\t\t}\n\t}\n}","export default function extend() {\n\tlet options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[0] || {},\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === \"boolean\") {\n\t\tdeep = target;\n\n\t\t// Skip the boolean and the target\n\t\ttarget = arguments[i] || {};\n\t\ti++;\n\t}\n\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif (typeof target !== \"object\" && typeof target !== \"function\") {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; i++) {\n\t\t// Only deal with non-null/undefined values\n\t\tif ((options = arguments[i]) != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = target[name];\n\t\t\t\tcopy = options[name];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target === copy) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif (deep && copy && (Object.prototype.toString.call(copy) === \"[object Object]\" || (copyIsArray = Array.isArray(copy)))) {\n\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\tclone = src && Array.isArray(src) ? src : [];\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src && Object.prototype.toString.call(src) === \"[object Object]\" ? src : {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if (copy !== undefined) {\n\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n}","export default typeof window !== \"undefined\" ? window : new (eval(\"require('jsdom').JSDOM\"))(\"\").window;\n\n","export default function (owner, key, value) {\n\tif (value === undefined) {\n\t\treturn owner.__data ? owner.__data[key] : null;\n\t} else {\n\t\towner.__data = owner.__data || {};\n\t\towner.__data[key] = value;\n\t}\n}","import extend from \"./extend\";\nimport window from \"../global/window\";\nimport DependencyLib from \"./inputmask.dependencyLib\";\n\nexport {on, off, trigger, Event};\n\nfunction isValidElement(elem) {\n\treturn elem instanceof Element;\n}\n\nlet Event;\nif (typeof window.CustomEvent === \"function\") {\n\tEvent = window.CustomEvent;\n} else {\n\tEvent = function (event, params) {\n\t\tparams = params || {bubbles: false, cancelable: false, detail: undefined};\n\t\tvar evt = document.createEvent(\"CustomEvent\");\n\t\tevt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n\t\treturn evt;\n\t};\n\tEvent.prototype = window.Event.prototype;\n}\n\n\nfunction on(events, handler) {\n\tfunction addEvent(ev, namespace) {\n\t\t//register domevent\n\t\tif (elem.addEventListener) { // all browsers except IE before version 9\n\t\t\telem.addEventListener(ev, handler, false);\n\t\t} else if (elem.attachEvent) { // IE before version 9\n\t\t\telem.attachEvent(\"on\" + ev, handler);\n\t\t}\n\t\teventRegistry[ev] = eventRegistry[ev] || {};\n\t\teventRegistry[ev][namespace] = eventRegistry[ev][namespace] || [];\n\t\teventRegistry[ev][namespace].push(handler);\n\t}\n\n\tif (isValidElement(this[0])) {\n\t\tvar eventRegistry = this[0].eventRegistry,\n\t\t\telem = this[0];\n\n\n\t\tvar _events = events.split(\" \");\n\t\tfor (var endx = 0; endx < _events.length; endx++) {\n\t\t\tvar nsEvent = _events[endx].split(\".\"),\n\t\t\t\tev = nsEvent[0],\n\t\t\t\tnamespace = nsEvent[1] || \"global\";\n\t\t\taddEvent(ev, namespace);\n\t\t}\n\t}\n\treturn this;\n}\n\nfunction off(events, handler) {\n\tvar eventRegistry, elem;\n\n\tfunction removeEvent(ev, namespace, handler) {\n\t\tif (ev in eventRegistry === true) {\n\t\t\t//unbind to dom events\n\t\t\tif (elem.removeEventListener) { // all browsers except IE before version 9\n\t\t\t\telem.removeEventListener(ev, handler, false);\n\t\t\t} else if (elem.detachEvent) { // IE before version 9\n\t\t\t\telem.detachEvent(\"on\" + ev, handler);\n\t\t\t}\n\t\t\tif (namespace === \"global\") {\n\t\t\t\tfor (var nmsp in eventRegistry[ev]) {\n\t\t\t\t\teventRegistry[ev][nmsp].splice(eventRegistry[ev][nmsp].indexOf(handler), 1);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\teventRegistry[ev][namespace].splice(eventRegistry[ev][namespace].indexOf(handler), 1);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction resolveNamespace(ev, namespace) {\n\t\tvar evts = [],\n\t\t\thndx, hndL;\n\t\tif (ev.length > 0) {\n\t\t\tif (handler === undefined) {\n\t\t\t\tfor (hndx = 0, hndL = eventRegistry[ev][namespace].length; hndx < hndL; hndx++) {\n\t\t\t\t\tevts.push({\n\t\t\t\t\t\tev: ev,\n\t\t\t\t\t\tnamespace: namespace && namespace.length > 0 ? namespace : \"global\",\n\t\t\t\t\t\thandler: eventRegistry[ev][namespace][hndx]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tevts.push({\n\t\t\t\t\tev: ev,\n\t\t\t\t\tnamespace: namespace && namespace.length > 0 ? namespace : \"global\",\n\t\t\t\t\thandler: handler\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (namespace.length > 0) {\n\t\t\tfor (var evNdx in eventRegistry) {\n\t\t\t\tfor (var nmsp in eventRegistry[evNdx]) {\n\t\t\t\t\tif (nmsp === namespace) {\n\t\t\t\t\t\tif (handler === undefined) {\n\t\t\t\t\t\t\tfor (hndx = 0, hndL = eventRegistry[evNdx][nmsp].length; hndx < hndL; hndx++) {\n\t\t\t\t\t\t\t\tevts.push({\n\t\t\t\t\t\t\t\t\tev: evNdx,\n\t\t\t\t\t\t\t\t\tnamespace: nmsp,\n\t\t\t\t\t\t\t\t\thandler: eventRegistry[evNdx][nmsp][hndx]\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tevts.push({\n\t\t\t\t\t\t\t\tev: evNdx,\n\t\t\t\t\t\t\t\tnamespace: nmsp,\n\t\t\t\t\t\t\t\thandler: handler\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn evts;\n\t}\n\n\tif (isValidElement(this[0])) {\n\t\teventRegistry = this[0].eventRegistry;\n\t\telem = this[0];\n\n\n\t\tvar _events = events.split(\" \");\n\t\tfor (var endx = 0; endx < _events.length; endx++) {\n\t\t\tvar nsEvent = _events[endx].split(\".\"),\n\t\t\t\toffEvents = resolveNamespace(nsEvent[0], nsEvent[1]);\n\t\t\tfor (var i = 0, offEventsL = offEvents.length; i < offEventsL; i++) {\n\t\t\t\tremoveEvent(offEvents[i].ev, offEvents[i].namespace, offEvents[i].handler);\n\t\t\t}\n\t\t}\n\t}\n\treturn this;\n}\n\nfunction trigger(events /* , args... */) {\n\tif (isValidElement(this[0])) {\n\t\tvar eventRegistry = this[0].eventRegistry,\n\t\t\telem = this[0];\n\t\tvar _events = typeof events === \"string\" ? events.split(\" \") : [events.type];\n\t\tfor (var endx = 0; endx < _events.length; endx++) {\n\t\t\tvar nsEvent = _events[endx].split(\".\"),\n\t\t\t\tev = nsEvent[0],\n\t\t\t\tnamespace = nsEvent[1] || \"global\";\n\t\t\tif (document !== undefined && namespace === \"global\") {\n\t\t\t\t//trigger domevent\n\t\t\t\tvar evnt, i, params = {\n\t\t\t\t\tbubbles: true,\n\t\t\t\t\tcancelable: true,\n\t\t\t\t\tdetail: arguments[1]\n\t\t\t\t};\n\t\t\t\t// The custom event that will be created\n\t\t\t\tif (document.createEvent) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tevnt = new CustomEvent(ev, params);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tevnt = document.createEvent(\"CustomEvent\");\n\t\t\t\t\t\tevnt.initCustomEvent(ev, params.bubbles, params.cancelable, params.detail);\n\t\t\t\t\t}\n\t\t\t\t\tif (events.type) extend(evnt, events);\n\t\t\t\t\telem.dispatchEvent(evnt);\n\t\t\t\t} else {\n\t\t\t\t\tevnt = document.createEventObject();\n\t\t\t\t\tevnt.eventType = ev;\n\t\t\t\t\tevnt.detail = arguments[1];\n\t\t\t\t\tif (events.type) extend(evnt, events);\n\t\t\t\t\telem.fireEvent(\"on\" + evnt.eventType, evnt);\n\t\t\t\t}\n\t\t\t} else if (eventRegistry[ev] !== undefined) {\n\t\t\t\targuments[0] = arguments[0].type ? arguments[0] : DependencyLib.Event(arguments[0]);\n\t\t\t\targuments[0].detail = arguments.slice(1);\n\t\t\t\tif (namespace === \"global\") {\n\t\t\t\t\tfor (var nmsp in eventRegistry[ev]) {\n\t\t\t\t\t\tfor (i = 0; i < eventRegistry[ev][nmsp].length; i++) {\n\t\t\t\t\t\t\teventRegistry[ev][nmsp][i].apply(elem, arguments);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (i = 0; i < eventRegistry[ev][namespace].length; i++) {\n\t\t\t\t\t\teventRegistry[ev][namespace][i].apply(elem, arguments);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn this;\n}","/*\n Input Mask plugin dependencyLib\n http://github.com/RobinHerbots/jquery.inputmask\n Copyright (c) Robin Herbots\n Licensed under the MIT license\n */\n\nimport extend from \"./extend\";\nimport window from \"../global/window\";\nimport data from \"./data\";\nimport { on, off, trigger, Event} from \"./events\";\n\nconst document = window.document;\n\nfunction DependencyLib(elem) {\n\tif (elem instanceof DependencyLib) {\n\t\treturn elem;\n\t}\n\tif (!(this instanceof DependencyLib)) {\n\t\treturn new DependencyLib(elem);\n\t}\n\tif (elem !== undefined && elem !== null && elem !== window) {\n\t\tthis[0] = elem.nodeName ? elem : (elem[0] !== undefined && elem[0].nodeName ? elem[0] : document.querySelector(elem));\n\t\tif (this[0] !== undefined && this[0] !== null) {\n\t\t\tthis[0].eventRegistry = this[0].eventRegistry || {};\n\t\t}\n\t}\n}\n\nDependencyLib.prototype = {\n\ton: on,\n\toff: off,\n\ttrigger: trigger\n};\n\n//static\nDependencyLib.extend = extend;\nDependencyLib.data = data;\nDependencyLib.Event = Event;\n\nexport default DependencyLib;\n","import $ from \"./dependencyLibs/inputmask.dependencyLib\";\n\nexport {generateMaskSet, analyseMask};\n\nfunction generateMaskSet(opts, nocache) {\n\tvar ms;\n\n\tfunction generateMask(mask, metadata, opts) {\n\t\tvar regexMask = false;\n\t\tif (mask === null || mask === \"\") {\n\t\t\tregexMask = opts.regex !== null;\n\t\t\tif (regexMask) {\n\t\t\t\tmask = opts.regex;\n\t\t\t\tmask = mask.replace(/^(\\^)(.*)(\\$)$/, \"$2\");\n\t\t\t} else {\n\t\t\t\tregexMask = true;\n\t\t\t\tmask = \".*\";\n\t\t\t}\n\t\t}\n\t\tif (mask.length === 1 && opts.greedy === false && opts.repeat !== 0) {\n\t\t\topts.placeholder = \"\";\n\t\t} //hide placeholder with single non-greedy mask\n\t\tif (opts.repeat > 0 || opts.repeat === \"*\" || opts.repeat === \"+\") {\n\t\t\tvar repeatStart = opts.repeat === \"*\" ? 0 : (opts.repeat === \"+\" ? 1 : opts.repeat);\n\t\t\tmask = opts.groupmarker[0] + mask + opts.groupmarker[1] + opts.quantifiermarker[0] + repeatStart + \",\" + opts.repeat + opts.quantifiermarker[1];\n\t\t}\n\n\t\t// console.log(mask);\n\t\tvar masksetDefinition, maskdefKey;\n\t\tmaskdefKey = regexMask ? \"regex_\" + opts.regex : opts.numericInput ? mask.split(\"\").reverse().join(\"\") : mask;\n\t\tif (opts.keepStatic !== false) { //keepstatic modifies the output from the testdefinitions ~ so differentiate in the maskcache\n\t\t\tmaskdefKey = \"ks_\" + maskdefKey;\n\t\t}\n\n\t\tif (Inputmask.prototype.masksCache[maskdefKey] === undefined || nocache === true) {\n\t\t\tmasksetDefinition = {\n\t\t\t\t\"mask\": mask,\n\t\t\t\t\"maskToken\": Inputmask.prototype.analyseMask(mask, regexMask, opts),\n\t\t\t\t\"validPositions\": {},\n\t\t\t\t\"_buffer\": undefined,\n\t\t\t\t\"buffer\": undefined,\n\t\t\t\t\"tests\": {},\n\t\t\t\t\"excludes\": {}, //excluded alternations\n\t\t\t\t\"metadata\": metadata,\n\t\t\t\t\"maskLength\": undefined,\n\t\t\t\t\"jitOffset\": {}\n\t\t\t};\n\t\t\tif (nocache !== true) {\n\t\t\t\tInputmask.prototype.masksCache[maskdefKey] = masksetDefinition;\n\t\t\t\tmasksetDefinition = $.extend(true, {}, Inputmask.prototype.masksCache[maskdefKey]);\n\t\t\t}\n\t\t} else {\n\t\t\tmasksetDefinition = $.extend(true, {}, Inputmask.prototype.masksCache[maskdefKey]);\n\t\t}\n\n\t\treturn masksetDefinition;\n\t}\n\n\tif (typeof opts.mask === \"function\") { //allow mask to be a preprocessing fn - should return a valid mask\n\t\topts.mask = opts.mask(opts);\n\t}\n\tif (Array.isArray(opts.mask)) {\n\t\tif (opts.mask.length > 1) {\n\t\t\tif (opts.keepStatic === null) { //enable by default when passing multiple masks when the option is not explicitly specified\n\t\t\t\topts.keepStatic = true;\n\t\t\t}\n\t\t\tvar altMask = opts.groupmarker[0];\n\t\t\t(opts.isRTL ? opts.mask.reverse() : opts.mask).forEach(function (msk) {\n\t\t\t\tif (altMask.length > 1) {\n\t\t\t\t\taltMask += opts.groupmarker[1] + opts.alternatormarker + opts.groupmarker[0];\n\t\t\t\t}\n\t\t\t\tif (msk.mask !== undefined && typeof msk.mask !== \"function\") {\n\t\t\t\t\taltMask += msk.mask;\n\t\t\t\t} else {\n\t\t\t\t\taltMask += msk;\n\t\t\t\t}\n\t\t\t});\n\t\t\taltMask += opts.groupmarker[1];\n\t\t\t// console.log(altMask);\n\t\t\treturn generateMask(altMask, opts.mask, opts);\n\t\t} else {\n\t\t\topts.mask = opts.mask.pop();\n\t\t}\n\t}\n\tif (opts.keepStatic === null) opts.keepStatic = false;\n\tif (opts.mask && opts.mask.mask !== undefined && typeof opts.mask.mask !== \"function\") {\n\t\tms = generateMask(opts.mask.mask, opts.mask, opts);\n\t} else {\n\t\tms = generateMask(opts.mask, opts.mask, opts);\n\t}\n\n\treturn ms;\n}\n\nfunction analyseMask(mask, regexMask, opts) {\n\tconst tokenizer = /(?:[?*+]|\\{[0-9+*]+(?:,[0-9+*]*)?(?:\\|[0-9+*]*)?\\})|[^.?*+^${[]()|\\\\]+|./g,\n\t\t//Thx to https://github.com/slevithan/regex-colorizer for the regexTokenizer regex\n\t\tregexTokenizer = /\\[\\^?]?(?:[^\\\\\\]]+|\\\\[\\S\\s]?)*]?|\\\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\\S\\s]?)|\\((?:\\?[:=!]?)?|(?:[?*+]|\\{[0-9]+(?:,[0-9]*)?\\})\\??|[^.?*+^${[()|\\\\]+|./g;\n\tvar escaped = false,\n\t\tcurrentToken = new MaskToken(),\n\t\tmatch,\n\t\tm,\n\t\topenenings = [],\n\t\tmaskTokens = [],\n\t\topeningToken,\n\t\tcurrentOpeningToken,\n\t\talternator,\n\t\tlastMatch,\n\t\tcloseRegexGroup = false;\n\n\tfunction MaskToken(isGroup, isOptional, isQuantifier, isAlternator) {\n\t\tthis.matches = [];\n\t\tthis.openGroup = isGroup || false;\n\t\tthis.alternatorGroup = false;\n\t\tthis.isGroup = isGroup || false;\n\t\tthis.isOptional = isOptional || false;\n\t\tthis.isQuantifier = isQuantifier || false;\n\t\tthis.isAlternator = isAlternator || false;\n\t\tthis.quantifier = {\n\t\t\tmin: 1,\n\t\t\tmax: 1\n\t\t};\n\t}\n\n\t//test definition => {fn: RegExp/function, static: true/false optionality: bool, newBlockMarker: bool, casing: null/upper/lower, def: definitionSymbol, placeholder: placeholder, mask: real maskDefinition}\n\tfunction insertTestDefinition(mtoken, element, position) {\n\t\tposition = position !== undefined ? position : mtoken.matches.length;\n\t\tvar prevMatch = mtoken.matches[position - 1];\n\t\tif (regexMask) {\n\t\t\tif (element.indexOf(\"[\") === 0 || (escaped && /\\\\d|\\\\s|\\\\w]/i.test(element)) || element === \".\") {\n\t\t\t\tmtoken.matches.splice(position++, 0, {\n\t\t\t\t\tfn: new RegExp(element, opts.casing ? \"i\" : \"\"),\n\t\t\t\t\tstatic: false,\n\t\t\t\t\toptionality: false,\n\t\t\t\t\tnewBlockMarker: prevMatch === undefined ? \"master\" : prevMatch.def !== element,\n\t\t\t\t\tcasing: null,\n\t\t\t\t\tdef: element,\n\t\t\t\t\tplaceholder: undefined,\n\t\t\t\t\tnativeDef: element\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (escaped) element = element[element.length - 1];\n\t\t\t\telement.split(\"\").forEach(function (lmnt, ndx) {\n\t\t\t\t\tprevMatch = mtoken.matches[position - 1];\n\t\t\t\t\tmtoken.matches.splice(position++, 0, {\n\t\t\t\t\t\tfn: /[a-z]/i.test((opts.staticDefinitionSymbol || lmnt)) ? new RegExp(\"[\" + (opts.staticDefinitionSymbol || lmnt) + \"]\", opts.casing ? \"i\" : \"\") : null,\n\t\t\t\t\t\tstatic: true,\n\t\t\t\t\t\toptionality: false,\n\t\t\t\t\t\tnewBlockMarker: prevMatch === undefined ? \"master\" : (prevMatch.def !== lmnt && prevMatch.static !== true),\n\t\t\t\t\t\tcasing: null,\n\t\t\t\t\t\tdef: opts.staticDefinitionSymbol || lmnt,\n\t\t\t\t\t\tplaceholder: opts.staticDefinitionSymbol !== undefined ? lmnt : undefined,\n\t\t\t\t\t\tnativeDef: (escaped ? \"'\" : \"\") + lmnt\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\tescaped = false;\n\t\t} else {\n\t\t\tvar maskdef = (opts.definitions && opts.definitions[element]) || (opts.usePrototypeDefinitions && Inputmask.prototype.definitions[element]);\n\t\t\tif (maskdef && !escaped) {\n\t\t\t\tmtoken.matches.splice(position++, 0, {\n\t\t\t\t\tfn: maskdef.validator ? typeof maskdef.validator == \"string\" ? new RegExp(maskdef.validator, opts.casing ? \"i\" : \"\") : new function () {\n\t\t\t\t\t\tthis.test = maskdef.validator;\n\t\t\t\t\t} : new RegExp(\".\"),\n\t\t\t\t\tstatic: maskdef.static || false,\n\t\t\t\t\toptionality: false,\n\t\t\t\t\tnewBlockMarker: prevMatch === undefined ? \"master\" : prevMatch.def !== (maskdef.definitionSymbol || element),\n\t\t\t\t\tcasing: maskdef.casing,\n\t\t\t\t\tdef: maskdef.definitionSymbol || element,\n\t\t\t\t\tplaceholder: maskdef.placeholder,\n\t\t\t\t\tnativeDef: element,\n\t\t\t\t\tgenerated: maskdef.generated\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tmtoken.matches.splice(position++, 0, {\n\t\t\t\t\tfn: /[a-z]/i.test((opts.staticDefinitionSymbol || element)) ? new RegExp(\"[\" + (opts.staticDefinitionSymbol || element) + \"]\", opts.casing ? \"i\" : \"\") : null,\n\t\t\t\t\tstatic: true,\n\t\t\t\t\toptionality: false,\n\t\t\t\t\tnewBlockMarker: prevMatch === undefined ? \"master\" : (prevMatch.def !== element && prevMatch.static !== true),\n\t\t\t\t\tcasing: null,\n\t\t\t\t\tdef: opts.staticDefinitionSymbol || element,\n\t\t\t\t\tplaceholder: opts.staticDefinitionSymbol !== undefined ? element : undefined,\n\t\t\t\t\tnativeDef: (escaped ? \"'\" : \"\") + element\n\t\t\t\t});\n\t\t\t\tescaped = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction verifyGroupMarker(maskToken) {\n\t\tif (maskToken && maskToken.matches) {\n\t\t\tmaskToken.matches.forEach(function (token, ndx) {\n\t\t\t\tvar nextToken = maskToken.matches[ndx + 1];\n\t\t\t\tif ((nextToken === undefined || (nextToken.matches === undefined || nextToken.isQuantifier === false)) && token && token.isGroup) { //this is not a group but a normal mask => convert\n\t\t\t\t\ttoken.isGroup = false;\n\t\t\t\t\tif (!regexMask) {\n\t\t\t\t\t\tinsertTestDefinition(token, opts.groupmarker[0], 0);\n\t\t\t\t\t\tif (token.openGroup !== true) {\n\t\t\t\t\t\t\tinsertTestDefinition(token, opts.groupmarker[1]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tverifyGroupMarker(token);\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction defaultCase() {\n\t\tif (openenings.length > 0) {\n\t\t\tcurrentOpeningToken = openenings[openenings.length - 1];\n\t\t\tinsertTestDefinition(currentOpeningToken, m);\n\t\t\tif (currentOpeningToken.isAlternator) { //handle alternator a | b case\n\t\t\t\talternator = openenings.pop();\n\t\t\t\tfor (var mndx = 0; mndx < alternator.matches.length; mndx++) {\n\t\t\t\t\tif (alternator.matches[mndx].isGroup) alternator.matches[mndx].isGroup = false; //don't mark alternate groups as group\n\t\t\t\t}\n\t\t\t\tif (openenings.length > 0) {\n\t\t\t\t\tcurrentOpeningToken = openenings[openenings.length - 1];\n\t\t\t\t\tcurrentOpeningToken.matches.push(alternator);\n\t\t\t\t} else {\n\t\t\t\t\tcurrentToken.matches.push(alternator);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tinsertTestDefinition(currentToken, m);\n\t\t}\n\t}\n\n\tfunction reverseTokens(maskToken) {\n\t\tfunction reverseStatic(st) {\n\t\t\tif (st === opts.optionalmarker[0]) {\n\t\t\t\tst = opts.optionalmarker[1];\n\t\t\t} else if (st === opts.optionalmarker[1]) {\n\t\t\t\tst = opts.optionalmarker[0];\n\t\t\t} else if (st === opts.groupmarker[0]) {\n\t\t\t\tst = opts.groupmarker[1];\n\t\t\t} else if (st === opts.groupmarker[1]) st = opts.groupmarker[0];\n\n\t\t\treturn st;\n\t\t}\n\n\t\tmaskToken.matches = maskToken.matches.reverse();\n\t\tfor (var match in maskToken.matches) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(maskToken.matches, match)) {\n\t\t\t\tvar intMatch = parseInt(match);\n\t\t\t\tif (maskToken.matches[match].isQuantifier && maskToken.matches[intMatch + 1] && maskToken.matches[intMatch + 1].isGroup) { //reposition quantifier\n\t\t\t\t\tvar qt = maskToken.matches[match];\n\t\t\t\t\tmaskToken.matches.splice(match, 1);\n\t\t\t\t\tmaskToken.matches.splice(intMatch + 1, 0, qt);\n\t\t\t\t}\n\t\t\t\tif (maskToken.matches[match].matches !== undefined) {\n\t\t\t\t\tmaskToken.matches[match] = reverseTokens(maskToken.matches[match]);\n\t\t\t\t} else {\n\t\t\t\t\tmaskToken.matches[match] = reverseStatic(maskToken.matches[match]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn maskToken;\n\t}\n\n\tfunction groupify(matches) {\n\t\tvar groupToken = new MaskToken(true);\n\t\tgroupToken.openGroup = false;\n\t\tgroupToken.matches = matches;\n\t\treturn groupToken;\n\t}\n\n\tfunction closeGroup() {\n\t\t// Group closing\n\t\topeningToken = openenings.pop();\n\t\topeningToken.openGroup = false; //mark group as complete\n\t\tif (openingToken !== undefined) {\n\t\t\tif (openenings.length > 0) {\n\t\t\t\tcurrentOpeningToken = openenings[openenings.length - 1];\n\t\t\t\tcurrentOpeningToken.matches.push(openingToken);\n\t\t\t\tif (currentOpeningToken.isAlternator) { //handle alternator (a) | (b) case\n\t\t\t\t\talternator = openenings.pop();\n\t\t\t\t\tfor (var mndx = 0; mndx < alternator.matches.length; mndx++) {\n\t\t\t\t\t\talternator.matches[mndx].isGroup = false; //don't mark alternate groups as group\n\t\t\t\t\t\talternator.matches[mndx].alternatorGroup = false;\n\t\t\t\t\t}\n\t\t\t\t\tif (openenings.length > 0) {\n\t\t\t\t\t\tcurrentOpeningToken = openenings[openenings.length - 1];\n\t\t\t\t\t\tcurrentOpeningToken.matches.push(alternator);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrentToken.matches.push(alternator);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcurrentToken.matches.push(openingToken);\n\t\t\t}\n\t\t} else {\n\t\t\tdefaultCase();\n\t\t}\n\t}\n\n\tfunction groupQuantifier(matches) {\n\t\tvar lastMatch = matches.pop();\n\t\tif (lastMatch.isQuantifier) {\n\t\t\tlastMatch = groupify([matches.pop(), lastMatch]);\n\t\t}\n\t\treturn lastMatch;\n\t}\n\n\tif (regexMask) {\n\t\topts.optionalmarker[0] = undefined;\n\t\topts.optionalmarker[1] = undefined;\n\t}\n\twhile ((match = regexMask ? regexTokenizer.exec(mask) : tokenizer.exec(mask))) {\n\t\tm = match[0];\n\n\t\tif (regexMask) {\n\t\t\tswitch (m.charAt(0)) {\n\t\t\t\t//Quantifier\n\t\t\t\tcase \"?\":\n\t\t\t\t\tm = \"{0,1}\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"+\":\n\t\t\t\tcase \"*\":\n\t\t\t\t\tm = \"{\" + m + \"}\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"|\":\n\t\t\t\t\t//regex mask alternator  ex: [01][0-9]|2[0-3] => ([01][0-9]|2[0-3])\n\t\t\t\t\tif (openenings.length === 0) { //wrap the mask in a group to form a regex alternator  ([01][0-9]|2[0-3])\n\t\t\t\t\t\tvar altRegexGroup = groupify(currentToken.matches);\n\t\t\t\t\t\taltRegexGroup.openGroup = true;\n\t\t\t\t\t\topenenings.push(altRegexGroup);\n\t\t\t\t\t\tcurrentToken.matches = [];\n\t\t\t\t\t\tcloseRegexGroup = true;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (escaped) {\n\t\t\tdefaultCase();\n\t\t\tcontinue;\n\t\t}\n\t\tswitch (m.charAt(0)) {\n\t\t\tcase \"$\":\n\t\t\tcase \"^\":\n\t\t\t\t//ignore beginswith and endswith as in masking this makes no point\n\t\t\t\tif (!regexMask) {\n\t\t\t\t\tdefaultCase();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"(?=\": //lookahead\n\t\t\t\tbreak;\n\t\t\tcase \"(?!\": //negative lookahead\n\t\t\t\tbreak;\n\t\t\tcase \"(?<=\": //lookbehind\n\t\t\t\tbreak;\n\t\t\tcase \"(?<!\": //negative lookbehind\n\t\t\t\tbreak;\n\t\t\tcase opts.escapeChar:\n\t\t\t\tescaped = true;\n\t\t\t\tif (regexMask) {\n\t\t\t\t\tdefaultCase();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t// optional closing\n\t\t\tcase opts.optionalmarker[1]:\n\t\t\tcase opts.groupmarker[1]:\n\t\t\t\tcloseGroup();\n\t\t\t\tbreak;\n\t\t\tcase opts.optionalmarker[0]:\n\t\t\t\t// optional opening\n\t\t\t\topenenings.push(new MaskToken(false, true));\n\t\t\t\tbreak;\n\t\t\tcase opts.groupmarker[0]:\n\t\t\t\t// Group opening\n\t\t\t\topenenings.push(new MaskToken(true));\n\t\t\t\tbreak;\n\t\t\tcase opts.quantifiermarker[0]:\n\t\t\t\t//Quantifier\n\t\t\t\tvar quantifier = new MaskToken(false, false, true);\n\n\t\t\t\tm = m.replace(/[{}]/g, \"\");\n\t\t\t\tvar mqj = m.split(\"|\"),\n\t\t\t\t\tmq = mqj[0].split(\",\"),\n\t\t\t\t\tmq0 = isNaN(mq[0]) ? mq[0] : parseInt(mq[0]),\n\t\t\t\t\tmq1 = mq.length === 1 ? mq0 : (isNaN(mq[1]) ? mq[1] : parseInt(mq[1]));\n\t\t\t\tif (mq0 === \"*\" || mq0 === \"+\") {\n\t\t\t\t\tmq0 = mq1 === \"*\" ? 0 : 1;\n\t\t\t\t}\n\t\t\t\tquantifier.quantifier = {\n\t\t\t\t\tmin: mq0,\n\t\t\t\t\tmax: mq1,\n\t\t\t\t\tjit: mqj[1]\n\t\t\t\t};\n\t\t\t\tvar matches = openenings.length > 0 ? openenings[openenings.length - 1].matches : currentToken.matches;\n\t\t\t\tmatch = matches.pop();\n\t\t\t\tif (match.isAlternator) { //handle quantifier in an alternation [0-9]{2}|[0-9]{3}\n\t\t\t\t\tmatches.push(match); //push back alternator\n\t\t\t\t\tmatches = match.matches; //remap target matches\n\t\t\t\t\tvar groupToken = new MaskToken(true);\n\t\t\t\t\tvar tmpMatch = matches.pop();\n\t\t\t\t\tmatches.push(groupToken); //push the group\n\t\t\t\t\tmatches = groupToken.matches;\n\t\t\t\t\tmatch = tmpMatch;\n\t\t\t\t}\n\t\t\t\tif (!match.isGroup) {\n\t\t\t\t\t// if (regexMask && match.fn === null) { //why is this needed???\n\t\t\t\t\t//     if (match.def === \".\") match.fn = new RegExp(match.def, opts.casing ? \"i\" : \"\");\n\t\t\t\t\t// }\n\n\t\t\t\t\tmatch = groupify([match]);\n\t\t\t\t}\n\t\t\t\tmatches.push(match);\n\t\t\t\tmatches.push(quantifier);\n\n\t\t\t\tbreak;\n\t\t\tcase opts.alternatormarker:\n\n\n\t\t\t\tif (openenings.length > 0) {\n\t\t\t\t\tcurrentOpeningToken = openenings[openenings.length - 1];\n\t\t\t\t\tvar subToken = currentOpeningToken.matches[currentOpeningToken.matches.length - 1];\n\t\t\t\t\tif (currentOpeningToken.openGroup && //regexp alt syntax\n\t\t\t\t\t\t(subToken.matches === undefined || (subToken.isGroup === false && subToken.isAlternator === false))) { //alternations within group\n\t\t\t\t\t\tlastMatch = openenings.pop();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlastMatch = groupQuantifier(currentOpeningToken.matches);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlastMatch = groupQuantifier(currentToken.matches);\n\t\t\t\t}\n\t\t\t\tif (lastMatch.isAlternator) {\n\t\t\t\t\topenenings.push(lastMatch);\n\t\t\t\t} else {\n\t\t\t\t\tif (lastMatch.alternatorGroup) {\n\t\t\t\t\t\talternator = openenings.pop();\n\t\t\t\t\t\tlastMatch.alternatorGroup = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\talternator = new MaskToken(false, false, false, true);\n\t\t\t\t\t}\n\t\t\t\t\talternator.matches.push(lastMatch);\n\t\t\t\t\topenenings.push(alternator);\n\t\t\t\t\tif (lastMatch.openGroup) { //regexp alt syntax\n\t\t\t\t\t\tlastMatch.openGroup = false;\n\t\t\t\t\t\tvar alternatorGroup = new MaskToken(true);\n\t\t\t\t\t\talternatorGroup.alternatorGroup = true;\n\t\t\t\t\t\topenenings.push(alternatorGroup);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tdefaultCase();\n\t\t}\n\t}\n\n\tif (closeRegexGroup) closeGroup();\n\n\twhile (openenings.length > 0) {\n\t\topeningToken = openenings.pop();\n\t\tcurrentToken.matches.push(openingToken);\n\t}\n\tif (currentToken.matches.length > 0) {\n\t\tverifyGroupMarker(currentToken);\n\t\tmaskTokens.push(currentToken);\n\t}\n\n\tif (opts.numericInput || opts.isRTL) {\n\t\treverseTokens(maskTokens[0]);\n\t}\n\t// console.log(JSON.stringify(maskTokens));\n\treturn maskTokens;\n}\n","export default {\n\t\"9\": { //\\uFF11-\\uFF19 #1606\n\t\tvalidator: \"[0-9\\uFF10-\\uFF19]\",\n\t\tdefinitionSymbol: \"*\"\n\t},\n\t\"a\": { //\\u0410-\\u044F\\u0401\\u0451\\u00C0-\\u00FF\\u00B5 #76\n\t\tvalidator: \"[A-Za-z\\u0410-\\u044F\\u0401\\u0451\\u00C0-\\u00FF\\u00B5]\",\n\t\tdefinitionSymbol: \"*\"\n\t},\n\t\"*\": {\n\t\tvalidator: \"[0-9\\uFF10-\\uFF19A-Za-z\\u0410-\\u044F\\u0401\\u0451\\u00C0-\\u00FF\\u00B5]\"\n\t}\n}","export default {\n\t_maxTestPos: 500,\n\tplaceholder: \"_\",\n\toptionalmarker: [\"[\", \"]\"],\n\tquantifiermarker: [\"{\", \"}\"],\n\tgroupmarker: [\"(\", \")\"],\n\talternatormarker: \"|\",\n\tescapeChar: \"\\\\\",\n\tmask: null, //needs tobe null instead of undefined as the extend method does not consider props with the undefined value\n\tregex: null, //regular expression as a mask\n\toncomplete: () => {\n\t}, //executes when the mask is complete\n\tonincomplete: () => {\n\t}, //executes when the mask is incomplete and focus is lost\n\toncleared: () => {\n\t}, //executes when the mask is cleared\n\trepeat: 0, //repetitions of the mask: * ~ forever, otherwise specify an integer\n\tgreedy: false, //true: allocated buffer for the mask and repetitions - false: allocate only if needed\n\tautoUnmask: false, //automatically unmask when retrieving the value with $.fn.val or value if the browser supports __lookupGetter__ or getOwnPropertyDescriptor\n\tremoveMaskOnSubmit: false, //remove the mask before submitting the form.\n\tclearMaskOnLostFocus: true,\n\tinsertMode: true, //insert the input or overwrite the input\n\tinsertModeVisual: true, //show selected caret when insertmode = false\n\tclearIncomplete: false, //clear the incomplete input on blur\n\talias: null,\n\tonKeyDown: () => {\n\t}, //callback to implement autocomplete on certain keys for example. args => event, buffer, caretPos, opts\n\tonBeforeMask: null, //executes before masking the initial value to allow preprocessing of the initial value.\targs => initialValue, opts => return processedValue\n\tonBeforePaste: function (pastedValue, opts) {\n\t\treturn typeof opts.onBeforeMask === \"function\" ? opts.onBeforeMask.call(this, pastedValue, opts) : pastedValue;\n\t}, //executes before masking the pasted value to allow preprocessing of the pasted value.\targs => pastedValue, opts => return processedValue\n\tonBeforeWrite: null, //executes before writing to the masked element. args => event, opts\n\tonUnMask: null, //executes after unmasking to allow postprocessing of the unmaskedvalue.\targs => maskedValue, unmaskedValue, opts\n\tshowMaskOnFocus: true, //show the mask-placeholder when the input has focus\n\tshowMaskOnHover: true, //show the mask-placeholder when hovering the empty input\n\tonKeyValidation: () => {\n\t}, //executes on every key-press with the result of isValid. Params: key, result, opts\n\tskipOptionalPartCharacter: \" \", //a character which can be used to skip an optional part of a mask\n\tnumericInput: false, //numericInput input direction style (input shifts to the left while holding the caret position)\n\trightAlign: false, //align to the right\n\tundoOnEscape: true, //pressing escape reverts the value to the value before focus\n\t//numeric basic properties\n\tradixPoint: \"\", //\".\", // | \",\"\n\t_radixDance: false, //dance around the radixPoint\n\tgroupSeparator: \"\", //\",\", // | \".\"\n\t//numeric basic properties\n\tkeepStatic: null, //try to keep the mask static while typing. Decisions to alter the mask will be posponed if possible\n\tpositionCaretOnTab: true, //when enabled the caret position is set after the latest valid position on TAB\n\ttabThrough: false, //allows for tabbing through the different parts of the masked field\n\tsupportsInputType: [\"text\", \"tel\", \"url\", \"password\", \"search\"], //list with the supported input types\n\t//specify keyCodes which should not be considered in the keypress event, otherwise the preventDefault will stop their default behavior especially in FF\n\tignorables: [8, 9, 19, 27, 33, 34, 35, 36, 37, 38, 39, 40, 45, 46, 93, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 0, 229],\n\tisComplete: null, //override for isComplete - args => buffer, opts - return true || false\n\tpreValidation: null, //hook to preValidate the input.  Usefull for validating regardless the definition.\targs => buffer, pos, char, isSelection, opts, maskset, caretPos, strict => return true/false/command object\n\tpostValidation: null, //hook to postValidate the result from isValid.\tUsefull for validating the entry as a whole.\targs => buffer, pos, c, currentResult, opts, maskset, strict, fromCheckval => return true/false/json\n\tstaticDefinitionSymbol: undefined, //specify a definitionSymbol for static content, used to make matches for alternators\n\tjitMasking: false, //just in time masking ~ only mask while typing, can n (number), true or false\n\tnullable: true, //return nothing instead of the buffertemplate when the user hasn't entered anything.\n\tinputEventOnly: false, //dev option - testing inputfallback behavior\n\tnoValuePatching: false, //disable value property patching\n\tpositionCaretOnClick: \"lvp\", //none, lvp (based on the last valid position (default), radixFocus (position caret to radixpoint on initial click), select (select the whole input), ignore (ignore the click and continue the mask)\n\tcasing: null, //mask-level casing. Options: null, \"upper\", \"lower\" or \"title\" or callback args => elem, test, pos, validPositions return charValue\n\tinputmode: \"text\", //specify the inputmode\n\timportDataAttributes: true, //import data-inputmask attributes\n\tshiftPositions: true, //shift position of the mask entries on entry and deletion.\n\tusePrototypeDefinitions: true //use the default defined definitions from the prototype\n};","/*\n * Input Mask Core\n * http://github.com/RobinHerbots/jquery.inputmask\n * Copyright (c) Robin Herbots\n * Licensed under the MIT license\n */\nimport \"./getPrototypeOf\";\nimport {mask} from \"./mask\";\nimport $ from \"./dependencyLibs/inputmask.dependencyLib\";\nimport window from \"./global/window\";\nimport {generateMaskSet, analyseMask} from \"./mask-lexer\";\nimport {getMaskTemplate} from \"./validation-tests\";\nimport {determineLastRequiredPosition, getBuffer, getBufferTemplate, isMask} from \"./positioning\";\nimport {isComplete} from \"./validation\";\nimport {checkVal, unmaskedvalue} from \"./inputHandling\";\nimport {EventRuler} from \"./eventruler\";\nimport definitions from \"./definitions\";\nimport defaults from \"./defaults\";\n\nconst document = window.document, dataKey = \"_inputmask_opts\";\n\nfunction Inputmask(alias, options, internal) {\n\t//allow instanciating without new\n\tif (!(this instanceof Inputmask)) {\n\t\treturn new Inputmask(alias, options, internal);\n\t}\n\n\tthis.dependencyLib = $;\n\tthis.el = undefined;\n\tthis.events = {};\n\tthis.maskset = undefined;\n\n\tif (internal !== true) {\n\t\t//init options\n\t\tif (Object.prototype.toString.call(alias) === \"[object Object]\") {\n\t\t\toptions = alias;\n\t\t} else {\n\t\t\toptions = options || {};\n\t\t\tif (alias) options.alias = alias;\n\t\t}\n\t\tthis.opts = $.extend(true, {}, this.defaults, options);\n\t\tthis.noMasksCache = options && options.definitions !== undefined;\n\t\tthis.userOptions = options || {}; //user passed options\n\t\tresolveAlias(this.opts.alias, options, this.opts);\n\t}\n\n\t//maskscope properties\n\tthis.refreshValue = false; //indicate a refresh from the inputvalue is needed (form.reset)\n\tthis.undoValue = undefined;\n\tthis.$el = undefined;\n\tthis.skipKeyPressEvent = false; //Safari 5.1.x - modal dialog fires keypress twice workaround\n\tthis.skipInputEvent = false; //skip when triggered from within inputmask\n\tthis.validationEvent = false;\n\tthis.ignorable = false;\n\tthis.maxLength;\n\tthis.mouseEnter = false;\n\tthis.originalPlaceholder = undefined; //needed for FF\n\tthis.isComposing = false; //keydowncode == 229  compositionevent fallback\n}\n\nInputmask.prototype = {\n\tdataAttribute: \"data-inputmask\", //data attribute prefix used for attribute binding\n\t//options default\n\tdefaults: defaults,\n\tdefinitions: definitions,\n\taliases: {}, //aliases definitions\n\tmasksCache: {},\n\tget isRTL() {\n\t\treturn this.opts.isRTL || this.opts.numericInput;\n\t},\n\tmask: function (elems) {\n\t\tvar that = this;\n\t\tif (typeof elems === \"string\") {\n\t\t\telems = document.getElementById(elems) || document.querySelectorAll(elems);\n\t\t}\n\t\telems = elems.nodeName ? [elems] : elems;\n\t\telems.forEach(function (el, ndx) {\n\t\t\tvar scopedOpts = $.extend(true, {}, that.opts);\n\t\t\tif (importAttributeOptions(el, scopedOpts, $.extend(true, {}, that.userOptions), that.dataAttribute)) {\n\t\t\t\tvar maskset = generateMaskSet(scopedOpts, that.noMasksCache);\n\t\t\t\tif (maskset !== undefined) {\n\t\t\t\t\tif (el.inputmask !== undefined) {\n\t\t\t\t\t\tel.inputmask.opts.autoUnmask = true; //force autounmasking when remasking\n\t\t\t\t\t\tel.inputmask.remove();\n\t\t\t\t\t}\n\t\t\t\t\t//store inputmask instance on the input with element reference\n\t\t\t\t\tel.inputmask = new Inputmask(undefined, undefined, true);\n\t\t\t\t\tel.inputmask.opts = scopedOpts;\n\t\t\t\t\tel.inputmask.noMasksCache = that.noMasksCache;\n\t\t\t\t\tel.inputmask.userOptions = $.extend(true, {}, that.userOptions);\n\t\t\t\t\t// el.inputmask.isRTL = scopedOpts.isRTL || scopedOpts.numericInput;\n\t\t\t\t\tel.inputmask.el = el;\n\t\t\t\t\tel.inputmask.$el = $(el);\n\t\t\t\t\tel.inputmask.maskset = maskset;\n\n\t\t\t\t\t$.data(el, dataKey, that.userOptions);\n\t\t\t\t\tmask.call(el.inputmask);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn elems && elems[0] ? (elems[0].inputmask || this) : this;\n\t},\n\toption: function (options, noremask) { //set extra options || retrieve value of a current option\n\t\tif (typeof options === \"string\") {\n\t\t\treturn this.opts[options];\n\t\t} else if (typeof options === \"object\") {\n\t\t\t$.extend(this.userOptions, options); //user passed options\n\t\t\t//remask\n\t\t\tif (this.el && noremask !== true) {\n\t\t\t\tthis.mask(this.el);\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t},\n\tunmaskedvalue: function (value) {\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\tif (this.el === undefined || value !== undefined) {\n\t\t\tvar valueBuffer = (typeof this.opts.onBeforeMask === \"function\" ? (this.opts.onBeforeMask.call(this, value, this.opts) || value) : value).split(\"\");\n\t\t\tcheckVal.call(this, undefined, false, false, valueBuffer);\n\t\t\tif (typeof this.opts.onBeforeWrite === \"function\") this.opts.onBeforeWrite.call(this, undefined, getBuffer.call(this), 0, this.opts);\n\t\t}\n\t\treturn unmaskedvalue.call(this, this.el);\n\t},\n\tremove: function () {\n\t\tif (this.el) {\n\t\t\t$.data(this.el, dataKey, null); //invalidate\n\t\t\t//writeout the value\n\t\t\tvar cv = this.opts.autoUnmask ? unmaskedvalue(this.el) : this._valueGet(this.opts.autoUnmask);\n\t\t\tif (cv !== getBufferTemplate.call(this).join(\"\")) this._valueSet(cv, this.opts.autoUnmask); else this._valueSet(\"\");\n\t\t\t//unbind all events\n\t\t\tEventRuler.off(this.el);\n\n\t\t\t//restore the value property\n\t\t\tvar valueProperty;\n\t\t\tif (Object.getOwnPropertyDescriptor && Object.getPrototypeOf) {\n\t\t\t\tvalueProperty = Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this.el), \"value\");\n\t\t\t\tif (valueProperty) {\n\t\t\t\t\tif (this.__valueGet) {\n\t\t\t\t\t\tObject.defineProperty(this.el, \"value\", {\n\t\t\t\t\t\t\tget: this.__valueGet,\n\t\t\t\t\t\t\tset: this.__valueSet,\n\t\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (document.__lookupGetter__ && this.el.__lookupGetter__(\"value\")) {\n\t\t\t\tif (this.__valueGet) {\n\t\t\t\t\tthis.el.__defineGetter__(\"value\", this.__valueGet);\n\t\t\t\t\tthis.el.__defineSetter__(\"value\", this.__valueSet);\n\t\t\t\t}\n\t\t\t}\n\t\t\t//clear data\n\t\t\tthis.el.inputmask = undefined;\n\t\t}\n\t\treturn this.el;\n\t},\n\tgetemptymask: function () { //return the default (empty) mask value, usefull for setting the default value in validation\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\treturn getBufferTemplate.call(this).join(\"\");\n\t},\n\thasMaskedValue: function () { //check wheter the returned value is masked or not; currently only works reliable when using jquery.val fn to retrieve the value\n\t\treturn !this.opts.autoUnmask;\n\t},\n\tisComplete: function () {\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\treturn isComplete.call(this, getBuffer.call(this));\n\t},\n\tgetmetadata: function () { //return mask metadata if exists\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\tif (Array.isArray(this.maskset.metadata)) {\n\t\t\tvar maskTarget = getMaskTemplate.call(this, true, 0, false).join(\"\");\n\t\t\tthis.maskset.metadata.forEach(function (mtdt) {\n\t\t\t\tif (mtdt.mask === maskTarget) {\n\t\t\t\t\tmaskTarget = mtdt;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t});\n\t\t\treturn maskTarget;\n\t\t}\n\t\treturn this.maskset.metadata;\n\t},\n\tisValid: function (value) {\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\tif (value) {\n\t\t\tvar valueBuffer = (typeof this.opts.onBeforeMask === \"function\" ? (this.opts.onBeforeMask.call(this, value, this.opts) || value) : value).split(\"\");\n\t\t\tcheckVal.call(this, undefined, true, false, valueBuffer);\n\t\t} else {\n\t\t\tvalue = this.isRTL ? getBuffer.call(this).slice().reverse().join(\"\") : getBuffer.call(this).join(\"\");\n\t\t}\n\t\tvar buffer = getBuffer.call(this);\n\t\tvar rl = determineLastRequiredPosition.call(this),\n\t\t\tlmib = buffer.length - 1;\n\t\tfor (; lmib > rl; lmib--) {\n\t\t\tif (isMask.call(this, lmib)) break;\n\t\t}\n\t\tbuffer.splice(rl, lmib + 1 - rl);\n\n\t\treturn isComplete.call(this, buffer) && value === (this.isRTL ? getBuffer.call(this).slice().reverse().join(\"\") : getBuffer.call(this).join(\"\"));\n\n\t},\n\tformat: function (value, metadata) {\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\tlet valueBuffer = (typeof this.opts.onBeforeMask === \"function\" ? (this.opts.onBeforeMask.call(this, value, this.opts) || value) : value).split(\"\");\n\t\tcheckVal.call(this, undefined, true, false, valueBuffer);\n\t\tlet formattedValue = this.isRTL ? getBuffer.call(this).slice().reverse().join(\"\") : getBuffer.call(this).join(\"\");\n\t\treturn metadata ? {\n\t\t\tvalue: formattedValue,\n\t\t\tmetadata: this.getmetadata()\n\t\t} : formattedValue;\n\t},\n\tsetValue: function (value) {\n\t\tif (this.el) {\n\t\t\t$(this.el).trigger(\"setvalue\", [value]);\n\t\t}\n\t},\n\tanalyseMask: analyseMask\n};\n\nfunction resolveAlias(aliasStr, options, opts) {\n\tvar aliasDefinition = Inputmask.prototype.aliases[aliasStr];\n\tif (aliasDefinition) {\n\t\tif (aliasDefinition.alias) resolveAlias(aliasDefinition.alias, undefined, opts); //alias is another alias\n\t\t$.extend(true, opts, aliasDefinition); //merge alias definition in the options\n\t\t$.extend(true, opts, options); //reapply extra given options\n\t\treturn true;\n\t} else //alias not found - try as mask\n\tif (opts.mask === null) {\n\t\topts.mask = aliasStr;\n\t}\n\n\treturn false;\n}\n\nfunction importAttributeOptions(npt, opts, userOptions, dataAttribute) {\n\tfunction importOption(option, optionData) {\n\t\tconst attrOption = dataAttribute === \"\" ? option : dataAttribute + \"-\" + option;\n\t\toptionData = optionData !== undefined ? optionData : npt.getAttribute(attrOption);\n\t\tif (optionData !== null) {\n\t\t\tif (typeof optionData === \"string\") {\n\t\t\t\tif (option.indexOf(\"on\") === 0) {\n\t\t\t\t\toptionData = window[optionData];\n\t\t\t\t}//get function definition\n\t\t\t\telse if (optionData === \"false\") {\n\t\t\t\t\toptionData = false;\n\t\t\t\t} else if (optionData === \"true\") optionData = true;\n\t\t\t}\n\t\t\tuserOptions[option] = optionData;\n\t\t}\n\t}\n\n\tif (opts.importDataAttributes === true) {\n\t\tvar attrOptions = npt.getAttribute(dataAttribute), option, dataoptions, optionData, p;\n\n\t\tif (attrOptions && attrOptions !== \"\") {\n\t\t\tattrOptions = attrOptions.replace(/'/g, \"\\\"\");\n\t\t\tdataoptions = JSON.parse(\"{\" + attrOptions + \"}\");\n\t\t}\n\n\t\t//resolve aliases\n\t\tif (dataoptions) { //pickup alias from dataAttribute\n\t\t\toptionData = undefined;\n\t\t\tfor (p in dataoptions) {\n\t\t\t\tif (p.toLowerCase() === \"alias\") {\n\t\t\t\t\toptionData = dataoptions[p];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\timportOption(\"alias\", optionData); //pickup alias from dataAttribute-alias\n\t\tif (userOptions.alias) {\n\t\t\tresolveAlias(userOptions.alias, userOptions, opts);\n\t\t}\n\n\t\tfor (option in opts) {\n\t\t\tif (dataoptions) {\n\t\t\t\toptionData = undefined;\n\t\t\t\tfor (p in dataoptions) {\n\t\t\t\t\tif (p.toLowerCase() === option.toLowerCase()) {\n\t\t\t\t\t\toptionData = dataoptions[p];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\timportOption(option, optionData);\n\t\t}\n\t}\n\t$.extend(true, opts, userOptions);\n\n\t//handle dir=rtl\n\tif (npt.dir === \"rtl\" || opts.rightAlign) {\n\t\tnpt.style.textAlign = \"right\";\n\t}\n\n\tif (npt.dir === \"rtl\" || opts.numericInput) {\n\t\tnpt.dir = \"ltr\";\n\t\tnpt.removeAttribute(\"dir\");\n\t\topts.isRTL = true;\n\t}\n\n\treturn Object.keys(userOptions).length;\n}\n\n//apply defaults, definitions, aliases\nInputmask.extendDefaults = function (options) {\n\t$.extend(true, Inputmask.prototype.defaults, options);\n};\nInputmask.extendDefinitions = function (definition) {\n\t$.extend(true, Inputmask.prototype.definitions, definition);\n};\nInputmask.extendAliases = function (alias) {\n\t$.extend(true, Inputmask.prototype.aliases, alias);\n};\n//static fn on inputmask\nInputmask.format = function (value, options, metadata) {\n\treturn Inputmask(options).format(value, metadata);\n};\nInputmask.unmask = function (value, options) {\n\treturn Inputmask(options).unmaskedvalue(value);\n};\nInputmask.isValid = function (value, options) {\n\treturn Inputmask(options).isValid(value);\n};\nInputmask.remove = function (elems) {\n\tif (typeof elems === \"string\") {\n\t\telems = document.getElementById(elems) || document.querySelectorAll(elems);\n\t}\n\telems = elems.nodeName ? [elems] : elems;\n\telems.forEach(function (el) {\n\t\tif (el.inputmask) el.inputmask.remove();\n\t});\n};\nInputmask.setValue = function (elems, value) {\n\tif (typeof elems === \"string\") {\n\t\telems = document.getElementById(elems) || document.querySelectorAll(elems);\n\t}\n\telems = elems.nodeName ? [elems] : elems;\n\telems.forEach(function (el) {\n\t\tif (el.inputmask) el.inputmask.setValue(value); else $(el).trigger(\"setvalue\", [value]);\n\t});\n};\n\nInputmask.dependencyLib = $;\n\n//make inputmask available\nwindow.Inputmask = Inputmask;\nexport default Inputmask;\n","import errors from \"../modules/Errors\";\r\nimport Inputmask from \"inputmask/lib/inputmask\";\r\n\r\nclass KbfForm {\r\n\r\n    constructor(formConfig, lang) {\r\n\r\n        let $ = window.$;\r\n\r\n        this.formConfig = formConfig;\r\n        this.formName = this.formConfig.formName;\r\n        this.formElement = document.forms[this.formName];\r\n        this.lang = lang || 'pl';\r\n\r\n        // Sprawdz czy formularz o podanej nazwie istnieje\r\n        if (!this.formElement) throw errors.formNotFound(this.formName);\r\n\r\n        this.$formElement = $(this.formElement);\r\n\r\n        // Error message\r\n        this.$errorMessageElement = $('.kbf-error-message');\r\n\r\n        // Sprawdz czy walidator istnieje\r\n        if (!$.fn.validate) throw errors.noValidator();\r\n\r\n        // Domyslna konfiguracja walidatora\r\n        this.defaultValidatorConfig = {\r\n\r\n            ignore: [],\r\n\r\n            // Umiejscowienie komunikatu o bledzie\r\n            errorPlacement: function ($label, $element) {\r\n                $label.addClass('kbf-error-message');\r\n\r\n                let $column = $element.closest('[class*=\"col\"]');\r\n\r\n                if ($column.length > 0) {\r\n                    $column.append($label);\r\n                } else $label.insertAfter($element);\r\n            }\r\n        };\r\n\r\n        this.init();\r\n        this.addListeners();\r\n\r\n    }\r\n\r\n    init() {\r\n\r\n        let instance = this;\r\n        this.inputmask = new Inputmask();\r\n\r\n        // Ustaw maski\r\n        Array.from(this.formElement.elements).forEach(function (formElement) {\r\n                instance.inputmask.mask(formElement)\r\n\r\n        })\r\n\r\n    }\r\n\r\n    addListeners() {\r\n\r\n    }\r\n\r\n    validate() {\r\n\r\n        this.$formElement.validate({ ...this.defaultValidatorConfig, ...this.formConfig });\r\n        this.handleErrorMessage();\r\n    }\r\n\r\n    // Ustawia error message jezeli istnieje\r\n    handleErrorMessage() {\r\n\r\n        this.formIsValid = this.$formElement.valid();\r\n\r\n        // Wyswietl komunikat o bledzie jeeli pole komunikatu istnieje\r\n        if (this.$errorMessageElement.length > 0) {\r\n            if(this.formIsValid && !this.$errorMessageElement.hasClass('d-none')) this.$errorMessageElement.addClass('d-none');\r\n            if(!this.formIsValid && this.$errorMessageElement.hasClass('d-none')) this.$errorMessageElement.removeClass('d-none');\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default KbfForm;","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","import errors from \"../modules/Errors\";\r\n\r\nclass KbfPreloaderButton extends EventTarget {\r\n\r\n    constructor(selector, auto= true) {\r\n\r\n        super();\r\n        let $ = window.$;\r\n\r\n        this.$preloaderButton = $(selector);\r\n\r\n        // Emituj wyjatek gdy nie podano selektora albo element nie zostal znaleziony\r\n        if (!selector || this.$preloaderButton.length === 0) throw errors.elementNotFound(selector);\r\n\r\n        this.auto = auto; // Czy automatycznie dodawac listener\r\n\r\n        this.init();\r\n        this.addListeners();\r\n\r\n    }\r\n\r\n    init() {\r\n\r\n        // Aliasy\r\n        this.on = this.addEventListener;\r\n        this.off = this.removeEventListener;\r\n        this.emit = this.dispatchEvent;\r\n\r\n        this.buttonCurrentContents = this.$preloaderButton.html(); // Aktualna zawartosc\r\n\r\n    }\r\n\r\n    triggerStart(buttonElement) {\r\n\r\n        let buttonGeometry = buttonElement.getBoundingClientRect(); // Aktualna geometria\r\n\r\n        let $buttonElement = $(buttonElement);\r\n        let bgColor;\r\n\r\n        $buttonElement.on('click', function () {\r\n            bgColor = getComputedStyle(buttonElement, ':hover').backgroundColor;\r\n        })\r\n\r\n\r\n        this.$preloaderButton.trigger({\r\n            type: 'start-preloader',\r\n            buttonGeometry,\r\n            bgColor\r\n        });\r\n\r\n        this.emit(new CustomEvent('click'));\r\n    }\r\n\r\n    // Startuje preloader\r\n    startPreloader(buttonElement, buttonGeometry, bgColor) {\r\n\r\n        let $ = window.$;\r\n\r\n        let $buttonElement = $(buttonElement);\r\n\r\n        $buttonElement.attr('disabled', 'disabled');\r\n        $buttonElement.css('width', buttonGeometry.width + 'px');\r\n        $buttonElement.css('height', buttonGeometry.height + 'px');\r\n        $buttonElement.css('padding', 0);\r\n        $buttonElement.css('background-color', bgColor);\r\n        $buttonElement.html(KbfPreloaderButton.preloaderMarkup);\r\n\r\n    }\r\n\r\n    // Zatrzymuje preloader\r\n    stopPreloader() {\r\n        this.$preloaderButton.html(this.buttonCurrentContents).attr('style', '');\r\n        this.$preloaderButton.removeAttr('disabled');\r\n    }\r\n\r\n    addListeners() {\r\n\r\n        let instance = this;\r\n\r\n        // Rejestruj handler warunkowo\r\n        if (this.auto) {\r\n            this.$preloaderButton.on('click', function () {\r\n               instance.triggerStart(this);\r\n            });\r\n        }\r\n\r\n        this.$preloaderButton.on('start-preloader', function (e) {\r\n            instance.startPreloader(this, e.buttonGeometry, e.bgColor);\r\n        })\r\n\r\n    }\r\n}\r\n\r\nKbfPreloaderButton.preloaderMarkup = '<div class=\"kbf-button-preloader\"><div id=\"dots\"><span></span><span></span><span></span></div></div>';\r\nexport default KbfPreloaderButton;","class KbfFooterTop {\r\n\r\n    constructor() {\r\n\r\n        this.init();\r\n        this.addListeners();\r\n    }\r\n\r\n    init() {\r\n\r\n        this.$footerTop = $('.footer-top');\r\n        this.$showFooterTop = $('#showFooterTop');\r\n\r\n    }\r\n\r\n    addListeners() {\r\n\r\n        let instance = this;\r\n\r\n        this.$showFooterTop.click(function (e) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            instance.$footerTop.toggleClass('show-footer-top');\r\n        });\r\n\r\n        this.$footerTop.click(function (e) {\r\n            e.stopPropagation();\r\n        })\r\n\r\n        $(window).click(function () {\r\n            instance.$footerTop.removeClass('show-footer-top');\r\n        })\r\n\r\n        $(window).scroll(function () {\r\n            instance.$footerTop.removeClass('show-footer-top');\r\n        });\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default KbfFooterTop;","import KbfForm from \"../../components/KbfForm\";\r\nimport KbfPreloaderButton from \"../../components/KbfPreloaderButton\";\r\nimport KbfFooterTop from \"../../components/KbfFooterTop\";\r\n\r\nclass App extends KbfForm {\r\n\r\n    constructor() {\r\n        super({\r\n\r\n            formName: 'change-password',\r\n            rules: {\r\n                pass: {\r\n                    minlength: 8\r\n                },\r\n                'pass-new': {\r\n                    minlength: 8,\r\n                },\r\n                'pass-repeat': {\r\n                    minlength: 8,\r\n                    equalTo: \"#pass-new\"\r\n                }\r\n            },\r\n\r\n            messages: {\r\n                pass: {\r\n                    minlength: 'Haso musi posiada minimum 8 znakw.'\r\n                },\r\n                'pass-new': {\r\n                    minlength: 'Haso musi posiada minimum 8 znakw.',\r\n                },\r\n                'pass-repeat': {\r\n                    minlength: 'Haso musi posiada minimum 8 znakw.',\r\n                    equalTo: 'Hasa nie mog si rni.'\r\n                }\r\n            }\r\n\r\n\r\n        }, 'pl');\r\n        this.init();\r\n        this.addListeners();\r\n    }\r\n\r\n    init() {\r\n\r\n        this.formElement = $('form[name=\"change-password\"]');\r\n        this.$submitButton = $('.submit-button');\r\n        new KbfPreloaderButton('.back-button');\r\n        new KbfFooterTop();\r\n\r\n    }\r\n\r\n    addListeners() {\r\n\r\n        let instance = this;\r\n        this.$submitButton.on('click', function (e) {\r\n\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n\r\n            instance.validate();\r\n            if (instance.formIsValid) {\r\n             instance.formElement.submit();\r\n            }\r\n\r\n\r\n        })\r\n    }\r\n\r\n    sendConfirmationLink() {\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default App;","import App from './components/App';\r\n\r\n(function($){\r\n\r\n    $(document).ready(function () {\r\n\r\n        new App();\r\n\r\n    })\r\n\r\n})(window.$)"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_inherits","subClass","superClass","create","constructor","value","_typeof","obj","Symbol","iterator","_assertThisInitialized","self","ReferenceError","_possibleConstructorReturn","call","assertThisInitialized","_getPrototypeOf","getPrototypeOf","_defineProperty","errors","elementNotFound","selector","Error","formNotFound","formName","argumentNotFound","argumentName","substring","toUpperCase","noValidator","noGeoCoords","object","getLocator","tst","align","locator","alternation","undefined","mloc","getDecisionTaker","join","decisionTaker","split","toString","getPlaceholder","pos","test","returnPL","inputmask","opts","maskset","getTest","match","placeholder","static","validPositions","tests","getTests","staticAlternations","prevTest","def","optionality","optionalQuantifier","fn","push","charAt","getMaskTemplate","baseOnInput","minimalPos","includeMode","noJit","clearOptionalTail","greedy","maskTemplate","ndxIntlzr","testPos","jitRenderStatic","generatedInput","input","skipOptionalPartCharacter","determineTestTemplate","slice","nativeDef","getTestTemplate","jitMasking","jit","groupSeparator","isFinite","maxLength","pop","maskLength","tstPs","altTest","targetLocator","tstLocator","closest","bestMatch","ndx","distance","Math","abs","newBlockMarker","$","dependencyLib","el","maskTokens","maskToken","ndxInitializer","matches","insertStop","latestMatch","cacheDependency","resolveTestFromToken","loopNdx","quantifierRecurse","handleMatch","isFirstMatch","tokenGroup","firstMatch","indexOf","every","isQuantifier","hasOwnProperty","resolveNdxInitializer","alternateNdx","targetAlternation","indexPos","lmnt","ndxPos","bestMatchAltIndex","isSubsetOf","source","expand","pattern","expanded","start","end","l","charCodeAt","String","fromCharCode","regex","RegExp","replace","staticCanMatchDefinition","setMergeLocators","targetMatch","altMatch","alternationNdx","shouldMerge","locNdx","keys","isSameLevel","_maxTestPos","mask","reverse","isGroup","isOptional","optionalToken","mtchsNdx","forEach","mtch","isAlternator","alternateToken","malternateMatches","maltMatches","currentMatches","loopNdxCnt","altIndex","shift","currentPos","ndxInitializerClone","altIndexArr","amndx","excludes","altIndexArrClone","exl","excludeSet","splice","keepStatic","parseInt","unMatchedAlternation","concat","ndx1","dropMatch","ndx2","altMatch2","includes","userOptions","qt","qndx","isNaN","quantifier","max","min","jitOffset","tndx","mergeLocators","Array","isArray","previousPos","cd","mtndx","casing","extend","ua","window","navigator","userAgent","ie","mobile","iemobile","iphone","applyInputValue","refreshValue","onBeforeMask","checkVal","undoValue","getBuffer","clearMaskOnLostFocus","clearIncomplete","_valueGet","getBufferTemplate","getLastValidPosition","_valueSet","buffer","template","writeOut","strict","nptvl","initiatingEvent","inputValue","charCodes","initialNdx","result","isTemplateMatch","targetTemplate","seekNext","charCodeNdx","isMask","nextPos","caretPos","begin","resetMaskSet","radixPoint","determineNewCaretPosition","staticMatches","prevCaretPos","charCode","isValid","keypress","Event","which","lvp","EventHandlers","keypressEvent","isRTL","forwardPosition","writeBuffer","sndx","validPos","nextValid","isComplete","nextSndx","type","HandleNativePlaceholder","npt","nptValue","removeAttribute","unmaskedvalue","umValue","vps","pndx","metadata","unmaskedValue","onUnMask","bufferValue","event","triggerEvents","onBeforeWrite","refreshFromBuffer","refresh","caret","keyCode","DELETE","BACKSPACE","$input","nptVal","skipInputEvent","trigger","setTimeout","keydownEvent","e","k","kdResult","onKeyDown","BACKSPACE_SAFARI","ctrlKey","X","preventDefault","handleRemove","END","PAGE_DOWN","shiftKey","HOME","PAGE_UP","undoOnEscape","ESCAPE","altKey","tabThrough","TAB","seekPrevious","insertModeVisual","insertMode","RIGHT","LEFT","translatePosition","ignorable","ignorables","checkval","metaKey","ENTER","location","c","writeOutBuffer","valResult","numericInput","onKeyValidation","keyupEvent","isComposing","KEY_229","$el","pasteEvent","tempValue","valueBeforeCaret","substr","valueAfterCaret","clipboardData","getData","pasteValue","onBeforePaste","inputFallBackEvent","ieMobileHandler","inputChar","iv","analyseChanges","frontPart","backPart","frontBufferPart","backBufferPart","fpl","bpl","bl","action","data","marker","unshift","newBuffer","oldBuffer","changes","shadowRoot","document","activeElement","focus","entry","keydown","compositionendEvent","setValueEvent","detail","arguments","focusEvent","showMaskOnFocus","positionCaretOnTab","mouseEnter","clickEvent","apply","invalidEvent","validationEvent","mouseleaveEvent","originalPlaceholder","tabbed","newCaretPosition","cutEvent","clipData","setData","execCommand","blurEvent","mouseenterEvent","showMaskOnHover","submitEvent","removeMaskOnSubmit","resetEvent","alternate","maskPos","fromIsValid","rAltPos","selection","validPsClone","tstClone","lastAlt","isValidRslt","returnRslt","altPos","prevAltPos","decisionPos","lAltPos","validInputs","resultPos","elem","toLowerCase","posBefore","SPACE","args","checkAlternationMatch","altArr1","altArr2","na","altArrC","isMatch","naArr","naNdx","alndx","pend","offset","revalidateMask","newPos","repeat","complete","lrp","determineLastRequiredPosition","aml","fromAlternate","validateOnly","fromCheckval","isSelection","posObj","processCommandObject","commandObj","remove","sort","a","b","insert","rewritePosition","_isValid","position","rslt","validatedPos","positionsClone","preValidation","currentPosValid","skip","nPos","snPos","trackbackPositions","postValidation","postResult","endResult","positionCanMatchDefinition","testDefinition","valid","shiftPositions","bffr","originalPos","fillOnly","ps","vp","np","cvpInput","validTest","IsEnclosedStatic","valids","posMatch","prevMatch","nextMatch","j","t","canMatch","notranslate","isDelete","range","scrollCalc","ownerDocument","defaultView","getComputedStyle","currentStyle","fontSize","scrollLeft","scrollWidth","setSelectionRange","getSelection","createRange","firstChild","textNode","createTextNode","appendChild","setStart","setEnd","collapse","sel","removeAllRanges","addRange","createTextRange","moveEnd","moveStart","select","selectionStart","selectionEnd","getRangeAt","commonAncestorContainer","parentNode","startOffset","endOffset","duplicate","text","returnDefinition","positions","lvTest","lvTestAlt","selectedCaret","doRadixFocus","clickPos","digits","radixPos","positionCaretOnClick","clickPosition","lvclickPosition","lastPosition","tt","noCache","_buffer","closestTo","before","after","posNdx","psNdx","fuzzy","testTemplate","testPlaceHolder","soft","newBlock","EventRuler","on","eventName","eventHandler","ev","originalEvent","that","nodeName","imOpts","off","Inputmask","disabled","readOnly","inputType","skipKeyPressEvent","blur","returnVal","stopPropagation","events","form","bind","evArr","isElementTypeSupported","patchValueProperty","valueGet","valueSet","patchValhook","valHooks","inputmaskpatch","valhookGet","get","valhookSet","set","autoUnmask","nullable","getter","setter","installNativeValueSetFallback","__valueGet","noValuePatching","getOwnPropertyDescriptor","valueProperty","tagName","textContent","__lookupGetter__","__lookupSetter__","__defineGetter__","__defineSetter__","__valueSet","overruleRTL","elementType","getAttribute","isSupported","supportsInputType","isContentEditable","createElement","setAttribute","inputMode","inputmode","autocomplete","oncomplete","onincomplete","oncleared","inputEventOnly","options","name","src","copy","copyIsArray","clone","deep","eval","owner","__data","isValidElement","Element","CustomEvent","params","bubbles","cancelable","evt","createEvent","initCustomEvent","handler","addEvent","namespace","addEventListener","attachEvent","eventRegistry","_events","endx","nsEvent","removeEvent","removeEventListener","detachEvent","nmsp","resolveNamespace","evts","hndx","hndL","evNdx","offEvents","offEventsL","evnt","dispatchEvent","createEventObject","eventType","fireEvent","DependencyLib","querySelector","generateMaskSet","nocache","ms","generateMask","regexMask","repeatStart","groupmarker","quantifiermarker","masksetDefinition","maskdefKey","masksCache","analyseMask","altMask","msk","alternatormarker","tokenizer","regexTokenizer","escaped","currentToken","MaskToken","m","openenings","openingToken","currentOpeningToken","alternator","lastMatch","closeRegexGroup","openGroup","alternatorGroup","insertTestDefinition","mtoken","element","staticDefinitionSymbol","maskdef","definitions","usePrototypeDefinitions","validator","definitionSymbol","generated","verifyGroupMarker","token","nextToken","defaultCase","mndx","reverseTokens","reverseStatic","st","optionalmarker","intMatch","groupify","groupToken","closeGroup","groupQuantifier","exec","altRegexGroup","escapeChar","mqj","mq","mq0","mq1","tmpMatch","subToken","alias","pastedValue","rightAlign","_radixDance","importDataAttributes","dataKey","internal","defaults","noMasksCache","resolveAlias","dataAttribute","aliases","elems","getElementById","querySelectorAll","scopedOpts","importAttributeOptions","option","noremask","valueBuffer","cv","getemptymask","hasMaskedValue","getmetadata","maskTarget","mtdt","rl","lmib","format","formattedValue","setValue","aliasStr","aliasDefinition","importOption","optionData","attrOption","attrOptions","dataoptions","JSON","parse","dir","style","textAlign","extendDefaults","extendDefinitions","definition","extendAliases","unmask","KbfForm","formConfig","lang","formElement","forms","$formElement","$errorMessageElement","validate","defaultValidatorConfig","ignore","errorPlacement","$label","$element","addClass","$column","append","insertAfter","init","addListeners","from","elements","handleErrorMessage","formIsValid","hasClass","removeClass","_isNativeFunction","Function","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","_construct","Parent","Class","isNativeReflectConstruct","_wrapNativeSuper","_cache","Map","isNativeFunction","has","Wrapper","KbfPreloaderButton","auto","$preloaderButton","emit","buttonCurrentContents","html","buttonElement","buttonGeometry","getBoundingClientRect","$buttonElement","bgColor","backgroundColor","attr","css","width","height","preloaderMarkup","removeAttr","triggerStart","startPreloader","EventTarget","KbfFooterTop","$footerTop","$showFooterTop","click","toggleClass","scroll","App","rules","pass","minlength","equalTo","messages","$submitButton","submit","ready"],"mappings":"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"}