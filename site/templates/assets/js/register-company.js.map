{"version":3,"file":"register-company.js","sources":["../../js/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../../js/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../js/node_modules/@babel/runtime/helpers/esm/createClass.js","../../js/node_modules/@babel/runtime/helpers/esm/typeof.js","../../js/node_modules/regenerator-runtime/runtime.js","../../js/node_modules/@babel/runtime/regenerator/index.js","../../js/modules/Errors.js","../../js/node_modules/inputmask/lib/getPrototypeOf.js","../../js/node_modules/inputmask/lib/validation-tests.js","../../js/node_modules/inputmask/lib/environment.js","../../js/node_modules/inputmask/lib/inputHandling.js","../../js/node_modules/inputmask/lib/eventhandlers.js","../../js/node_modules/inputmask/lib/validation.js","../../js/node_modules/inputmask/lib/positioning.js","../../js/node_modules/inputmask/lib/eventruler.js","../../js/node_modules/inputmask/lib/mask.js","../../js/node_modules/inputmask/lib/dependencyLibs/extend.js","../../js/node_modules/inputmask/lib/global/window.js","../../js/node_modules/inputmask/lib/dependencyLibs/data.js","../../js/node_modules/inputmask/lib/dependencyLibs/events.js","../../js/node_modules/inputmask/lib/dependencyLibs/inputmask.dependencyLib.js","../../js/node_modules/inputmask/lib/mask-lexer.js","../../js/node_modules/inputmask/lib/definitions.js","../../js/node_modules/inputmask/lib/defaults.js","../../js/node_modules/inputmask/lib/inputmask.js","../../js/components/KbfStepper.js","../../js/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../../js/node_modules/@babel/runtime/helpers/esm/inherits.js","../../js/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../../js/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../../js/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../../js/node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","../../js/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../../js/node_modules/@babel/runtime/helpers/esm/construct.js","../../js/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","../../js/components/KbfPreloaderButton.js","../../js/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../../js/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../../js/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../../js/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../../js/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../../js/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../../js/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../js/node_modules/perfect-scrollbar/src/lib/css.js","../../js/components/KbfDropdown.js","../../js/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../../js/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../../js/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../../js/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../../js/config/config.js","../../js/functions/library.js","../../js/components/KbfIndustrySwitcher.js","../../js/components/KbfTagify.js","../../js/register-company/components/App.js","../../js/register-company/entry.js"],"sourcesContent":["function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","module.exports = require(\"regenerator-runtime\");\n","let errors = {};\r\n\r\n// Wyjatki\r\n\r\n// Nie znaleziono elementu DOM\r\nerrors.elementNotFound = function (selector) {\r\n    return new Error(`Cannot find elements with selector \"${selector}\"`);\r\n}\r\n\r\n// Nie znaleziono formularza\r\nerrors.formNotFound = function (formName) {\r\n    return new Error(`Cannot find form with name \"${formName}\"`);\r\n}\r\n\r\n// Nie podano argumentu\r\nerrors.argumentNotFound = function (argumentName) {\r\n    return new Error(`${argumentName.substring(0, 1).toUpperCase() + argumentName.substring(1)} argument cannot be empty`);\r\n}\r\n\r\n// Brak walidatora dla formularza\r\nerrors.noValidator = function () {\r\n    return new Error(`No JQuery validator plugin`);\r\n}\r\n\r\n// Nie podano wspolrzednych geograficznych\r\nerrors.noGeoCoords = function () {\r\n    return new Error(`You must provide geo coordinates.`);\r\n}\r\n\r\nexport default errors;","if (typeof Object.getPrototypeOf !== \"function\") {\n\tObject.getPrototypeOf = typeof \"test\".__proto__ === \"object\" ? function (object) {\n\t\treturn object.__proto__;\n\t} : function (object) {\n\t\treturn object.constructor.prototype;\n\t};\n}","export {determineTestTemplate, getDecisionTaker, getMaskTemplate, getPlaceholder, getTest, getTests, getTestTemplate};\n\nfunction getLocator(tst, align) { //need to align the locators to be correct\n\tvar locator = (tst.alternation != undefined ? tst.mloc[getDecisionTaker(tst)] : tst.locator).join(\"\");\n\tif (locator !== \"\") while (locator.length < align) locator += \"0\";\n\treturn locator;\n}\n\nfunction getDecisionTaker(tst) {\n\tvar decisionTaker = tst.locator[tst.alternation];\n\tif (typeof decisionTaker == \"string\" && decisionTaker.length > 0) { //no decision taken ~ take first one as decider\n\t\tdecisionTaker = decisionTaker.split(\",\")[0];\n\t}\n\treturn decisionTaker !== undefined ? decisionTaker.toString() : \"\";\n}\n\n//tobe put on prototype?\nfunction getPlaceholder(pos, test, returnPL) {\n\tconst inputmask = this,\n\t\topts = this.opts,\n\t\tmaskset = this.maskset;\n\n\ttest = test || getTest.call(inputmask, pos).match;\n\tif (test.placeholder !== undefined || returnPL === true) {\n\t\treturn typeof test.placeholder === \"function\" ? test.placeholder(opts) : test.placeholder;\n\t} else if (test.static === true) {\n\t\tif (pos > -1 && maskset.validPositions[pos] === undefined) {\n\t\t\tvar tests = getTests.call(inputmask, pos),\n\t\t\t\tstaticAlternations = [],\n\t\t\t\tprevTest;\n\t\t\tif (tests.length > 1 + (tests[tests.length - 1].match.def === \"\" ? 1 : 0)) {\n\t\t\t\tfor (var i = 0; i < tests.length; i++) {\n\t\t\t\t\tif (tests[i].match.def !== \"\" && tests[i].match.optionality !== true && tests[i].match.optionalQuantifier !== true &&\n\t\t\t\t\t\t(tests[i].match.static === true || (prevTest === undefined || tests[i].match.fn.test(prevTest.match.def, maskset, pos, true, opts) !== false))) {\n\t\t\t\t\t\tstaticAlternations.push(tests[i]);\n\t\t\t\t\t\tif (tests[i].match.static === true) prevTest = tests[i];\n\t\t\t\t\t\tif (staticAlternations.length > 1) {\n\t\t\t\t\t\t\tif (/[0-9a-bA-Z]/.test(staticAlternations[0].match.def)) {\n\t\t\t\t\t\t\t\treturn opts.placeholder.charAt(pos % opts.placeholder.length);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn test.def;\n\t}\n\n\treturn opts.placeholder.charAt(pos % opts.placeholder.length);\n}\n\n//tobe put on prototype?\nfunction getMaskTemplate(baseOnInput, minimalPos, includeMode, noJit, clearOptionalTail) {\n\t//includeMode true => input, undefined => placeholder, false => mask\n\n\tvar inputmask = this,\n\t\topts = this.opts,\n\t\tmaskset = this.maskset;\n\n\n\tvar greedy = opts.greedy;\n\tif (clearOptionalTail) opts.greedy = false;\n\tminimalPos = minimalPos || 0;\n\tvar maskTemplate = [],\n\t\tndxIntlzr, pos = 0,\n\t\ttest, testPos, jitRenderStatic;\n\tdo {\n\t\tif (baseOnInput === true && maskset.validPositions[pos]) {\n\t\t\ttestPos = (clearOptionalTail && maskset.validPositions[pos].match.optionality === true\n\t\t\t\t&& maskset.validPositions[pos + 1] === undefined\n\t\t\t\t&& (maskset.validPositions[pos].generatedInput === true || (maskset.validPositions[pos].input == opts.skipOptionalPartCharacter && pos > 0)))\n\t\t\t\t? determineTestTemplate.call(inputmask, pos, getTests.call(inputmask, pos, ndxIntlzr, pos - 1))\n\t\t\t\t: maskset.validPositions[pos];\n\t\t\ttest = testPos.match;\n\t\t\tndxIntlzr = testPos.locator.slice();\n\t\t\tmaskTemplate.push(includeMode === true ? testPos.input : includeMode === false ? test.nativeDef : getPlaceholder.call(inputmask, pos, test));\n\t\t} else {\n\t\t\ttestPos = getTestTemplate.call(inputmask, pos, ndxIntlzr, pos - 1);\n\t\t\ttest = testPos.match;\n\t\t\tndxIntlzr = testPos.locator.slice();\n\t\t\tvar jitMasking = noJit === true ? false : (opts.jitMasking !== false ? opts.jitMasking : test.jit);\n\t\t\t//check for groupSeparator is a hack for the numerics as we don't want the render of the groupSeparator beforehand\n\t\t\tjitRenderStatic = (jitRenderStatic && test.static && test.def !== opts.groupSeparator && test.fn === null) || (maskset.validPositions[pos - 1] && test.static && test.def !== opts.groupSeparator && test.fn === null);\n\t\t\tif (jitRenderStatic || jitMasking === false || jitMasking === undefined /*|| pos < lvp*/ || (typeof jitMasking === \"number\" && isFinite(jitMasking) && jitMasking > pos)) {\n\t\t\t\tmaskTemplate.push(includeMode === false ? test.nativeDef : getPlaceholder.call(inputmask, pos, test));\n\t\t\t} else {\n\t\t\t\tjitRenderStatic = false;\n\t\t\t}\n\t\t}\n\n\t\tpos++;\n\t} while ((inputmask.maxLength === undefined || pos < inputmask.maxLength) && (test.static !== true || test.def !== \"\") || minimalPos > pos);\n\tif (maskTemplate[maskTemplate.length - 1] === \"\") {\n\t\tmaskTemplate.pop(); //drop the last one which is empty\n\t}\n\tif (includeMode !== false || //do not alter the masklength when just retrieving the maskdefinition\n\t\tmaskset.maskLength === undefined) //just make sure the maskLength gets initialized in all cases (needed for isValid)\n\t{\n\t\tmaskset.maskLength = pos - 1;\n\t}\n\n\topts.greedy = greedy;\n\treturn maskTemplate;\n}\n\n//tobe put on prototype?\nfunction getTestTemplate(pos, ndxIntlzr, tstPs) {\n\tvar inputmask = this,\n\t\tmaskset = this.maskset;\n\n\treturn maskset.validPositions[pos] || determineTestTemplate.call(inputmask, pos, getTests.call(inputmask, pos, ndxIntlzr ? ndxIntlzr.slice() : ndxIntlzr, tstPs));\n}\n\n//tobe put on prototype?\nfunction determineTestTemplate(pos, tests) {\n\tvar inputmask = this,\n\t\topts = this.opts;\n\n\tpos = pos > 0 ? pos - 1 : 0;\n\tvar altTest = getTest.call(inputmask, pos), targetLocator = getLocator(altTest), tstLocator, closest, bestMatch;\n\tfor (var ndx = 0; ndx < tests.length; ndx++) { //find best matching\n\t\tvar tst = tests[ndx];\n\t\ttstLocator = getLocator(tst, targetLocator.length);\n\t\tvar distance = Math.abs(tstLocator - targetLocator);\n\t\tif (closest === undefined\n\t\t\t|| (tstLocator !== \"\" && distance < closest)\n\t\t\t|| (bestMatch && !opts.greedy && bestMatch.match.optionality && bestMatch.match.newBlockMarker === \"master\" && (!tst.match.optionality || !tst.match.newBlockMarker))\n\t\t\t|| (bestMatch && bestMatch.match.optionalQuantifier && !tst.match.optionalQuantifier)) {\n\t\t\tclosest = distance;\n\t\t\tbestMatch = tst;\n\t\t}\n\t}\n\n\treturn bestMatch;\n}\n\n//tobe put on prototype?\nfunction getTest(pos, tests) {\n\tvar inputmask = this,\n\t\tmaskset = this.maskset;\n\n\tif (maskset.validPositions[pos]) {\n\t\treturn maskset.validPositions[pos];\n\t}\n\treturn (tests || getTests.call(inputmask, pos))[0];\n}\n\n//tobe put on prototype?\nfunction getTests(pos, ndxIntlzr, tstPs) {\n\tvar inputmask = this,\n\t\t$ = this.dependencyLib,\n\t\tmaskset = this.maskset,\n\t\topts = this.opts,\n\t\tel = this.el,\n\t\tmaskTokens = maskset.maskToken,\n\t\ttestPos = ndxIntlzr ? tstPs : 0,\n\t\tndxInitializer = ndxIntlzr ? ndxIntlzr.slice() : [0],\n\t\tmatches = [],\n\t\tinsertStop = false,\n\t\tlatestMatch,\n\t\tcacheDependency = ndxIntlzr ? ndxIntlzr.join(\"\") : \"\";\n\n\tfunction resolveTestFromToken(maskToken, ndxInitializer, loopNdx, quantifierRecurse) { //ndxInitializer contains a set of indexes to speedup searches in the mtokens\n\t\tfunction handleMatch(match, loopNdx, quantifierRecurse) {\n\t\t\tfunction isFirstMatch(latestMatch, tokenGroup) {\n\t\t\t\tvar firstMatch = tokenGroup.matches.indexOf(latestMatch) === 0;\n\t\t\t\tif (!firstMatch) {\n\t\t\t\t\ttokenGroup.matches.every(function (match, ndx) {\n\t\t\t\t\t\tif (match.isQuantifier === true) {\n\t\t\t\t\t\t\tfirstMatch = isFirstMatch(latestMatch, tokenGroup.matches[ndx - 1]);\n\t\t\t\t\t\t} else if (Object.prototype.hasOwnProperty.call(match, \"matches\")) firstMatch = isFirstMatch(latestMatch, match);\n\t\t\t\t\t\tif (firstMatch) return false;\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn firstMatch;\n\t\t\t}\n\n\t\t\tfunction resolveNdxInitializer(pos, alternateNdx, targetAlternation) {\n\t\t\t\tvar bestMatch, indexPos;\n\n\t\t\t\tif (maskset.tests[pos] || maskset.validPositions[pos]) {\n\t\t\t\t\t(maskset.tests[pos] || [maskset.validPositions[pos]]).every(function (lmnt, ndx) {\n\t\t\t\t\t\tif (lmnt.mloc[alternateNdx]) {\n\t\t\t\t\t\t\tbestMatch = lmnt;\n\t\t\t\t\t\t\treturn false; //break\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar alternation = targetAlternation !== undefined ? targetAlternation : lmnt.alternation,\n\t\t\t\t\t\t\tndxPos = lmnt.locator[alternation] !== undefined ? lmnt.locator[alternation].toString().indexOf(alternateNdx) : -1;\n\t\t\t\t\t\tif ((indexPos === undefined || ndxPos < indexPos) && ndxPos !== -1) {\n\t\t\t\t\t\t\tbestMatch = lmnt;\n\t\t\t\t\t\t\tindexPos = ndxPos;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (bestMatch) {\n\t\t\t\t\tvar bestMatchAltIndex = bestMatch.locator[bestMatch.alternation];\n\t\t\t\t\tvar locator = bestMatch.mloc[alternateNdx] || bestMatch.mloc[bestMatchAltIndex] || bestMatch.locator;\n\t\t\t\t\treturn locator.slice((targetAlternation !== undefined ? targetAlternation : bestMatch.alternation) + 1);\n\t\t\t\t} else {\n\t\t\t\t\treturn targetAlternation !== undefined ? resolveNdxInitializer(pos, alternateNdx) : undefined;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction isSubsetOf(source, target) {\n\t\t\t\tfunction expand(pattern) {\n\t\t\t\t\tvar expanded = [], start = -1, end;\n\t\t\t\t\tfor (var i = 0, l = pattern.length; i < l; i++) {\n\t\t\t\t\t\tif (pattern.charAt(i) === \"-\") {\n\t\t\t\t\t\t\tend = pattern.charCodeAt(i + 1);\n\t\t\t\t\t\t\twhile (++start < end) expanded.push(String.fromCharCode(start));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstart = pattern.charCodeAt(i);\n\t\t\t\t\t\t\texpanded.push(pattern.charAt(i));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn expanded.join(\"\");\n\t\t\t\t}\n\n\t\t\t\tif (source.match.def === target.match.nativeDef) return true;\n\t\t\t\tif ((opts.regex || (source.match.fn instanceof RegExp && target.match.fn instanceof RegExp)) && source.match.static !== true && target.match.static !== true) { //is regex a subset\n\t\t\t\t\treturn expand(target.match.fn.toString().replace(/[[\\]/]/g, \"\")).indexOf(expand(source.match.fn.toString().replace(/[[\\]/]/g, \"\"))) !== -1;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tfunction staticCanMatchDefinition(source, target) {\n\t\t\t\treturn source.match.static === true && target.match.static !== true ? target.match.fn.test(source.match.def, maskset, pos, false, opts, false) : false;\n\t\t\t}\n\n\t\t\t//mergelocators for retrieving the correct locator match when merging\n\t\t\tfunction setMergeLocators(targetMatch, altMatch) {\n\t\t\t\tvar alternationNdx = targetMatch.alternation,\n\t\t\t\t\tshouldMerge = altMatch === undefined || (alternationNdx === altMatch.alternation &&\n\t\t\t\t\t\ttargetMatch.locator[alternationNdx].toString().indexOf(altMatch.locator[alternationNdx]) === -1);\n\t\t\t\tif (!shouldMerge && alternationNdx > altMatch.alternation) {\n\t\t\t\t\tfor (var i = altMatch.alternation; i < alternationNdx; i++) {\n\t\t\t\t\t\tif (targetMatch.locator[i] !== altMatch.locator[i]) {\n\t\t\t\t\t\t\talternationNdx = i;\n\t\t\t\t\t\t\tshouldMerge = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (shouldMerge) {\n\t\t\t\t\ttargetMatch.mloc = targetMatch.mloc || {};\n\t\t\t\t\tvar locNdx = targetMatch.locator[alternationNdx];\n\t\t\t\t\tif (locNdx === undefined) {\n\t\t\t\t\t\ttargetMatch.alternation = undefined;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (typeof locNdx === \"string\") locNdx = locNdx.split(\",\")[0];\n\t\t\t\t\t\tif (targetMatch.mloc[locNdx] === undefined) targetMatch.mloc[locNdx] = targetMatch.locator.slice();\n\t\t\t\t\t\tif (altMatch !== undefined) {\n\t\t\t\t\t\t\tfor (var ndx in altMatch.mloc) {\n\t\t\t\t\t\t\t\tif (typeof ndx === \"string\") ndx = ndx.split(\",\")[0];\n\t\t\t\t\t\t\t\tif (targetMatch.mloc[ndx] === undefined) targetMatch.mloc[ndx] = altMatch.mloc[ndx];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttargetMatch.locator[alternationNdx] = Object.keys(targetMatch.mloc).join(\",\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tfunction isSameLevel(targetMatch, altMatch) {\n\t\t\t\tif (targetMatch.locator.length !== altMatch.locator.length) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tfor (let locNdx = targetMatch.alternation + 1; locNdx < targetMatch.locator.length; locNdx++) {\n\t\t\t\t\tif (targetMatch.locator[locNdx] !== altMatch.locator[locNdx]) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (testPos > (pos + opts._maxTestPos)) {\n\t\t\t\tthrow \"Inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. \" + maskset.mask;\n\t\t\t}\n\t\t\tif (testPos === pos && match.matches === undefined) {\n\t\t\t\tmatches.push({\n\t\t\t\t\t\"match\": match,\n\t\t\t\t\t\"locator\": loopNdx.reverse(),\n\t\t\t\t\t\"cd\": cacheDependency,\n\t\t\t\t\t\"mloc\": {}\n\t\t\t\t});\n\t\t\t\treturn true;\n\t\t\t} else if (match.matches !== undefined) {\n\t\t\t\tif (match.isGroup && quantifierRecurse !== match) { //when a group pass along to the quantifier\n\t\t\t\t\tmatch = handleMatch(maskToken.matches[maskToken.matches.indexOf(match) + 1], loopNdx, quantifierRecurse);\n\t\t\t\t\tif (match) return true;\n\t\t\t\t} else if (match.isOptional) {\n\t\t\t\t\tvar optionalToken = match, mtchsNdx = matches.length;\n\t\t\t\t\tmatch = resolveTestFromToken(match, ndxInitializer, loopNdx, quantifierRecurse);\n\t\t\t\t\tif (match) {\n\t\t\t\t\t\t//mark optionality in matches\n\t\t\t\t\t\tmatches.forEach(function (mtch, ndx) {\n\t\t\t\t\t\t\tif (ndx >= mtchsNdx) {\n\t\t\t\t\t\t\t\tmtch.match.optionality = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tlatestMatch = matches[matches.length - 1].match;\n\t\t\t\t\t\tif (quantifierRecurse === undefined && isFirstMatch(latestMatch, optionalToken)) { //prevent loop see #698\n\t\t\t\t\t\t\tinsertStop = true; //insert a stop\n\t\t\t\t\t\t\ttestPos = pos; //match the position after the group\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (match.isAlternator) {\n\t\t\t\t\tvar alternateToken = match,\n\t\t\t\t\t\tmalternateMatches = [],\n\t\t\t\t\t\tmaltMatches,\n\t\t\t\t\t\tcurrentMatches = matches.slice(),\n\t\t\t\t\t\tloopNdxCnt = loopNdx.length;\n\t\t\t\t\tvar altIndex = ndxInitializer.length > 0 ? ndxInitializer.shift() : -1;\n\t\t\t\t\tif (altIndex === -1 || typeof altIndex === \"string\") {\n\t\t\t\t\t\tvar currentPos = testPos,\n\t\t\t\t\t\t\tndxInitializerClone = ndxInitializer.slice(),\n\t\t\t\t\t\t\taltIndexArr = [],\n\t\t\t\t\t\t\tamndx;\n\t\t\t\t\t\tif (typeof altIndex == \"string\") {\n\t\t\t\t\t\t\taltIndexArr = altIndex.split(\",\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfor (amndx = 0; amndx < alternateToken.matches.length; amndx++) {\n\t\t\t\t\t\t\t\taltIndexArr.push(amndx.toString());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (maskset.excludes[pos] !== undefined) {\n\t\t\t\t\t\t\tvar altIndexArrClone = altIndexArr.slice();\n\t\t\t\t\t\t\tfor (var i = 0, exl = maskset.excludes[pos].length; i < exl; i++) {\n\t\t\t\t\t\t\t\tvar excludeSet = maskset.excludes[pos][i].toString().split(\":\");\n\t\t\t\t\t\t\t\tif (loopNdx.length == excludeSet[1]) {\n\t\t\t\t\t\t\t\t\taltIndexArr.splice(altIndexArr.indexOf(excludeSet[0]), 1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (altIndexArr.length === 0) { //fully alternated => reset\n\t\t\t\t\t\t\t\tdelete maskset.excludes[pos];\n\t\t\t\t\t\t\t\taltIndexArr = altIndexArrClone;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (opts.keepStatic === true || (isFinite(parseInt(opts.keepStatic)) && currentPos >= opts.keepStatic)) altIndexArr = altIndexArr.slice(0, 1);\n\t\t\t\t\t\tvar unMatchedAlternation = false;\n\t\t\t\t\t\tfor (var ndx = 0; ndx < altIndexArr.length; ndx++) {\n\t\t\t\t\t\t\tamndx = parseInt(altIndexArr[ndx]);\n\t\t\t\t\t\t\tmatches = [];\n\t\t\t\t\t\t\t//set the correct ndxInitializer\n\t\t\t\t\t\t\tndxInitializer = typeof altIndex === \"string\" ? resolveNdxInitializer(testPos, amndx, loopNdxCnt) || ndxInitializerClone.slice() : ndxInitializerClone.slice();\n\t\t\t\t\t\t\tif (alternateToken.matches[amndx] && handleMatch(alternateToken.matches[amndx], [amndx].concat(loopNdx), quantifierRecurse)) {\n\t\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t\t} else if (ndx === 0) {\n\t\t\t\t\t\t\t\tunMatchedAlternation = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tmaltMatches = matches.slice();\n\t\t\t\t\t\t\ttestPos = currentPos;\n\t\t\t\t\t\t\tmatches = [];\n\n\t\t\t\t\t\t\t//fuzzy merge matches\n\t\t\t\t\t\t\tfor (var ndx1 = 0; ndx1 < maltMatches.length; ndx1++) {\n\t\t\t\t\t\t\t\tvar altMatch = maltMatches[ndx1],\n\t\t\t\t\t\t\t\t\tdropMatch = false;\n\t\t\t\t\t\t\t\taltMatch.match.jit = altMatch.match.jit || unMatchedAlternation; //mark jit when there are unmatched alternations  ex: mask: \"(a|aa)\"\n\t\t\t\t\t\t\t\taltMatch.alternation = altMatch.alternation || loopNdxCnt;\n\t\t\t\t\t\t\t\tsetMergeLocators(altMatch);\n\t\t\t\t\t\t\t\tfor (var ndx2 = 0; ndx2 < malternateMatches.length; ndx2++) {\n\t\t\t\t\t\t\t\t\tvar altMatch2 = malternateMatches[ndx2];\n\t\t\t\t\t\t\t\t\tif (typeof altIndex !== \"string\" || (altMatch.alternation !== undefined && altIndexArr.includes(altMatch.locator[altMatch.alternation].toString()))) {\n\t\t\t\t\t\t\t\t\t\tif (altMatch.match.nativeDef === altMatch2.match.nativeDef) {\n\t\t\t\t\t\t\t\t\t\t\tdropMatch = true;\n\t\t\t\t\t\t\t\t\t\t\tsetMergeLocators(altMatch2, altMatch);\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t} else if (isSubsetOf(altMatch, altMatch2)) {\n\t\t\t\t\t\t\t\t\t\t\tif (setMergeLocators(altMatch, altMatch2)) {\n\t\t\t\t\t\t\t\t\t\t\t\tdropMatch = true;\n\t\t\t\t\t\t\t\t\t\t\t\tmalternateMatches.splice(malternateMatches.indexOf(altMatch2), 0, altMatch);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t} else if (isSubsetOf(altMatch2, altMatch)) {\n\t\t\t\t\t\t\t\t\t\t\tsetMergeLocators(altMatch2, altMatch);\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t} else if (staticCanMatchDefinition(altMatch, altMatch2)) {\n\t\t\t\t\t\t\t\t\t\t\tif (!isSameLevel(altMatch, altMatch2) && el.inputmask.userOptions.keepStatic === undefined) {\n\t\t\t\t\t\t\t\t\t\t\t\topts.keepStatic = true;\n\t\t\t\t\t\t\t\t\t\t\t} else if (setMergeLocators(altMatch, altMatch2)) {\n\t\t\t\t\t\t\t\t\t\t\t\t//insert match above general match\n\t\t\t\t\t\t\t\t\t\t\t\tdropMatch = true;\n\t\t\t\t\t\t\t\t\t\t\t\tmalternateMatches.splice(malternateMatches.indexOf(altMatch2), 0, altMatch);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (!dropMatch) {\n\t\t\t\t\t\t\t\t\tmalternateMatches.push(altMatch);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmatches = currentMatches.concat(malternateMatches);\n\t\t\t\t\t\ttestPos = pos;\n\t\t\t\t\t\tinsertStop = matches.length > 0; //insert a stopelemnt when there is an alternate - needed for non-greedy option\n\t\t\t\t\t\tmatch = malternateMatches.length > 0; //set correct match state\n\n\t\t\t\t\t\t//cloneback\n\t\t\t\t\t\tndxInitializer = ndxInitializerClone.slice();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmatch = handleMatch(alternateToken.matches[altIndex] || maskToken.matches[altIndex], [altIndex].concat(loopNdx), quantifierRecurse);\n\t\t\t\t\t}\n\t\t\t\t\tif (match) return true;\n\t\t\t\t} else if (match.isQuantifier && quantifierRecurse !== maskToken.matches[maskToken.matches.indexOf(match) - 1]) {\n\t\t\t\t\tvar qt = match;\n\t\t\t\t\tfor (var qndx = (ndxInitializer.length > 0) ? ndxInitializer.shift() : 0; (qndx < (isNaN(qt.quantifier.max) ? qndx + 1 : qt.quantifier.max)) && testPos <= pos; qndx++) {\n\t\t\t\t\t\tvar tokenGroup = maskToken.matches[maskToken.matches.indexOf(qt) - 1];\n\t\t\t\t\t\tmatch = handleMatch(tokenGroup, [qndx].concat(loopNdx), tokenGroup); //set the tokenGroup as quantifierRecurse marker\n\t\t\t\t\t\tif (match) {\n\t\t\t\t\t\t\t//get latest match\n\t\t\t\t\t\t\tlatestMatch = matches[matches.length - 1].match;\n\t\t\t\t\t\t\t//mark optionality\n\t\t\t\t\t\t\t//TODO FIX RECURSIVE QUANTIFIERS\n\t\t\t\t\t\t\tlatestMatch.optionalQuantifier = qndx >= qt.quantifier.min;\n\t\t\t\t\t\t\t// console.log(pos + \" \" + qt.quantifier.min + \" \" + latestMatch.optionalQuantifier);\n\t\t\t\t\t\t\tlatestMatch.jit = (qndx || 1) * tokenGroup.matches.indexOf(latestMatch) >= qt.quantifier.jit;\n\t\t\t\t\t\t\tif (latestMatch.optionalQuantifier && isFirstMatch(latestMatch, tokenGroup)) {\n\t\t\t\t\t\t\t\tinsertStop = true;\n\t\t\t\t\t\t\t\ttestPos = pos; //match the position after the group\n\t\t\t\t\t\t\t\tbreak; //stop quantifierloop && search for next possible match\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (latestMatch.jit /*&& !latestMatch.optionalQuantifier*/) {\n\t\t\t\t\t\t\t\t//always set jitOffset, isvalid checks when to apply\n\t\t\t\t\t\t\t\tmaskset.jitOffset[pos] = tokenGroup.matches.length - tokenGroup.matches.indexOf(latestMatch);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tmatch = resolveTestFromToken(match, ndxInitializer, loopNdx, quantifierRecurse);\n\t\t\t\t\tif (match) return true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttestPos++;\n\t\t\t}\n\t\t}\n\n\t\t//the offset is set in the quantifierloop when git masking is used\n\t\tfor (var tndx = (ndxInitializer.length > 0 ? ndxInitializer.shift() : 0); tndx < maskToken.matches.length; tndx++) {\n\t\t\tif (maskToken.matches[tndx].isQuantifier !== true) {\n\t\t\t\tvar match = handleMatch(maskToken.matches[tndx], [tndx].concat(loopNdx), quantifierRecurse);\n\t\t\t\tif (match && testPos === pos) {\n\t\t\t\t\treturn match;\n\t\t\t\t} else if (testPos > pos) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction mergeLocators(pos, tests) {\n\t\tlet locator = [], alternation;\n\t\tif (!Array.isArray(tests)) tests = [tests];\n\n\t\tif (tests.length > 0) {\n\t\t\tif (tests[0].alternation === undefined || opts.keepStatic === true) {\n\t\t\t\tlocator = determineTestTemplate.call(inputmask, pos, tests.slice()).locator.slice();\n\t\t\t\tif (locator.length === 0) locator = tests[0].locator.slice();\n\t\t\t} else {\n\t\t\t\ttests.forEach(function (tst) {\n\t\t\t\t\tif (tst.def !== \"\") {\n\t\t\t\t\t\tif (locator.length === 0) {\n\t\t\t\t\t\t\talternation = tst.alternation;\n\t\t\t\t\t\t\tlocator = tst.locator.slice();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (tst.locator[alternation] && locator[alternation].toString().indexOf(tst.locator[alternation]) === -1) {\n\t\t\t\t\t\t\t\tlocator[alternation] += \",\" + tst.locator[alternation];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn locator;\n\t}\n\n\tif (pos > -1 && (inputmask.maxLength === undefined || pos < inputmask.maxLength)) {\n\t\tif (ndxIntlzr === undefined) { //determine index initializer\n\t\t\tvar previousPos = pos - 1,\n\t\t\t\ttest;\n\t\t\twhile ((test = maskset.validPositions[previousPos] || maskset.tests[previousPos]) === undefined && previousPos > -1) {\n\t\t\t\tpreviousPos--;\n\t\t\t}\n\t\t\tif (test !== undefined && previousPos > -1) {\n\t\t\t\tndxInitializer = mergeLocators(previousPos, test);\n\t\t\t\tcacheDependency = ndxInitializer.join(\"\");\n\t\t\t\ttestPos = previousPos;\n\t\t\t}\n\t\t}\n\t\tif (maskset.tests[pos] && maskset.tests[pos][0].cd === cacheDependency) { //cacheDependency is set on all tests, just check on the first\n\t\t\treturn maskset.tests[pos];\n\t\t}\n\t\tfor (var mtndx = ndxInitializer.shift(); mtndx < maskTokens.length; mtndx++) {\n\t\t\tvar match = resolveTestFromToken(maskTokens[mtndx], ndxInitializer, [mtndx]);\n\t\t\tif ((match && testPos === pos) || testPos > pos) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tif (matches.length === 0 || insertStop) {\n\t\tmatches.push({\n\t\t\tmatch: {\n\t\t\t\tfn: null,\n\t\t\t\tstatic: true,\n\t\t\t\toptionality: false,\n\t\t\t\tcasing: null,\n\t\t\t\tdef: \"\",\n\t\t\t\tplaceholder: \"\"\n\t\t\t},\n\t\t\tlocator: [],\n\t\t\tmloc: {},\n\t\t\tcd: cacheDependency\n\t\t});\n\t}\n\n\tif (ndxIntlzr !== undefined && maskset.tests[pos]) { //prioritize full tests for caching\n\t\treturn $.extend(true, [], matches);\n\t}\n\tmaskset.tests[pos] = $.extend(true, [], matches); //set a clone to prevent overwriting some props\n\t// console.log(pos + \" - \" + JSON.stringify(matches));\n\treturn maskset.tests[pos];\n}\n","const ua = (window.navigator && window.navigator.userAgent) || \"\",\n\tie = (ua.indexOf(\"MSIE \") > 0) || (ua.indexOf(\"Trident/\") > 0),\n\tmobile = \"ontouchstart\" in window, //not entirely correct but will currently do\n\tiemobile = /iemobile/i.test(ua),\n\tiphone = /iphone/i.test(ua) && !iemobile;\n\nexport {ua, ie, mobile, iemobile, iphone};","import keyCode from \"./keycode.json\";\nimport {getMaskTemplate, getPlaceholder, getTest} from \"./validation-tests\";\nimport {\n\tcaret,\n\tdetermineNewCaretPosition,\n\tgetBuffer, getBufferTemplate,\n\tgetLastValidPosition,\n\tisMask,\n\tresetMaskSet,\n\tseekNext\n} from \"./positioning\";\nimport {isComplete, isValid, refreshFromBuffer} from \"./validation\";\nimport {ie} from \"./environment\";\nimport {EventHandlers} from \"./eventhandlers\";\n\n\nexport {applyInputValue, clearOptionalTail, checkVal, HandleNativePlaceholder, unmaskedvalue, writeBuffer};\n\nfunction applyInputValue(input, value) {\n\tconst inputmask = input ? input.inputmask : this, opts = inputmask.opts;\n\n\tinput.inputmask.refreshValue = false;\n\tif (typeof opts.onBeforeMask === \"function\") value = opts.onBeforeMask.call(inputmask, value, opts) || value;\n\tvalue = value.toString().split(\"\");\n\tcheckVal(input, true, false, value);\n\tinputmask.undoValue = getBuffer.call(inputmask).join(\"\");\n\tif ((opts.clearMaskOnLostFocus || opts.clearIncomplete) && input.inputmask._valueGet() === getBufferTemplate.call(inputmask).join(\"\") && getLastValidPosition.call(inputmask) === -1) {\n\t\tinput.inputmask._valueSet(\"\");\n\t}\n}\n\n//todo put on prototype?\nfunction clearOptionalTail(buffer) {\n\tconst inputmask = this;\n\n\tbuffer.length = 0;\n\tvar template = getMaskTemplate.call(inputmask, true, 0, true, undefined, true), lmnt;\n\twhile ((lmnt = template.shift()) !== undefined) buffer.push(lmnt);\n\treturn buffer;\n}\n\nfunction checkVal(input, writeOut, strict, nptvl, initiatingEvent) {\n\tconst inputmask = input ? input.inputmask : this,\n\t\tmaskset = inputmask.maskset,\n\t\topts = inputmask.opts,$ = inputmask.dependencyLib;\n\n\tvar inputValue = nptvl.slice(),\n\t\tcharCodes = \"\",\n\t\tinitialNdx = -1,\n\t\tresult = undefined, skipOptionalPartCharacter = opts.skipOptionalPartCharacter;\n\topts.skipOptionalPartCharacter = \"\"; //see issue #2311\n\n\tfunction isTemplateMatch(ndx, charCodes) {\n\t\tvar targetTemplate = getMaskTemplate.call(inputmask, true, 0).slice(ndx, seekNext.call(inputmask, ndx)).join(\"\").replace(/'/g, \"\"),\n\t\t\tcharCodeNdx = targetTemplate.indexOf(charCodes);\n\t\t//strip spaces from targetTemplate\n\t\twhile (charCodeNdx > 0 && targetTemplate[charCodeNdx - 1] === \" \") charCodeNdx--;\n\n\t\tvar match = charCodeNdx === 0 && !isMask.call(inputmask, ndx)\n\t\t\t&& (getTest.call(inputmask, ndx).match.nativeDef === charCodes.charAt(0)\n\t\t\t\t|| (getTest.call(inputmask, ndx).match.static === true && getTest.call(inputmask, ndx).match.nativeDef === (\"'\" + charCodes.charAt(0)))\n\t\t\t\t|| (getTest.call(inputmask, ndx).match.nativeDef === \" \" && (getTest.call(inputmask, ndx + 1).match.nativeDef === charCodes.charAt(0)\n\t\t\t\t\t|| (getTest.call(inputmask, ndx + 1).match.static === true && getTest.call(inputmask, ndx + 1).match.nativeDef === (\"'\" + charCodes.charAt(0))))));\n\n\t\tif (!match && charCodeNdx > 0 && !isMask.call(inputmask, ndx, false, true)) {\n\t\t\tvar nextPos = seekNext.call(inputmask, ndx);\n\t\t\tif (inputmask.caretPos.begin < nextPos) {\n\t\t\t\tinputmask.caretPos = {begin: nextPos};\n\t\t\t}\n\t\t}\n\t\treturn match;\n\t}\n\n\tresetMaskSet.call(inputmask);\n\tmaskset.tests = {}; //reset tests ~ possible after alternating\n\tinitialNdx = opts.radixPoint ? determineNewCaretPosition.call(inputmask, {begin: 0, end: 0}).begin : 0;\n\tmaskset.p = initialNdx;\n\tinputmask.caretPos = {begin: initialNdx};\n\n\tvar staticMatches = [], prevCaretPos = inputmask.caretPos;\n\tinputValue.forEach( function ( charCode, ndx) {\n\t\tif (charCode !== undefined) { //inputfallback strips some elements out of the inputarray.  $.each logically presents them as undefined\n\t\t\tif (maskset.validPositions[ndx] === undefined && inputValue[ndx] === getPlaceholder.call(inputmask, ndx) && isMask.call(inputmask, ndx, true) &&\n\t\t\t\tisValid.call(inputmask, ndx, inputValue[ndx], true, undefined, undefined, true) === false) {\n\t\t\t\tmaskset.p++;\n\t\t\t} else {\n\t\t\t\tvar keypress = new $.Event(\"_checkval\");\n\t\t\t\tkeypress.which = charCode.toString().charCodeAt(0);\n\t\t\t\tcharCodes += charCode;\n\t\t\t\tvar lvp = getLastValidPosition.call(inputmask, undefined, true);\n\t\t\t\tif (!isTemplateMatch(initialNdx, charCodes)) {\n\t\t\t\t\tresult = EventHandlers.keypressEvent.call(input || inputmask, keypress, true, false, strict, inputmask.caretPos.begin);\n\n\t\t\t\t\tif (result) {\n\t\t\t\t\t\tinitialNdx = inputmask.caretPos.begin + 1;\n\t\t\t\t\t\tcharCodes = \"\";\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresult = EventHandlers.keypressEvent.call(input || inputmask, keypress, true, false, strict, lvp + 1);\n\t\t\t\t}\n\t\t\t\tif (result) {\n\t\t\t\t\tif (result.pos !== undefined && maskset.validPositions[result.pos] && maskset.validPositions[result.pos].match.static === true && maskset.validPositions[result.pos].alternation === undefined) {\n\t\t\t\t\t\tstaticMatches.push(result.pos);\n\t\t\t\t\t\tif (!inputmask.isRTL) {\n\t\t\t\t\t\t\tresult.forwardPosition = result.pos + 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\twriteBuffer.call(inputmask, undefined, getBuffer.call(inputmask), result.forwardPosition, keypress, false);\n\t\t\t\t\tinputmask.caretPos = {begin: result.forwardPosition, end: result.forwardPosition};\n\t\t\t\t\tprevCaretPos = inputmask.caretPos;\n\t\t\t\t} else {\n\t\t\t\t\tinputmask.caretPos = prevCaretPos;\n\t\t\t\t}  //restore the caret position from before the failed validation\n\t\t\t}\n\t\t}\n\t});\n\tif (staticMatches.length > 0) {\n\t\tvar sndx, validPos, nextValid = seekNext.call(inputmask, -1, undefined, false);\n\t\tif ((!isComplete.call(inputmask, getBuffer.call(inputmask)) && staticMatches.length <= nextValid)\n\t\t\t|| (isComplete.call(inputmask, getBuffer.call(inputmask)) && staticMatches.length > 0 && (staticMatches.length !== nextValid && staticMatches[0] === 0))) { //should check if is sequence starting from 0\n\t\t\tvar nextSndx = nextValid;\n\t\t\twhile ((sndx = staticMatches.shift()) !== undefined) {\n\t\t\t\tvar keypress = new $.Event(\"_checkval\");\n\t\t\t\tvalidPos = maskset.validPositions[sndx];\n\t\t\t\tvalidPos.generatedInput = true;\n\t\t\t\tkeypress.which = validPos.input.charCodeAt(0);\n\t\t\t\tresult = EventHandlers.keypressEvent.call(input, keypress, true, false, strict, nextSndx);\n\t\t\t\tif (result && result.pos !== undefined && result.pos !== sndx && maskset.validPositions[result.pos] && maskset.validPositions[result.pos].match.static === true) {\n\t\t\t\t\tstaticMatches.push(result.pos);\n\t\t\t\t} else if (!result) break;\n\t\t\t\tnextSndx++;\n\t\t\t}\n\t\t} else { //mark al statics as generated\n\t\t\t// while ((sndx = staticMatches.pop())) {\n\t\t\t// \tvalidPos = maskset.validPositions[sndx];\n\t\t\t// \tif (validPos) {\n\t\t\t// \t\tvalidPos.generatedInput = true;\n\t\t\t// \t}\n\t\t\t// }\n\t\t}\n\t}\n\tif (writeOut) {\n\t\twriteBuffer.call(inputmask, input, getBuffer.call(inputmask), result ? result.forwardPosition : inputmask.caretPos.begin, initiatingEvent || new $.Event(\"checkval\"), initiatingEvent && initiatingEvent.type === \"input\" && inputmask.undoValue !== getBuffer.call(inputmask).join(\"\"));\n\t\t// for (var vndx in maskset.validPositions) {\n\t\t// \tif (maskset.validPositions[vndx].match.generated !== true) { //only remove non forced generated\n\t\t// \t\tdelete maskset.validPositions[vndx].generatedInput; //clear generated markings ~ consider initializing with a  value as fully typed\n\t\t// \t}\n\t\t// }\n\t}\n\topts.skipOptionalPartCharacter = skipOptionalPartCharacter;\n}\n\nfunction HandleNativePlaceholder(npt, value) {\n\tconst inputmask = npt ? npt.inputmask : this;\n\n\tif (ie) {\n\t\tif (npt.inputmask._valueGet() !== value && (npt.placeholder !== value || npt.placeholder === \"\")) {\n\t\t\tvar buffer = getBuffer.call(inputmask).slice(),\n\t\t\t\tnptValue = npt.inputmask._valueGet();\n\t\t\tif (nptValue !== value) {\n\t\t\t\tvar lvp = getLastValidPosition.call(inputmask);\n\t\t\t\tif (lvp === -1 && nptValue === getBufferTemplate.call(inputmask).join(\"\")) {\n\t\t\t\t\tbuffer = [];\n\t\t\t\t} else if (lvp !== -1) { //clearout optional tail of the mask\n\t\t\t\t\tclearOptionalTail.call(inputmask, buffer);\n\t\t\t\t}\n\t\t\t\twriteBuffer(npt, buffer);\n\t\t\t}\n\t\t}\n\t} else if (npt.placeholder !== value) {\n\t\tnpt.placeholder = value;\n\t\tif (npt.placeholder === \"\") npt.removeAttribute(\"placeholder\");\n\t}\n}\n\nfunction unmaskedvalue(input) {\n\tconst inputmask = input ? input.inputmask : this,\n\t\topts = inputmask.opts,\n\t\tmaskset = inputmask.maskset;\n\n\tif (input) {\n\t\tif (input.inputmask === undefined) {\n\t\t\treturn input.value;\n\t\t}\n\t\tif (input.inputmask && input.inputmask.refreshValue) { //forced refresh from the value form.reset\n\t\t\tapplyInputValue(input, input.inputmask._valueGet(true));\n\t\t}\n\t}\n\tvar umValue = [],\n\t\tvps = maskset.validPositions;\n\tfor (var pndx in vps) {\n\t\tif (vps[pndx] && vps[pndx].match && (vps[pndx].match.static != true || (Array.isArray(maskset.metadata) && vps[pndx].generatedInput !== true))) {\n\t\t\t//only include generated input with multiple masks (check on metadata)\n\t\t\tumValue.push(vps[pndx].input);\n\t\t}\n\t}\n\tvar unmaskedValue = umValue.length === 0 ? \"\" : (inputmask.isRTL ? umValue.reverse() : umValue).join(\"\");\n\tif (typeof opts.onUnMask === \"function\") {\n\t\tvar bufferValue = (inputmask.isRTL ? getBuffer.call(inputmask).slice().reverse() : getBuffer.call(inputmask)).join(\"\");\n\t\tunmaskedValue = opts.onUnMask.call(inputmask, bufferValue, unmaskedValue, opts);\n\t}\n\treturn unmaskedValue;\n}\n\nfunction writeBuffer(input, buffer, caretPos, event, triggerEvents) {\n\tconst inputmask = input ? input.inputmask : this,\n\t\topts = inputmask.opts,\n\t\t$ = inputmask.dependencyLib;\n\n\tif (event && typeof opts.onBeforeWrite === \"function\") {\n\t\t//    buffer = buffer.slice(); //prevent uncontrolled manipulation of the internal buffer\n\t\tvar result = opts.onBeforeWrite.call(inputmask, event, buffer, caretPos, opts);\n\t\tif (result) {\n\t\t\tif (result.refreshFromBuffer) {\n\t\t\t\tvar refresh = result.refreshFromBuffer;\n\t\t\t\trefreshFromBuffer.call(inputmask, refresh === true ? refresh : refresh.start, refresh.end, result.buffer || buffer);\n\t\t\t\tbuffer = getBuffer.call(inputmask, true);\n\t\t\t}\n\t\t\tif (caretPos !== undefined) caretPos = result.caret !== undefined ? result.caret : caretPos;\n\t\t}\n\t}\n\tif (input !== undefined) {\n\t\tinput.inputmask._valueSet(buffer.join(\"\"));\n\t\tif (caretPos !== undefined && (event === undefined || event.type !== \"blur\")) {\n\t\t\tcaret.call(inputmask, input, caretPos, undefined, undefined, (event !== undefined && event.type === \"keydown\" && (event.keyCode === keyCode.DELETE || event.keyCode === keyCode.BACKSPACE)));\n\t\t}\n\t\tif (triggerEvents === true) {\n\t\t\tvar $input = $(input), nptVal = input.inputmask._valueGet();\n\t\t\tinput.inputmask.skipInputEvent = true;\n\t\t\t$input.trigger(\"input\");\n\t\t\tsetTimeout(function () { //timeout needed for IE\n\t\t\t\tif (nptVal === getBufferTemplate.call(inputmask).join(\"\")) {\n\t\t\t\t\t$input.trigger(\"cleared\");\n\t\t\t\t} else if (isComplete.call(inputmask, buffer) === true) {\n\t\t\t\t\t$input.trigger(\"complete\");\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t}\n\t}\n}\n","import {\n\tcaret, determineNewCaretPosition,\n\tgetBuffer, getBufferTemplate,\n\tgetLastValidPosition, isMask,\n\tresetMaskSet,\n\tseekNext,\n\tseekPrevious,\n\ttranslatePosition\n} from \"./positioning\";\nimport keyCode from \"./keycode.json\";\nimport {iemobile, iphone} from \"./environment\";\nimport {handleRemove, isComplete, isValid} from \"./validation\";\nimport {applyInputValue, checkVal, clearOptionalTail, HandleNativePlaceholder, writeBuffer} from \"./inputHandling\";\nimport {getPlaceholder, getTest} from \"./validation-tests\";\n\nexport {EventHandlers};\n\nvar EventHandlers = {\n\tkeydownEvent: function (e) {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts, $ = inputmask.dependencyLib,\n\t\t\tmaskset = inputmask.maskset;\n\n\t\tvar input = this,\n\t\t\t$input = $(input),\n\t\t\tk = e.keyCode,\n\t\t\tpos = caret.call(inputmask, input);\n\n\t\tvar kdResult = opts.onKeyDown.call(this, e, getBuffer.call(inputmask), pos, opts);\n\t\tif (kdResult !== undefined) return kdResult;\n\n\t\t//backspace, delete, and escape get special treatment\n\t\tif (k === keyCode.BACKSPACE || k === keyCode.DELETE || (iphone && k === keyCode.BACKSPACE_SAFARI) || (e.ctrlKey && k === keyCode.X && !(\"oncut\" in input))) { //backspace/delete\n\t\t\te.preventDefault(); //stop default action but allow propagation\n\t\t\thandleRemove.call(inputmask, input, k, pos);\n\t\t\twriteBuffer(input, getBuffer.call(inputmask, true), maskset.p, e, input.inputmask._valueGet() !== getBuffer.call(inputmask).join(\"\"));\n\t\t} else if (k === keyCode.END || k === keyCode.PAGE_DOWN) { //when END or PAGE_DOWN pressed set position at lastmatch\n\t\t\te.preventDefault();\n\t\t\tvar caretPos = seekNext.call(inputmask, getLastValidPosition.call(inputmask));\n\t\t\tcaret.call(inputmask, input, e.shiftKey ? pos.begin : caretPos, caretPos, true);\n\t\t} else if ((k === keyCode.HOME && !e.shiftKey) || k === keyCode.PAGE_UP) { //Home or page_up\n\t\t\te.preventDefault();\n\t\t\tcaret.call(inputmask, input, 0, e.shiftKey ? pos.begin : 0, true);\n\t\t} else if (((opts.undoOnEscape && k === keyCode.ESCAPE) || (k === 90 && e.ctrlKey)) && e.altKey !== true) { //escape && undo && #762\n\t\t\tcheckVal(input, true, false, inputmask.undoValue.split(\"\"));\n\t\t\t$input.trigger(\"click\");\n\t\t\t// } else if (k === keyCode.INSERT && !(e.shiftKey || e.ctrlKey) && inputmask.userOptions.insertMode === undefined) { //insert\n\t\t\t// \topts.insertMode = !opts.insertMode;\n\t\t\t// \tcaret(input, pos.begin, pos.end);\n\t\t} else if (opts.tabThrough === true && k === keyCode.TAB) {\n\t\t\tif (e.shiftKey === true) {\n\t\t\t\tpos.end = seekPrevious.call(inputmask, pos.end, true);\n\t\t\t\tif (getTest.call(inputmask, pos.end - 1).match.static === true) {\n\t\t\t\t\tpos.end--;\n\t\t\t\t}\n\t\t\t\tpos.begin = seekPrevious.call(inputmask, pos.end, true);\n\t\t\t\tif (pos.begin >= 0 && pos.end > 0) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tcaret.call(inputmask, input, pos.begin, pos.end);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tpos.begin = seekNext.call(inputmask, pos.begin, true);\n\t\t\t\tpos.end = seekNext.call(inputmask, pos.begin, true);\n\t\t\t\tif (pos.end < maskset.maskLength) pos.end--;\n\t\t\t\tif (pos.begin <= maskset.maskLength) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tcaret.call(inputmask, input, pos.begin, pos.end);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!e.shiftKey) {\n\t\t\tif (opts.insertModeVisual && opts.insertMode === false) {\n\t\t\t\tif (k === keyCode.RIGHT) {\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tvar caretPos = caret.call(inputmask, input);\n\t\t\t\t\t\tcaret.call(inputmask, input, caretPos.begin);\n\t\t\t\t\t}, 0);\n\t\t\t\t} else if (k === keyCode.LEFT) {\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tvar caretPos = {\n\t\t\t\t\t\t\tbegin: translatePosition.call(inputmask, input.inputmask.caretPos.begin),\n\t\t\t\t\t\t\tend: translatePosition.call(inputmask, input.inputmask.caretPos.end)\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (inputmask.isRTL) {\n\t\t\t\t\t\t\tcaret.call(inputmask, input, caretPos.begin + (caretPos.begin === maskset.maskLength ? 0 : 1));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcaret.call(inputmask, input, caretPos.begin - (caretPos.begin === 0 ? 0 : 1));\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tinputmask.ignorable = opts.ignorables.includes(k);\n\t},\n\tkeypressEvent: function (e, checkval, writeOut, strict, ndx) {\n\t\tconst inputmask = this.inputmask || this, opts = inputmask.opts, $ = inputmask.dependencyLib,\n\t\t\tmaskset = inputmask.maskset;\n\n\t\tvar input = inputmask.el,\n\t\t\t$input = $(input),\n\t\t\tk = e.which || e.charCode || e.keyCode;\n\n\t\tif (checkval !== true && (!(e.ctrlKey && e.altKey) && (e.ctrlKey || e.metaKey || inputmask.ignorable))) {\n\t\t\tif (k === keyCode.ENTER && inputmask.undoValue !== getBuffer.call(inputmask).join(\"\")) {\n\t\t\t\tinputmask.undoValue = getBuffer.call(inputmask).join(\"\");\n\t\t\t\t// e.preventDefault();\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t$input.trigger(\"change\");\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t\tinputmask.skipInputEvent = true; //skip the input as otherwise the skipped char could be picked up for validation by the inputfallback\n\t\t\treturn true;\n\t\t} else if (k) {\n\t\t\t//special treat the decimal separator\n\t\t\tif ((k === 44 || k === 46) && e.location === 3 && opts.radixPoint !== \"\") k = opts.radixPoint.charCodeAt(0);\n\t\t\tvar pos = checkval ? {\n\t\t\t\t\tbegin: ndx,\n\t\t\t\t\tend: ndx\n\t\t\t\t} : caret.call(inputmask, input),\n\t\t\t\tforwardPosition, c = String.fromCharCode(k);\n\n\t\t\tmaskset.writeOutBuffer = true;\n\t\t\tvar valResult = isValid.call(inputmask, pos, c, strict, undefined, undefined, undefined, checkval);\n\t\t\tif (valResult !== false) {\n\t\t\t\tresetMaskSet.call(inputmask, true);\n\t\t\t\tforwardPosition = valResult.caret !== undefined ? valResult.caret : seekNext.call(inputmask, valResult.pos.begin ? valResult.pos.begin : valResult.pos);\n\t\t\t\tmaskset.p = forwardPosition; //needed for checkval\n\t\t\t}\n\n\t\t\tforwardPosition = ((opts.numericInput && valResult.caret === undefined) ? seekPrevious.call(inputmask, forwardPosition) : forwardPosition);\n\t\t\tif (writeOut !== false) {\n\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\topts.onKeyValidation.call(input, k, valResult);\n\t\t\t\t}, 0);\n\t\t\t\tif (maskset.writeOutBuffer && valResult !== false) {\n\t\t\t\t\tvar buffer = getBuffer.call(inputmask);\n\t\t\t\t\twriteBuffer(input, buffer, forwardPosition, e, checkval !== true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\te.preventDefault();\n\n\t\t\tif (checkval) {\n\t\t\t\tif (valResult !== false) valResult.forwardPosition = forwardPosition;\n\t\t\t\treturn valResult;\n\t\t\t}\n\t\t}\n\t},\n\tkeyupEvent: function (e) {\n\t\tconst inputmask = this.inputmask;\n\n\t\tif (inputmask.isComposing && (e.keyCode === keyCode.KEY_229 || e.keyCode === keyCode.ENTER)) {\n\t\t\tinputmask.$el.trigger(\"input\");\n\t\t}\n\t},\n\tpasteEvent: function (e) {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts;\n\n\t\tvar input = this,\n\t\t\tinputValue = inputmask._valueGet(true),\n\t\t\tcaretPos = caret.call(inputmask, input),\n\t\t\ttempValue;\n\n\t\tif (inputmask.isRTL) {\n\t\t\ttempValue = caretPos.end;\n\t\t\tcaretPos.end = caretPos.begin;\n\t\t\tcaretPos.begin = tempValue;\n\t\t}\n\n\t\tvar valueBeforeCaret = inputValue.substr(0, caretPos.begin),\n\t\t\tvalueAfterCaret = inputValue.substr(caretPos.end, inputValue.length);\n\n\t\tif (valueBeforeCaret == (inputmask.isRTL ? getBufferTemplate.call(inputmask).slice().reverse() : getBufferTemplate.call(inputmask)).slice(0, caretPos.begin).join(\"\")) valueBeforeCaret = \"\";\n\t\tif (valueAfterCaret == (inputmask.isRTL ? getBufferTemplate.call(inputmask).slice().reverse() : getBufferTemplate.call(inputmask)).slice(caretPos.end).join(\"\")) valueAfterCaret = \"\";\n\n\t\tif (window.clipboardData && window.clipboardData.getData) { // IE\n\t\t\tinputValue = valueBeforeCaret + window.clipboardData.getData(\"Text\") + valueAfterCaret;\n\t\t} else if (e.clipboardData && e.clipboardData.getData) {\n\t\t\tinputValue = valueBeforeCaret + e.clipboardData.getData(\"text/plain\") + valueAfterCaret;\n\t\t} else {\n\t\t\treturn true;\n\t\t} //allow native paste event as fallback ~ masking will continue by inputfallback\n\n\t\tvar pasteValue = inputValue;\n\t\tif (typeof opts.onBeforePaste === \"function\") {\n\t\t\tpasteValue = opts.onBeforePaste.call(inputmask, inputValue, opts);\n\t\t\tif (pasteValue === false) {\n\t\t\t\treturn e.preventDefault();\n\t\t\t}\n\t\t\tif (!pasteValue) {\n\t\t\t\tpasteValue = inputValue;\n\t\t\t}\n\t\t}\n\t\tcheckVal(input, true, false, pasteValue.toString().split(\"\"), e);\n\t\t// writeBuffer(input, getBuffer(), seekNext(getLastValidPosition()), e, inputmask.undoValue !== getBuffer().join(\"\"));\n\n\t\treturn e.preventDefault();\n\t},\n\tinputFallBackEvent: function (e) { //fallback when keypress is not triggered\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts, $ = inputmask.dependencyLib;\n\n\t\tfunction ieMobileHandler(input, inputValue, caretPos) {\n\t\t\tif (iemobile) { //iemobile just sets the character at the end althought the caret position is correctly set\n\t\t\t\tvar inputChar = inputValue.replace(getBuffer.call(inputmask).join(\"\"), \"\");\n\t\t\t\tif (inputChar.length === 1) {\n\t\t\t\t\tvar iv = inputValue.split(\"\");\n\t\t\t\t\tiv.splice(caretPos.begin, 0, inputChar);\n\t\t\t\t\tinputValue = iv.join(\"\");\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn inputValue;\n\t\t}\n\n\t\tfunction analyseChanges(inputValue, buffer, caretPos) {\n\t\t\tvar frontPart = inputValue.substr(0, caretPos.begin).split(\"\"),\n\t\t\t\tbackPart = inputValue.substr(caretPos.begin).split(\"\"),\n\t\t\t\tfrontBufferPart = buffer.substr(0, caretPos.begin).split(\"\"),\n\t\t\t\tbackBufferPart = buffer.substr(caretPos.begin).split(\"\");\n\n\t\t\tvar fpl = frontPart.length >= frontBufferPart.length ? frontPart.length : frontBufferPart.length,\n\t\t\t\tbpl = backPart.length >= backBufferPart.length ? backPart.length : backBufferPart.length,\n\t\t\t\tbl, i, action = \"\", data = [], marker = \"~\", placeholder;\n\n\t\t\t//align buffers\n\t\t\twhile (frontPart.length < fpl) frontPart.push(marker);\n\t\t\twhile (frontBufferPart.length < fpl) frontBufferPart.push(marker);\n\t\t\twhile (backPart.length < bpl) backPart.unshift(marker);\n\t\t\twhile (backBufferPart.length < bpl) backBufferPart.unshift(marker);\n\n\t\t\tvar newBuffer = frontPart.concat(backPart);\n\t\t\tvar oldBuffer = frontBufferPart.concat(backBufferPart);\n\n\t\t\t// console.log(\"N \" + newBuffer);\n\t\t\t// console.log(\"O \" + oldBuffer);\n\n\t\t\tfor (i = 0, bl = newBuffer.length; i < bl; i++) {\n\t\t\t\tplaceholder = getPlaceholder.call(inputmask, translatePosition.call(inputmask, i));\n\t\t\t\tswitch (action) {\n\t\t\t\t\tcase \"insertText\":\n\t\t\t\t\t\tif (oldBuffer[i - 1] === newBuffer[i] && caretPos.begin == newBuffer.length - 1) {\n\t\t\t\t\t\t\tdata.push(newBuffer[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\ti = bl;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"insertReplacementText\":\n\t\t\t\t\t\tif (newBuffer[i] === marker) { //extend selection\n\t\t\t\t\t\t\tcaretPos.end++;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// breakout loop\n\t\t\t\t\t\t\ti = bl;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"deleteContentBackward\":\n\t\t\t\t\t\tif (newBuffer[i] === marker) {\n\t\t\t\t\t\t\tcaretPos.end++;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t//breakout loop\n\t\t\t\t\t\t\ti = bl;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif (newBuffer[i] !== oldBuffer[i]) {\n\t\t\t\t\t\t\tif ((newBuffer[i + 1] === marker || newBuffer[i + 1] === placeholder || newBuffer[i + 1] === undefined) && ((oldBuffer[i] === placeholder && oldBuffer[i + 1] === marker) || oldBuffer[i] === marker)) {  //basic insert\n\t\t\t\t\t\t\t\taction = \"insertText\";\n\t\t\t\t\t\t\t\tdata.push(newBuffer[i]);\n\t\t\t\t\t\t\t\tcaretPos.begin--;\n\t\t\t\t\t\t\t\tcaretPos.end--;\n\t\t\t\t\t\t\t} else if (oldBuffer[i + 1] === marker && oldBuffer[i] === newBuffer[i + 1]) { //insert between\n\t\t\t\t\t\t\t\taction = \"insertText\";\n\t\t\t\t\t\t\t\tdata.push(newBuffer[i]);\n\t\t\t\t\t\t\t\tcaretPos.begin--;\n\t\t\t\t\t\t\t\tcaretPos.end--;\n\t\t\t\t\t\t\t} else if (newBuffer[i] !== placeholder && newBuffer[i] !== marker &&\n\t\t\t\t\t\t\t\t(newBuffer[i + 1] === marker || (oldBuffer[i] !== newBuffer[i] && oldBuffer[i + 1] === newBuffer[i + 1] /*single char replacement*/))) { //replace selection\n\t\t\t\t\t\t\t\taction = \"insertReplacementText\";\n\t\t\t\t\t\t\t\tdata.push(newBuffer[i]);\n\t\t\t\t\t\t\t\tcaretPos.begin--;\n\t\t\t\t\t\t\t} else if (newBuffer[i] === marker) {  //delete~backspace\n\t\t\t\t\t\t\t\taction = \"deleteContentBackward\";\n\t\t\t\t\t\t\t\tif (isMask.call(inputmask, translatePosition.call(inputmask, i), true) || oldBuffer[i] === opts.radixPoint) caretPos.end++;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ti = bl;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\taction: action,\n\t\t\t\tdata: data,\n\t\t\t\tcaret: caretPos\n\t\t\t};\n\t\t}\n\n\t\tvar input = this,\n\t\t\tinputValue = input.inputmask._valueGet(true),\n\t\t\tbuffer = (inputmask.isRTL ? getBuffer.call(inputmask).slice().reverse() : getBuffer.call(inputmask)).join(\"\"),\n\t\t\tcaretPos = caret.call(inputmask, input, undefined, undefined, true);\n\n\t\tif (buffer !== inputValue) {\n\t\t\t// inputValue = radixPointHandler(input, inputValue, caretPos);\n\t\t\tinputValue = ieMobileHandler(input, inputValue, caretPos);\n\n\t\t\tvar changes = analyseChanges(inputValue, buffer, caretPos);\n\n\t\t\t// console.log(JSON.stringify(changes));\n\t\t\tif ((input.inputmask.shadowRoot || document).activeElement !== input) {\n\t\t\t\tinput.focus();\n\t\t\t}\n\t\t\twriteBuffer(input, getBuffer.call(inputmask));\n\t\t\tcaret.call(inputmask, input, caretPos.begin, caretPos.end, true);\n\t\t\tswitch (changes.action) {\n\t\t\t\tcase \"insertText\":\n\t\t\t\tcase \"insertReplacementText\":\n\t\t\t\t\tchanges.data.forEach(function (entry, ndx) {\n\t\t\t\t\t\tvar keypress = new $.Event(\"keypress\");\n\t\t\t\t\t\tkeypress.which = entry.charCodeAt(0);\n\t\t\t\t\t\tinputmask.ignorable = false; //make sure ignorable is ignored ;-)\n\t\t\t\t\t\tEventHandlers.keypressEvent.call(input, keypress);\n\t\t\t\t\t});\n\t\t\t\t\tsetTimeout(function () {  //#2195 trigger keyup to help some other plugins to track changes\n\t\t\t\t\t\tinputmask.$el.trigger(\"keyup\");\n\t\t\t\t\t}, 0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"deleteContentBackward\":\n\t\t\t\t\tvar keydown = new $.Event(\"keydown\");\n\t\t\t\t\tkeydown.keyCode = keyCode.BACKSPACE;\n\t\t\t\t\tEventHandlers.keydownEvent.call(input, keydown);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tapplyInputValue(input, inputValue);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\te.preventDefault();\n\t\t}\n\t},\n\tcompositionendEvent: function (e) {\n\t\tconst inputmask = this.inputmask;\n\n\t\tinputmask.isComposing = false;\n\t\tinputmask.$el.trigger(\"input\");\n\t},\n\tsetValueEvent: function (e) {\n\t\tconst inputmask = this.inputmask;\n\t\tvar input = this,\n\t\t\tvalue = (e && e.detail) ? e.detail[0] : arguments[1];\n\n\t\tif (value === undefined) {\n\t\t\tvalue = input.inputmask._valueGet(true);\n\t\t}\n\n\t\tapplyInputValue(input, value);\n\n\t\tif ((e.detail && e.detail[1] !== undefined) || arguments[2] !== undefined) {\n\t\t\tcaret.call(inputmask, input, e.detail ? e.detail[1] : arguments[2]);\n\t\t}\n\t}\n\t,\n\tfocusEvent: function (e) {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts;\n\t\tvar input = this,\n\t\t\tnptValue = input.inputmask._valueGet();\n\n\t\tif (opts.showMaskOnFocus) {\n\t\t\tif (nptValue !== getBuffer.call(inputmask).join(\"\")) {\n\t\t\t\twriteBuffer(input, getBuffer.call(inputmask), seekNext.call(inputmask, getLastValidPosition.call(inputmask)));\n\t\t\t} /*else if (mouseEnter === false) { //only executed on focus without mouseenter\n\t\t\t\t\tcaret(input, seekNext(getLastValidPosition()));\n\t\t\t\t}*/\n\t\t}\n\t\tif (opts.positionCaretOnTab === true && inputmask.mouseEnter === false && (!isComplete.call(inputmask, getBuffer.call(inputmask)) || getLastValidPosition.call(inputmask) === -1)) {\n\t\t\tEventHandlers.clickEvent.apply(input, [e, true]);\n\t\t}\n\t\tinputmask.undoValue = getBuffer.call(inputmask).join(\"\");\n\t},\n\tinvalidEvent: function (e) {\n\t\tthis.inputmask.validationEvent = true;\n\t},\n\tmouseleaveEvent: function () {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts;\n\n\t\tvar input = this;\n\t\tinputmask.mouseEnter = false;\n\t\tif (opts.clearMaskOnLostFocus && (input.inputmask.shadowRoot || document).activeElement !== input) {\n\t\t\tHandleNativePlaceholder(input, inputmask.originalPlaceholder);\n\t\t}\n\t},\n\tclickEvent: function (e, tabbed) {\n\t\tconst inputmask = this.inputmask;\n\n\t\tvar input = this;\n\t\tif ((input.inputmask.shadowRoot || document).activeElement === input) {\n\t\t\tvar newCaretPosition = determineNewCaretPosition.call(inputmask, caret.call(inputmask, input), tabbed);\n\t\t\tif (newCaretPosition !== undefined) {\n\t\t\t\tcaret.call(inputmask, input, newCaretPosition);\n\t\t\t}\n\t\t}\n\t},\n\tcutEvent: function (e) {\n\t\tconst inputmask = this.inputmask, maskset = inputmask.maskset;\n\n\t\tvar input = this,\n\t\t\tpos = caret.call(inputmask, input);\n\n\t\t//correct clipboardData\n\t\tvar clipboardData = window.clipboardData || e.clipboardData,\n\t\t\tclipData = inputmask.isRTL ? getBuffer.call(inputmask).slice(pos.end, pos.begin) : getBuffer.call(inputmask).slice(pos.begin, pos.end);\n\t\tclipboardData.setData(\"text\", inputmask.isRTL ? clipData.reverse().join(\"\") : clipData.join(\"\"));\n\t\tif (document.execCommand) document.execCommand(\"copy\"); // copy selected content to system clipbaord\n\n\t\thandleRemove.call(inputmask, input, keyCode.DELETE, pos);\n\t\twriteBuffer(input, getBuffer.call(inputmask), maskset.p, e, inputmask.undoValue !== getBuffer.call(inputmask).join(\"\"));\n\t}\n\t,\n\tblurEvent: function (e) {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts, $ = inputmask.dependencyLib;\n\n\t\tvar $input = $(this),\n\t\t\tinput = this;\n\t\tif (input.inputmask) {\n\t\t\tHandleNativePlaceholder(input, inputmask.originalPlaceholder);\n\t\t\tvar nptValue = input.inputmask._valueGet(),\n\t\t\t\tbuffer = getBuffer.call(inputmask).slice();\n\n\t\t\tif (nptValue !== \"\") {\n\t\t\t\tif (opts.clearMaskOnLostFocus) {\n\t\t\t\t\tif (getLastValidPosition.call(inputmask) === -1 && nptValue === getBufferTemplate.call(inputmask).join(\"\")) {\n\t\t\t\t\t\tbuffer = [];\n\t\t\t\t\t} else { //clearout optional tail of the mask\n\t\t\t\t\t\tclearOptionalTail.call(inputmask, buffer);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (isComplete.call(inputmask, buffer) === false) {\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t$input.trigger(\"incomplete\");\n\t\t\t\t\t}, 0);\n\t\t\t\t\tif (opts.clearIncomplete) {\n\t\t\t\t\t\tresetMaskSet.call(inputmask);\n\t\t\t\t\t\tif (opts.clearMaskOnLostFocus) {\n\t\t\t\t\t\t\tbuffer = [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tbuffer = getBufferTemplate.call(inputmask).slice();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\twriteBuffer(input, buffer, undefined, e);\n\t\t\t}\n\n\t\t\tif (inputmask.undoValue !== getBuffer.call(inputmask).join(\"\")) {\n\t\t\t\tinputmask.undoValue = getBuffer.call(inputmask).join(\"\");\n\t\t\t\t$input.trigger(\"change\");\n\t\t\t}\n\t\t}\n\t}\n\t,\n\tmouseenterEvent: function () {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts;\n\n\t\tvar input = this;\n\t\tinputmask.mouseEnter = true;\n\t\tif ((input.inputmask.shadowRoot || document).activeElement !== input) {\n\t\t\tif (inputmask.originalPlaceholder == undefined && input.placeholder !== inputmask.originalPlaceholder) {\n\t\t\t\tinputmask.originalPlaceholder = input.placeholder;\n\t\t\t}\n\t\t\tif (opts.showMaskOnHover) {\n\t\t\t\tHandleNativePlaceholder(input, (inputmask.isRTL ? getBufferTemplate.call(inputmask).slice().reverse() : getBufferTemplate.call(inputmask)).join(\"\"));\n\t\t\t}\n\t\t}\n\t}\n\t,\n\tsubmitEvent: function () { //trigger change on submit if any\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts;\n\n\t\tif (inputmask.undoValue !== getBuffer.call(inputmask).join(\"\")) {\n\t\t\tinputmask.$el.trigger(\"change\");\n\t\t}\n\t\tif (opts.clearMaskOnLostFocus && getLastValidPosition.call(inputmask) === -1 && inputmask._valueGet && inputmask._valueGet() === getBufferTemplate.call(inputmask).join(\"\")) {\n\t\t\tinputmask._valueSet(\"\"); //clear masktemplete on submit and still has focus\n\t\t}\n\t\tif (opts.clearIncomplete && isComplete.call(inputmask, getBuffer.call(inputmask)) === false) {\n\t\t\tinputmask._valueSet(\"\");\n\t\t}\n\t\tif (opts.removeMaskOnSubmit) {\n\t\t\tinputmask._valueSet(inputmask.unmaskedvalue(), true);\n\t\t\tsetTimeout(function () {\n\t\t\t\twriteBuffer(inputmask.el, getBuffer.call(inputmask));\n\t\t\t}, 0);\n\t\t}\n\t},\n\tresetEvent: function () {\n\t\tconst inputmask = this.inputmask;\n\n\t\tinputmask.refreshValue = true; //indicate a forced refresh when there is a call to the value before leaving the triggering event fn\n\t\tsetTimeout(function () {\n\t\t\tapplyInputValue(inputmask.el, inputmask._valueGet(true));\n\t\t}, 0);\n\t}\n};\n","import {\n\tdetermineTestTemplate,\n\tgetDecisionTaker,\n\tgetPlaceholder,\n\tgetTest,\n\tgetTests,\n\tgetTestTemplate\n} from \"./validation-tests\";\nimport keyCode from \"./keycode.json\";\nimport {\n\tdetermineLastRequiredPosition, determineNewCaretPosition,\n\tgetBuffer,\n\tgetLastValidPosition,\n\tisMask,\n\tresetMaskSet,\n\tseekNext,\n\tseekPrevious\n} from \"./positioning\";\nimport {EventHandlers} from \"./eventhandlers\";\n\nexport {alternate, checkAlternationMatch, isComplete, isValid, refreshFromBuffer, revalidateMask, handleRemove};\n\n//tobe put on prototype?\nfunction alternate(maskPos, c, strict, fromIsValid, rAltPos, selection) { //pos == true => generalize\n\tconst inputmask = this,\n\t\t$ = this.dependencyLib,\n\t\topts = this.opts,\n\t\tmaskset = inputmask.maskset;\n\n\tvar validPsClone = $.extend(true, {}, maskset.validPositions),\n\t\ttstClone = $.extend(true, {}, maskset.tests),\n\t\tlastAlt,\n\t\talternation,\n\t\tisValidRslt = false, returnRslt = false,\n\t\taltPos, prevAltPos, i, validPos,\n\t\tdecisionPos,\n\t\tlAltPos = rAltPos !== undefined ? rAltPos : getLastValidPosition.call(inputmask), nextPos, input, begin, end;\n\n\tif (selection) {\n\t\tbegin = selection.begin;\n\t\tend = selection.end;\n\t\tif (selection.begin > selection.end) {\n\t\t\tbegin = selection.end;\n\t\t\tend = selection.begin;\n\t\t}\n\t}\n\tif (lAltPos === -1 && rAltPos === undefined) { //do not recurse when already paste the beginning\n\t\tlastAlt = 0;\n\t\tprevAltPos = getTest.call(inputmask, lastAlt);\n\t\talternation = prevAltPos.alternation;\n\t} else {\n\t\t//find last modified alternation\n\t\tfor (; lAltPos >= 0; lAltPos--) {\n\t\t\taltPos = maskset.validPositions[lAltPos];\n\t\t\tif (altPos && altPos.alternation !== undefined) {\n\t\t\t\tif (prevAltPos && prevAltPos.locator[altPos.alternation] !== altPos.locator[altPos.alternation]) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tlastAlt = lAltPos;\n\t\t\t\talternation = maskset.validPositions[lastAlt].alternation;\n\t\t\t\tprevAltPos = altPos;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (alternation !== undefined) {\n\t\tdecisionPos = parseInt(lastAlt);\n\t\tmaskset.excludes[decisionPos] = maskset.excludes[decisionPos] || [];\n\t\tif (maskPos !== true) { //generalize\n\t\t\tmaskset.excludes[decisionPos].push(getDecisionTaker(prevAltPos) + \":\" + prevAltPos.alternation);\n\t\t}\n\n\t\tvar validInputs = [], resultPos = -1;\n\t\tfor (i = decisionPos; i < getLastValidPosition.call(inputmask, undefined, true) + 1; i++) {\n\t\t\tif (resultPos === -1 && maskPos <= i && c !== undefined) {\n\t\t\t\tvalidInputs.push(c);\n\t\t\t\tresultPos = validInputs.length - 1;\n\t\t\t}\n\t\t\tvalidPos = maskset.validPositions[i];\n\t\t\tif (validPos && validPos.generatedInput !== true && (selection === undefined || (i < begin || i >= end))) {\n\t\t\t\tvalidInputs.push(validPos.input);\n\t\t\t}\n\t\t\tdelete maskset.validPositions[i];\n\t\t}\n\t\tif (resultPos === -1 && c !== undefined) {\n\t\t\tvalidInputs.push(c);\n\t\t\tresultPos = validInputs.length - 1;\n\t\t}\n\n\t\twhile (maskset.excludes[decisionPos] !== undefined && maskset.excludes[decisionPos].length < 10) {\n\t\t\t// maskset.tests[decisionPos] = undefined; //clear decisionPos\n\t\t\tmaskset.tests = {};  //clear all\n\t\t\tresetMaskSet.call(inputmask, true); //clear getbuffer\n\t\t\tisValidRslt = true;\n\t\t\tfor (i = 0; i < validInputs.length; i++) {\n\t\t\t\tnextPos = isValidRslt.caret || (getLastValidPosition.call(inputmask, undefined, true) + 1);\n\t\t\t\tinput = validInputs[i];\n\t\t\t\tif (!(isValidRslt = isValid.call(inputmask, nextPos, input, false, fromIsValid, true))) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (i === resultPos) {\n\t\t\t\t\treturnRslt = isValidRslt;\n\t\t\t\t}\n\t\t\t\tif (maskPos == true && isValidRslt) {  //return validposition on generalise\n\t\t\t\t\treturnRslt = {caretPos: i};\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!isValidRslt) {\n\t\t\t\tresetMaskSet.call(inputmask);\n\t\t\t\tprevAltPos = getTest.call(inputmask, decisionPos);  //get the current decisionPos to exclude ~ needs to be before restoring the initial validation\n\t\t\t\t//reset & revert\n\t\t\t\tmaskset.validPositions = $.extend(true, {}, validPsClone);\n\t\t\t\tmaskset.tests = $.extend(true, {}, tstClone); //refresh tests after possible alternating\n\t\t\t\tif (maskset.excludes[decisionPos]) {\n\t\t\t\t\tvar decisionTaker = getDecisionTaker(prevAltPos);\n\t\t\t\t\tif (maskset.excludes[decisionPos].indexOf(decisionTaker + \":\" + prevAltPos.alternation) !== -1) {\n\t\t\t\t\t\treturnRslt = alternate.call(inputmask, maskPos, c, strict, fromIsValid, decisionPos - 1, selection);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tmaskset.excludes[decisionPos].push(decisionTaker + \":\" + prevAltPos.alternation);\n\t\t\t\t\tfor (i = decisionPos; i < getLastValidPosition.call(inputmask, undefined, true) + 1; i++) delete maskset.validPositions[i];\n\t\t\t\t} else { //latest alternation\n\t\t\t\t\treturnRslt = alternate.call(inputmask, maskPos, c, strict, fromIsValid, decisionPos - 1, selection);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\t//reset alternation excludes\n\tif (!returnRslt || opts.keepStatic !== false) {\n\t\tdelete maskset.excludes[decisionPos];\n\t}\n\treturn returnRslt;\n}\n\nfunction casing(elem, test, pos) {\n\tconst opts = this.opts,\n\t\tmaskset = this.maskset;\n\n\tswitch (opts.casing || test.casing) {\n\t\tcase \"upper\":\n\t\t\telem = elem.toUpperCase();\n\t\t\tbreak;\n\t\tcase \"lower\":\n\t\t\telem = elem.toLowerCase();\n\t\t\tbreak;\n\t\tcase \"title\":\n\t\t\tvar posBefore = maskset.validPositions[pos - 1];\n\t\t\tif (pos === 0 || posBefore && posBefore.input === String.fromCharCode(keyCode.SPACE)) {\n\t\t\t\telem = elem.toUpperCase();\n\t\t\t} else {\n\t\t\t\telem = elem.toLowerCase();\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tif (typeof opts.casing === \"function\") {\n\t\t\t\tvar args = Array.prototype.slice.call(arguments);\n\t\t\t\targs.push(maskset.validPositions);\n\t\t\t\telem = opts.casing.apply(this, args);\n\t\t\t}\n\t}\n\n\treturn elem;\n}\n\n//tobe put on prototype?\nfunction checkAlternationMatch(altArr1, altArr2, na) {\n\tconst opts = this.opts;\n\n\tvar altArrC = opts.greedy ? altArr2 : altArr2.slice(0, 1),\n\t\tisMatch = false,\n\t\tnaArr = na !== undefined ? na.split(\",\") : [],\n\t\tnaNdx;\n\n\t//remove no alternate indexes from alternation array\n\tfor (var i = 0; i < naArr.length; i++) {\n\t\tif ((naNdx = altArr1.indexOf(naArr[i])) !== -1) {\n\t\t\taltArr1.splice(naNdx, 1);\n\t\t}\n\t}\n\n\tfor (var alndx = 0; alndx < altArr1.length; alndx++) {\n\t\tif (altArrC.includes(altArr1[alndx])) {\n\t\t\tisMatch = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn isMatch;\n}\n\n//tobe put on prototype?\nfunction handleRemove(input, k, pos, strict, fromIsValid) {\n\tconst inputmask = this, maskset = this.maskset, opts = this.opts;\n\n\tif (opts.numericInput || inputmask.isRTL) {\n\t\tif (k === keyCode.BACKSPACE) {\n\t\t\tk = keyCode.DELETE;\n\t\t} else if (k === keyCode.DELETE) {\n\t\t\tk = keyCode.BACKSPACE;\n\t\t}\n\n\t\tif (inputmask.isRTL) {\n\t\t\tvar pend = pos.end;\n\t\t\tpos.end = pos.begin;\n\t\t\tpos.begin = pend;\n\t\t}\n\t}\n\n\tvar lvp = getLastValidPosition.call(inputmask, undefined, true);\n\tif (pos.end >= getBuffer.call(inputmask).length && lvp >= pos.end) { //handle numeric negate symbol offset, due to  dynamic jit masking\n\t\tpos.end = lvp + 1;\n\t}\n\n\tif (k === keyCode.BACKSPACE) {\n\t\tif ((pos.end - pos.begin < 1)) {\n\t\t\tpos.begin = seekPrevious.call(inputmask, pos.begin);\n\t\t}\n\t} else if (k === keyCode.DELETE) {\n\t\tif (pos.begin === pos.end) {\n\t\t\tpos.end = isMask.call(inputmask, pos.end, true, true) ? pos.end + 1 : seekNext.call(inputmask, pos.end) + 1;\n\t\t}\n\t}\n\tvar offset;\n\tif ((offset = revalidateMask.call(inputmask, pos)) !== false) {\n\t\tif (strict !== true && opts.keepStatic !== false || (opts.regex !== null && getTest.call(inputmask, pos.begin).match.def.indexOf(\"|\") !== -1)) { //TODO NEEDS BETTER CHECK WHEN TO ALTERNATE  ~ opts regex isn\"t good enough\n\t\t\tvar result = alternate.call(inputmask, true);\n\t\t\tif (result) {\n\t\t\t\tvar newPos = result.caret !== undefined ? result.caret : (result.pos ? seekNext.call(inputmask, result.pos.begin ? result.pos.begin : result.pos) : getLastValidPosition.call(inputmask, -1, true));\n\t\t\t\tif (k !== keyCode.DELETE || pos.begin > newPos) {\n\t\t\t\t\tpos.begin == newPos;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (strict !== true) {\n\t\t\tmaskset.p = k === keyCode.DELETE ? pos.begin + offset : pos.begin;\n\t\t}\n\t}\n}\n\n//tobe put on prototype?\nfunction isComplete(buffer) { //return true / false / undefined (repeat *)\n\tconst inputmask = this, opts = this.opts, maskset = this.maskset;\n\n\tif (typeof opts.isComplete === \"function\") return opts.isComplete(buffer, opts);\n\tif (opts.repeat === \"*\") return undefined;\n\tvar complete = false,\n\t\tlrp = determineLastRequiredPosition.call(inputmask, true),\n\t\taml = seekPrevious.call(inputmask, lrp.l);\n\n\tif (lrp.def === undefined || lrp.def.newBlockMarker || lrp.def.optionality || lrp.def.optionalQuantifier) {\n\t\tcomplete = true;\n\t\tfor (var i = 0; i <= aml; i++) {\n\t\t\tvar test = getTestTemplate.call(inputmask, i).match;\n\t\t\tif ((test.static !== true && maskset.validPositions[i] === undefined && test.optionality !== true && test.optionalQuantifier !== true) || (test.static === true && buffer[i] !== getPlaceholder.call(inputmask, i, test))) {\n\t\t\t\tcomplete = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn complete;\n}\n\n//tobe put on prototype?\nfunction isValid(pos, c, strict, fromIsValid, fromAlternate, validateOnly, fromCheckval) { //strict true ~ no correction or autofill\n\tconst inputmask = this,\n\t\t$ = this.dependencyLib,\n\t\topts = this.opts,\n\t\tel = inputmask.el,\n\t\tmaskset = inputmask.maskset;\n\n\tfunction isSelection(posObj) {\n\t\treturn inputmask.isRTL ? (posObj.begin - posObj.end) > 1 || ((posObj.begin - posObj.end) === 1) :\n\t\t\t(posObj.end - posObj.begin) > 1 || ((posObj.end - posObj.begin) === 1);\n\t}\n\n\tstrict = strict === true; //always set a value to strict to prevent possible strange behavior in the extensions\n\n\tvar maskPos = pos;\n\tif (pos.begin !== undefined) { //position was a position object - used to handle a delete by typing over a selection\n\t\tmaskPos = inputmask.isRTL ? pos.end : pos.begin;\n\t}\n\n\tfunction processCommandObject(commandObj) {\n\t\tif (commandObj !== undefined) {\n\t\t\tif (commandObj.remove !== undefined) { //remove position(s)\n\t\t\t\tif (!Array.isArray(commandObj.remove)) commandObj.remove = [commandObj.remove];\n\t\t\t\tcommandObj.remove.sort(function (a, b) {\n\t\t\t\t\treturn b.pos - a.pos;\n\t\t\t\t}).forEach(function (lmnt) {\n\t\t\t\t\trevalidateMask.call(inputmask, {begin: lmnt, end: lmnt + 1});\n\t\t\t\t});\n\t\t\t\tcommandObj.remove = undefined;\n\t\t\t}\n\t\t\tif (commandObj.insert !== undefined) { //insert position(s)\n\t\t\t\tif (!Array.isArray(commandObj.insert)) commandObj.insert = [commandObj.insert];\n\t\t\t\tcommandObj.insert.sort(function (a, b) {\n\t\t\t\t\treturn a.pos - b.pos;\n\t\t\t\t}).forEach(function (lmnt) {\n\t\t\t\t\tif (lmnt.c !== \"\") {\n\t\t\t\t\t\tisValid.call(inputmask, lmnt.pos, lmnt.c, lmnt.strict !== undefined ? lmnt.strict : true, lmnt.fromIsValid !== undefined ? lmnt.fromIsValid : fromIsValid);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tcommandObj.insert = undefined;\n\t\t\t}\n\n\t\t\tif (commandObj.refreshFromBuffer && commandObj.buffer) {\n\t\t\t\tvar refresh = commandObj.refreshFromBuffer;\n\t\t\t\trefreshFromBuffer.call(inputmask, refresh === true ? refresh : refresh.start, refresh.end, commandObj.buffer);\n\t\t\t\tcommandObj.refreshFromBuffer = undefined;\n\t\t\t}\n\n\t\t\tif (commandObj.rewritePosition !== undefined) {\n\t\t\t\tmaskPos = commandObj.rewritePosition;\n\t\t\t\t// commandObj.rewritePosition = undefined;\n\t\t\t\tcommandObj = true;\n\t\t\t}\n\t\t}\n\t\treturn commandObj;\n\t}\n\n\tfunction _isValid(position, c, strict) {\n\t\tvar rslt = false;\n\n\t\tgetTests.call(inputmask, position).every(function (tst, ndx) {\n\t\t\tvar test = tst.match;\n\t\t\t//make sure the buffer is set and correct\n\t\t\tgetBuffer.call(inputmask, true);\n\t\t\t//return is false or a json object => { pos: ??, c: ??} or true\n\t\t\trslt = test.fn != null ?\n\t\t\t\ttest.fn.test(c, maskset, position, strict, opts, isSelection(pos)) : (c === test.def || c === opts.skipOptionalPartCharacter) && test.def !== \"\" ? //non mask\n\t\t\t\t\t{\n\t\t\t\t\t\tc: getPlaceholder.call(inputmask, position, test, true) || test.def,\n\t\t\t\t\t\tpos: position\n\t\t\t\t\t} : false;\n\n\t\t\tif (rslt !== false) {\n\t\t\t\tvar elem = rslt.c !== undefined ? rslt.c : c, validatedPos = position;\n\t\t\t\telem = (elem === opts.skipOptionalPartCharacter && test.static === true) ?\n\t\t\t\t\t(getPlaceholder.call(inputmask, position, test, true) || test.def) : elem;\n\n\t\t\t\trslt = processCommandObject(rslt);\n\n\t\t\t\tif (rslt !== true && rslt.pos !== undefined && rslt.pos !== position) { //their is a position offset\n\t\t\t\t\tvalidatedPos = rslt.pos;\n\t\t\t\t}\n\n\t\t\t\tif (rslt !== true && rslt.pos === undefined && rslt.c === undefined) {\n\t\t\t\t\treturn false; //breakout if nothing to insert\n\t\t\t\t}\n\n\t\t\t\tif (revalidateMask.call(inputmask, pos, $.extend({}, tst, {\n\t\t\t\t\t\"input\": casing.call(inputmask, elem, test, validatedPos)\n\t\t\t\t}), fromIsValid, validatedPos) === false) {\n\t\t\t\t\trslt = false;\n\t\t\t\t}\n\t\t\t\treturn false; //break from loop\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\t\treturn rslt;\n\t}\n\n\tvar result = true,\n\t\tpositionsClone = $.extend(true, {}, maskset.validPositions); //clone the currentPositions\n\n\tif (opts.keepStatic === false && maskset.excludes[maskPos] !== undefined && fromAlternate !== true && fromIsValid !== true) {\n\t\tfor (var i = maskPos; i < (inputmask.isRTL ? pos.begin : pos.end); i++) {\n\t\t\tif (maskset.excludes[i] !== undefined) {\n\t\t\t\tmaskset.excludes[i] = undefined;\n\t\t\t\tdelete maskset.tests[i];\n\t\t\t}\n\t\t}\n\t}\n\n\tif (typeof opts.preValidation === \"function\" && fromIsValid !== true && validateOnly !== true) {\n\t\tresult = opts.preValidation.call(el, getBuffer.call(inputmask), maskPos, c, isSelection(pos), opts, maskset, pos, strict || fromAlternate);\n\t\tresult = processCommandObject(result);\n\t}\n\tif (result === true) { //preValidation result\n\t\tif (inputmask.maxLength === undefined || maskPos < inputmask.maxLength) {\n\t\t\tresult = _isValid(maskPos, c, strict);\n\t\t\tif ((!strict || fromIsValid === true) && result === false && validateOnly !== true) {\n\t\t\t\tvar currentPosValid = maskset.validPositions[maskPos];\n\t\t\t\tif (currentPosValid && currentPosValid.match.static === true && (currentPosValid.match.def === c || c === opts.skipOptionalPartCharacter)) {\n\t\t\t\t\tresult = {\n\t\t\t\t\t\t\"caret\": seekNext.call(inputmask, maskPos)\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tif (opts.insertMode || maskset.validPositions[seekNext.call(inputmask, maskPos)] === undefined || pos.end > maskPos) { //does the input match on a further position?\n\t\t\t\t\t\tvar skip = false;\n\t\t\t\t\t\tif (maskset.jitOffset[maskPos] && maskset.validPositions[seekNext.call(inputmask, maskPos)] === undefined) {\n\t\t\t\t\t\t\tresult = isValid.call(inputmask, maskPos + maskset.jitOffset[maskPos], c, true);\n\t\t\t\t\t\t\tif (result !== false) {\n\t\t\t\t\t\t\t\tif (fromAlternate !== true) result.caret = maskPos;\n\t\t\t\t\t\t\t\tskip = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (pos.end > maskPos) {\n\t\t\t\t\t\t\tmaskset.validPositions[maskPos] = undefined;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!skip && !isMask.call(inputmask, maskPos, opts.keepStatic && maskPos === 0)) {\n\t\t\t\t\t\t\tfor (var nPos = maskPos + 1, snPos = seekNext.call(inputmask, maskPos, false, maskPos !== 0); nPos <= snPos; nPos++) {\n\t\t\t\t\t\t\t\t// if (!isMask(nPos, true)) {\n\t\t\t\t\t\t\t\t// \tcontinue;\n\t\t\t\t\t\t\t\t// }\n\t\t\t\t\t\t\t\tresult = _isValid(nPos, c, strict);\n\t\t\t\t\t\t\t\tif (result !== false) {\n\t\t\t\t\t\t\t\t\tresult = trackbackPositions.call(inputmask, maskPos, result.pos !== undefined ? result.pos : nPos) || result;\n\t\t\t\t\t\t\t\t\tmaskPos = nPos;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tresult = false;\n\t\t}\n\n\n\t\tif (result === false && opts.keepStatic && (isComplete.call(inputmask, getBuffer.call(inputmask)) || maskPos === 0) && !strict && fromAlternate !== true) { //try fuzzy alternator logic\n\t\t\tresult = alternate.call(inputmask, maskPos, c, strict, fromIsValid, undefined, pos);\n\t\t} else if (isSelection(pos) && maskset.tests[maskPos] && maskset.tests[maskPos].length > 1 && opts.keepStatic && !strict && fromAlternate !== true) { //selection clears an alternated keepstatic mask ~ #2189\n\t\t\tresult = alternate.call(inputmask, true);\n\t\t}\n\n\t\tif (result === true) {\n\t\t\tresult = {\n\t\t\t\t\"pos\": maskPos\n\t\t\t};\n\t\t}\n\t}\n\tif (typeof opts.postValidation === \"function\" && fromIsValid !== true && validateOnly !== true) {\n\t\tvar postResult = opts.postValidation.call(el, getBuffer.call(inputmask, true), pos.begin !== undefined ? (inputmask.isRTL ? pos.end : pos.begin) : pos, c, result, opts, maskset, strict, fromCheckval);\n\t\tif (postResult !== undefined) {\n\t\t\tresult = postResult === true ? result : postResult;\n\t\t}\n\t}\n\n\tif (result && result.pos === undefined) {\n\t\tresult.pos = maskPos;\n\t}\n\n\tif (result === false || validateOnly === true) {\n\t\tresetMaskSet.call(inputmask, true);\n\t\tmaskset.validPositions = $.extend(true, {}, positionsClone); //revert validation changes\n\t} else {\n\t\ttrackbackPositions.call(inputmask, undefined, maskPos, true);\n\t}\n\n\tvar endResult = processCommandObject(result);\n\t// console.log(\"returned result \" + JSON.stringify(endResult));\n\treturn endResult;\n}\n\n//tobe put on prototype?\nfunction positionCanMatchDefinition(pos, testDefinition, opts) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset;\n\n\tvar valid = false,\n\t\ttests = getTests.call(inputmask, pos);\n\tfor (var tndx = 0; tndx < tests.length; tndx++) {\n\t\tif (tests[tndx].match &&\n\t\t\t((tests[tndx].match[\"nativeDef\"] === testDefinition.match[opts.shiftPositions ? \"def\" : \"nativeDef\"] && (!opts.shiftPositions || !testDefinition.match.static)) ||\n\t\t\t\ttests[tndx].match[\"nativeDef\"] === testDefinition.match[\"nativeDef\"])) {\n\t\t\tvalid = true;\n\t\t\tbreak;\n\t\t} else if (tests[tndx].match && tests[tndx].match[\"def\"] === testDefinition.match[\"nativeDef\"]) {\n\t\t\tvalid = undefined;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (valid === false) {\n\t\tif (maskset.jitOffset[pos] !== undefined) {\n\t\t\tvalid = positionCanMatchDefinition.call(inputmask, pos + maskset.jitOffset[pos], testDefinition, opts);\n\t\t}\n\t}\n\treturn valid;\n}\n\n//tobe put on prototype?\nfunction refreshFromBuffer(start, end, buffer) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset,\n\t\topts = this.opts,\n\t\t$ = this.dependencyLib,\n\t\tel = inputmask.el;\n\n\t// checkVal.call(inputmask, el, false, true, isRTL ? buffer.reverse() : buffer);\n\tvar i, p, skipOptionalPartCharacter = opts.skipOptionalPartCharacter,\n\t\tbffr = inputmask.isRTL ? buffer.slice().reverse() : buffer;\n\topts.skipOptionalPartCharacter = \"\";\n\tif (start === true) {\n\t\tresetMaskSet.call(inputmask);\n\t\tmaskset.tests = {}; //refresh tests after possible alternating\n\t\tstart = 0;\n\t\tend = buffer.length;\n\t\tp = determineNewCaretPosition.call(inputmask, {begin: 0, end: 0}, false).begin;\n\t} else {\n\t\tfor (i = start; i < end; i++) {\n\t\t\tdelete maskset.validPositions[i];\n\t\t}\n\t\tp = start;\n\t}\n\n\tvar keypress = new $.Event(\"keypress\");\n\tfor (i = start; i < end; i++) {\n\t\tkeypress.which = bffr[i].toString().charCodeAt(0);\n\t\tinputmask.ignorable = false; //make sure ignorable is ignored ;-)\n\t\tvar valResult = EventHandlers.keypressEvent.call(el, keypress, true, false, false, p);\n\t\tif (valResult !== false) {\n\t\t\tp = valResult.forwardPosition;\n\t\t}\n\t}\n\n\topts.skipOptionalPartCharacter = skipOptionalPartCharacter;\n}\n\n//tobe put on prototype?\n//fill in best positions according the current input\nfunction trackbackPositions(originalPos, newPos, fillOnly) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset,\n\t\t$ = this.dependencyLib;\n\n\t// console.log(\"trackbackPositions \" + originalPos + \" \" + newPos);\n\tif (originalPos === undefined) {\n\t\t//find previous valid\n\t\tfor (originalPos = newPos - 1; originalPos > 0; originalPos--) {\n\t\t\tif (maskset.validPositions[originalPos]) break;\n\t\t}\n\t}\n\tfor (var ps = originalPos; ps < newPos; ps++) {\n\t\tif (maskset.validPositions[ps] === undefined && !isMask.call(inputmask, ps, true)) {\n\t\t\tvar vp = ps == 0 ? getTest.call(inputmask, ps) : maskset.validPositions[ps - 1];\n\t\t\tif (vp) {\n\t\t\t\tvar tests = getTests.call(inputmask, ps).slice();\n\t\t\t\tif (tests[tests.length - 1].match.def === \"\") tests.pop();\n\t\t\t\tvar bestMatch = determineTestTemplate.call(inputmask, ps, tests), np;\n\t\t\t\tif (bestMatch && (bestMatch.match.jit !== true || (bestMatch.match.newBlockMarker === \"master\" && (np = maskset.validPositions[ps + 1]) && np.match.optionalQuantifier === true))) {\n\t\t\t\t\tbestMatch = $.extend({}, bestMatch, {\n\t\t\t\t\t\t\"input\": getPlaceholder.call(inputmask, ps, bestMatch.match, true) || bestMatch.match.def\n\t\t\t\t\t});\n\t\t\t\t\tbestMatch.generatedInput = true;\n\t\t\t\t\trevalidateMask.call(inputmask, ps, bestMatch, true);\n\n\t\t\t\t\tif (fillOnly !== true) {\n\t\t\t\t\t\t//revalidate the new position to update the locator value\n\t\t\t\t\t\tvar cvpInput = maskset.validPositions[newPos].input;\n\t\t\t\t\t\tmaskset.validPositions[newPos] = undefined;\n\t\t\t\t\t\treturn isValid.call(inputmask, newPos, cvpInput, true, true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n//tobe put on prototype?\nfunction revalidateMask(pos, validTest, fromIsValid, validatedPos) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset,\n\t\topts = this.opts,\n\t\t$ = this.dependencyLib;\n\n\tfunction IsEnclosedStatic(pos, valids, selection) {\n\t\tvar posMatch = valids[pos];\n\t\tif (posMatch !== undefined && posMatch.match.static === true && posMatch.match.optionality !== true && (valids[0] === undefined || valids[0].alternation === undefined)) {\n\t\t\tvar prevMatch = selection.begin <= pos - 1 ? valids[pos - 1] && valids[pos - 1].match.static === true && valids[pos - 1] : valids[pos - 1],\n\t\t\t\tnextMatch = selection.end > pos + 1 ? valids[pos + 1] && valids[pos + 1].match.static === true && valids[pos + 1] : valids[pos + 1];\n\t\t\treturn prevMatch && nextMatch;\n\t\t}\n\t\treturn false;\n\t}\n\n\tvar offset = 0, begin = pos.begin !== undefined ? pos.begin : pos, end = pos.end !== undefined ? pos.end : pos;\n\tif (pos.begin > pos.end) {\n\t\tbegin = pos.end;\n\t\tend = pos.begin;\n\t}\n\n\tvalidatedPos = validatedPos !== undefined ? validatedPos : begin;\n\tif (begin !== end || (opts.insertMode && maskset.validPositions[validatedPos] !== undefined && fromIsValid === undefined) || validTest === undefined) {\n\t\t//reposition & revalidate others\n\t\tvar positionsClone = $.extend(true, {}, maskset.validPositions),\n\t\t\tlvp = getLastValidPosition.call(inputmask, undefined, true),\n\t\t\ti;\n\t\tmaskset.p = begin; //needed for alternated position after overtype selection\n\n\t\tfor (i = lvp; i >= begin; i--) {\n\t\t\tdelete maskset.validPositions[i];\n\t\t\tif (validTest === undefined) delete maskset.tests[i + 1];\n\t\t}\n\n\t\tvar valid = true, j = validatedPos,\n\t\t\tposMatch = j, t, canMatch;\n\n\t\tif (validTest) {\n\t\t\tmaskset.validPositions[validatedPos] = $.extend(true, {}, validTest);\n\t\t\tposMatch++;\n\t\t\tj++;\n\t\t}\n\n\t\tfor (i = validTest ? end : end - 1; i <= lvp; i++) {\n\t\t\tif ((t = positionsClone[i]) !== undefined && t.generatedInput !== true &&\n\t\t\t\t(i >= end || (i >= begin && IsEnclosedStatic(i, positionsClone, {\n\t\t\t\t\tbegin: begin,\n\t\t\t\t\tend: end\n\t\t\t\t})))) {\n\t\t\t\twhile (getTest.call(inputmask, posMatch).match.def !== \"\") { //loop needed to match further positions\n\t\t\t\t\tif ((canMatch = positionCanMatchDefinition.call(inputmask, posMatch, t, opts)) !== false || t.match.def === \"+\") { //validated match //we still need some hackery for the + validator (numeric alias)\n\t\t\t\t\t\tif (t.match.def === \"+\") getBuffer.call(inputmask, true);\n\t\t\t\t\t\tvar result = isValid.call(inputmask, posMatch, t.input, t.match.def !== \"+\", t.match.def !== \"+\");\n\t\t\t\t\t\tvalid = result !== false;\n\t\t\t\t\t\tj = (result.pos || posMatch) + 1;\n\t\t\t\t\t\tif (!valid && canMatch) break;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t}\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\tif (validTest === undefined && t.match.static && i === pos.begin) offset++;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (!valid && posMatch > maskset.maskLength) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tposMatch++;\n\t\t\t\t}\n\t\t\t\tif (getTest.call(inputmask, posMatch).match.def == \"\") {\n\t\t\t\t\tvalid = false;\n\t\t\t\t}\n\t\t\t\t//restore position\n\t\t\t\tposMatch = j;\n\t\t\t}\n\t\t\tif (!valid) break;\n\t\t}\n\n\t\tif (!valid) {\n\t\t\tmaskset.validPositions = $.extend(true, {}, positionsClone);\n\t\t\tresetMaskSet.call(inputmask, true);\n\t\t\treturn false;\n\t\t}\n\t} else if (validTest && getTest.call(inputmask, validatedPos).match.cd === validTest.match.cd) {\n\t\tmaskset.validPositions[validatedPos] = $.extend(true, {}, validTest);\n\t}\n\n\tresetMaskSet.call(inputmask, true);\n\treturn offset;\n}\n","import {\n\tdetermineTestTemplate,\n\tgetMaskTemplate,\n\tgetPlaceholder,\n\tgetTest,\n\tgetTests,\n\tgetTestTemplate\n} from \"./validation-tests\";\nimport {checkAlternationMatch} from \"./validation\";\nimport {mask} from \"./mask\";\n\nexport {\n\tcaret,\n\tdetermineLastRequiredPosition,\n\tdetermineNewCaretPosition,\n\tgetBuffer,\n\tgetBufferTemplate,\n\tgetLastValidPosition,\n\tisMask,\n\tresetMaskSet,\n\tseekNext,\n\tseekPrevious,\n\ttranslatePosition\n};\n\n//tobe put on prototype?\nfunction caret(input, begin, end, notranslate, isDelete) {\n\tconst inputmask = this,\n\t\topts = this.opts;\n\n\tvar range;\n\tif (begin !== undefined) {\n\t\tif (Array.isArray(begin)) {\n\t\t\tend = inputmask.isRTL ? begin[0] : begin[1];\n\t\t\tbegin = inputmask.isRTL ? begin[1] : begin[0];\n\t\t}\n\t\tif (begin.begin !== undefined) {\n\t\t\tend = inputmask.isRTL ? begin.begin : begin.end;\n\t\t\tbegin = inputmask.isRTL ? begin.end : begin.begin;\n\t\t}\n\t\tif (typeof begin === \"number\") {\n\t\t\tbegin = notranslate ? begin : translatePosition.call(inputmask, begin);\n\t\t\tend = notranslate ? end : translatePosition.call(inputmask, end);\n\t\t\tend = (typeof end == \"number\") ? end : begin;\n\t\t\t// if (!$(input).is(\":visible\")) {\n\t\t\t// \treturn;\n\t\t\t// }\n\n\t\t\tvar scrollCalc = parseInt(((input.ownerDocument.defaultView || window).getComputedStyle ? (input.ownerDocument.defaultView || window).getComputedStyle(input, null) : input.currentStyle).fontSize) * end;\n\t\t\tinput.scrollLeft = scrollCalc > input.scrollWidth ? scrollCalc : 0;\n\t\t\tinput.inputmask.caretPos = {begin: begin, end: end}; //track caret internally\n\t\t\tif (opts.insertModeVisual && opts.insertMode === false && begin === end) {\n\t\t\t\tif (!isDelete) {\n\t\t\t\t\tend++; //set visualization for insert/overwrite mode\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (input === (input.inputmask.shadowRoot || document).activeElement) {\n\t\t\t\tif (\"setSelectionRange\" in input) {\n\t\t\t\t\tinput.setSelectionRange(begin, end);\n\t\t\t\t} else if (window.getSelection) {\n\t\t\t\t\trange = document.createRange();\n\t\t\t\t\tif (input.firstChild === undefined || input.firstChild === null) {\n\t\t\t\t\t\tvar textNode = document.createTextNode(\"\");\n\t\t\t\t\t\tinput.appendChild(textNode);\n\t\t\t\t\t}\n\t\t\t\t\trange.setStart(input.firstChild, begin < input.inputmask._valueGet().length ? begin : input.inputmask._valueGet().length);\n\t\t\t\t\trange.setEnd(input.firstChild, end < input.inputmask._valueGet().length ? end : input.inputmask._valueGet().length);\n\t\t\t\t\trange.collapse(true);\n\t\t\t\t\tvar sel = window.getSelection();\n\t\t\t\t\tsel.removeAllRanges();\n\t\t\t\t\tsel.addRange(range);\n\t\t\t\t\t//input.focus();\n\t\t\t\t} else if (input.createTextRange) {\n\t\t\t\t\trange = input.createTextRange();\n\t\t\t\t\trange.collapse(true);\n\t\t\t\t\trange.moveEnd(\"character\", end);\n\t\t\t\t\trange.moveStart(\"character\", begin);\n\t\t\t\t\trange.select();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (\"selectionStart\" in input && \"selectionEnd\" in input) {\n\t\t\tbegin = input.selectionStart;\n\t\t\tend = input.selectionEnd;\n\t\t} else if (window.getSelection) {\n\t\t\trange = window.getSelection().getRangeAt(0);\n\t\t\tif (range.commonAncestorContainer.parentNode === input || range.commonAncestorContainer === input) {\n\t\t\t\tbegin = range.startOffset;\n\t\t\t\tend = range.endOffset;\n\t\t\t}\n\t\t} else if (document.selection && document.selection.createRange) {\n\t\t\trange = document.selection.createRange();\n\t\t\tbegin = 0 - range.duplicate().moveStart(\"character\", -input.inputmask._valueGet().length);\n\t\t\tend = begin + range.text.length;\n\t\t}\n\n\t\t// if (opts.insertModeVisual && opts.insertMode === false && begin === (end - 1)) end--; //correct caret for insert/overwrite mode\n\n\t\t/*eslint-disable consistent-return */\n\t\treturn {\n\t\t\t\"begin\": notranslate ? begin : translatePosition.call(inputmask, begin),\n\t\t\t\"end\": notranslate ? end : translatePosition.call(inputmask, end)\n\t\t};\n\t\t/*eslint-enable consistent-return */\n\t}\n}\n\n//tobe put on prototype?\nfunction determineLastRequiredPosition(returnDefinition) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset,\n\t\t$ = this.dependencyLib;\n\n\tvar buffer = getMaskTemplate.call(inputmask, true, getLastValidPosition.call(inputmask), true, true),\n\t\tbl = buffer.length,\n\t\tpos, lvp = getLastValidPosition.call(inputmask),\n\t\tpositions = {},\n\t\tlvTest = maskset.validPositions[lvp],\n\t\tndxIntlzr = lvTest !== undefined ? lvTest.locator.slice() : undefined,\n\t\ttestPos;\n\tfor (pos = lvp + 1; pos < buffer.length; pos++) {\n\t\ttestPos = getTestTemplate.call(inputmask, pos, ndxIntlzr, pos - 1);\n\t\tndxIntlzr = testPos.locator.slice();\n\t\tpositions[pos] = $.extend(true, {}, testPos);\n\t}\n\n\tvar lvTestAlt = lvTest && lvTest.alternation !== undefined ? lvTest.locator[lvTest.alternation] : undefined;\n\tfor (pos = bl - 1; pos > lvp; pos--) {\n\t\ttestPos = positions[pos];\n\t\tif ((testPos.match.optionality ||\n\t\t\t(testPos.match.optionalQuantifier && testPos.match.newBlockMarker) ||\n\t\t\t(lvTestAlt &&\n\t\t\t\t(\n\t\t\t\t\t(lvTestAlt !== positions[pos].locator[lvTest.alternation] && testPos.match.static != true) ||\n\t\t\t\t\t(testPos.match.static === true &&\n\t\t\t\t\t\ttestPos.locator[lvTest.alternation] &&\n\t\t\t\t\t\tcheckAlternationMatch.call(inputmask, testPos.locator[lvTest.alternation].toString().split(\",\"), lvTestAlt.toString().split(\",\")) &&\n\t\t\t\t\t\tgetTests.call(inputmask, pos)[0].def !== \"\")\n\t\t\t\t)\n\t\t\t)) &&\n\t\t\tbuffer[pos] === getPlaceholder.call(inputmask, pos, testPos.match)) {\n\t\t\tbl--;\n\t\t} else {\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn returnDefinition ? {\n\t\t\"l\": bl,\n\t\t\"def\": positions[bl] ? positions[bl].match : undefined\n\t} : bl;\n}\n\n//tobe put on prototype?\nfunction determineNewCaretPosition(selectedCaret, tabbed) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset,\n\t\topts = this.opts;\n\n\tfunction doRadixFocus(clickPos) {\n\t\tif (opts.radixPoint !== \"\" && opts.digits !== 0) {\n\t\t\tvar vps = maskset.validPositions;\n\t\t\tif (vps[clickPos] === undefined || (vps[clickPos].input === getPlaceholder.call(inputmask, clickPos))) {\n\t\t\t\tif (clickPos < seekNext.call(inputmask, -1)) return true;\n\t\t\t\tvar radixPos = getBuffer.call(inputmask).indexOf(opts.radixPoint);\n\t\t\t\tif (radixPos !== -1) {\n\t\t\t\t\tfor (var vp in vps) {\n\t\t\t\t\t\tif (vps[vp] && radixPos < vp && vps[vp].input !== getPlaceholder.call(inputmask, vp)) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tif (tabbed) {\n\t\tif (inputmask.isRTL) {\n\t\t\tselectedCaret.end = selectedCaret.begin;\n\t\t} else {\n\t\t\tselectedCaret.begin = selectedCaret.end;\n\t\t}\n\t}\n\tif (selectedCaret.begin === selectedCaret.end) {\n\t\tswitch (opts.positionCaretOnClick) {\n\t\t\tcase \"none\":\n\t\t\t\tbreak;\n\t\t\tcase \"select\":\n\t\t\t\tselectedCaret = {begin: 0, end: getBuffer.call(inputmask).length};\n\t\t\t\tbreak;\n\t\t\tcase \"ignore\":\n\t\t\t\tselectedCaret.end = selectedCaret.begin = seekNext.call(inputmask, getLastValidPosition.call(inputmask));\n\t\t\t\tbreak;\n\t\t\tcase \"radixFocus\":\n\t\t\t\tif (doRadixFocus(selectedCaret.begin)) {\n\t\t\t\t\tvar radixPos = getBuffer.call(inputmask).join(\"\").indexOf(opts.radixPoint);\n\t\t\t\t\tselectedCaret.end = selectedCaret.begin = opts.numericInput ? seekNext.call(inputmask, radixPos) : radixPos;\n\t\t\t\t\tbreak;\n\t\t\t\t} //fallback to lvp\n\t\t\t// eslint-disable-next-line no-fallthrough\n\t\t\tdefault: //lvp:\n\t\t\t\tvar clickPosition = selectedCaret.begin,\n\t\t\t\t\tlvclickPosition = getLastValidPosition.call(inputmask, clickPosition, true),\n\t\t\t\t\tlastPosition = seekNext.call(inputmask, (lvclickPosition === -1 && !isMask.call(inputmask, 0)) ? -1 : lvclickPosition);\n\n\t\t\t\tif (clickPosition <= lastPosition) {\n\t\t\t\t\tselectedCaret.end = selectedCaret.begin = !isMask.call(inputmask, clickPosition, false, true) ? seekNext.call(inputmask, clickPosition) : clickPosition;\n\t\t\t\t} else {\n\t\t\t\t\tvar lvp = maskset.validPositions[lvclickPosition],\n\t\t\t\t\t\ttt = getTestTemplate.call(inputmask, lastPosition, lvp ? lvp.match.locator : undefined, lvp),\n\t\t\t\t\t\tplaceholder = getPlaceholder.call(inputmask, lastPosition, tt.match);\n\t\t\t\t\tif ((placeholder !== \"\" && getBuffer.call(inputmask)[lastPosition] !== placeholder && tt.match.optionalQuantifier !== true && tt.match.newBlockMarker !== true) || (!isMask.call(inputmask, lastPosition, opts.keepStatic, true) && tt.match.def === placeholder)) {\n\t\t\t\t\t\tvar newPos = seekNext.call(inputmask, lastPosition);\n\t\t\t\t\t\tif (clickPosition >= newPos || clickPosition === lastPosition) {\n\t\t\t\t\t\t\tlastPosition = newPos;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tselectedCaret.end = selectedCaret.begin = lastPosition;\n\t\t\t\t}\n\t\t}\n\n\t\treturn selectedCaret;\n\t}\n}\n\n\n//tobe put on prototype?\nfunction getBuffer(noCache) {\n\tconst inputmask = this, maskset = this.maskset;\n\n\tif (maskset.buffer === undefined || noCache === true) {\n\t\tmaskset.buffer = getMaskTemplate.call(inputmask, true, getLastValidPosition.call(inputmask), true);\n\t\tif (maskset._buffer === undefined) maskset._buffer = maskset.buffer.slice();\n\t}\n\treturn maskset.buffer;\n}\n\n//tobe put on prototype?\nfunction getBufferTemplate() {\n\tconst inputmask = this, maskset = this.maskset;\n\n\tif (maskset._buffer === undefined) {\n\t\t//generate template\n\t\tmaskset._buffer = getMaskTemplate.call(inputmask, false, 1);\n\t\tif (maskset.buffer === undefined) maskset.buffer = maskset._buffer.slice();\n\t}\n\treturn maskset._buffer;\n}\n\n//tobe put on prototype?\nfunction getLastValidPosition(closestTo, strict, validPositions) {\n\tconst maskset = this.maskset;\n\n\tvar before = -1,\n\t\tafter = -1,\n\t\tvalids = validPositions || maskset.validPositions; //for use in valhook ~ context switch\n\tif (closestTo === undefined) closestTo = -1;\n\tfor (var posNdx in valids) {\n\t\tvar psNdx = parseInt(posNdx);\n\t\tif (valids[psNdx] && (strict || valids[psNdx].generatedInput !== true)) {\n\t\t\tif (psNdx <= closestTo) before = psNdx;\n\t\t\tif (psNdx >= closestTo) after = psNdx;\n\t\t}\n\t}\n\treturn (before === -1 || before == closestTo) ? after : after == -1 ? before : (closestTo - before) < (after - closestTo) ? before : after;\n}\n\n//tobe put on prototype?\nfunction isMask(pos, strict, fuzzy) {\n\tconst inputmask = this, maskset = this.maskset;\n\n\tvar test = getTestTemplate.call(inputmask, pos).match;\n\tif (test.def === \"\") test = getTest.call(inputmask, pos).match;\n\n\tif (test.static !== true) {\n\t\treturn test.fn;\n\t}\n\tif (fuzzy === true && (maskset.validPositions[pos] !== undefined && maskset.validPositions[pos].generatedInput !== true)) {\n\t\treturn true;\n\t}\n\n\tif (strict !== true && pos > -1) {\n\t\tif (fuzzy) { //check on the number of tests\n\t\t\tvar tests = getTests.call(inputmask, pos);\n\t\t\treturn tests.length > (1 + (tests[tests.length - 1].match.def === \"\" ? 1 : 0));\n\t\t}\n\t\t//else based on the template\n\t\tvar testTemplate = determineTestTemplate.call(inputmask, pos, getTests.call(inputmask, pos));\n\t\tvar testPlaceHolder = getPlaceholder.call(inputmask, pos, testTemplate.match);\n\t\treturn testTemplate.match.def !== testPlaceHolder;\n\n\t}\n\treturn false;\n}\n\n//tobe put on prototype?\nfunction resetMaskSet(soft) {\n\tconst maskset = this.maskset;\n\n\tmaskset.buffer = undefined;\n\tif (soft !== true) {\n\t\tmaskset.validPositions = {};\n\t\tmaskset.p = 0;\n\t}\n}\n\n//tobe put on prototype?\nfunction seekNext(pos, newBlock, fuzzy) {\n\tconst inputmask = this;\n\n\tif (fuzzy === undefined) fuzzy = true;\n\tvar position = pos + 1;\n\twhile (getTest.call(inputmask, position).match.def !== \"\" &&\n\t((newBlock === true && (getTest.call(inputmask, position).match.newBlockMarker !== true || !isMask.call(inputmask, position, undefined, true))) ||\n\t\t(newBlock !== true && !isMask.call(inputmask, position, undefined, fuzzy)))) {\n\t\tposition++;\n\t}\n\treturn position;\n}\n\n//tobe put on prototype?\nfunction seekPrevious(pos, newBlock) {\n\tconst inputmask = this;\n\n\tvar position = pos - 1;\n\tif (pos <= 0) return 0;\n\n\twhile (position > 0 &&\n\t((newBlock === true && (getTest.call(inputmask, position).match.newBlockMarker !== true || !isMask.call(inputmask, position, undefined, true))) ||\n\t\t(newBlock !== true && !isMask.call(inputmask, position, undefined, true)))) {\n\t\tposition--;\n\t}\n\treturn position;\n}\n\n//tobe put on prototype?\nfunction translatePosition(pos) {\n\tconst inputmask = this,\n\t\topts = this.opts,\n\t\tel = this.el;\n\n\tif (inputmask.isRTL && typeof pos === \"number\" && (!opts.greedy || opts.placeholder !== \"\") && el) {\n\t\tpos = inputmask._valueGet().length - pos;\n\t}\n\treturn pos;\n}\n","import Inputmask from \"./inputmask\";\nimport keyCode from \"./keycode.json\";\nimport {getBufferTemplate} from \"./positioning\";\nimport {HandleNativePlaceholder} from \"./inputHandling\";\n\nexport {EventRuler};\n\nvar EventRuler = {\n\ton: function (input, eventName, eventHandler) {\n\t\tconst $ = input.inputmask.dependencyLib;\n\n\t\tvar ev = function (e) {\n\t\t\tif (e.originalEvent) {\n\t\t\t\te = e.originalEvent || e; //get original event from jquery evenbt\n\t\t\t\targuments[0] = e;\n\t\t\t}\n\t\t\t// console.log(e.type);\n\t\t\tvar that = this, args, inputmask = that.inputmask, opts = inputmask ? inputmask.opts : undefined,\n\t\t\t\t$ = inputmask.dependencyLib;\n\t\t\tif (inputmask === undefined && this.nodeName !== \"FORM\") { //happens when cloning an object with jquery.clone\n\t\t\t\tvar imOpts = $.data(that, \"_inputmask_opts\");\n\t\t\t\t$(that).off(); //unbind all events\n\t\t\t\tif (imOpts) {\n\t\t\t\t\t(new Inputmask(imOpts)).mask(that);\n\t\t\t\t}\n\t\t\t} else if (e.type !== \"setvalue\" && this.nodeName !== \"FORM\" && (that.disabled || (that.readOnly && !(e.type === \"keydown\" && (e.ctrlKey && e.keyCode === 67) || (opts.tabThrough === false && e.keyCode === keyCode.TAB))))) {\n\t\t\t\te.preventDefault();\n\t\t\t} else {\n\t\t\t\tswitch (e.type) {\n\t\t\t\t\tcase \"input\":\n\t\t\t\t\t\tif (inputmask.skipInputEvent === true || (e.inputType && e.inputType === \"insertCompositionText\")) {\n\t\t\t\t\t\t\tinputmask.skipInputEvent = false;\n\t\t\t\t\t\t\treturn e.preventDefault();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// if (mobile) { //this causes problem see #2220\n\t\t\t\t\t\t// \targs = arguments;\n\t\t\t\t\t\t// \tsetTimeout(function () { //needed for caret selection when entering a char on Android 8 - #1818\n\t\t\t\t\t\t// \t\teventHandler.apply(that, args);\n\t\t\t\t\t\t// \t\tcaret(that, that.inputmask.caretPos, undefined, true);\n\t\t\t\t\t\t// \t}, 0);\n\t\t\t\t\t\t// \treturn false;\n\t\t\t\t\t\t// }\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"keydown\":\n\t\t\t\t\t\t//Safari 5.1.x - modal dialog fires keypress twice workaround\n\t\t\t\t\t\tinputmask.skipKeyPressEvent = false;\n\t\t\t\t\t\tinputmask.skipInputEvent = inputmask.isComposing = e.keyCode === keyCode.KEY_229;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"keyup\":\n\t\t\t\t\tcase \"compositionend\":\n\t\t\t\t\t\tif (inputmask.isComposing) {\n\t\t\t\t\t\t\tinputmask.skipInputEvent = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"keypress\":\n\t\t\t\t\t\tif (inputmask.skipKeyPressEvent === true) {\n\t\t\t\t\t\t\treturn e.preventDefault();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tinputmask.skipKeyPressEvent = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"click\":\n\t\t\t\t\tcase \"focus\":\n\t\t\t\t\t\tif (inputmask.validationEvent) { // #841\n\t\t\t\t\t\t\tinputmask.validationEvent = false;\n\t\t\t\t\t\t\tinput.blur();\n\t\t\t\t\t\t\tHandleNativePlaceholder(input, (inputmask.isRTL ? getBufferTemplate.call(inputmask).slice().reverse() : getBufferTemplate.call(inputmask)).join(\"\"));\n\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\t\t}, 3000);\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\targs = arguments;\n\t\t\t\t\t\tsetTimeout(function () { //needed for Chrome ~ initial selection clears after the clickevent\n\t\t\t\t\t\t\tif (!input.inputmask) {\n\t\t\t\t\t\t\t\t// `inputmask.remove()` was called before this callback\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\teventHandler.apply(that, args);\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvar returnVal = eventHandler.apply(that, arguments);\n\t\t\t\tif (returnVal === false) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\treturn returnVal;\n\t\t\t}\n\t\t};\n\t\t//keep instance of the event\n\t\tinput.inputmask.events[eventName] = input.inputmask.events[eventName] || [];\n\t\tinput.inputmask.events[eventName].push(ev);\n\n\t\tif ([\"submit\", \"reset\"].includes(eventName)) {\n\t\t\tif (input.form !== null) $(input.form).on(eventName, ev.bind(input));\n\t\t} else {\n\t\t\t$(input).on(eventName, ev);\n\t\t}\n\t},\n\toff: function (input, event) {\n\t\tif (input.inputmask && input.inputmask.events) {\n\t\t\tconst $ = input.inputmask.dependencyLib;\n\t\t\tlet events = input.inputmask.events;\n\t\t\tif (event) {\n\t\t\t\tevents = [];\n\t\t\t\tevents[event] = input.inputmask.events[event];\n\t\t\t}\n\t\t\tfor (let eventName in events) {\n\t\t\t\tlet evArr = events[eventName];\n\t\t\t\twhile (evArr.length > 0) {\n\t\t\t\t\tlet ev = evArr.pop();\n\t\t\t\t\tif ([\"submit\", \"reset\",].includes(eventName)) {\n\t\t\t\t\t\tif (input.form !== null) $(input.form).off(eventName, ev);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(input).off(eventName, ev);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdelete input.inputmask.events[eventName];\n\t\t\t}\n\t\t}\n\t}\n};","import \"./getPrototypeOf\";\nimport keyCode from \"./keycode.json\";\nimport {caret, getBuffer, getBufferTemplate, getLastValidPosition, resetMaskSet, seekNext} from \"./positioning\";\nimport {applyInputValue, clearOptionalTail, writeBuffer} from \"./inputHandling\";\nimport {EventRuler} from \"./eventruler\";\nimport {iphone, mobile} from \"./environment\";\nimport {isComplete} from \"./validation\";\nimport {EventHandlers} from \"./eventhandlers\";\n\nexport{mask};\n\n//todo put on the prototype?\nfunction mask() {\n\tconst inputmask = this,\n\t\topts= this.opts,\n\tel=this.el,$=this.dependencyLib;\n\n\n\tfunction isElementTypeSupported(input, opts) {\n\t\tfunction patchValueProperty(npt) {\n\t\t\tvar valueGet;\n\t\t\tvar valueSet;\n\n\t\t\tfunction patchValhook(type) {\n\t\t\t\tif ($.valHooks && ($.valHooks[type] === undefined || $.valHooks[type].inputmaskpatch !== true)) {\n\t\t\t\t\tvar valhookGet = $.valHooks[type] && $.valHooks[type].get ? $.valHooks[type].get : function (elem) {\n\t\t\t\t\t\treturn elem.value;\n\t\t\t\t\t};\n\t\t\t\t\tvar valhookSet = $.valHooks[type] && $.valHooks[type].set ? $.valHooks[type].set : function (elem, value) {\n\t\t\t\t\t\telem.value = value;\n\t\t\t\t\t\treturn elem;\n\t\t\t\t\t};\n\n\t\t\t\t\t$.valHooks[type] = {\n\t\t\t\t\t\tget: function (elem) {\n\t\t\t\t\t\t\tif (elem.inputmask) {\n\t\t\t\t\t\t\t\tif (elem.inputmask.opts.autoUnmask) {\n\t\t\t\t\t\t\t\t\treturn elem.inputmask.unmaskedvalue();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tvar result = valhookGet(elem);\n\t\t\t\t\t\t\t\t\treturn getLastValidPosition.call(inputmask, undefined, undefined, elem.inputmask.maskset.validPositions) !== -1 || opts.nullable !== true ? result : \"\";\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn valhookGet(elem);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tset: function (elem, value) {\n\t\t\t\t\t\t\tvar result = valhookSet(elem, value);\n\t\t\t\t\t\t\tif (elem.inputmask) {\n\t\t\t\t\t\t\t\tapplyInputValue(elem, value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinputmaskpatch: true\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction getter() {\n\t\t\t\tif (this.inputmask) {\n\t\t\t\t\treturn this.inputmask.opts.autoUnmask ?\n\t\t\t\t\t\tthis.inputmask.unmaskedvalue() :\n\t\t\t\t\t\t(getLastValidPosition.call(inputmask) !== -1 || opts.nullable !== true ?\n\t\t\t\t\t\t\t((this.inputmask.shadowRoot || document.activeElement) === this && opts.clearMaskOnLostFocus ?\n\t\t\t\t\t\t\t\t(inputmask.isRTL ? clearOptionalTail.call(inputmask,getBuffer.call(inputmask).slice()).reverse() : clearOptionalTail.call(inputmask,getBuffer.call(inputmask).slice())).join(\"\") :\n\t\t\t\t\t\t\t\tvalueGet.call(this)) :\n\t\t\t\t\t\t\t\"\");\n\t\t\t\t} else {\n\t\t\t\t\treturn valueGet.call(this);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction setter(value) {\n\t\t\t\tvalueSet.call(this, value);\n\t\t\t\tif (this.inputmask) {\n\t\t\t\t\tapplyInputValue(this, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction installNativeValueSetFallback(npt) {\n\t\t\t\tEventRuler.on(npt, \"mouseenter\", function () {\n\t\t\t\t\tvar input = this,\n\t\t\t\t\t\tvalue = input.inputmask._valueGet(true);\n\t\t\t\t\tif (value !== (inputmask.isRTL ? getBuffer.call(inputmask).reverse() : getBuffer.call(inputmask)).join(\"\")) { //Is this correct? to apply RTL? TOCHECK\n\t\t\t\t\t\tapplyInputValue(input, value);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (!npt.inputmask.__valueGet) {\n\t\t\t\tif (opts.noValuePatching !== true) {\n\t\t\t\t\tif (Object.getOwnPropertyDescriptor) {\n\t\t\t\t\t\tvar valueProperty = Object.getPrototypeOf ? Object.getOwnPropertyDescriptor(Object.getPrototypeOf(npt), \"value\") : undefined;\n\t\t\t\t\t\tif (valueProperty && valueProperty.get && valueProperty.set) {\n\t\t\t\t\t\t\tvalueGet = valueProperty.get;\n\t\t\t\t\t\t\tvalueSet = valueProperty.set;\n\t\t\t\t\t\t\tObject.defineProperty(npt, \"value\", {\n\t\t\t\t\t\t\t\tget: getter,\n\t\t\t\t\t\t\t\tset: setter,\n\t\t\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else if (npt.tagName.toLowerCase() !== \"input\") {\n\t\t\t\t\t\t\tvalueGet = function () {\n\t\t\t\t\t\t\t\treturn this.textContent;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tvalueSet = function (value) {\n\t\t\t\t\t\t\t\tthis.textContent = value;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tObject.defineProperty(npt, \"value\", {\n\t\t\t\t\t\t\t\tget: getter,\n\t\t\t\t\t\t\t\tset: setter,\n\t\t\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (document.__lookupGetter__ && npt.__lookupGetter__(\"value\")) {\n\t\t\t\t\t\tvalueGet = npt.__lookupGetter__(\"value\");\n\t\t\t\t\t\tvalueSet = npt.__lookupSetter__(\"value\");\n\n\t\t\t\t\t\tnpt.__defineGetter__(\"value\", getter);\n\t\t\t\t\t\tnpt.__defineSetter__(\"value\", setter);\n\t\t\t\t\t}\n\t\t\t\t\tnpt.inputmask.__valueGet = valueGet; //store native property getter\n\t\t\t\t\tnpt.inputmask.__valueSet = valueSet; //store native property setter\n\t\t\t\t}\n\t\t\t\tnpt.inputmask._valueGet = function (overruleRTL) {\n\t\t\t\t\treturn inputmask.isRTL && overruleRTL !== true ? valueGet.call(this.el).split(\"\").reverse().join(\"\") : valueGet.call(this.el);\n\t\t\t\t};\n\t\t\t\tnpt.inputmask._valueSet = function (value, overruleRTL) { //null check is needed for IE8 => otherwise converts to \"null\"\n\t\t\t\t\tvalueSet.call(this.el, (value === null || value === undefined) ? \"\" : ((overruleRTL !== true && inputmask.isRTL) ? value.split(\"\").reverse().join(\"\") : value));\n\t\t\t\t};\n\n\t\t\t\tif (valueGet === undefined) { //jquery.val fallback\n\t\t\t\t\tvalueGet = function () {\n\t\t\t\t\t\treturn this.value;\n\t\t\t\t\t};\n\t\t\t\t\tvalueSet = function (value) {\n\t\t\t\t\t\tthis.value = value;\n\t\t\t\t\t};\n\t\t\t\t\tpatchValhook(npt.type);\n\t\t\t\t\tinstallNativeValueSetFallback(npt);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (input.tagName.toLowerCase() !== \"textarea\") {\n\t\t\topts.ignorables.push(keyCode.ENTER);\n\t\t}\n\n\t\tvar elementType = input.getAttribute(\"type\");\n\t\tvar isSupported = (input.tagName.toLowerCase() === \"input\" && opts.supportsInputType.includes(elementType)) || input.isContentEditable || input.tagName.toLowerCase() === \"textarea\";\n\t\tif (!isSupported) {\n\t\t\tif (input.tagName.toLowerCase() === \"input\") {\n\t\t\t\tvar el = document.createElement(\"input\");\n\t\t\t\tel.setAttribute(\"type\", elementType);\n\t\t\t\tisSupported = el.type === \"text\"; //apply mask only if the type is not natively supported\n\t\t\t\tel = null;\n\t\t\t} else {\n\t\t\t\tisSupported = \"partial\";\n\t\t\t}\n\t\t}\n\t\tif (isSupported !== false) {\n\t\t\tpatchValueProperty(input);\n\t\t} else {\n\t\t\tinput.inputmask = undefined;\n\t\t}\n\t\treturn isSupported;\n\t}\n\n\t//unbind all events - to make sure that no other mask will interfere when re-masking\n\tEventRuler.off(el);\n\tvar isSupported = isElementTypeSupported(el, opts);\n\tif (isSupported !== false) {\n\t\tinputmask.originalPlaceholder = el.placeholder;\n\n\t\t//read maxlength prop from el\n\t\tinputmask.maxLength = el !== undefined ? el.maxLength : undefined;\n\t\tif (inputmask.maxLength === -1) inputmask.maxLength = undefined;\n\t\tif (\"inputMode\" in el && el.getAttribute(\"inputmode\") === null) {\n\t\t\tel.inputMode = opts.inputmode;\n\t\t\tel.setAttribute(\"inputmode\", opts.inputmode);\n\t\t}\n\n\n\t\tif (isSupported === true) {\n\t\t\topts.showMaskOnFocus = opts.showMaskOnFocus && [\"cc-number\", \"cc-exp\"].indexOf(el.autocomplete) === -1;\n\t\t\tif (iphone) { //selecting the caret shows as a slection on iphone\n\t\t\t\topts.insertModeVisual = false;\n\t\t\t}\n\n\t\t\t//bind events\n\t\t\tEventRuler.on(el, \"submit\", EventHandlers.submitEvent);\n\t\t\tEventRuler.on(el, \"reset\", EventHandlers.resetEvent);\n\t\t\tEventRuler.on(el, \"blur\", EventHandlers.blurEvent);\n\t\t\tEventRuler.on(el, \"focus\", EventHandlers.focusEvent);\n\t\t\tEventRuler.on(el, \"invalid\", EventHandlers.invalidEvent);\n\t\t\tEventRuler.on(el, \"click\", EventHandlers.clickEvent);\n\t\t\tEventRuler.on(el, \"mouseleave\", EventHandlers.mouseleaveEvent);\n\t\t\tEventRuler.on(el, \"mouseenter\", EventHandlers.mouseenterEvent);\n\t\t\tEventRuler.on(el, \"paste\", EventHandlers.pasteEvent);\n\t\t\tEventRuler.on(el, \"cut\", EventHandlers.cutEvent);\n\t\t\tEventRuler.on(el, \"complete\", opts.oncomplete);\n\t\t\tEventRuler.on(el, \"incomplete\", opts.onincomplete);\n\t\t\tEventRuler.on(el, \"cleared\", opts.oncleared);\n\t\t\tif (opts.inputEventOnly !== true) {\n\t\t\t\tEventRuler.on(el, \"keydown\", EventHandlers.keydownEvent);\n\t\t\t\tEventRuler.on(el, \"keypress\", EventHandlers.keypressEvent);\n\t\t\t\tEventRuler.on(el, \"keyup\", EventHandlers.keyupEvent);\n\t\t\t}\n\t\t\tif (mobile || opts.inputEventOnly) {\n\t\t\t\tel.removeAttribute(\"maxLength\");\n\t\t\t}\n\t\t\tEventRuler.on(el, \"input\", EventHandlers.inputFallBackEvent);\n\t\t\tEventRuler.on(el, \"compositionend\", EventHandlers.compositionendEvent);\n\t\t\t// EventRuler.on(el, \"beforeinput\", EventHandlers.beforeInputEvent); //https://github.com/w3c/input-events - to implement\n\t\t}\n\t\tEventRuler.on(el, \"setvalue\", EventHandlers.setValueEvent);\n\n\t\t//apply mask\n\t\tinputmask.undoValue = getBufferTemplate.call(inputmask).join(\"\"); //initialize the buffer and getmasklength\n\t\tvar activeElement = (el.inputmask.shadowRoot || document).activeElement;\n\t\tif (el.inputmask._valueGet(true) !== \"\" || opts.clearMaskOnLostFocus === false || activeElement === el) {\n\t\t\tapplyInputValue(el, el.inputmask._valueGet(true), opts);\n\t\t\tvar buffer = getBuffer.call(inputmask).slice();\n\t\t\tif (isComplete.call(inputmask, buffer) === false) {\n\t\t\t\tif (opts.clearIncomplete) {\n\t\t\t\t\tresetMaskSet.call(inputmask);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (opts.clearMaskOnLostFocus && activeElement !== el) {\n\t\t\t\tif (getLastValidPosition.call(inputmask) === -1) {\n\t\t\t\t\tbuffer = [];\n\t\t\t\t} else {\n\t\t\t\t\tclearOptionalTail.call(inputmask, buffer);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (opts.clearMaskOnLostFocus === false || (opts.showMaskOnFocus && activeElement === el) || el.inputmask._valueGet(true) !== \"\") {\n\t\t\t\twriteBuffer(el, buffer);\n\t\t\t}\n\t\t\tif (activeElement === el) { //position the caret when in focus\n\t\t\t\tcaret.call(inputmask,el, seekNext.call(inputmask, getLastValidPosition.call(inputmask)));\n\t\t\t}\n\t\t}\n\t}\n}","export default function extend() {\n\tlet options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[0] || {},\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === \"boolean\") {\n\t\tdeep = target;\n\n\t\t// Skip the boolean and the target\n\t\ttarget = arguments[i] || {};\n\t\ti++;\n\t}\n\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif (typeof target !== \"object\" && typeof target !== \"function\") {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; i++) {\n\t\t// Only deal with non-null/undefined values\n\t\tif ((options = arguments[i]) != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = target[name];\n\t\t\t\tcopy = options[name];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target === copy) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif (deep && copy && (Object.prototype.toString.call(copy) === \"[object Object]\" || (copyIsArray = Array.isArray(copy)))) {\n\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\tclone = src && Array.isArray(src) ? src : [];\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src && Object.prototype.toString.call(src) === \"[object Object]\" ? src : {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if (copy !== undefined) {\n\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n}","export default typeof window !== \"undefined\" ? window : new (eval(\"require('jsdom').JSDOM\"))(\"\").window;\n\n","export default function (owner, key, value) {\n\tif (value === undefined) {\n\t\treturn owner.__data ? owner.__data[key] : null;\n\t} else {\n\t\towner.__data = owner.__data || {};\n\t\towner.__data[key] = value;\n\t}\n}","import extend from \"./extend\";\nimport window from \"../global/window\";\nimport DependencyLib from \"./inputmask.dependencyLib\";\n\nexport {on, off, trigger, Event};\n\nfunction isValidElement(elem) {\n\treturn elem instanceof Element;\n}\n\nlet Event;\nif (typeof window.CustomEvent === \"function\") {\n\tEvent = window.CustomEvent;\n} else {\n\tEvent = function (event, params) {\n\t\tparams = params || {bubbles: false, cancelable: false, detail: undefined};\n\t\tvar evt = document.createEvent(\"CustomEvent\");\n\t\tevt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n\t\treturn evt;\n\t};\n\tEvent.prototype = window.Event.prototype;\n}\n\n\nfunction on(events, handler) {\n\tfunction addEvent(ev, namespace) {\n\t\t//register domevent\n\t\tif (elem.addEventListener) { // all browsers except IE before version 9\n\t\t\telem.addEventListener(ev, handler, false);\n\t\t} else if (elem.attachEvent) { // IE before version 9\n\t\t\telem.attachEvent(\"on\" + ev, handler);\n\t\t}\n\t\teventRegistry[ev] = eventRegistry[ev] || {};\n\t\teventRegistry[ev][namespace] = eventRegistry[ev][namespace] || [];\n\t\teventRegistry[ev][namespace].push(handler);\n\t}\n\n\tif (isValidElement(this[0])) {\n\t\tvar eventRegistry = this[0].eventRegistry,\n\t\t\telem = this[0];\n\n\n\t\tvar _events = events.split(\" \");\n\t\tfor (var endx = 0; endx < _events.length; endx++) {\n\t\t\tvar nsEvent = _events[endx].split(\".\"),\n\t\t\t\tev = nsEvent[0],\n\t\t\t\tnamespace = nsEvent[1] || \"global\";\n\t\t\taddEvent(ev, namespace);\n\t\t}\n\t}\n\treturn this;\n}\n\nfunction off(events, handler) {\n\tvar eventRegistry, elem;\n\n\tfunction removeEvent(ev, namespace, handler) {\n\t\tif (ev in eventRegistry === true) {\n\t\t\t//unbind to dom events\n\t\t\tif (elem.removeEventListener) { // all browsers except IE before version 9\n\t\t\t\telem.removeEventListener(ev, handler, false);\n\t\t\t} else if (elem.detachEvent) { // IE before version 9\n\t\t\t\telem.detachEvent(\"on\" + ev, handler);\n\t\t\t}\n\t\t\tif (namespace === \"global\") {\n\t\t\t\tfor (var nmsp in eventRegistry[ev]) {\n\t\t\t\t\teventRegistry[ev][nmsp].splice(eventRegistry[ev][nmsp].indexOf(handler), 1);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\teventRegistry[ev][namespace].splice(eventRegistry[ev][namespace].indexOf(handler), 1);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction resolveNamespace(ev, namespace) {\n\t\tvar evts = [],\n\t\t\thndx, hndL;\n\t\tif (ev.length > 0) {\n\t\t\tif (handler === undefined) {\n\t\t\t\tfor (hndx = 0, hndL = eventRegistry[ev][namespace].length; hndx < hndL; hndx++) {\n\t\t\t\t\tevts.push({\n\t\t\t\t\t\tev: ev,\n\t\t\t\t\t\tnamespace: namespace && namespace.length > 0 ? namespace : \"global\",\n\t\t\t\t\t\thandler: eventRegistry[ev][namespace][hndx]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tevts.push({\n\t\t\t\t\tev: ev,\n\t\t\t\t\tnamespace: namespace && namespace.length > 0 ? namespace : \"global\",\n\t\t\t\t\thandler: handler\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (namespace.length > 0) {\n\t\t\tfor (var evNdx in eventRegistry) {\n\t\t\t\tfor (var nmsp in eventRegistry[evNdx]) {\n\t\t\t\t\tif (nmsp === namespace) {\n\t\t\t\t\t\tif (handler === undefined) {\n\t\t\t\t\t\t\tfor (hndx = 0, hndL = eventRegistry[evNdx][nmsp].length; hndx < hndL; hndx++) {\n\t\t\t\t\t\t\t\tevts.push({\n\t\t\t\t\t\t\t\t\tev: evNdx,\n\t\t\t\t\t\t\t\t\tnamespace: nmsp,\n\t\t\t\t\t\t\t\t\thandler: eventRegistry[evNdx][nmsp][hndx]\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tevts.push({\n\t\t\t\t\t\t\t\tev: evNdx,\n\t\t\t\t\t\t\t\tnamespace: nmsp,\n\t\t\t\t\t\t\t\thandler: handler\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn evts;\n\t}\n\n\tif (isValidElement(this[0])) {\n\t\teventRegistry = this[0].eventRegistry;\n\t\telem = this[0];\n\n\n\t\tvar _events = events.split(\" \");\n\t\tfor (var endx = 0; endx < _events.length; endx++) {\n\t\t\tvar nsEvent = _events[endx].split(\".\"),\n\t\t\t\toffEvents = resolveNamespace(nsEvent[0], nsEvent[1]);\n\t\t\tfor (var i = 0, offEventsL = offEvents.length; i < offEventsL; i++) {\n\t\t\t\tremoveEvent(offEvents[i].ev, offEvents[i].namespace, offEvents[i].handler);\n\t\t\t}\n\t\t}\n\t}\n\treturn this;\n}\n\nfunction trigger(events /* , args... */) {\n\tif (isValidElement(this[0])) {\n\t\tvar eventRegistry = this[0].eventRegistry,\n\t\t\telem = this[0];\n\t\tvar _events = typeof events === \"string\" ? events.split(\" \") : [events.type];\n\t\tfor (var endx = 0; endx < _events.length; endx++) {\n\t\t\tvar nsEvent = _events[endx].split(\".\"),\n\t\t\t\tev = nsEvent[0],\n\t\t\t\tnamespace = nsEvent[1] || \"global\";\n\t\t\tif (document !== undefined && namespace === \"global\") {\n\t\t\t\t//trigger domevent\n\t\t\t\tvar evnt, i, params = {\n\t\t\t\t\tbubbles: true,\n\t\t\t\t\tcancelable: true,\n\t\t\t\t\tdetail: arguments[1]\n\t\t\t\t};\n\t\t\t\t// The custom event that will be created\n\t\t\t\tif (document.createEvent) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tevnt = new CustomEvent(ev, params);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tevnt = document.createEvent(\"CustomEvent\");\n\t\t\t\t\t\tevnt.initCustomEvent(ev, params.bubbles, params.cancelable, params.detail);\n\t\t\t\t\t}\n\t\t\t\t\tif (events.type) extend(evnt, events);\n\t\t\t\t\telem.dispatchEvent(evnt);\n\t\t\t\t} else {\n\t\t\t\t\tevnt = document.createEventObject();\n\t\t\t\t\tevnt.eventType = ev;\n\t\t\t\t\tevnt.detail = arguments[1];\n\t\t\t\t\tif (events.type) extend(evnt, events);\n\t\t\t\t\telem.fireEvent(\"on\" + evnt.eventType, evnt);\n\t\t\t\t}\n\t\t\t} else if (eventRegistry[ev] !== undefined) {\n\t\t\t\targuments[0] = arguments[0].type ? arguments[0] : DependencyLib.Event(arguments[0]);\n\t\t\t\targuments[0].detail = arguments.slice(1);\n\t\t\t\tif (namespace === \"global\") {\n\t\t\t\t\tfor (var nmsp in eventRegistry[ev]) {\n\t\t\t\t\t\tfor (i = 0; i < eventRegistry[ev][nmsp].length; i++) {\n\t\t\t\t\t\t\teventRegistry[ev][nmsp][i].apply(elem, arguments);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (i = 0; i < eventRegistry[ev][namespace].length; i++) {\n\t\t\t\t\t\teventRegistry[ev][namespace][i].apply(elem, arguments);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn this;\n}","/*\n Input Mask plugin dependencyLib\n http://github.com/RobinHerbots/jquery.inputmask\n Copyright (c) Robin Herbots\n Licensed under the MIT license\n */\n\nimport extend from \"./extend\";\nimport window from \"../global/window\";\nimport data from \"./data\";\nimport { on, off, trigger, Event} from \"./events\";\n\nconst document = window.document;\n\nfunction DependencyLib(elem) {\n\tif (elem instanceof DependencyLib) {\n\t\treturn elem;\n\t}\n\tif (!(this instanceof DependencyLib)) {\n\t\treturn new DependencyLib(elem);\n\t}\n\tif (elem !== undefined && elem !== null && elem !== window) {\n\t\tthis[0] = elem.nodeName ? elem : (elem[0] !== undefined && elem[0].nodeName ? elem[0] : document.querySelector(elem));\n\t\tif (this[0] !== undefined && this[0] !== null) {\n\t\t\tthis[0].eventRegistry = this[0].eventRegistry || {};\n\t\t}\n\t}\n}\n\nDependencyLib.prototype = {\n\ton: on,\n\toff: off,\n\ttrigger: trigger\n};\n\n//static\nDependencyLib.extend = extend;\nDependencyLib.data = data;\nDependencyLib.Event = Event;\n\nexport default DependencyLib;\n","import $ from \"./dependencyLibs/inputmask.dependencyLib\";\n\nexport {generateMaskSet, analyseMask};\n\nfunction generateMaskSet(opts, nocache) {\n\tvar ms;\n\n\tfunction generateMask(mask, metadata, opts) {\n\t\tvar regexMask = false;\n\t\tif (mask === null || mask === \"\") {\n\t\t\tregexMask = opts.regex !== null;\n\t\t\tif (regexMask) {\n\t\t\t\tmask = opts.regex;\n\t\t\t\tmask = mask.replace(/^(\\^)(.*)(\\$)$/, \"$2\");\n\t\t\t} else {\n\t\t\t\tregexMask = true;\n\t\t\t\tmask = \".*\";\n\t\t\t}\n\t\t}\n\t\tif (mask.length === 1 && opts.greedy === false && opts.repeat !== 0) {\n\t\t\topts.placeholder = \"\";\n\t\t} //hide placeholder with single non-greedy mask\n\t\tif (opts.repeat > 0 || opts.repeat === \"*\" || opts.repeat === \"+\") {\n\t\t\tvar repeatStart = opts.repeat === \"*\" ? 0 : (opts.repeat === \"+\" ? 1 : opts.repeat);\n\t\t\tmask = opts.groupmarker[0] + mask + opts.groupmarker[1] + opts.quantifiermarker[0] + repeatStart + \",\" + opts.repeat + opts.quantifiermarker[1];\n\t\t}\n\n\t\t// console.log(mask);\n\t\tvar masksetDefinition, maskdefKey;\n\t\tmaskdefKey = regexMask ? \"regex_\" + opts.regex : opts.numericInput ? mask.split(\"\").reverse().join(\"\") : mask;\n\t\tif (opts.keepStatic !== false) { //keepstatic modifies the output from the testdefinitions ~ so differentiate in the maskcache\n\t\t\tmaskdefKey = \"ks_\" + maskdefKey;\n\t\t}\n\n\t\tif (Inputmask.prototype.masksCache[maskdefKey] === undefined || nocache === true) {\n\t\t\tmasksetDefinition = {\n\t\t\t\t\"mask\": mask,\n\t\t\t\t\"maskToken\": Inputmask.prototype.analyseMask(mask, regexMask, opts),\n\t\t\t\t\"validPositions\": {},\n\t\t\t\t\"_buffer\": undefined,\n\t\t\t\t\"buffer\": undefined,\n\t\t\t\t\"tests\": {},\n\t\t\t\t\"excludes\": {}, //excluded alternations\n\t\t\t\t\"metadata\": metadata,\n\t\t\t\t\"maskLength\": undefined,\n\t\t\t\t\"jitOffset\": {}\n\t\t\t};\n\t\t\tif (nocache !== true) {\n\t\t\t\tInputmask.prototype.masksCache[maskdefKey] = masksetDefinition;\n\t\t\t\tmasksetDefinition = $.extend(true, {}, Inputmask.prototype.masksCache[maskdefKey]);\n\t\t\t}\n\t\t} else {\n\t\t\tmasksetDefinition = $.extend(true, {}, Inputmask.prototype.masksCache[maskdefKey]);\n\t\t}\n\n\t\treturn masksetDefinition;\n\t}\n\n\tif (typeof opts.mask === \"function\") { //allow mask to be a preprocessing fn - should return a valid mask\n\t\topts.mask = opts.mask(opts);\n\t}\n\tif (Array.isArray(opts.mask)) {\n\t\tif (opts.mask.length > 1) {\n\t\t\tif (opts.keepStatic === null) { //enable by default when passing multiple masks when the option is not explicitly specified\n\t\t\t\topts.keepStatic = true;\n\t\t\t}\n\t\t\tvar altMask = opts.groupmarker[0];\n\t\t\t(opts.isRTL ? opts.mask.reverse() : opts.mask).forEach(function (msk) {\n\t\t\t\tif (altMask.length > 1) {\n\t\t\t\t\taltMask += opts.groupmarker[1] + opts.alternatormarker + opts.groupmarker[0];\n\t\t\t\t}\n\t\t\t\tif (msk.mask !== undefined && typeof msk.mask !== \"function\") {\n\t\t\t\t\taltMask += msk.mask;\n\t\t\t\t} else {\n\t\t\t\t\taltMask += msk;\n\t\t\t\t}\n\t\t\t});\n\t\t\taltMask += opts.groupmarker[1];\n\t\t\t// console.log(altMask);\n\t\t\treturn generateMask(altMask, opts.mask, opts);\n\t\t} else {\n\t\t\topts.mask = opts.mask.pop();\n\t\t}\n\t}\n\tif (opts.keepStatic === null) opts.keepStatic = false;\n\tif (opts.mask && opts.mask.mask !== undefined && typeof opts.mask.mask !== \"function\") {\n\t\tms = generateMask(opts.mask.mask, opts.mask, opts);\n\t} else {\n\t\tms = generateMask(opts.mask, opts.mask, opts);\n\t}\n\n\treturn ms;\n}\n\nfunction analyseMask(mask, regexMask, opts) {\n\tconst tokenizer = /(?:[?*+]|\\{[0-9+*]+(?:,[0-9+*]*)?(?:\\|[0-9+*]*)?\\})|[^.?*+^${[]()|\\\\]+|./g,\n\t\t//Thx to https://github.com/slevithan/regex-colorizer for the regexTokenizer regex\n\t\tregexTokenizer = /\\[\\^?]?(?:[^\\\\\\]]+|\\\\[\\S\\s]?)*]?|\\\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\\S\\s]?)|\\((?:\\?[:=!]?)?|(?:[?*+]|\\{[0-9]+(?:,[0-9]*)?\\})\\??|[^.?*+^${[()|\\\\]+|./g;\n\tvar escaped = false,\n\t\tcurrentToken = new MaskToken(),\n\t\tmatch,\n\t\tm,\n\t\topenenings = [],\n\t\tmaskTokens = [],\n\t\topeningToken,\n\t\tcurrentOpeningToken,\n\t\talternator,\n\t\tlastMatch,\n\t\tcloseRegexGroup = false;\n\n\tfunction MaskToken(isGroup, isOptional, isQuantifier, isAlternator) {\n\t\tthis.matches = [];\n\t\tthis.openGroup = isGroup || false;\n\t\tthis.alternatorGroup = false;\n\t\tthis.isGroup = isGroup || false;\n\t\tthis.isOptional = isOptional || false;\n\t\tthis.isQuantifier = isQuantifier || false;\n\t\tthis.isAlternator = isAlternator || false;\n\t\tthis.quantifier = {\n\t\t\tmin: 1,\n\t\t\tmax: 1\n\t\t};\n\t}\n\n\t//test definition => {fn: RegExp/function, static: true/false optionality: bool, newBlockMarker: bool, casing: null/upper/lower, def: definitionSymbol, placeholder: placeholder, mask: real maskDefinition}\n\tfunction insertTestDefinition(mtoken, element, position) {\n\t\tposition = position !== undefined ? position : mtoken.matches.length;\n\t\tvar prevMatch = mtoken.matches[position - 1];\n\t\tif (regexMask) {\n\t\t\tif (element.indexOf(\"[\") === 0 || (escaped && /\\\\d|\\\\s|\\\\w]/i.test(element)) || element === \".\") {\n\t\t\t\tmtoken.matches.splice(position++, 0, {\n\t\t\t\t\tfn: new RegExp(element, opts.casing ? \"i\" : \"\"),\n\t\t\t\t\tstatic: false,\n\t\t\t\t\toptionality: false,\n\t\t\t\t\tnewBlockMarker: prevMatch === undefined ? \"master\" : prevMatch.def !== element,\n\t\t\t\t\tcasing: null,\n\t\t\t\t\tdef: element,\n\t\t\t\t\tplaceholder: undefined,\n\t\t\t\t\tnativeDef: element\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (escaped) element = element[element.length - 1];\n\t\t\t\telement.split(\"\").forEach(function (lmnt, ndx) {\n\t\t\t\t\tprevMatch = mtoken.matches[position - 1];\n\t\t\t\t\tmtoken.matches.splice(position++, 0, {\n\t\t\t\t\t\tfn: /[a-z]/i.test((opts.staticDefinitionSymbol || lmnt)) ? new RegExp(\"[\" + (opts.staticDefinitionSymbol || lmnt) + \"]\", opts.casing ? \"i\" : \"\") : null,\n\t\t\t\t\t\tstatic: true,\n\t\t\t\t\t\toptionality: false,\n\t\t\t\t\t\tnewBlockMarker: prevMatch === undefined ? \"master\" : (prevMatch.def !== lmnt && prevMatch.static !== true),\n\t\t\t\t\t\tcasing: null,\n\t\t\t\t\t\tdef: opts.staticDefinitionSymbol || lmnt,\n\t\t\t\t\t\tplaceholder: opts.staticDefinitionSymbol !== undefined ? lmnt : undefined,\n\t\t\t\t\t\tnativeDef: (escaped ? \"'\" : \"\") + lmnt\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\tescaped = false;\n\t\t} else {\n\t\t\tvar maskdef = (opts.definitions && opts.definitions[element]) || (opts.usePrototypeDefinitions && Inputmask.prototype.definitions[element]);\n\t\t\tif (maskdef && !escaped) {\n\t\t\t\tmtoken.matches.splice(position++, 0, {\n\t\t\t\t\tfn: maskdef.validator ? typeof maskdef.validator == \"string\" ? new RegExp(maskdef.validator, opts.casing ? \"i\" : \"\") : new function () {\n\t\t\t\t\t\tthis.test = maskdef.validator;\n\t\t\t\t\t} : new RegExp(\".\"),\n\t\t\t\t\tstatic: maskdef.static || false,\n\t\t\t\t\toptionality: false,\n\t\t\t\t\tnewBlockMarker: prevMatch === undefined ? \"master\" : prevMatch.def !== (maskdef.definitionSymbol || element),\n\t\t\t\t\tcasing: maskdef.casing,\n\t\t\t\t\tdef: maskdef.definitionSymbol || element,\n\t\t\t\t\tplaceholder: maskdef.placeholder,\n\t\t\t\t\tnativeDef: element,\n\t\t\t\t\tgenerated: maskdef.generated\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tmtoken.matches.splice(position++, 0, {\n\t\t\t\t\tfn: /[a-z]/i.test((opts.staticDefinitionSymbol || element)) ? new RegExp(\"[\" + (opts.staticDefinitionSymbol || element) + \"]\", opts.casing ? \"i\" : \"\") : null,\n\t\t\t\t\tstatic: true,\n\t\t\t\t\toptionality: false,\n\t\t\t\t\tnewBlockMarker: prevMatch === undefined ? \"master\" : (prevMatch.def !== element && prevMatch.static !== true),\n\t\t\t\t\tcasing: null,\n\t\t\t\t\tdef: opts.staticDefinitionSymbol || element,\n\t\t\t\t\tplaceholder: opts.staticDefinitionSymbol !== undefined ? element : undefined,\n\t\t\t\t\tnativeDef: (escaped ? \"'\" : \"\") + element\n\t\t\t\t});\n\t\t\t\tescaped = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction verifyGroupMarker(maskToken) {\n\t\tif (maskToken && maskToken.matches) {\n\t\t\tmaskToken.matches.forEach(function (token, ndx) {\n\t\t\t\tvar nextToken = maskToken.matches[ndx + 1];\n\t\t\t\tif ((nextToken === undefined || (nextToken.matches === undefined || nextToken.isQuantifier === false)) && token && token.isGroup) { //this is not a group but a normal mask => convert\n\t\t\t\t\ttoken.isGroup = false;\n\t\t\t\t\tif (!regexMask) {\n\t\t\t\t\t\tinsertTestDefinition(token, opts.groupmarker[0], 0);\n\t\t\t\t\t\tif (token.openGroup !== true) {\n\t\t\t\t\t\t\tinsertTestDefinition(token, opts.groupmarker[1]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tverifyGroupMarker(token);\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction defaultCase() {\n\t\tif (openenings.length > 0) {\n\t\t\tcurrentOpeningToken = openenings[openenings.length - 1];\n\t\t\tinsertTestDefinition(currentOpeningToken, m);\n\t\t\tif (currentOpeningToken.isAlternator) { //handle alternator a | b case\n\t\t\t\talternator = openenings.pop();\n\t\t\t\tfor (var mndx = 0; mndx < alternator.matches.length; mndx++) {\n\t\t\t\t\tif (alternator.matches[mndx].isGroup) alternator.matches[mndx].isGroup = false; //don't mark alternate groups as group\n\t\t\t\t}\n\t\t\t\tif (openenings.length > 0) {\n\t\t\t\t\tcurrentOpeningToken = openenings[openenings.length - 1];\n\t\t\t\t\tcurrentOpeningToken.matches.push(alternator);\n\t\t\t\t} else {\n\t\t\t\t\tcurrentToken.matches.push(alternator);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tinsertTestDefinition(currentToken, m);\n\t\t}\n\t}\n\n\tfunction reverseTokens(maskToken) {\n\t\tfunction reverseStatic(st) {\n\t\t\tif (st === opts.optionalmarker[0]) {\n\t\t\t\tst = opts.optionalmarker[1];\n\t\t\t} else if (st === opts.optionalmarker[1]) {\n\t\t\t\tst = opts.optionalmarker[0];\n\t\t\t} else if (st === opts.groupmarker[0]) {\n\t\t\t\tst = opts.groupmarker[1];\n\t\t\t} else if (st === opts.groupmarker[1]) st = opts.groupmarker[0];\n\n\t\t\treturn st;\n\t\t}\n\n\t\tmaskToken.matches = maskToken.matches.reverse();\n\t\tfor (var match in maskToken.matches) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(maskToken.matches, match)) {\n\t\t\t\tvar intMatch = parseInt(match);\n\t\t\t\tif (maskToken.matches[match].isQuantifier && maskToken.matches[intMatch + 1] && maskToken.matches[intMatch + 1].isGroup) { //reposition quantifier\n\t\t\t\t\tvar qt = maskToken.matches[match];\n\t\t\t\t\tmaskToken.matches.splice(match, 1);\n\t\t\t\t\tmaskToken.matches.splice(intMatch + 1, 0, qt);\n\t\t\t\t}\n\t\t\t\tif (maskToken.matches[match].matches !== undefined) {\n\t\t\t\t\tmaskToken.matches[match] = reverseTokens(maskToken.matches[match]);\n\t\t\t\t} else {\n\t\t\t\t\tmaskToken.matches[match] = reverseStatic(maskToken.matches[match]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn maskToken;\n\t}\n\n\tfunction groupify(matches) {\n\t\tvar groupToken = new MaskToken(true);\n\t\tgroupToken.openGroup = false;\n\t\tgroupToken.matches = matches;\n\t\treturn groupToken;\n\t}\n\n\tfunction closeGroup() {\n\t\t// Group closing\n\t\topeningToken = openenings.pop();\n\t\topeningToken.openGroup = false; //mark group as complete\n\t\tif (openingToken !== undefined) {\n\t\t\tif (openenings.length > 0) {\n\t\t\t\tcurrentOpeningToken = openenings[openenings.length - 1];\n\t\t\t\tcurrentOpeningToken.matches.push(openingToken);\n\t\t\t\tif (currentOpeningToken.isAlternator) { //handle alternator (a) | (b) case\n\t\t\t\t\talternator = openenings.pop();\n\t\t\t\t\tfor (var mndx = 0; mndx < alternator.matches.length; mndx++) {\n\t\t\t\t\t\talternator.matches[mndx].isGroup = false; //don't mark alternate groups as group\n\t\t\t\t\t\talternator.matches[mndx].alternatorGroup = false;\n\t\t\t\t\t}\n\t\t\t\t\tif (openenings.length > 0) {\n\t\t\t\t\t\tcurrentOpeningToken = openenings[openenings.length - 1];\n\t\t\t\t\t\tcurrentOpeningToken.matches.push(alternator);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrentToken.matches.push(alternator);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcurrentToken.matches.push(openingToken);\n\t\t\t}\n\t\t} else {\n\t\t\tdefaultCase();\n\t\t}\n\t}\n\n\tfunction groupQuantifier(matches) {\n\t\tvar lastMatch = matches.pop();\n\t\tif (lastMatch.isQuantifier) {\n\t\t\tlastMatch = groupify([matches.pop(), lastMatch]);\n\t\t}\n\t\treturn lastMatch;\n\t}\n\n\tif (regexMask) {\n\t\topts.optionalmarker[0] = undefined;\n\t\topts.optionalmarker[1] = undefined;\n\t}\n\twhile ((match = regexMask ? regexTokenizer.exec(mask) : tokenizer.exec(mask))) {\n\t\tm = match[0];\n\n\t\tif (regexMask) {\n\t\t\tswitch (m.charAt(0)) {\n\t\t\t\t//Quantifier\n\t\t\t\tcase \"?\":\n\t\t\t\t\tm = \"{0,1}\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"+\":\n\t\t\t\tcase \"*\":\n\t\t\t\t\tm = \"{\" + m + \"}\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"|\":\n\t\t\t\t\t//regex mask alternator  ex: [01][0-9]|2[0-3] => ([01][0-9]|2[0-3])\n\t\t\t\t\tif (openenings.length === 0) { //wrap the mask in a group to form a regex alternator  ([01][0-9]|2[0-3])\n\t\t\t\t\t\tvar altRegexGroup = groupify(currentToken.matches);\n\t\t\t\t\t\taltRegexGroup.openGroup = true;\n\t\t\t\t\t\topenenings.push(altRegexGroup);\n\t\t\t\t\t\tcurrentToken.matches = [];\n\t\t\t\t\t\tcloseRegexGroup = true;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (escaped) {\n\t\t\tdefaultCase();\n\t\t\tcontinue;\n\t\t}\n\t\tswitch (m.charAt(0)) {\n\t\t\tcase \"$\":\n\t\t\tcase \"^\":\n\t\t\t\t//ignore beginswith and endswith as in masking this makes no point\n\t\t\t\tif (!regexMask) {\n\t\t\t\t\tdefaultCase();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"(?=\": //lookahead\n\t\t\t\tbreak;\n\t\t\tcase \"(?!\": //negative lookahead\n\t\t\t\tbreak;\n\t\t\tcase \"(?<=\": //lookbehind\n\t\t\t\tbreak;\n\t\t\tcase \"(?<!\": //negative lookbehind\n\t\t\t\tbreak;\n\t\t\tcase opts.escapeChar:\n\t\t\t\tescaped = true;\n\t\t\t\tif (regexMask) {\n\t\t\t\t\tdefaultCase();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t// optional closing\n\t\t\tcase opts.optionalmarker[1]:\n\t\t\tcase opts.groupmarker[1]:\n\t\t\t\tcloseGroup();\n\t\t\t\tbreak;\n\t\t\tcase opts.optionalmarker[0]:\n\t\t\t\t// optional opening\n\t\t\t\topenenings.push(new MaskToken(false, true));\n\t\t\t\tbreak;\n\t\t\tcase opts.groupmarker[0]:\n\t\t\t\t// Group opening\n\t\t\t\topenenings.push(new MaskToken(true));\n\t\t\t\tbreak;\n\t\t\tcase opts.quantifiermarker[0]:\n\t\t\t\t//Quantifier\n\t\t\t\tvar quantifier = new MaskToken(false, false, true);\n\n\t\t\t\tm = m.replace(/[{}]/g, \"\");\n\t\t\t\tvar mqj = m.split(\"|\"),\n\t\t\t\t\tmq = mqj[0].split(\",\"),\n\t\t\t\t\tmq0 = isNaN(mq[0]) ? mq[0] : parseInt(mq[0]),\n\t\t\t\t\tmq1 = mq.length === 1 ? mq0 : (isNaN(mq[1]) ? mq[1] : parseInt(mq[1]));\n\t\t\t\tif (mq0 === \"*\" || mq0 === \"+\") {\n\t\t\t\t\tmq0 = mq1 === \"*\" ? 0 : 1;\n\t\t\t\t}\n\t\t\t\tquantifier.quantifier = {\n\t\t\t\t\tmin: mq0,\n\t\t\t\t\tmax: mq1,\n\t\t\t\t\tjit: mqj[1]\n\t\t\t\t};\n\t\t\t\tvar matches = openenings.length > 0 ? openenings[openenings.length - 1].matches : currentToken.matches;\n\t\t\t\tmatch = matches.pop();\n\t\t\t\tif (match.isAlternator) { //handle quantifier in an alternation [0-9]{2}|[0-9]{3}\n\t\t\t\t\tmatches.push(match); //push back alternator\n\t\t\t\t\tmatches = match.matches; //remap target matches\n\t\t\t\t\tvar groupToken = new MaskToken(true);\n\t\t\t\t\tvar tmpMatch = matches.pop();\n\t\t\t\t\tmatches.push(groupToken); //push the group\n\t\t\t\t\tmatches = groupToken.matches;\n\t\t\t\t\tmatch = tmpMatch;\n\t\t\t\t}\n\t\t\t\tif (!match.isGroup) {\n\t\t\t\t\t// if (regexMask && match.fn === null) { //why is this needed???\n\t\t\t\t\t//     if (match.def === \".\") match.fn = new RegExp(match.def, opts.casing ? \"i\" : \"\");\n\t\t\t\t\t// }\n\n\t\t\t\t\tmatch = groupify([match]);\n\t\t\t\t}\n\t\t\t\tmatches.push(match);\n\t\t\t\tmatches.push(quantifier);\n\n\t\t\t\tbreak;\n\t\t\tcase opts.alternatormarker:\n\n\n\t\t\t\tif (openenings.length > 0) {\n\t\t\t\t\tcurrentOpeningToken = openenings[openenings.length - 1];\n\t\t\t\t\tvar subToken = currentOpeningToken.matches[currentOpeningToken.matches.length - 1];\n\t\t\t\t\tif (currentOpeningToken.openGroup && //regexp alt syntax\n\t\t\t\t\t\t(subToken.matches === undefined || (subToken.isGroup === false && subToken.isAlternator === false))) { //alternations within group\n\t\t\t\t\t\tlastMatch = openenings.pop();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlastMatch = groupQuantifier(currentOpeningToken.matches);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlastMatch = groupQuantifier(currentToken.matches);\n\t\t\t\t}\n\t\t\t\tif (lastMatch.isAlternator) {\n\t\t\t\t\topenenings.push(lastMatch);\n\t\t\t\t} else {\n\t\t\t\t\tif (lastMatch.alternatorGroup) {\n\t\t\t\t\t\talternator = openenings.pop();\n\t\t\t\t\t\tlastMatch.alternatorGroup = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\talternator = new MaskToken(false, false, false, true);\n\t\t\t\t\t}\n\t\t\t\t\talternator.matches.push(lastMatch);\n\t\t\t\t\topenenings.push(alternator);\n\t\t\t\t\tif (lastMatch.openGroup) { //regexp alt syntax\n\t\t\t\t\t\tlastMatch.openGroup = false;\n\t\t\t\t\t\tvar alternatorGroup = new MaskToken(true);\n\t\t\t\t\t\talternatorGroup.alternatorGroup = true;\n\t\t\t\t\t\topenenings.push(alternatorGroup);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tdefaultCase();\n\t\t}\n\t}\n\n\tif (closeRegexGroup) closeGroup();\n\n\twhile (openenings.length > 0) {\n\t\topeningToken = openenings.pop();\n\t\tcurrentToken.matches.push(openingToken);\n\t}\n\tif (currentToken.matches.length > 0) {\n\t\tverifyGroupMarker(currentToken);\n\t\tmaskTokens.push(currentToken);\n\t}\n\n\tif (opts.numericInput || opts.isRTL) {\n\t\treverseTokens(maskTokens[0]);\n\t}\n\t// console.log(JSON.stringify(maskTokens));\n\treturn maskTokens;\n}\n","export default {\n\t\"9\": { //\\uFF11-\\uFF19 #1606\n\t\tvalidator: \"[0-9\\uFF10-\\uFF19]\",\n\t\tdefinitionSymbol: \"*\"\n\t},\n\t\"a\": { //\\u0410-\\u044F\\u0401\\u0451\\u00C0-\\u00FF\\u00B5 #76\n\t\tvalidator: \"[A-Za-z\\u0410-\\u044F\\u0401\\u0451\\u00C0-\\u00FF\\u00B5]\",\n\t\tdefinitionSymbol: \"*\"\n\t},\n\t\"*\": {\n\t\tvalidator: \"[0-9\\uFF10-\\uFF19A-Za-z\\u0410-\\u044F\\u0401\\u0451\\u00C0-\\u00FF\\u00B5]\"\n\t}\n}","export default {\n\t_maxTestPos: 500,\n\tplaceholder: \"_\",\n\toptionalmarker: [\"[\", \"]\"],\n\tquantifiermarker: [\"{\", \"}\"],\n\tgroupmarker: [\"(\", \")\"],\n\talternatormarker: \"|\",\n\tescapeChar: \"\\\\\",\n\tmask: null, //needs tobe null instead of undefined as the extend method does not consider props with the undefined value\n\tregex: null, //regular expression as a mask\n\toncomplete: () => {\n\t}, //executes when the mask is complete\n\tonincomplete: () => {\n\t}, //executes when the mask is incomplete and focus is lost\n\toncleared: () => {\n\t}, //executes when the mask is cleared\n\trepeat: 0, //repetitions of the mask: * ~ forever, otherwise specify an integer\n\tgreedy: false, //true: allocated buffer for the mask and repetitions - false: allocate only if needed\n\tautoUnmask: false, //automatically unmask when retrieving the value with $.fn.val or value if the browser supports __lookupGetter__ or getOwnPropertyDescriptor\n\tremoveMaskOnSubmit: false, //remove the mask before submitting the form.\n\tclearMaskOnLostFocus: true,\n\tinsertMode: true, //insert the input or overwrite the input\n\tinsertModeVisual: true, //show selected caret when insertmode = false\n\tclearIncomplete: false, //clear the incomplete input on blur\n\talias: null,\n\tonKeyDown: () => {\n\t}, //callback to implement autocomplete on certain keys for example. args => event, buffer, caretPos, opts\n\tonBeforeMask: null, //executes before masking the initial value to allow preprocessing of the initial value.\targs => initialValue, opts => return processedValue\n\tonBeforePaste: function (pastedValue, opts) {\n\t\treturn typeof opts.onBeforeMask === \"function\" ? opts.onBeforeMask.call(this, pastedValue, opts) : pastedValue;\n\t}, //executes before masking the pasted value to allow preprocessing of the pasted value.\targs => pastedValue, opts => return processedValue\n\tonBeforeWrite: null, //executes before writing to the masked element. args => event, opts\n\tonUnMask: null, //executes after unmasking to allow postprocessing of the unmaskedvalue.\targs => maskedValue, unmaskedValue, opts\n\tshowMaskOnFocus: true, //show the mask-placeholder when the input has focus\n\tshowMaskOnHover: true, //show the mask-placeholder when hovering the empty input\n\tonKeyValidation: () => {\n\t}, //executes on every key-press with the result of isValid. Params: key, result, opts\n\tskipOptionalPartCharacter: \" \", //a character which can be used to skip an optional part of a mask\n\tnumericInput: false, //numericInput input direction style (input shifts to the left while holding the caret position)\n\trightAlign: false, //align to the right\n\tundoOnEscape: true, //pressing escape reverts the value to the value before focus\n\t//numeric basic properties\n\tradixPoint: \"\", //\".\", // | \",\"\n\t_radixDance: false, //dance around the radixPoint\n\tgroupSeparator: \"\", //\",\", // | \".\"\n\t//numeric basic properties\n\tkeepStatic: null, //try to keep the mask static while typing. Decisions to alter the mask will be posponed if possible\n\tpositionCaretOnTab: true, //when enabled the caret position is set after the latest valid position on TAB\n\ttabThrough: false, //allows for tabbing through the different parts of the masked field\n\tsupportsInputType: [\"text\", \"tel\", \"url\", \"password\", \"search\"], //list with the supported input types\n\t//specify keyCodes which should not be considered in the keypress event, otherwise the preventDefault will stop their default behavior especially in FF\n\tignorables: [8, 9, 19, 27, 33, 34, 35, 36, 37, 38, 39, 40, 45, 46, 93, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 0, 229],\n\tisComplete: null, //override for isComplete - args => buffer, opts - return true || false\n\tpreValidation: null, //hook to preValidate the input.  Usefull for validating regardless the definition.\targs => buffer, pos, char, isSelection, opts, maskset, caretPos, strict => return true/false/command object\n\tpostValidation: null, //hook to postValidate the result from isValid.\tUsefull for validating the entry as a whole.\targs => buffer, pos, c, currentResult, opts, maskset, strict, fromCheckval => return true/false/json\n\tstaticDefinitionSymbol: undefined, //specify a definitionSymbol for static content, used to make matches for alternators\n\tjitMasking: false, //just in time masking ~ only mask while typing, can n (number), true or false\n\tnullable: true, //return nothing instead of the buffertemplate when the user hasn't entered anything.\n\tinputEventOnly: false, //dev option - testing inputfallback behavior\n\tnoValuePatching: false, //disable value property patching\n\tpositionCaretOnClick: \"lvp\", //none, lvp (based on the last valid position (default), radixFocus (position caret to radixpoint on initial click), select (select the whole input), ignore (ignore the click and continue the mask)\n\tcasing: null, //mask-level casing. Options: null, \"upper\", \"lower\" or \"title\" or callback args => elem, test, pos, validPositions return charValue\n\tinputmode: \"text\", //specify the inputmode\n\timportDataAttributes: true, //import data-inputmask attributes\n\tshiftPositions: true, //shift position of the mask entries on entry and deletion.\n\tusePrototypeDefinitions: true //use the default defined definitions from the prototype\n};","/*\n * Input Mask Core\n * http://github.com/RobinHerbots/jquery.inputmask\n * Copyright (c) Robin Herbots\n * Licensed under the MIT license\n */\nimport \"./getPrototypeOf\";\nimport {mask} from \"./mask\";\nimport $ from \"./dependencyLibs/inputmask.dependencyLib\";\nimport window from \"./global/window\";\nimport {generateMaskSet, analyseMask} from \"./mask-lexer\";\nimport {getMaskTemplate} from \"./validation-tests\";\nimport {determineLastRequiredPosition, getBuffer, getBufferTemplate, isMask} from \"./positioning\";\nimport {isComplete} from \"./validation\";\nimport {checkVal, unmaskedvalue} from \"./inputHandling\";\nimport {EventRuler} from \"./eventruler\";\nimport definitions from \"./definitions\";\nimport defaults from \"./defaults\";\n\nconst document = window.document, dataKey = \"_inputmask_opts\";\n\nfunction Inputmask(alias, options, internal) {\n\t//allow instanciating without new\n\tif (!(this instanceof Inputmask)) {\n\t\treturn new Inputmask(alias, options, internal);\n\t}\n\n\tthis.dependencyLib = $;\n\tthis.el = undefined;\n\tthis.events = {};\n\tthis.maskset = undefined;\n\n\tif (internal !== true) {\n\t\t//init options\n\t\tif (Object.prototype.toString.call(alias) === \"[object Object]\") {\n\t\t\toptions = alias;\n\t\t} else {\n\t\t\toptions = options || {};\n\t\t\tif (alias) options.alias = alias;\n\t\t}\n\t\tthis.opts = $.extend(true, {}, this.defaults, options);\n\t\tthis.noMasksCache = options && options.definitions !== undefined;\n\t\tthis.userOptions = options || {}; //user passed options\n\t\tresolveAlias(this.opts.alias, options, this.opts);\n\t}\n\n\t//maskscope properties\n\tthis.refreshValue = false; //indicate a refresh from the inputvalue is needed (form.reset)\n\tthis.undoValue = undefined;\n\tthis.$el = undefined;\n\tthis.skipKeyPressEvent = false; //Safari 5.1.x - modal dialog fires keypress twice workaround\n\tthis.skipInputEvent = false; //skip when triggered from within inputmask\n\tthis.validationEvent = false;\n\tthis.ignorable = false;\n\tthis.maxLength;\n\tthis.mouseEnter = false;\n\tthis.originalPlaceholder = undefined; //needed for FF\n\tthis.isComposing = false; //keydowncode == 229  compositionevent fallback\n}\n\nInputmask.prototype = {\n\tdataAttribute: \"data-inputmask\", //data attribute prefix used for attribute binding\n\t//options default\n\tdefaults: defaults,\n\tdefinitions: definitions,\n\taliases: {}, //aliases definitions\n\tmasksCache: {},\n\tget isRTL() {\n\t\treturn this.opts.isRTL || this.opts.numericInput;\n\t},\n\tmask: function (elems) {\n\t\tvar that = this;\n\t\tif (typeof elems === \"string\") {\n\t\t\telems = document.getElementById(elems) || document.querySelectorAll(elems);\n\t\t}\n\t\telems = elems.nodeName ? [elems] : elems;\n\t\telems.forEach(function (el, ndx) {\n\t\t\tvar scopedOpts = $.extend(true, {}, that.opts);\n\t\t\tif (importAttributeOptions(el, scopedOpts, $.extend(true, {}, that.userOptions), that.dataAttribute)) {\n\t\t\t\tvar maskset = generateMaskSet(scopedOpts, that.noMasksCache);\n\t\t\t\tif (maskset !== undefined) {\n\t\t\t\t\tif (el.inputmask !== undefined) {\n\t\t\t\t\t\tel.inputmask.opts.autoUnmask = true; //force autounmasking when remasking\n\t\t\t\t\t\tel.inputmask.remove();\n\t\t\t\t\t}\n\t\t\t\t\t//store inputmask instance on the input with element reference\n\t\t\t\t\tel.inputmask = new Inputmask(undefined, undefined, true);\n\t\t\t\t\tel.inputmask.opts = scopedOpts;\n\t\t\t\t\tel.inputmask.noMasksCache = that.noMasksCache;\n\t\t\t\t\tel.inputmask.userOptions = $.extend(true, {}, that.userOptions);\n\t\t\t\t\t// el.inputmask.isRTL = scopedOpts.isRTL || scopedOpts.numericInput;\n\t\t\t\t\tel.inputmask.el = el;\n\t\t\t\t\tel.inputmask.$el = $(el);\n\t\t\t\t\tel.inputmask.maskset = maskset;\n\n\t\t\t\t\t$.data(el, dataKey, that.userOptions);\n\t\t\t\t\tmask.call(el.inputmask);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn elems && elems[0] ? (elems[0].inputmask || this) : this;\n\t},\n\toption: function (options, noremask) { //set extra options || retrieve value of a current option\n\t\tif (typeof options === \"string\") {\n\t\t\treturn this.opts[options];\n\t\t} else if (typeof options === \"object\") {\n\t\t\t$.extend(this.userOptions, options); //user passed options\n\t\t\t//remask\n\t\t\tif (this.el && noremask !== true) {\n\t\t\t\tthis.mask(this.el);\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t},\n\tunmaskedvalue: function (value) {\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\tif (this.el === undefined || value !== undefined) {\n\t\t\tvar valueBuffer = (typeof this.opts.onBeforeMask === \"function\" ? (this.opts.onBeforeMask.call(this, value, this.opts) || value) : value).split(\"\");\n\t\t\tcheckVal.call(this, undefined, false, false, valueBuffer);\n\t\t\tif (typeof this.opts.onBeforeWrite === \"function\") this.opts.onBeforeWrite.call(this, undefined, getBuffer.call(this), 0, this.opts);\n\t\t}\n\t\treturn unmaskedvalue.call(this, this.el);\n\t},\n\tremove: function () {\n\t\tif (this.el) {\n\t\t\t$.data(this.el, dataKey, null); //invalidate\n\t\t\t//writeout the value\n\t\t\tvar cv = this.opts.autoUnmask ? unmaskedvalue(this.el) : this._valueGet(this.opts.autoUnmask);\n\t\t\tif (cv !== getBufferTemplate.call(this).join(\"\")) this._valueSet(cv, this.opts.autoUnmask); else this._valueSet(\"\");\n\t\t\t//unbind all events\n\t\t\tEventRuler.off(this.el);\n\n\t\t\t//restore the value property\n\t\t\tvar valueProperty;\n\t\t\tif (Object.getOwnPropertyDescriptor && Object.getPrototypeOf) {\n\t\t\t\tvalueProperty = Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this.el), \"value\");\n\t\t\t\tif (valueProperty) {\n\t\t\t\t\tif (this.__valueGet) {\n\t\t\t\t\t\tObject.defineProperty(this.el, \"value\", {\n\t\t\t\t\t\t\tget: this.__valueGet,\n\t\t\t\t\t\t\tset: this.__valueSet,\n\t\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (document.__lookupGetter__ && this.el.__lookupGetter__(\"value\")) {\n\t\t\t\tif (this.__valueGet) {\n\t\t\t\t\tthis.el.__defineGetter__(\"value\", this.__valueGet);\n\t\t\t\t\tthis.el.__defineSetter__(\"value\", this.__valueSet);\n\t\t\t\t}\n\t\t\t}\n\t\t\t//clear data\n\t\t\tthis.el.inputmask = undefined;\n\t\t}\n\t\treturn this.el;\n\t},\n\tgetemptymask: function () { //return the default (empty) mask value, usefull for setting the default value in validation\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\treturn getBufferTemplate.call(this).join(\"\");\n\t},\n\thasMaskedValue: function () { //check wheter the returned value is masked or not; currently only works reliable when using jquery.val fn to retrieve the value\n\t\treturn !this.opts.autoUnmask;\n\t},\n\tisComplete: function () {\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\treturn isComplete.call(this, getBuffer.call(this));\n\t},\n\tgetmetadata: function () { //return mask metadata if exists\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\tif (Array.isArray(this.maskset.metadata)) {\n\t\t\tvar maskTarget = getMaskTemplate.call(this, true, 0, false).join(\"\");\n\t\t\tthis.maskset.metadata.forEach(function (mtdt) {\n\t\t\t\tif (mtdt.mask === maskTarget) {\n\t\t\t\t\tmaskTarget = mtdt;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t});\n\t\t\treturn maskTarget;\n\t\t}\n\t\treturn this.maskset.metadata;\n\t},\n\tisValid: function (value) {\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\tif (value) {\n\t\t\tvar valueBuffer = (typeof this.opts.onBeforeMask === \"function\" ? (this.opts.onBeforeMask.call(this, value, this.opts) || value) : value).split(\"\");\n\t\t\tcheckVal.call(this, undefined, true, false, valueBuffer);\n\t\t} else {\n\t\t\tvalue = this.isRTL ? getBuffer.call(this).slice().reverse().join(\"\") : getBuffer.call(this).join(\"\");\n\t\t}\n\t\tvar buffer = getBuffer.call(this);\n\t\tvar rl = determineLastRequiredPosition.call(this),\n\t\t\tlmib = buffer.length - 1;\n\t\tfor (; lmib > rl; lmib--) {\n\t\t\tif (isMask.call(this, lmib)) break;\n\t\t}\n\t\tbuffer.splice(rl, lmib + 1 - rl);\n\n\t\treturn isComplete.call(this, buffer) && value === (this.isRTL ? getBuffer.call(this).slice().reverse().join(\"\") : getBuffer.call(this).join(\"\"));\n\n\t},\n\tformat: function (value, metadata) {\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\tlet valueBuffer = (typeof this.opts.onBeforeMask === \"function\" ? (this.opts.onBeforeMask.call(this, value, this.opts) || value) : value).split(\"\");\n\t\tcheckVal.call(this, undefined, true, false, valueBuffer);\n\t\tlet formattedValue = this.isRTL ? getBuffer.call(this).slice().reverse().join(\"\") : getBuffer.call(this).join(\"\");\n\t\treturn metadata ? {\n\t\t\tvalue: formattedValue,\n\t\t\tmetadata: this.getmetadata()\n\t\t} : formattedValue;\n\t},\n\tsetValue: function (value) {\n\t\tif (this.el) {\n\t\t\t$(this.el).trigger(\"setvalue\", [value]);\n\t\t}\n\t},\n\tanalyseMask: analyseMask\n};\n\nfunction resolveAlias(aliasStr, options, opts) {\n\tvar aliasDefinition = Inputmask.prototype.aliases[aliasStr];\n\tif (aliasDefinition) {\n\t\tif (aliasDefinition.alias) resolveAlias(aliasDefinition.alias, undefined, opts); //alias is another alias\n\t\t$.extend(true, opts, aliasDefinition); //merge alias definition in the options\n\t\t$.extend(true, opts, options); //reapply extra given options\n\t\treturn true;\n\t} else //alias not found - try as mask\n\tif (opts.mask === null) {\n\t\topts.mask = aliasStr;\n\t}\n\n\treturn false;\n}\n\nfunction importAttributeOptions(npt, opts, userOptions, dataAttribute) {\n\tfunction importOption(option, optionData) {\n\t\tconst attrOption = dataAttribute === \"\" ? option : dataAttribute + \"-\" + option;\n\t\toptionData = optionData !== undefined ? optionData : npt.getAttribute(attrOption);\n\t\tif (optionData !== null) {\n\t\t\tif (typeof optionData === \"string\") {\n\t\t\t\tif (option.indexOf(\"on\") === 0) {\n\t\t\t\t\toptionData = window[optionData];\n\t\t\t\t}//get function definition\n\t\t\t\telse if (optionData === \"false\") {\n\t\t\t\t\toptionData = false;\n\t\t\t\t} else if (optionData === \"true\") optionData = true;\n\t\t\t}\n\t\t\tuserOptions[option] = optionData;\n\t\t}\n\t}\n\n\tif (opts.importDataAttributes === true) {\n\t\tvar attrOptions = npt.getAttribute(dataAttribute), option, dataoptions, optionData, p;\n\n\t\tif (attrOptions && attrOptions !== \"\") {\n\t\t\tattrOptions = attrOptions.replace(/'/g, \"\\\"\");\n\t\t\tdataoptions = JSON.parse(\"{\" + attrOptions + \"}\");\n\t\t}\n\n\t\t//resolve aliases\n\t\tif (dataoptions) { //pickup alias from dataAttribute\n\t\t\toptionData = undefined;\n\t\t\tfor (p in dataoptions) {\n\t\t\t\tif (p.toLowerCase() === \"alias\") {\n\t\t\t\t\toptionData = dataoptions[p];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\timportOption(\"alias\", optionData); //pickup alias from dataAttribute-alias\n\t\tif (userOptions.alias) {\n\t\t\tresolveAlias(userOptions.alias, userOptions, opts);\n\t\t}\n\n\t\tfor (option in opts) {\n\t\t\tif (dataoptions) {\n\t\t\t\toptionData = undefined;\n\t\t\t\tfor (p in dataoptions) {\n\t\t\t\t\tif (p.toLowerCase() === option.toLowerCase()) {\n\t\t\t\t\t\toptionData = dataoptions[p];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\timportOption(option, optionData);\n\t\t}\n\t}\n\t$.extend(true, opts, userOptions);\n\n\t//handle dir=rtl\n\tif (npt.dir === \"rtl\" || opts.rightAlign) {\n\t\tnpt.style.textAlign = \"right\";\n\t}\n\n\tif (npt.dir === \"rtl\" || opts.numericInput) {\n\t\tnpt.dir = \"ltr\";\n\t\tnpt.removeAttribute(\"dir\");\n\t\topts.isRTL = true;\n\t}\n\n\treturn Object.keys(userOptions).length;\n}\n\n//apply defaults, definitions, aliases\nInputmask.extendDefaults = function (options) {\n\t$.extend(true, Inputmask.prototype.defaults, options);\n};\nInputmask.extendDefinitions = function (definition) {\n\t$.extend(true, Inputmask.prototype.definitions, definition);\n};\nInputmask.extendAliases = function (alias) {\n\t$.extend(true, Inputmask.prototype.aliases, alias);\n};\n//static fn on inputmask\nInputmask.format = function (value, options, metadata) {\n\treturn Inputmask(options).format(value, metadata);\n};\nInputmask.unmask = function (value, options) {\n\treturn Inputmask(options).unmaskedvalue(value);\n};\nInputmask.isValid = function (value, options) {\n\treturn Inputmask(options).isValid(value);\n};\nInputmask.remove = function (elems) {\n\tif (typeof elems === \"string\") {\n\t\telems = document.getElementById(elems) || document.querySelectorAll(elems);\n\t}\n\telems = elems.nodeName ? [elems] : elems;\n\telems.forEach(function (el) {\n\t\tif (el.inputmask) el.inputmask.remove();\n\t});\n};\nInputmask.setValue = function (elems, value) {\n\tif (typeof elems === \"string\") {\n\t\telems = document.getElementById(elems) || document.querySelectorAll(elems);\n\t}\n\telems = elems.nodeName ? [elems] : elems;\n\telems.forEach(function (el) {\n\t\tif (el.inputmask) el.inputmask.setValue(value); else $(el).trigger(\"setvalue\", [value]);\n\t});\n};\n\nInputmask.dependencyLib = $;\n\n//make inputmask available\nwindow.Inputmask = Inputmask;\nexport default Inputmask;\n","import errors from \"../modules/Errors\";\r\nimport Inputmask from \"inputmask/lib/inputmask\";\r\n\r\nclass KbfStepper {\r\n\r\n    constructor(selector, validatorConfig) {\r\n\r\n        let $ = window.$;\r\n        this.$kbfStepper = $(selector);\r\n\r\n        // Emituj wyjatek gdy nie podano selektora albo element nie zostal znaleziony\r\n        if (!selector || this.$kbfStepper.length === 0) throw errors.elementNotFound(selector);\r\n\r\n        this.validatorConfig = validatorConfig;\r\n\r\n        this.init();\r\n        this.addListeners();\r\n    }\r\n\r\n    init() {\r\n\r\n        this.currentPageIdx = 0; // Biezacy index strony\r\n        this.$pages = this.$kbfStepper.find('.page');\r\n        this.$pages.eq(0).removeClass('d-none');\r\n        this.lastPageIdx = this.$pages.length - 1; // Ostatni index\r\n\r\n        // Elementy $\r\n        this.$infoMessages = this.$kbfStepper.find('.top-message');\r\n        this.$infoMessages.hide().eq(0).addClass('d-flex'); // Pokaz tylko pierwszy message\r\n        this.$errorMessageElement = $('.kbf-error-message'); // Komunikaty bledow\r\n        this.$errorStepper = $('.error-stepper'); // Dolny komunikat o bledzie\r\n\r\n        this.$stepsTop = this.$kbfStepper.find('.container > .steps > .step'); // Krok u gory\r\n        this.$stepsBottom = this.$kbfStepper.find('form > .steps > .step'); // Kroki na dole\r\n\r\n        // Maski wprowadzania\r\n        this.$formInputs = $('.form-control');\r\n        this.$formInputs.each(function () {\r\n            if (this.name === 'company_regon') new Inputmask({ placeholder: ''}).mask(this);\r\n            else new Inputmask().mask(this);\r\n        })\r\n    }\r\n\r\n    addListeners() {}\r\n\r\n    // Zmienia na nastepna strone\r\n    nextPage(e) {\r\n\r\n        e.stopPropagation();\r\n\r\n        if (this.validateCurrentPage()) { // Zmienia strone tylko w przypadku jej poprawnosci\r\n        // if (true) { // Zmienia strone tylko w przypadku jej poprawnosci\r\n\r\n            if (this.currentPageIdx === this.lastPageIdx) return;\r\n\r\n            this.$stepsTop.eq(this.currentPageIdx).addClass('done');\r\n            this.$stepsTop.eq(this.currentPageIdx).removeClass('active');\r\n\r\n            this.$stepsBottom.eq(this.currentPageIdx).addClass('done');\r\n            this.$stepsBottom.eq(this.currentPageIdx).removeClass('active');\r\n\r\n            this.currentPageIdx++;\r\n\r\n            this.$stepsTop.eq(this.currentPageIdx).addClass('active');\r\n            this.$stepsBottom.eq(this.currentPageIdx).addClass('active');\r\n\r\n            this.goToPage(this.currentPageIdx);\r\n            this.setMessages();\r\n\r\n        }\r\n    }\r\n\r\n    // Zmienia na poprzednia strone\r\n    prevPage(e) {\r\n\r\n        e.stopPropagation();\r\n\r\n        if (this.currentPageIdx === 0) return\r\n\r\n        this.$stepsTop.eq(this.currentPageIdx).removeClass('active');\r\n        this.$stepsBottom.eq(this.currentPageIdx).removeClass('active');\r\n\r\n        this.currentPageIdx--;\r\n\r\n        this.$stepsTop.eq(this.currentPageIdx).removeClass('done');\r\n        this.$stepsTop.eq(this.currentPageIdx).addClass('active');\r\n\r\n        this.$stepsBottom.eq(this.currentPageIdx).removeClass('done');\r\n        this.$stepsBottom.eq(this.currentPageIdx).addClass('active');\r\n\r\n        this.goToPage(this.currentPageIdx);\r\n        this.setMessages();\r\n\r\n    }\r\n\r\n    goToPage(pageIdx) {\r\n        this.$pages.addClass('d-none');\r\n        this.$pages.eq(pageIdx).removeClass('d-none');\r\n\r\n        document.body.scrollTop = 0; // For Safari\r\n        document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera\r\n\r\n    }\r\n\r\n\r\n    // Ustawia komunikaty dla stron\r\n    setMessages() {\r\n        this.$infoMessages.eq(this.currentPageIdx).addClass('d-flex').show();\r\n        this.$infoMessages.eq(this.currentPageIdx).siblings('.top-message').removeClass('d-flex').hide();\r\n        $('.error-stepper').addClass('d-none');\r\n    }\r\n\r\n    // Sprawdza poprawnosc formularza na danej stronie\r\n    validateCurrentPage() {\r\n\r\n        if (!this.$errorStepper.hasClass('d-none')) this.$errorStepper.addClass('d-none')\r\n\r\n        let $pages = $('.page');\r\n        let $currentInputs = $pages.eq(this.currentPageIdx).find('.form-control').not('.kbf-keywords');\r\n        let $currentRepeaterInputs = $pages.eq(this.currentPageIdx).find('.repeater-hidden-input');\r\n\r\n        let $currentPageInputs = $currentInputs.add($currentRepeaterInputs);\r\n\r\n        let fieldsAreValid = true;\r\n\r\n        if ($currentPageInputs.length) {\r\n\r\n            let validator = $(`[name=\"${this.validatorConfig.formName}\"]`).validate(this.validatorConfig);\r\n            let valids = [];\r\n\r\n             $currentPageInputs.each(function () {\r\n                 valids.push(validator.element(this))\r\n             })\r\n\r\n            fieldsAreValid = ! valids.includes(false);\r\n\r\n        }\r\n\r\n        // Wyswietl komunikat o bledzie jeeli pole komunikatu istnieje\r\n        if (this.$errorMessageElement.length > 0) {\r\n            if(fieldsAreValid && !this.$errorMessageElement.hasClass('d-none')) this.$errorMessageElement.addClass('d-none');\r\n            if(!fieldsAreValid && this.$errorMessageElement.hasClass('d-none')) this.$errorMessageElement.removeClass('d-none');\r\n        }\r\n\r\n        if (!fieldsAreValid) this.$errorStepper.removeClass('d-none');\r\n\r\n        return fieldsAreValid;\r\n    }\r\n\r\n}\r\n\r\nexport default KbfStepper","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import _typeof from \"@babel/runtime/helpers/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","import errors from \"../modules/Errors\";\r\n\r\nclass KbfPreloaderButton extends EventTarget {\r\n\r\n    constructor(selector, auto= true) {\r\n\r\n        super();\r\n        let $ = window.$;\r\n\r\n        this.$preloaderButton = $(selector);\r\n\r\n        // Emituj wyjatek gdy nie podano selektora albo element nie zostal znaleziony\r\n        if (!selector || this.$preloaderButton.length === 0) throw errors.elementNotFound(selector);\r\n\r\n        this.auto = auto; // Czy automatycznie dodawac listener\r\n\r\n        this.init();\r\n        this.addListeners();\r\n\r\n    }\r\n\r\n    init() {\r\n\r\n        // Aliasy\r\n        this.on = this.addEventListener;\r\n        this.off = this.removeEventListener;\r\n        this.emit = this.dispatchEvent;\r\n\r\n        this.buttonCurrentContents = this.$preloaderButton.html(); // Aktualna zawartosc\r\n\r\n    }\r\n\r\n    triggerStart(buttonElement) {\r\n\r\n        let buttonGeometry = buttonElement.getBoundingClientRect(); // Aktualna geometria\r\n\r\n        let $buttonElement = $(buttonElement);\r\n        let bgColor;\r\n\r\n        $buttonElement.on('click', function () {\r\n            bgColor = getComputedStyle(buttonElement, ':hover').backgroundColor;\r\n        })\r\n\r\n\r\n        this.$preloaderButton.trigger({\r\n            type: 'start-preloader',\r\n            buttonGeometry,\r\n            bgColor\r\n        });\r\n\r\n        this.emit(new CustomEvent('click'));\r\n    }\r\n\r\n    // Startuje preloader\r\n    startPreloader(buttonElement, buttonGeometry, bgColor) {\r\n\r\n        let $ = window.$;\r\n\r\n        let $buttonElement = $(buttonElement);\r\n\r\n        $buttonElement.attr('disabled', 'disabled');\r\n        $buttonElement.css('width', buttonGeometry.width + 'px');\r\n        $buttonElement.css('height', buttonGeometry.height + 'px');\r\n        $buttonElement.css('padding', 0);\r\n        $buttonElement.css('background-color', bgColor);\r\n        $buttonElement.html(KbfPreloaderButton.preloaderMarkup);\r\n\r\n    }\r\n\r\n    // Zatrzymuje preloader\r\n    stopPreloader() {\r\n        this.$preloaderButton.html(this.buttonCurrentContents).attr('style', '');\r\n        this.$preloaderButton.removeAttr('disabled');\r\n    }\r\n\r\n    addListeners() {\r\n\r\n        let instance = this;\r\n\r\n        // Rejestruj handler warunkowo\r\n        if (this.auto) {\r\n            this.$preloaderButton.on('click', function () {\r\n               instance.triggerStart(this);\r\n            });\r\n        }\r\n\r\n        this.$preloaderButton.on('start-preloader', function (e) {\r\n            instance.startPreloader(this, e.buttonGeometry, e.bgColor);\r\n        })\r\n\r\n    }\r\n}\r\n\r\nKbfPreloaderButton.preloaderMarkup = '<div class=\"kbf-button-preloader\"><div id=\"dots\"><span></span><span></span><span></span></div></div>';\r\nexport default KbfPreloaderButton;","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export function get(element) {\n  return getComputedStyle(element);\n}\n\nexport function set(element, obj) {\n  for (const key in obj) {\n    let val = obj[key];\n    if (typeof val === 'number') {\n      val = `${val}px`;\n    }\n    element.style[key] = val;\n  }\n  return element;\n}\n","import errors from \"../modules/Errors\";\r\nimport PerfectScrollbar from 'perfect-scrollbar';\r\n\r\nclass KbfDropdown extends EventTarget {\r\n\r\n    constructor(selector, opts = [], scrollBlock = true) {\r\n\r\n        super();\r\n\r\n        let $ = window.$;\r\n\r\n        // Sprawdz poprawnosc argumentow\r\n        if (selector === undefined) throw errors.argumentNotFound('selector');\r\n\r\n        this.selector = selector;\r\n        this.opts = opts;\r\n\r\n        this.scrollBlock = scrollBlock; // Czy blokowac scroll po otwarciu dropdown\r\n\r\n        this.init(); // Inicjalizuj\r\n        this.addListeners(); // Dodaj event listenery\r\n        this.initScrollBar(); // Inicjuj scrollbar\r\n\r\n    }\r\n\r\n    init() {\r\n\r\n        let $ = window.$;\r\n\r\n        // Aliasy\r\n        this.on = this.addEventListener;\r\n        this.off = this.removeEventListener;\r\n        this.emit = this.dispatchEvent;\r\n\r\n        this.$dropdowns = $(this.selector);\r\n\r\n        // Ustaw opcje z atrybuty data-options\r\n        let dataOptions = this.$dropdowns.data('options');\r\n        if (dataOptions) this.opts = dataOptions.split(',');\r\n\r\n        // Wartosc poczatkowa\r\n        this.startValue = this.$dropdowns.data('value');\r\n\r\n        if (this.$dropdowns.length === 0) throw errors.elementNotFound(this.selector);\r\n\r\n        this.$dropdownButtons = this.$dropdowns.find('button'); // Przyciski dropdown\r\n\r\n        // Wstaw ukryte pole formularza\r\n        this.$dropdowns.append($('<input class=\"form-control\" type=\"hidden\">'));\r\n        this.$hiddenInputs = this.$dropdowns.find('input[type=\"hidden\"]');\r\n\r\n        // Ustaw opcje\r\n        this.setOptions(this.opts);\r\n        this.$dropdownItems = this.$dropdowns.find('.dropdown-item'); // Elementy menu\r\n        if (this.startValue) this.setActive(this.startValue);\r\n\r\n    }\r\n\r\n    // Dodaje listenery\r\n    addListeners() {\r\n\r\n        let $ = window.$;\r\n\r\n        let instance = this; // Ustaw kontekst\r\n        this.$dropdownItems.off('click');\r\n\r\n        let wheelEvent = 'onwheel' in document.createElement('div') ? 'wheel' : 'mousewheel';\r\n\r\n        function preventDefault(e) {\r\n            e.preventDefault();\r\n        }\r\n\r\n        function disableScroll() {\r\n            window.addEventListener('DOMMouseScroll', preventDefault, { passive: false }); // older FF\r\n            window.addEventListener(wheelEvent, preventDefault, { passive: false }); // modern desktop\r\n            window.addEventListener('touchmove', preventDefault, { passive: false }); // mobile\r\n        }\r\n\r\n        function enableScroll() {\r\n            window.removeEventListener('DOMMouseScroll', preventDefault, { passive: false });\r\n            window.removeEventListener(wheelEvent, preventDefault, { passive: false });\r\n            window.removeEventListener('touchmove', preventDefault, { passive: false });\r\n        }\r\n\r\n        if (this.scrollBlock) {\r\n            // Blokowanie scrollingu body kiedy dropdown jest widoczny\r\n            this.$dropdowns.on('shown.bs.dropdown', function (e) {\r\n                e.stopPropagation();\r\n                disableScroll();\r\n\r\n            });\r\n\r\n            this.$dropdowns.on('hidden.bs.dropdown', function (e) {\r\n                e.stopPropagation();\r\n                enableScroll();\r\n            });\r\n        }\r\n\r\n        // Gdy klikniemy na dropdown item\r\n        this.$dropdownItems.on('click', function (e) {\r\n\r\n            e.preventDefault()\r\n\r\n                let $this = $(this);\r\n\r\n                // Sprawdz czy wartosci sie zmienila\r\n                if ($this.text() !== instance.displayed) {\r\n\r\n                    // Wyswietl nowa wartosc na przycisku\r\n                    instance.displayed = $this.text();\r\n                    instance.$dropdownButtons.text(instance.displayed);\r\n\r\n                    // Ustaw ukryte pole\r\n                    // Jeeli opts jest obiektem\r\n                    if (Array.isArray(instance.opts) === false && typeof instance.opts === 'object') {\r\n                        instance.$hiddenInputs.attr({\r\n                            name: instance.$dropdowns.data('name'),\r\n                            value: instance.opts[instance.displayed]\r\n                        });\r\n\r\n                        instance.emit(new CustomEvent('change', {detail: instance.opts[instance.displayed]})); // Emituj nowa wartosc\r\n\r\n                    } else\r\n                        // Jezeli opts jest tablica\r\n                    if (Array.isArray(instance.opts) === true) {\r\n                        instance.$hiddenInputs.attr({\r\n                            name: instance.$dropdowns.data('name'),\r\n                            value: instance.displayed\r\n                        });\r\n\r\n                        instance.emit(new CustomEvent('change', {detail: instance.displayed})); // Emituj nowa wartosc\r\n\r\n                    }\r\n                }\r\n            }\r\n        );\r\n\r\n    }\r\n\r\n    // Inicjalizuje opcje\r\n    setOptions(opts) {\r\n\r\n        let $ = window.$;\r\n\r\n        let dropdownMenu, optionsLastIdx, idx;\r\n        let ariaLabelledBy = this.$dropdownButtons.attr('id');\r\n        let instance = this; // Ustaw kontekst\r\n\r\n        // Jeeli opts jest obiektem\r\n        if (Array.isArray(opts) === false && typeof opts === 'object') {\r\n\r\n            let keys = Object.keys(opts);\r\n            optionsLastIdx = keys.length - 1;\r\n            idx = 0;\r\n\r\n            // Ustaw stan\r\n            this.setState();\r\n\r\n            // Aktualizuj ukryte pole\r\n            this.updateHiddenInput();\r\n\r\n            // Przygotuj elementy menu\r\n            dropdownMenu = `<div class=\"dropdown-menu\" aria-labelledby=\"${ariaLabelledBy}\">`;\r\n            do {\r\n                dropdownMenu += `<a class=\"dropdown-item\" href=\"#\">${keys[idx]}</a>`;\r\n            } while (idx++ < optionsLastIdx)\r\n\r\n            dropdownMenu += '</div>';\r\n\r\n        } else\r\n\r\n            // Jezeli opts jest tablica\r\n        if (Array.isArray(opts) === true) {\r\n\r\n            optionsLastIdx = opts.length - 1;\r\n            idx = 0;\r\n\r\n            // Ustaw stan\r\n            this.setState();\r\n\r\n            // Aktualizuj ukryte pole\r\n            this.updateHiddenInput();\r\n\r\n            // Przygotuj elementy menu\r\n            dropdownMenu = `<div class=\"dropdown-menu\" aria-labelledby=\"${ariaLabelledBy}\">`;\r\n            do {\r\n                dropdownMenu += `<a class=\"dropdown-item\" href=\"#\">${opts[idx]}</a>`;\r\n            } while (idx++ < optionsLastIdx)\r\n\r\n            dropdownMenu += '</div>';\r\n\r\n        }\r\n\r\n        this.$dropdownButtons.text(this.displayed); // Ustaw tekst na przycisku\r\n        this.$dropdownButtons.on('click', function () {\r\n            instance.initScrollBar();\r\n\r\n            // Scrollbar fix !\r\n            instance.$dropdownMenu.on('click', function (e) {\r\n                if (e.target.className.indexOf('ps__') !== -1) {\r\n                    e.stopPropagation();\r\n                }\r\n            })\r\n\r\n        })\r\n\r\n        this.$dropdowns.find('.dropdown-menu').remove();\r\n\r\n        this.$dropdownMenu = $(dropdownMenu);\r\n        this.$dropdownButtons.after(this.$dropdownMenu);\r\n\r\n\r\n        // Ustaw szerokosc dropdown menu na szerokosc przycisku - fix\r\n        this.$dropdownButtons.off('mouseenter');\r\n        this.$dropdownButtons.on('mouseenter', function () {\r\n           let $this = $(this);\r\n           $this.next().css('width', $this.css('width'));\r\n        });\r\n        this.$dropdownMenu.css({width: this.$dropdownMenu.prev('button').css('width')});\r\n\r\n    }\r\n\r\n    // Ustawia nowe opcje\r\n    updateOptions(opts) {\r\n\r\n        let newMenuItemsHtml = ''; // Generowany kod html dla elementow menu\r\n        this.opts = opts;\r\n\r\n        // Jeeli opts jest obiektem\r\n        if (Array.isArray(this.opts) === false && typeof this.opts === 'object') {\r\n\r\n            let keys = Object.keys(this.opts);\r\n\r\n            // Usun istniejace elementy menu\r\n            this.$dropdownItems.remove();\r\n\r\n            // Generuj nowy kod html dla elementow menu <a class=\"dropdown-item\" href=\"#\">Wszystkie</a>\r\n            keys.forEach(function (key) {\r\n                newMenuItemsHtml += `<a class=\"dropdown-item\" href=\"#\">${key}</a>`;\r\n            });\r\n\r\n            this.$dropdownButtons.text(keys[0]); // Aktualizuj przycisk\r\n            this.$dropdownMenu.html(newMenuItemsHtml);\r\n            this.$dropdownItems = this.$dropdownMenu.find('.dropdown-item');\r\n            this.addListeners(); // Dodaj ponownie listenery\r\n\r\n            // Ustaw stan\r\n            this.setState();\r\n            this.initScrollBar();\r\n\r\n        } else\r\n\r\n            // Jezeli opts jest tablica\r\n        if (Array.isArray(this.opts) === true) {\r\n\r\n            // Usun istniejace elementy menu\r\n            this.$dropdownItems.off('click');\r\n            this.$dropdownItems.remove();\r\n\r\n            this.opts.forEach(function (opt) {\r\n                newMenuItemsHtml += `<a class=\"dropdown-item\" href=\"#\">${opt}</a>`;\r\n            });\r\n\r\n            this.$dropdownButtons.text(this.opts[0]); // Aktualizuj przycisk\r\n            this.$dropdownMenu.html(newMenuItemsHtml);\r\n            this.$dropdownItems = this.$dropdownMenu.find('.dropdown-item');\r\n            this.addListeners(); // Dodaj ponownie listenery\r\n\r\n            // Ustaw stan\r\n            this.setState();\r\n\r\n        }\r\n\r\n        // Aktualizuj ukryte pole\r\n        this.updateHiddenInput();\r\n\r\n    }\r\n\r\n    // Aktualizuje ukryte pole input\r\n    updateHiddenInput() {\r\n        // Ustaw ukryte pola\r\n        this.$hiddenInputs.attr({\r\n            name: this.$dropdowns.data('name'),\r\n            value: this.value\r\n        });\r\n    }\r\n\r\n    // Ustawia aktywna opcje\r\n    setActive(optionName) {\r\n\r\n        // Sprawdz poprawnosc argumentow\r\n        if (optionName === undefined) throw errors.argumentNotFound('optionName');\r\n\r\n        // Jeeli opts jest obiektem\r\n        if (Array.isArray(this.opts) === false && typeof this.opts === 'object') {\r\n\r\n            // Sprawdz czy opcja istnieje\r\n            if ((optionName in this.opts) === false) throw new Error(`Option ${optionName} does not exist`);\r\n\r\n            // Ustaw stan\r\n            this.displayed = optionName;\r\n            this.value = this.opts[optionName];\r\n        }\r\n\r\n        // Jezeli opts jest tablica\r\n        if (Array.isArray(this.opts) === true) {\r\n\r\n            // Sprawdz czy opcja istnieje\r\n            if (this.opts.includes(optionName) === false) throw new Error(`Option ${optionName} does not exist`);\r\n\r\n            // Ustaw stan\r\n            this.displayed = optionName;\r\n            this.value = optionName;\r\n\r\n        }\r\n\r\n        this.$dropdownButtons.text(this.displayed); // Wyswietl nowa wartosc na przycisku\r\n        this.updateHiddenInput(); // Aktualizuj ukryty input\r\n\r\n    }\r\n\r\n    // Ustawia stan\r\n    setState() {\r\n\r\n        // Jeeli opts jest obiektem\r\n        if (Array.isArray(this.opts) === false && typeof this.opts === 'object') {\r\n\r\n            let keys = Object.keys(this.opts);\r\n\r\n            // Ustaw stan\r\n            this.value = this.opts[keys[0]];\r\n            this.displayed = keys[0];\r\n            this.items = keys;\r\n\r\n        }\r\n        // Jezeli opts jest tablica\r\n        if (Array.isArray(this.opts) === true) {\r\n\r\n            // Ustaw stan\r\n            this.value = this.opts[0];\r\n            this.displayed = this.opts[0];\r\n            this.items = this.opts;\r\n\r\n        }\r\n    }\r\n\r\n    // Aktywuje scrollbar\r\n    initScrollBar() {\r\n\r\n        let instance = this;\r\n\r\n        if (this.scrollbar) this.scrollbar.destroy();\r\n\r\n        // Inicjuj scrollbar\r\n        this.scrollbar = new PerfectScrollbar(this.$dropdownMenu[0], {\r\n            minScrollbarLength: 20\r\n        });\r\n\r\n        this.$psRail = this.$dropdowns.find('[class*=\"ps__rail-y\"]');\r\n        this.$psThumb = this.$dropdowns.find('[class*=\"ps__thumb-y\"]');\r\n\r\n        // Wylacz pan mapy gdy kursor znajduje sie na scrollbar i mapa istnieje\r\n        this.$psRail.on('mouseenter', function () {\r\n            if (window.map) window.map.dragging.disable();\r\n\r\n        });\r\n\r\n        this.$dropdownMenu.on('mouseenter', function (e) {\r\n\r\n            e.stopPropagation();\r\n\r\n            instance.scrollbar.update();\r\n\r\n            if (window.map) {\r\n                if (window.map.scrollWheelZoom && window.map.dragging) {\r\n                    window.map.scrollWheelZoom.disable();\r\n                    window.map.dragging.disable();\r\n                }\r\n            }\r\n\r\n        })\r\n\r\n        // Wlacz pan mapy gdy kursor opuszcza dropdown i mapa istnieje\r\n        this.$psRail.on('mouseleave', function () {\r\n            if (window.map) {\r\n                if (window.map.dragging) window.map.dragging.enable();\r\n            }\r\n        })\r\n\r\n        this.$dropdownMenu.on('mouseleave', function () {\r\n\r\n            if (window.map) {\r\n                if (window.map.scrollWheelZoom && window.map.dragging) {\r\n                    window.map.scrollWheelZoom.enable();\r\n                    window.map.dragging.enable();\r\n                }\r\n            }\r\n\r\n        })\r\n\r\n        this.$psRail.on('mousedown mouseup click', function (e) {\r\n            e.stopPropagation();\r\n        })\r\n\r\n\r\n    }\r\n\r\n    destroy() {\r\n        this.$dropdownItems.off('click');\r\n        this.$hiddenInputs.remove();\r\n        this.$dropdownMenu.remove();\r\n    }\r\n\r\n}\r\n\r\nexport default KbfDropdown;","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]);\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","let config = {\r\n\r\n    env: 'dev',\r\n    url: 'https://webplanet.biz',\r\n    apiEndpoint: 'https://webplanet.biz/kbf/'\r\n\r\n};\r\n\r\nexport default config;","import config from \"../config/config\";\r\n\r\nlet apiEndpoint = config.apiEndpoint;\r\n\r\n// Sprawdza czy urzadzenie jest dotykowe\r\nexport function isTouchDevice() {\r\n    return (('ontouchstart' in window) || (navigator.maxTouchPoints > 0) || (navigator.msMaxTouchPoints > 0));\r\n}\r\n\r\n// Zwraca liste nazw powiatow, areasGeoJSON - granice powiatow z nazwami\r\nexport function getAreaNames(areasGeoJSON) {\r\n    let result = [];\r\n    areasGeoJSON.features.forEach(function (feature) {\r\n        result.push(feature.properties.name); // Dodaj nazwe powiatu do listy powiatow\r\n    });\r\n\r\n    result = result.sort(function (current, next) {\r\n        return current.localeCompare(next);\r\n    })\r\n\r\n    return result;\r\n}\r\n\r\n// Zwraca slownik wojewodztwo: powiaty, areasGeoJSON - granice powiatow z nazwami\r\nexport function getProvinceAreaDict(areasGeoJSON) {\r\n\r\n    let result = {};\r\n    areasGeoJSON.features.forEach(function (feature) {\r\n        result[feature.properties.province] = [...result[feature.properties.province] || [], feature.properties.name];\r\n        result[feature.properties.province].sort(function (current, next) {\r\n            return current.localeCompare(next);\r\n        });\r\n    })\r\n\r\n    return result;\r\n\r\n}\r\n\r\n// Zwraca liste nazw wojewodztw ze slownika provinceAreaDict\r\nexport function getProvinceNames(provinceAreaDict) {\r\n    let result = [];\r\n    result = Object.keys(provinceAreaDict);\r\n    result = result.sort(function (current, next) {\r\n        return current.localeCompare(next);\r\n    });\r\n\r\n    return result;\r\n}\r\n\r\n// Konwertuje nazwe branzy\r\nexport function capitalizeIndustry(industry) {\r\n    let _industry = industry.toLowerCase();\r\n    return _industry.trim().substr(0, 1).toUpperCase() + _industry.trim().substr(1);\r\n}\r\n\r\n// Tworzy skrot\r\nexport function getEllipsis(string, length) {\r\n\r\n    let ellipsis;\r\n\r\n    if (string.length - 4 >= length - 4) ellipsis = string.trim().substring(0, length - 5) + ' ...';\r\n    if (string.length - 4 < length - 4) ellipsis = string;\r\n\r\n    return ellipsis;\r\n}\r\n\r\n// Przygotowuje opcje dla dropdown branz\r\nexport function getIndustriesOptions(industries, ellipsis = true) {\r\n\r\n    // Utworz tablice branz\r\n    let capitalizedIndustries = [];\r\n    industries.forEach(function (industry) {\r\n        if (ellipsis) capitalizedIndustries.push(capitalizeIndustry(getEllipsis(industry, 34)));\r\n        else capitalizedIndustries.push(capitalizeIndustry(industry));\r\n    });\r\n\r\n    // Utworz opcje\r\n    let opts = {};\r\n    let idx = 0;\r\n    capitalizedIndustries.forEach(function (capitalizedIndustry) {\r\n        opts[capitalizedIndustry] = industries[idx];\r\n        idx++;\r\n    })\r\n\r\n    return opts;\r\n}\r\n\r\n// Pobiera nazwy branz z rest api\r\nexport async function getIndustries() {\r\n    let $ = window.$;\r\n    return await $.get(`${apiEndpoint}/api/industries/`);\r\n}\r\n\r\n// Pobiera nazwy sub branz z rest api dla danej branzy\r\nexport async function getSubIndustries(industryName) {\r\n    let $ = window.$;\r\n    return await $.get(`${apiEndpoint}/api/sub-industries/?industry=${industryName}`);\r\n}\r\n\r\n// Pobiera dane do markerow dla mapy\r\nexport async function getCompanyMarkersData(requestData) {\r\n\r\n    let $ = window.$;\r\n    let url = '';\r\n    let provinceName = requestData['province-name'];\r\n    let areaName = requestData['area-name'];\r\n    let industry = requestData.industry;\r\n    let subIndustry = requestData['sub-industry'];\r\n\r\n    if (subIndustry.length > 0) url = `${apiEndpoint}/api/markers/?province-name=${provinceName}&area-name=${areaName}&industry=${industry}&sub-industry=${subIndustry}`;\r\n    if (subIndustry.length === 0) url = `${apiEndpoint}/api/markers/?province-name=${provinceName}&area-name=${areaName}&industry=${industry}`;\r\n\r\n    return await $.get(url).fail(function () {\r\n        $('.kbf-mini-preloader').hide();\r\n    });\r\n\r\n}\r\n\r\n// Zamienia placeholders w stringu\r\nexport function replacePlaceholders(placeholderMap, string) {\r\n\r\n    for (const [placeholder, value] of Object.entries(placeholderMap)) {\r\n        string = string.replace(placeholder, value);\r\n    }\r\n\r\n   return string;\r\n\r\n}","import KbfDropdown from \"./KbfDropdown\";\r\nimport {getIndustriesOptions, getIndustries, getSubIndustries } from \"../functions/library\";\r\nimport errors from \"../modules/Errors\";\r\n\r\nclass KbfIndustrySwitcher extends EventTarget {\r\n\r\n    constructor(industriesId, subIndustriesId, firstOption = 'Wszystkie', ellipsis = true,  scrollBlock = true) {\r\n\r\n        // Sprawdz czy podano argumenty\r\n        if (!industriesId) throw errors.argumentNotFound(industriesId);\r\n        if (!subIndustriesId) throw errors.argumentNotFound(subIndustriesId);\r\n\r\n        super();\r\n\r\n        this.firstOption = firstOption; // Pierwsza opcja\r\n        this.scrollBlock = scrollBlock; // Czy blokowac scroll\r\n        this.ellipsis = ellipsis; // Czy stosowac skroty\r\n\r\n        // Aliasy\r\n        this.on = this.addEventListener;\r\n        this.off = this.removeEventListener;\r\n        this.emit = this.dispatchEvent;\r\n\r\n        let instance = this; // Ustaw kontekst\r\n\r\n        this.industriesId = industriesId;\r\n        this.subIndustriesId = subIndustriesId;\r\n\r\n        this.industries = []; // Lista branz\r\n        this.subIndustries = []; // Aktualna lista sub branz\r\n        this.currentIndustry = this.firstOption; // Aktualnie wybrana branza\r\n        this.currentSubIndustry = this.firstOption; // Aktualnie wybrana sub branza\r\n\r\n        // Inicjalizuj\r\n        this.init().then(function () {\r\n            instance.addListeners(); // Dodaj listenery\r\n        });\r\n\r\n    }\r\n\r\n    // Dodaje listenery\r\n    addListeners() {\r\n\r\n        let instance = this;\r\n\r\n        this.industriesDropdown.on('change', async function (e) {\r\n\r\n            instance.currentIndustry = e.detail;\r\n\r\n            if (instance.currentIndustry !== instance.firstOption) {\r\n\r\n                let subIndustriesResult = await getSubIndustries(instance.currentIndustry);\r\n                instance.subIndustries = subIndustriesResult.sub_industries; // Pobierz liste sub-branz\r\n                instance.updateEllipsis(); // Aktualizuj skroty\r\n\r\n            }\r\n\r\n            if (instance.currentIndustry === instance.firstOption) {\r\n                instance.subIndustriesDropdown.updateOptions([instance.firstOption]);\r\n            }\r\n\r\n            instance.emitCurrentIndustries(); // Emituj aktualne ustawienie branz\r\n\r\n        })\r\n\r\n        this.subIndustriesDropdown.on('change', function (e) {\r\n            instance.currentSubIndustry = e.detail;\r\n            instance.emitCurrentIndustries(); // Emituj aktualne ustawienie branz\r\n        })\r\n\r\n    }\r\n\r\n    // Inicjalizuje\r\n    async init() {\r\n\r\n        let instance = this; // Ustaw kontekst\r\n        let $ = window.$;\r\n\r\n        // Pobierz nazwy branz z rest api a nastepnie inicjuj dropdown z nazwami branz\r\n        this.industries = await getIndustries();\r\n\r\n        // Przygotuj opcje dropdown branz jako obiekt opts\r\n        let opts = { [instance.firstOption]: instance.firstOption, ...getIndustriesOptions(this.industries, this.ellipsis) };\r\n\r\n        // Inicjuj dropdowny\r\n        this.industriesDropdown = new KbfDropdown('#' + this.industriesId, opts, this.scrollBlock); // Inicjalizuj dropdown z nazwami branz\r\n        this.subIndustriesDropdown = new KbfDropdown('#' + this.subIndustriesId, [this.firstOption], this.scrollBlock); // Inicjalizuj dropdown dla sub branz\r\n\r\n        // Ustaw responsywnosc dropdown'ow\r\n        $(window).off('resize', instance.resetDropdowns);\r\n        $(window).on('resize', instance.resetDropdowns.bind(instance));\r\n\r\n    }\r\n\r\n    updateEllipsis() {\r\n        let opts = { [this.firstOption]: this.firstOption, ...getIndustriesOptions(this.subIndustries, this.ellipsis) };\r\n        this.subIndustriesDropdown.updateOptions(opts);\r\n        this.currentSubIndustry = this.firstOption;\r\n    }\r\n\r\n    // Emituje aktualne ustawienie branz\r\n    emitCurrentIndustries() {\r\n        let instance = this;\r\n        this.emit(new CustomEvent('industries-changed', {\r\n            detail: {industry: instance.currentIndustry, 'sub-industry': instance.currentSubIndustry}\r\n        }));\r\n    }\r\n\r\n    // Resetuje dropdown'y\r\n    resetDropdowns() {\r\n        this.industriesDropdown.setActive(this.firstOption);\r\n        this.subIndustries = [];\r\n        this.subIndustriesDropdown.updateOptions([this.firstOption, ...this.subIndustries])\r\n        this.subIndustriesDropdown.setActive(this.firstOption);\r\n\r\n    }\r\n\r\n    // Usuwa komponent\r\n    destroy() {\r\n        if (this.industriesDropdown) {\r\n            this.industriesDropdown.destroy();\r\n            this.industriesDropdown = undefined;\r\n        }\r\n\r\n        if (this.subIndustriesDropdown) {\r\n            this.subIndustriesDropdown.destroy();\r\n            this.subIndustriesDropdown = undefined;\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport default KbfIndustrySwitcher;","import errors from \"../modules/Errors\";\r\n\r\nclass KbfTagify extends EventTarget {\r\n\r\n    constructor(selector) {\r\n\r\n        super();\r\n\r\n        let $ = window.$;\r\n\r\n        // Sprawdz czy podano argumenty\r\n        if (!selector) throw errors.argumentNotFound(\"Selector\");\r\n        this.$tagifyElement = $(selector);\r\n        if(this.$tagifyElement.length === 0) throw errors.elementNotFound(selector);\r\n\r\n        this.init();\r\n        this.addListeners();\r\n    }\r\n\r\n    init() {\r\n\r\n        let $ = window.$;\r\n        let instance = this;\r\n\r\n        this.$tagifyElement.tagify().on('change', function (e, value) {\r\n\r\n            // Aktualizuj wartosc pola\r\n            if (value) {\r\n\r\n                let currentValue = JSON.parse(value);\r\n\r\n                currentValue = currentValue.map(function (nextValue) {\r\n                    return nextValue.value\r\n                })\r\n\r\n                instance.$tagifyElement.val(currentValue.join(','));\r\n            }\r\n            else instance.$tagifyElement.val('');\r\n        });\r\n\r\n    }\r\n\r\n\r\n    addListeners() {\r\n\r\n    }\r\n}\r\n\r\n\r\nexport default KbfTagify;","import KbfStepper from \"../../components/KbfStepper\";\r\nimport KbfPreloaderButton from \"../../components/KbfPreloaderButton\";\r\nimport errors from \"../../modules/Errors\";\r\nimport KbfIndustrySwitcher from \"../../components/KbfIndustrySwitcher\";\r\nimport config from \"../../config/config\";\r\nimport {replacePlaceholders} from \"../../functions/library\";\r\nimport KbfTagify from \"../../components/KbfTagify\";\r\n\r\nclass App {\r\n\r\n    constructor() {\r\n\r\n        this.regonNotExists = true; // Czy REGON istnieje w bazie KBF\r\n        this.regonFound = true; // Czy REGON istnieje w bazie KBF\r\n        this.regonErrorVisible = false; // Czy wyswietlony jest blad regon\r\n\r\n        this.imageName = 'logo-placeholder.jpg';\r\n        this.imageType = 'image/jpg';\r\n\r\n        this.init();\r\n        this.addListeners();\r\n\r\n    }\r\n\r\n    init() {\r\n\r\n        let instance = this;\r\n\r\n        this.$form = $('form[name=\"register-company\"]');\r\n\r\n        this.companyInfo = $('.company-info')[0];\r\n        this.companyDescription = $('.company-description')[0];\r\n        this.companyInfoContents = this.companyInfo.innerHTML; // Placeholder z informacjami o firmie\r\n        this.companyDescriptionContents = this.companyDescription.innerHTML; // Placeholder z informacjami o firmie\r\n        this.$kbfMiniMapContainer = $('#kbf-minimap').parent();\r\n\r\n        this.searchByREGONButtonPreloader = new KbfPreloaderButton('.kbf-search-button');\r\n\r\n        // Cropper\r\n        this.$modal = $('#modal');\r\n        this.image = document.getElementById('sample_image');\r\n        this.cropper = null;\r\n        this.$companyLogo = $('#company_logo');\r\n        this.$logoPlaceholder = $('.kbf-logo-uploader-image');\r\n\r\n        // Przycisk wyszukiwania po numerze REGON\r\n        this.$searchByREGONButton = $('.kbf-search-button');\r\n        this.$searchByREGONButton.attr('disabled', 'disabled');\r\n\r\n        //Tagify\r\n        new KbfTagify('input.kbf-keywords');\r\n\r\n        // Sprawdz czy walidator istnieje\r\n        if (!$.fn.validate) throw errors.noValidator();\r\n\r\n        // Ustaw walidator dla branz\r\n        $.validator.addMethod('industries', function (value, element) {\r\n            return this.optional(element) || value !== 'Wybierz'\r\n        }, \"Nazwa brany musi zosta wybrana.\");\r\n\r\n        // Ustaw walidator dla numeru REGON\r\n        $.validator.addMethod('regon-not-exists', function (value, element) {\r\n            return this.optional(element) || instance.regonNotExists\r\n        }, \"REGON jest ju zarejestrowany w KBF.\");\r\n\r\n        $.validator.addMethod('regon-not-found', function (value, element) {\r\n            return this.optional(element) || instance.regonFound\r\n        }, \"Firma o podanym numerze REGON nie zostaa odnaleziona.\");\r\n\r\n        // Walidacja\r\n        this.validatorConfig = {\r\n\r\n            formName: 'register-company',\r\n            ignore: [],\r\n\r\n            rules: {\r\n\r\n                // Ustaw reguly dla branz\r\n                industry: {\r\n                    required: true,\r\n                    industries: true\r\n                },\r\n                \"sub-industry\": {\r\n                    required: true,\r\n                    industries: true\r\n                },\r\n                \"company_regon\": {\r\n                    \"regon-not-exists\": true,\r\n                    \"regon-not-found\": true,\r\n                },\r\n            },\r\n\r\n            // Umiejscowienie komunikatu o bledzie\r\n            errorPlacement: function ($label, $element) {\r\n                $label.addClass('kbf-error-message');\r\n\r\n                let $column = $element.closest('[class*=\"col\"]');\r\n\r\n                if ($column.length > 0) {\r\n                    $column.append($label);\r\n                } else $label.insertAfter($element);\r\n            }\r\n        };\r\n\r\n        this.stepper = new KbfStepper('.kbf-stepper', this.validatorConfig);\r\n        this.$kbfStepper = this.stepper.$kbfStepper;\r\n\r\n        // Ustaw przyciski w zaleznosci od szerokosci urzadzenia\r\n        if (window.innerWidth >= 768) {\r\n            this.$prevButton = this.$kbfStepper.find('.button-prev.button-desktop');\r\n            this.$nextButton = this.$kbfStepper.find('.button-next.button-desktop');\r\n            this.$registerButton = this.$kbfStepper.find('.button-register.button-desktop');\r\n            this.registerCompanyPreloader = new KbfPreloaderButton('.button-register.button-desktop button');\r\n\r\n        } else {\r\n            this.$prevButton = this.$kbfStepper.find('.button-prev');\r\n            this.$nextButton = this.$kbfStepper.find('.button-next');\r\n            this.$registerButton = this.$kbfStepper.find('.button-register');\r\n            this.registerCompanyPreloader = new KbfPreloaderButton('.button-register button');\r\n        }\r\n\r\n        // Wybor branz\r\n        this.industrySwitcher = new KbfIndustrySwitcher('industries', 'sub-industries', \"Wybierz\", window.innerWidth <= 768, false);\r\n        this.industrySwitcher.on('industries-changed', this.stepper.validateCurrentPage.bind(this.stepper));\r\n\r\n        // Wysiwyg\r\n        // this.wysiwyg = new KbfWysiwyg('.wysiwyg', '[name=\"company_description_hidden\"]');\r\n        // this.wysiwyg.on('change', this.stepper.validateCurrentPage.bind(this.stepper))\r\n\r\n        // Cropper\r\n        this.$companyLogo.change(function (event) {\r\n            let files = event.target.files;\r\n            instance.imageName = files[0].name;\r\n            instance.imageType = files[0].type\r\n\r\n            let done = function (url) {\r\n                instance.image.src = url;\r\n                instance.$modal.modal('show');\r\n            };\r\n\r\n            if (files && files.length > 0) {\r\n                let reader = new FileReader();\r\n                reader.onload = function (event) {\r\n                    done(reader.result);\r\n                };\r\n                reader.readAsDataURL(files[0]);\r\n            }\r\n\r\n            instance.$companyLogo.val('');\r\n\r\n        });\r\n\r\n        this.$modal.on('shown.bs.modal', function () {\r\n            instance.cropper = new Cropper(instance.image, {\r\n                // aspectRatio: 3,\r\n                viewMode: 1,\r\n                preview: '.preview'\r\n            });\r\n\r\n            $('#crop').click(function () {\r\n                let canvas = instance.cropper.getCroppedCanvas({\r\n                    width: 400,\r\n                    height: 400\r\n                });\r\n\r\n                canvas.toBlob(function (blob) {\r\n\r\n                    let file = new File([blob], instance.imageName, {type: instance.imageType, lastModified: new Date().getTime()});\r\n                    let container = new DataTransfer();\r\n                    container.items.add(file);\r\n                    instance.$companyLogo[0].files = container.files;\r\n\r\n                    let reader = new FileReader();\r\n                    reader.readAsDataURL(blob);\r\n                    reader.onloadend = function () {\r\n\r\n                        let base64data = reader.result;\r\n                        instance.$logoPlaceholder.attr('src', base64data);\r\n                        instance.$modal.modal('hide');\r\n\r\n                    };\r\n                });\r\n            });\r\n\r\n\r\n        }).on('hidden.bs.modal', function () {\r\n            instance.cropper.destroy();\r\n            instance.cropper = null;\r\n        });\r\n\r\n\r\n    }\r\n\r\n    addListeners() {\r\n\r\n        let instance = this;\r\n\r\n        this.$prevButton.on('click', this.prevPage.bind(this));\r\n        this.$nextButton.on('click', this.nextPage.bind(this));\r\n        this.$registerButton.on('click', this.submitRegister.bind(this)); // TODO\r\n\r\n        // Pole REGON\r\n        let $regonField = $('[name=\"company_regon\"]');\r\n\r\n        $regonField.on('change', this.regonFieldHandler($regonField).bind(this));\r\n        $regonField.on('input', this.regonFieldHandler($regonField).bind(this));\r\n        $regonField.on('paste', this.regonFieldHandler($regonField).bind(this));\r\n\r\n        this.searchByREGONButtonPreloader.on('click', async function () {\r\n\r\n            if (instance.regonErrorVisible) {\r\n                $('.kbf-error-message').css('display', 'none');\r\n            }\r\n\r\n            instance.regonErrorVisible = false;\r\n\r\n            let data = await instance.getDataFromREGON($regonField.val());\r\n\r\n            instance.stepper.validateCurrentPage();\r\n\r\n            instance.searchByREGONButtonPreloader.stopPreloader();\r\n\r\n            let $companyNameField = $('[name=\"company_name\"]');\r\n            let $companyNipField = $('[name=\"company_nip\"]');\r\n            let $companyAddressField = $('[name=\"company_address\"]');\r\n            let $companyZipField = $('[name=\"company_zip\"]');\r\n            let $companyCityField = $('[name=\"company_city\"]');\r\n            let $latField = $('[name=\"lat\"]');\r\n            let $lonField = $('[name=\"lon\"]');\r\n\r\n            $companyNameField.val('');\r\n            $companyNipField.val('');\r\n            $companyAddressField.val('');\r\n            $companyZipField.val('');\r\n            $companyCityField.val('');\r\n            $latField.val('');\r\n            $lonField.val('');\r\n\r\n\r\n            instance.regonFound = true;\r\n            instance.regonNotExists = true;\r\n\r\n            let isError = data['error'] !== undefined;\r\n\r\n            if (isError) {\r\n                if (data['error'] === 'No data found') instance.regonFound = false;\r\n                if (data['error'] === 'Regon exists') instance.regonNotExists = false;\r\n                instance.regonErrorVisible = true;\r\n            }\r\n\r\n            if (instance.regonNotExists && !isError) {\r\n\r\n                // Ustaw wartosci dla pol\r\n                $companyNameField.val(data[\"company_name\"]);\r\n                $companyNameField[0].removeAttribute('disabled');\r\n\r\n                $companyNipField.val(data[\"company_nip\"]);\r\n                $companyNipField[0].removeAttribute('disabled');\r\n\r\n                $companyAddressField.val(data[\"company_address\"]);\r\n                $companyAddressField[0].removeAttribute('disabled');\r\n\r\n                $companyZipField.val(data[\"company_zip\"]);\r\n                $companyZipField[0].removeAttribute('disabled');\r\n\r\n                $companyCityField.val(data[\"company_city\"]);\r\n                $companyCityField[0].removeAttribute('disabled');\r\n\r\n                // TODO: province_name, area_name\r\n                // TODO: getLocationData(address, zip, city) => { lat, lon, province_name, area_name }\r\n\r\n                $latField.val(data[\"lat\"]);\r\n                $lonField.val(data[\"lon\"]);\r\n\r\n\r\n            }\r\n\r\n        })\r\n    }\r\n\r\n    nextPage(e) {\r\n\r\n        this.stepper.nextPage(e);\r\n\r\n        if (this.stepper.currentPageIdx > 0) this.$prevButton.find('button').removeAttr('disabled');\r\n\r\n        if (this.stepper.currentPageIdx === this.stepper.lastPageIdx) {\r\n            this.$nextButton.hide();\r\n            this.$registerButton.show();\r\n            this.$registerButton.find('button').addClass('show');\r\n        }\r\n\r\n        this.setSummary();\r\n\r\n    }\r\n\r\n    prevPage(e) {\r\n\r\n        this.stepper.prevPage(e);\r\n\r\n        if (this.stepper.currentPageIdx < this.stepper.lastPageIdx) {\r\n            this.$registerButton.hide();\r\n            this.$registerButton.find('button').removeClass('show');\r\n            this.$nextButton.show();\r\n\r\n        }\r\n\r\n        if (this.stepper.currentPageIdx === 0) {\r\n            this.$prevButton.find('button').attr('disabled', 'disabled');\r\n        }\r\n\r\n        this.setSummary();\r\n\r\n    }\r\n\r\n    // Przygotowuje podsumowanie wpisu\r\n    setSummary() {\r\n\r\n        let industry = $('[name=\"industry\"]').val();\r\n        let subIndustry = $('[name=\"sub-industry\"]').val();\r\n\r\n        let lat = $('[name=\"lat\"]').val();\r\n        let lon = $('[name=\"lon\"]').val();\r\n\r\n        // Ukryj minimape jezeli nie pobrano wspolrzednych\r\n        if (this.stepper.currentPageIdx === this.stepper.lastPageIdx) {\r\n\r\n            if (!lat || !lon) {\r\n                this.$kbfMiniMapContainer.hide();\r\n            }\r\n        }\r\n\r\n\r\n        this.companyInfo.innerHTML = replacePlaceholders({\r\n            '{company_name}': $('[name=\"company_name\"]').val() || '{company_name}',\r\n            '{company_address}': $('[name=\"company_address\"]').val() || '{company_address}',\r\n            '{company_regon}': $('[name=\"company_regon\"]').val() || '{company_regon}',\r\n            '{company_zip}': $('[name=\"company_zip\"]').val() || '{company_zip}',\r\n            '{company_city}': $('[name=\"company_city\"]').val() || '{company_city}',\r\n            '{company_phone_1}': $('[name=\"company_phone_1\"]').val() || '{company_phone_1}',\r\n            '{company_www}': $('[name=\"company_www\"]').val() || '',\r\n            '{company_email}': $('[name=\"company_email\"]').val() || '{company_email}',\r\n            '{company_industry}': industry !== 'Wybierz' ? industry : '{company_industry}' || '{company_industry}',\r\n            '{company_sub_industry}': subIndustry !== 'Wybierz' ? subIndustry : '{company_sub_industry}',\r\n\r\n        }, this.companyInfoContents);\r\n\r\n\r\n        // Usun logo WWW jezel nie podano w formularzu\r\n        if (!$('[name=\"company_www\"]').val()) {\r\n\r\n            let $companyWWW = $('.company-www');\r\n            $companyWWW.removeClass('d-block');\r\n            $companyWWW.addClass('d-none')\r\n        } else {\r\n            let $companyWWW = $('.company-www');\r\n            $companyWWW.addClass('d-block');\r\n            $companyWWW.removeClass('d-none');\r\n        }\r\n\r\n        this.companyDescription.innerHTML = replacePlaceholders({\r\n            '{company_description_html}': $('[name=\"company_description_html\"]').val() || '',\r\n        }, this.companyDescriptionContents)\r\n\r\n    }\r\n\r\n    // Aktywuje przycisk wyszukiwania jezeli dlugosc REGON jest prawidlowa\r\n    regonFieldHandler($regonField) {\r\n\r\n        return function () {\r\n            if ($regonField.val().length >= 7) this.$searchByREGONButton.attr('disabled', false);\r\n            else this.$searchByREGONButton.attr('disabled', 'disabled');\r\n        }\r\n    }\r\n\r\n    // Potwierdza rejestracje\r\n    submitRegister(e) {\r\n\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n\r\n        this.$prevButton.find('button').attr('disabled', 'disabled').off('click'); // Wylacz prev button\r\n        this.$form.submit();\r\n\r\n    }\r\n\r\n    async getDataFromREGON(regon) {\r\n        if (!regon) return [];\r\n        return await $.get(config.apiEndpoint + `/api/regon/?regon=${regon}`)\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default App;","import App from './components/App';\r\n\r\n(function($){\r\n\r\n    $(document).ready(function () {\r\n\r\n        new App();\r\n\r\n    })\r\n\r\n})(window.$)"],"names":["asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_createClass","protoProps","staticProps","prototype","_typeof","obj","Symbol","iterator","constructor","runtime","exports","Op","hasOwn","hasOwnProperty","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","makeInvokeMethod","tryCatch","type","call","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","displayName","defineIteratorMethods","forEach","method","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","__await","AsyncIterator","PromiseImpl","invoke","record","result","unwrapped","previousPromise","enqueue","callInvokeWithMethodAndArg","async","iter","next","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","resultName","nextLoc","toString","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","keys","object","reverse","pop","iterable","iteratorMethod","isNaN","skipTempReset","prev","charAt","slice","stop","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","Function","require$$0","errors","elementNotFound","selector","formNotFound","formName","argumentNotFound","argumentName","substring","toUpperCase","noValidator","noGeoCoords","getLocator","tst","align","locator","alternation","mloc","getDecisionTaker","join","decisionTaker","split","getPlaceholder","pos","test","returnPL","inputmask","opts","maskset","getTest","match","placeholder","static","validPositions","tests","getTests","staticAlternations","prevTest","def","optionality","optionalQuantifier","getMaskTemplate","baseOnInput","minimalPos","includeMode","noJit","clearOptionalTail","greedy","maskTemplate","ndxIntlzr","testPos","jitRenderStatic","generatedInput","input","skipOptionalPartCharacter","determineTestTemplate","nativeDef","getTestTemplate","jitMasking","jit","groupSeparator","isFinite","maxLength","maskLength","tstPs","altTest","targetLocator","tstLocator","closest","bestMatch","ndx","distance","Math","abs","newBlockMarker","$","dependencyLib","el","maskTokens","maskToken","ndxInitializer","matches","insertStop","latestMatch","cacheDependency","resolveTestFromToken","loopNdx","quantifierRecurse","handleMatch","isFirstMatch","tokenGroup","firstMatch","indexOf","every","isQuantifier","resolveNdxInitializer","alternateNdx","targetAlternation","indexPos","lmnt","ndxPos","bestMatchAltIndex","isSubsetOf","source","expand","pattern","expanded","start","end","l","charCodeAt","String","fromCharCode","regex","RegExp","replace","staticCanMatchDefinition","setMergeLocators","targetMatch","altMatch","alternationNdx","shouldMerge","locNdx","isSameLevel","_maxTestPos","mask","isGroup","isOptional","optionalToken","mtchsNdx","mtch","isAlternator","alternateToken","malternateMatches","maltMatches","currentMatches","loopNdxCnt","altIndex","shift","currentPos","ndxInitializerClone","altIndexArr","amndx","excludes","altIndexArrClone","exl","excludeSet","splice","keepStatic","parseInt","unMatchedAlternation","concat","ndx1","dropMatch","ndx2","altMatch2","includes","userOptions","qt","qndx","quantifier","max","min","jitOffset","tndx","mergeLocators","Array","isArray","previousPos","cd","mtndx","casing","extend","ua","window","navigator","userAgent","ie","mobile","iemobile","iphone","applyInputValue","refreshValue","onBeforeMask","checkVal","undoValue","getBuffer","clearMaskOnLostFocus","clearIncomplete","_valueGet","getBufferTemplate","getLastValidPosition","_valueSet","buffer","template","writeOut","strict","nptvl","initiatingEvent","inputValue","charCodes","initialNdx","isTemplateMatch","targetTemplate","seekNext","charCodeNdx","isMask","nextPos","caretPos","begin","resetMaskSet","radixPoint","determineNewCaretPosition","p","staticMatches","prevCaretPos","charCode","isValid","keypress","Event","which","lvp","EventHandlers","keypressEvent","isRTL","forwardPosition","writeBuffer","sndx","validPos","nextValid","isComplete","nextSndx","HandleNativePlaceholder","npt","nptValue","removeAttribute","unmaskedvalue","umValue","vps","pndx","metadata","unmaskedValue","onUnMask","bufferValue","event","triggerEvents","onBeforeWrite","refreshFromBuffer","refresh","caret","keyCode","DELETE","BACKSPACE","$input","nptVal","skipInputEvent","trigger","setTimeout","keydownEvent","e","k","kdResult","onKeyDown","BACKSPACE_SAFARI","ctrlKey","X","preventDefault","handleRemove","END","PAGE_DOWN","shiftKey","HOME","PAGE_UP","undoOnEscape","ESCAPE","altKey","tabThrough","TAB","seekPrevious","insertModeVisual","insertMode","RIGHT","LEFT","translatePosition","ignorable","ignorables","checkval","metaKey","ENTER","location","c","writeOutBuffer","valResult","numericInput","onKeyValidation","keyupEvent","isComposing","KEY_229","$el","pasteEvent","tempValue","valueBeforeCaret","substr","valueAfterCaret","clipboardData","getData","pasteValue","onBeforePaste","inputFallBackEvent","ieMobileHandler","inputChar","iv","analyseChanges","frontPart","backPart","frontBufferPart","backBufferPart","fpl","bpl","bl","action","data","marker","unshift","newBuffer","oldBuffer","changes","shadowRoot","document","activeElement","focus","keydown","compositionendEvent","setValueEvent","detail","focusEvent","showMaskOnFocus","positionCaretOnTab","mouseEnter","clickEvent","invalidEvent","validationEvent","mouseleaveEvent","originalPlaceholder","tabbed","newCaretPosition","cutEvent","clipData","setData","execCommand","blurEvent","mouseenterEvent","showMaskOnHover","submitEvent","removeMaskOnSubmit","resetEvent","alternate","maskPos","fromIsValid","rAltPos","selection","validPsClone","tstClone","lastAlt","isValidRslt","returnRslt","altPos","prevAltPos","decisionPos","lAltPos","validInputs","resultPos","elem","toLowerCase","posBefore","SPACE","checkAlternationMatch","altArr1","altArr2","na","altArrC","isMatch","naArr","naNdx","alndx","pend","offset","revalidateMask","newPos","repeat","lrp","determineLastRequiredPosition","aml","fromAlternate","validateOnly","fromCheckval","isSelection","posObj","processCommandObject","commandObj","remove","sort","a","b","insert","rewritePosition","_isValid","position","rslt","validatedPos","positionsClone","preValidation","currentPosValid","skip","nPos","snPos","trackbackPositions","postValidation","postResult","endResult","positionCanMatchDefinition","testDefinition","valid","shiftPositions","bffr","originalPos","fillOnly","ps","vp","np","cvpInput","validTest","IsEnclosedStatic","valids","posMatch","prevMatch","nextMatch","j","t","canMatch","notranslate","isDelete","range","scrollCalc","ownerDocument","defaultView","getComputedStyle","currentStyle","fontSize","scrollLeft","scrollWidth","setSelectionRange","getSelection","createRange","firstChild","textNode","createTextNode","appendChild","setStart","setEnd","collapse","sel","removeAllRanges","addRange","createTextRange","moveEnd","moveStart","select","selectionStart","selectionEnd","getRangeAt","commonAncestorContainer","parentNode","startOffset","endOffset","duplicate","text","returnDefinition","positions","lvTest","lvTestAlt","selectedCaret","doRadixFocus","clickPos","digits","radixPos","positionCaretOnClick","clickPosition","lvclickPosition","lastPosition","tt","noCache","_buffer","closestTo","before","after","posNdx","psNdx","fuzzy","testTemplate","testPlaceHolder","soft","newBlock","EventRuler","on","eventName","eventHandler","ev","originalEvent","that","nodeName","imOpts","off","Inputmask","disabled","readOnly","inputType","skipKeyPressEvent","blur","returnVal","stopPropagation","events","form","bind","evArr","isElementTypeSupported","patchValueProperty","valueGet","valueSet","patchValhook","valHooks","inputmaskpatch","valhookGet","get","valhookSet","set","autoUnmask","nullable","getter","setter","installNativeValueSetFallback","__valueGet","noValuePatching","getOwnPropertyDescriptor","valueProperty","tagName","textContent","__lookupGetter__","__lookupSetter__","__defineGetter__","__defineSetter__","__valueSet","overruleRTL","elementType","getAttribute","isSupported","supportsInputType","isContentEditable","createElement","setAttribute","inputMode","inputmode","autocomplete","oncomplete","onincomplete","oncleared","inputEventOnly","options","src","copy","copyIsArray","clone","deep","eval","owner","__data","isValidElement","Element","CustomEvent","params","bubbles","cancelable","evt","createEvent","initCustomEvent","handler","addEvent","namespace","addEventListener","attachEvent","eventRegistry","_events","endx","nsEvent","removeEvent","removeEventListener","detachEvent","nmsp","resolveNamespace","evts","hndx","hndL","evNdx","offEvents","offEventsL","evnt","dispatchEvent","createEventObject","eventType","fireEvent","DependencyLib","querySelector","generateMaskSet","nocache","ms","generateMask","regexMask","repeatStart","groupmarker","quantifiermarker","masksetDefinition","maskdefKey","masksCache","analyseMask","altMask","msk","alternatormarker","tokenizer","regexTokenizer","escaped","currentToken","MaskToken","m","openenings","openingToken","currentOpeningToken","alternator","lastMatch","closeRegexGroup","openGroup","alternatorGroup","insertTestDefinition","mtoken","element","staticDefinitionSymbol","maskdef","definitions","usePrototypeDefinitions","validator","definitionSymbol","generated","verifyGroupMarker","token","nextToken","defaultCase","mndx","reverseTokens","reverseStatic","st","optionalmarker","intMatch","groupify","groupToken","closeGroup","groupQuantifier","exec","altRegexGroup","escapeChar","mqj","mq","mq0","mq1","tmpMatch","subToken","alias","pastedValue","rightAlign","_radixDance","importDataAttributes","dataKey","internal","defaults","noMasksCache","resolveAlias","dataAttribute","aliases","elems","getElementById","querySelectorAll","scopedOpts","importAttributeOptions","option","noremask","valueBuffer","cv","getemptymask","hasMaskedValue","getmetadata","maskTarget","mtdt","rl","lmib","format","formattedValue","setValue","aliasStr","aliasDefinition","importOption","optionData","attrOption","attrOptions","dataoptions","JSON","parse","dir","style","textAlign","extendDefaults","extendDefinitions","definition","extendAliases","unmask","KbfStepper","validatorConfig","$kbfStepper","init","addListeners","currentPageIdx","$pages","find","eq","removeClass","lastPageIdx","$infoMessages","hide","addClass","$errorMessageElement","$errorStepper","$stepsTop","$stepsBottom","$formInputs","each","validateCurrentPage","goToPage","setMessages","pageIdx","body","scrollTop","documentElement","show","siblings","hasClass","$currentInputs","not","$currentRepeaterInputs","$currentPageInputs","add","fieldsAreValid","validate","_setPrototypeOf","o","_inherits","subClass","superClass","_assertThisInitialized","ReferenceError","_possibleConstructorReturn","assertThisInitialized","_getPrototypeOf","_isNativeFunction","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","_construct","Parent","Class","isNativeReflectConstruct","_wrapNativeSuper","_cache","Map","isNativeFunction","has","Wrapper","KbfPreloaderButton","auto","$preloaderButton","emit","buttonCurrentContents","html","buttonElement","buttonGeometry","getBoundingClientRect","$buttonElement","bgColor","backgroundColor","attr","css","width","height","preloaderMarkup","removeAttr","triggerStart","startPreloader","EventTarget","_arrayLikeToArray","arr","len","arr2","_arrayWithoutHoles","arrayLikeToArray","_iterableToArray","from","_unsupportedIterableToArray","minLen","n","_nonIterableSpread","_toConsumableArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","_defineProperty","KbfDropdown","scrollBlock","initScrollBar","$dropdowns","dataOptions","startValue","$dropdownButtons","append","$hiddenInputs","setOptions","$dropdownItems","setActive","wheelEvent","disableScroll","passive","enableScroll","$this","displayed","dropdownMenu","optionsLastIdx","idx","ariaLabelledBy","setState","updateHiddenInput","$dropdownMenu","className","newMenuItemsHtml","opt","optionName","items","scrollbar","destroy","PerfectScrollbar","minScrollbarLength","$psRail","$psThumb","map","dragging","disable","update","scrollWheelZoom","enable","_arrayWithHoles","_iterableToArrayLimit","_i","_arr","_n","_d","_s","_e","_nonIterableRest","_slicedToArray","arrayWithHoles","iterableToArrayLimit","nonIterableRest","config","env","url","apiEndpoint","capitalizeIndustry","industry","_industry","trim","getEllipsis","string","ellipsis","getIndustriesOptions","industries","capitalizedIndustries","capitalizedIndustry","getIndustries","getSubIndustries","industryName","replacePlaceholders","placeholderMap","entries","KbfIndustrySwitcher","industriesId","subIndustriesId","firstOption","subIndustries","currentIndustry","currentSubIndustry","industriesDropdown","subIndustriesResult","sub_industries","updateEllipsis","subIndustriesDropdown","updateOptions","emitCurrentIndustries","resetDropdowns","KbfTagify","$tagifyElement","tagify","currentValue","nextValue","val","App","regonNotExists","regonFound","regonErrorVisible","imageName","imageType","$form","companyInfo","companyDescription","companyInfoContents","innerHTML","companyDescriptionContents","$kbfMiniMapContainer","parent","searchByREGONButtonPreloader","$modal","image","cropper","$companyLogo","$logoPlaceholder","$searchByREGONButton","addMethod","optional","ignore","rules","required","errorPlacement","$label","$element","$column","insertAfter","stepper","innerWidth","$prevButton","$nextButton","$registerButton","registerCompanyPreloader","industrySwitcher","change","files","modal","reader","FileReader","onload","readAsDataURL","Cropper","viewMode","preview","click","canvas","getCroppedCanvas","toBlob","blob","file","File","lastModified","Date","getTime","container","DataTransfer","onloadend","base64data","prevPage","nextPage","submitRegister","$regonField","regonFieldHandler","getDataFromREGON","stopPreloader","$companyNameField","$companyNipField","$companyAddressField","$companyZipField","$companyCityField","$latField","$lonField","isError","setSummary","subIndustry","lat","lon","$companyWWW","submit","regon","ready"],"mappings":"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ED,SAAOiC,GAAP;EACD;;;;;;;;;;;;;;;mCCZgC;;;;cAGd,aAAa;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}