{"version":3,"file":"tests.js","sources":["../../js/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../js/node_modules/@babel/runtime/helpers/esm/createClass.js","../../js/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../js/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../../js/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../../js/node_modules/@babel/runtime/helpers/esm/inherits.js","../../js/node_modules/@babel/runtime/helpers/esm/typeof.js","../../js/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../../js/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../../js/node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","../../js/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../../js/node_modules/@babel/runtime/helpers/esm/construct.js","../../js/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","../../js/node_modules/inputmask/lib/getPrototypeOf.js","../../js/node_modules/inputmask/lib/validation-tests.js","../../js/node_modules/inputmask/lib/environment.js","../../js/node_modules/inputmask/lib/inputHandling.js","../../js/node_modules/inputmask/lib/eventhandlers.js","../../js/node_modules/inputmask/lib/validation.js","../../js/node_modules/inputmask/lib/positioning.js","../../js/node_modules/inputmask/lib/eventruler.js","../../js/node_modules/inputmask/lib/mask.js","../../js/node_modules/inputmask/lib/dependencyLibs/extend.js","../../js/node_modules/inputmask/lib/global/window.js","../../js/node_modules/inputmask/lib/dependencyLibs/data.js","../../js/node_modules/inputmask/lib/dependencyLibs/events.js","../../js/node_modules/inputmask/lib/dependencyLibs/inputmask.dependencyLib.js","../../js/node_modules/inputmask/lib/mask-lexer.js","../../js/node_modules/inputmask/lib/definitions.js","../../js/node_modules/inputmask/lib/defaults.js","../../js/node_modules/inputmask/lib/inputmask.js","../../js/modules/Errors.js","../../js/node_modules/bootstrap-autocomplete/dist/latest/bootstrap-autocomplete.min.js","../../js/components/KbfAddressAutocomplete.js","../../js/tests/components/App.js","../../js/tests/entry.js"],"sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"@babel/runtime/helpers/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","if (typeof Object.getPrototypeOf !== \"function\") {\n\tObject.getPrototypeOf = typeof \"test\".__proto__ === \"object\" ? function (object) {\n\t\treturn object.__proto__;\n\t} : function (object) {\n\t\treturn object.constructor.prototype;\n\t};\n}","export {determineTestTemplate, getDecisionTaker, getMaskTemplate, getPlaceholder, getTest, getTests, getTestTemplate};\n\nfunction getLocator(tst, align) { //need to align the locators to be correct\n\tvar locator = (tst.alternation != undefined ? tst.mloc[getDecisionTaker(tst)] : tst.locator).join(\"\");\n\tif (locator !== \"\") while (locator.length < align) locator += \"0\";\n\treturn locator;\n}\n\nfunction getDecisionTaker(tst) {\n\tvar decisionTaker = tst.locator[tst.alternation];\n\tif (typeof decisionTaker == \"string\" && decisionTaker.length > 0) { //no decision taken ~ take first one as decider\n\t\tdecisionTaker = decisionTaker.split(\",\")[0];\n\t}\n\treturn decisionTaker !== undefined ? decisionTaker.toString() : \"\";\n}\n\n//tobe put on prototype?\nfunction getPlaceholder(pos, test, returnPL) {\n\tconst inputmask = this,\n\t\topts = this.opts,\n\t\tmaskset = this.maskset;\n\n\ttest = test || getTest.call(inputmask, pos).match;\n\tif (test.placeholder !== undefined || returnPL === true) {\n\t\treturn typeof test.placeholder === \"function\" ? test.placeholder(opts) : test.placeholder;\n\t} else if (test.static === true) {\n\t\tif (pos > -1 && maskset.validPositions[pos] === undefined) {\n\t\t\tvar tests = getTests.call(inputmask, pos),\n\t\t\t\tstaticAlternations = [],\n\t\t\t\tprevTest;\n\t\t\tif (tests.length > 1 + (tests[tests.length - 1].match.def === \"\" ? 1 : 0)) {\n\t\t\t\tfor (var i = 0; i < tests.length; i++) {\n\t\t\t\t\tif (tests[i].match.def !== \"\" && tests[i].match.optionality !== true && tests[i].match.optionalQuantifier !== true &&\n\t\t\t\t\t\t(tests[i].match.static === true || (prevTest === undefined || tests[i].match.fn.test(prevTest.match.def, maskset, pos, true, opts) !== false))) {\n\t\t\t\t\t\tstaticAlternations.push(tests[i]);\n\t\t\t\t\t\tif (tests[i].match.static === true) prevTest = tests[i];\n\t\t\t\t\t\tif (staticAlternations.length > 1) {\n\t\t\t\t\t\t\tif (/[0-9a-bA-Z]/.test(staticAlternations[0].match.def)) {\n\t\t\t\t\t\t\t\treturn opts.placeholder.charAt(pos % opts.placeholder.length);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn test.def;\n\t}\n\n\treturn opts.placeholder.charAt(pos % opts.placeholder.length);\n}\n\n//tobe put on prototype?\nfunction getMaskTemplate(baseOnInput, minimalPos, includeMode, noJit, clearOptionalTail) {\n\t//includeMode true => input, undefined => placeholder, false => mask\n\n\tvar inputmask = this,\n\t\topts = this.opts,\n\t\tmaskset = this.maskset;\n\n\n\tvar greedy = opts.greedy;\n\tif (clearOptionalTail) opts.greedy = false;\n\tminimalPos = minimalPos || 0;\n\tvar maskTemplate = [],\n\t\tndxIntlzr, pos = 0,\n\t\ttest, testPos, jitRenderStatic;\n\tdo {\n\t\tif (baseOnInput === true && maskset.validPositions[pos]) {\n\t\t\ttestPos = (clearOptionalTail && maskset.validPositions[pos].match.optionality === true\n\t\t\t\t&& maskset.validPositions[pos + 1] === undefined\n\t\t\t\t&& (maskset.validPositions[pos].generatedInput === true || (maskset.validPositions[pos].input == opts.skipOptionalPartCharacter && pos > 0)))\n\t\t\t\t? determineTestTemplate.call(inputmask, pos, getTests.call(inputmask, pos, ndxIntlzr, pos - 1))\n\t\t\t\t: maskset.validPositions[pos];\n\t\t\ttest = testPos.match;\n\t\t\tndxIntlzr = testPos.locator.slice();\n\t\t\tmaskTemplate.push(includeMode === true ? testPos.input : includeMode === false ? test.nativeDef : getPlaceholder.call(inputmask, pos, test));\n\t\t} else {\n\t\t\ttestPos = getTestTemplate.call(inputmask, pos, ndxIntlzr, pos - 1);\n\t\t\ttest = testPos.match;\n\t\t\tndxIntlzr = testPos.locator.slice();\n\t\t\tvar jitMasking = noJit === true ? false : (opts.jitMasking !== false ? opts.jitMasking : test.jit);\n\t\t\t//check for groupSeparator is a hack for the numerics as we don't want the render of the groupSeparator beforehand\n\t\t\tjitRenderStatic = (jitRenderStatic && test.static && test.def !== opts.groupSeparator && test.fn === null) || (maskset.validPositions[pos - 1] && test.static && test.def !== opts.groupSeparator && test.fn === null);\n\t\t\tif (jitRenderStatic || jitMasking === false || jitMasking === undefined /*|| pos < lvp*/ || (typeof jitMasking === \"number\" && isFinite(jitMasking) && jitMasking > pos)) {\n\t\t\t\tmaskTemplate.push(includeMode === false ? test.nativeDef : getPlaceholder.call(inputmask, pos, test));\n\t\t\t} else {\n\t\t\t\tjitRenderStatic = false;\n\t\t\t}\n\t\t}\n\n\t\tpos++;\n\t} while ((inputmask.maxLength === undefined || pos < inputmask.maxLength) && (test.static !== true || test.def !== \"\") || minimalPos > pos);\n\tif (maskTemplate[maskTemplate.length - 1] === \"\") {\n\t\tmaskTemplate.pop(); //drop the last one which is empty\n\t}\n\tif (includeMode !== false || //do not alter the masklength when just retrieving the maskdefinition\n\t\tmaskset.maskLength === undefined) //just make sure the maskLength gets initialized in all cases (needed for isValid)\n\t{\n\t\tmaskset.maskLength = pos - 1;\n\t}\n\n\topts.greedy = greedy;\n\treturn maskTemplate;\n}\n\n//tobe put on prototype?\nfunction getTestTemplate(pos, ndxIntlzr, tstPs) {\n\tvar inputmask = this,\n\t\tmaskset = this.maskset;\n\n\treturn maskset.validPositions[pos] || determineTestTemplate.call(inputmask, pos, getTests.call(inputmask, pos, ndxIntlzr ? ndxIntlzr.slice() : ndxIntlzr, tstPs));\n}\n\n//tobe put on prototype?\nfunction determineTestTemplate(pos, tests) {\n\tvar inputmask = this,\n\t\topts = this.opts;\n\n\tpos = pos > 0 ? pos - 1 : 0;\n\tvar altTest = getTest.call(inputmask, pos), targetLocator = getLocator(altTest), tstLocator, closest, bestMatch;\n\tfor (var ndx = 0; ndx < tests.length; ndx++) { //find best matching\n\t\tvar tst = tests[ndx];\n\t\ttstLocator = getLocator(tst, targetLocator.length);\n\t\tvar distance = Math.abs(tstLocator - targetLocator);\n\t\tif (closest === undefined\n\t\t\t|| (tstLocator !== \"\" && distance < closest)\n\t\t\t|| (bestMatch && !opts.greedy && bestMatch.match.optionality && bestMatch.match.newBlockMarker === \"master\" && (!tst.match.optionality || !tst.match.newBlockMarker))\n\t\t\t|| (bestMatch && bestMatch.match.optionalQuantifier && !tst.match.optionalQuantifier)) {\n\t\t\tclosest = distance;\n\t\t\tbestMatch = tst;\n\t\t}\n\t}\n\n\treturn bestMatch;\n}\n\n//tobe put on prototype?\nfunction getTest(pos, tests) {\n\tvar inputmask = this,\n\t\tmaskset = this.maskset;\n\n\tif (maskset.validPositions[pos]) {\n\t\treturn maskset.validPositions[pos];\n\t}\n\treturn (tests || getTests.call(inputmask, pos))[0];\n}\n\n//tobe put on prototype?\nfunction getTests(pos, ndxIntlzr, tstPs) {\n\tvar inputmask = this,\n\t\t$ = this.dependencyLib,\n\t\tmaskset = this.maskset,\n\t\topts = this.opts,\n\t\tel = this.el,\n\t\tmaskTokens = maskset.maskToken,\n\t\ttestPos = ndxIntlzr ? tstPs : 0,\n\t\tndxInitializer = ndxIntlzr ? ndxIntlzr.slice() : [0],\n\t\tmatches = [],\n\t\tinsertStop = false,\n\t\tlatestMatch,\n\t\tcacheDependency = ndxIntlzr ? ndxIntlzr.join(\"\") : \"\";\n\n\tfunction resolveTestFromToken(maskToken, ndxInitializer, loopNdx, quantifierRecurse) { //ndxInitializer contains a set of indexes to speedup searches in the mtokens\n\t\tfunction handleMatch(match, loopNdx, quantifierRecurse) {\n\t\t\tfunction isFirstMatch(latestMatch, tokenGroup) {\n\t\t\t\tvar firstMatch = tokenGroup.matches.indexOf(latestMatch) === 0;\n\t\t\t\tif (!firstMatch) {\n\t\t\t\t\ttokenGroup.matches.every(function (match, ndx) {\n\t\t\t\t\t\tif (match.isQuantifier === true) {\n\t\t\t\t\t\t\tfirstMatch = isFirstMatch(latestMatch, tokenGroup.matches[ndx - 1]);\n\t\t\t\t\t\t} else if (Object.prototype.hasOwnProperty.call(match, \"matches\")) firstMatch = isFirstMatch(latestMatch, match);\n\t\t\t\t\t\tif (firstMatch) return false;\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn firstMatch;\n\t\t\t}\n\n\t\t\tfunction resolveNdxInitializer(pos, alternateNdx, targetAlternation) {\n\t\t\t\tvar bestMatch, indexPos;\n\n\t\t\t\tif (maskset.tests[pos] || maskset.validPositions[pos]) {\n\t\t\t\t\t(maskset.tests[pos] || [maskset.validPositions[pos]]).every(function (lmnt, ndx) {\n\t\t\t\t\t\tif (lmnt.mloc[alternateNdx]) {\n\t\t\t\t\t\t\tbestMatch = lmnt;\n\t\t\t\t\t\t\treturn false; //break\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar alternation = targetAlternation !== undefined ? targetAlternation : lmnt.alternation,\n\t\t\t\t\t\t\tndxPos = lmnt.locator[alternation] !== undefined ? lmnt.locator[alternation].toString().indexOf(alternateNdx) : -1;\n\t\t\t\t\t\tif ((indexPos === undefined || ndxPos < indexPos) && ndxPos !== -1) {\n\t\t\t\t\t\t\tbestMatch = lmnt;\n\t\t\t\t\t\t\tindexPos = ndxPos;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (bestMatch) {\n\t\t\t\t\tvar bestMatchAltIndex = bestMatch.locator[bestMatch.alternation];\n\t\t\t\t\tvar locator = bestMatch.mloc[alternateNdx] || bestMatch.mloc[bestMatchAltIndex] || bestMatch.locator;\n\t\t\t\t\treturn locator.slice((targetAlternation !== undefined ? targetAlternation : bestMatch.alternation) + 1);\n\t\t\t\t} else {\n\t\t\t\t\treturn targetAlternation !== undefined ? resolveNdxInitializer(pos, alternateNdx) : undefined;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction isSubsetOf(source, target) {\n\t\t\t\tfunction expand(pattern) {\n\t\t\t\t\tvar expanded = [], start = -1, end;\n\t\t\t\t\tfor (var i = 0, l = pattern.length; i < l; i++) {\n\t\t\t\t\t\tif (pattern.charAt(i) === \"-\") {\n\t\t\t\t\t\t\tend = pattern.charCodeAt(i + 1);\n\t\t\t\t\t\t\twhile (++start < end) expanded.push(String.fromCharCode(start));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstart = pattern.charCodeAt(i);\n\t\t\t\t\t\t\texpanded.push(pattern.charAt(i));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn expanded.join(\"\");\n\t\t\t\t}\n\n\t\t\t\tif (source.match.def === target.match.nativeDef) return true;\n\t\t\t\tif ((opts.regex || (source.match.fn instanceof RegExp && target.match.fn instanceof RegExp)) && source.match.static !== true && target.match.static !== true) { //is regex a subset\n\t\t\t\t\treturn expand(target.match.fn.toString().replace(/[[\\]/]/g, \"\")).indexOf(expand(source.match.fn.toString().replace(/[[\\]/]/g, \"\"))) !== -1;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tfunction staticCanMatchDefinition(source, target) {\n\t\t\t\treturn source.match.static === true && target.match.static !== true ? target.match.fn.test(source.match.def, maskset, pos, false, opts, false) : false;\n\t\t\t}\n\n\t\t\t//mergelocators for retrieving the correct locator match when merging\n\t\t\tfunction setMergeLocators(targetMatch, altMatch) {\n\t\t\t\tvar alternationNdx = targetMatch.alternation,\n\t\t\t\t\tshouldMerge = altMatch === undefined || (alternationNdx === altMatch.alternation &&\n\t\t\t\t\t\ttargetMatch.locator[alternationNdx].toString().indexOf(altMatch.locator[alternationNdx]) === -1);\n\t\t\t\tif (!shouldMerge && alternationNdx > altMatch.alternation) {\n\t\t\t\t\tfor (var i = altMatch.alternation; i < alternationNdx; i++) {\n\t\t\t\t\t\tif (targetMatch.locator[i] !== altMatch.locator[i]) {\n\t\t\t\t\t\t\talternationNdx = i;\n\t\t\t\t\t\t\tshouldMerge = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (shouldMerge) {\n\t\t\t\t\ttargetMatch.mloc = targetMatch.mloc || {};\n\t\t\t\t\tvar locNdx = targetMatch.locator[alternationNdx];\n\t\t\t\t\tif (locNdx === undefined) {\n\t\t\t\t\t\ttargetMatch.alternation = undefined;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (typeof locNdx === \"string\") locNdx = locNdx.split(\",\")[0];\n\t\t\t\t\t\tif (targetMatch.mloc[locNdx] === undefined) targetMatch.mloc[locNdx] = targetMatch.locator.slice();\n\t\t\t\t\t\tif (altMatch !== undefined) {\n\t\t\t\t\t\t\tfor (var ndx in altMatch.mloc) {\n\t\t\t\t\t\t\t\tif (typeof ndx === \"string\") ndx = ndx.split(\",\")[0];\n\t\t\t\t\t\t\t\tif (targetMatch.mloc[ndx] === undefined) targetMatch.mloc[ndx] = altMatch.mloc[ndx];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttargetMatch.locator[alternationNdx] = Object.keys(targetMatch.mloc).join(\",\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tfunction isSameLevel(targetMatch, altMatch) {\n\t\t\t\tif (targetMatch.locator.length !== altMatch.locator.length) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tfor (let locNdx = targetMatch.alternation + 1; locNdx < targetMatch.locator.length; locNdx++) {\n\t\t\t\t\tif (targetMatch.locator[locNdx] !== altMatch.locator[locNdx]) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (testPos > (pos + opts._maxTestPos)) {\n\t\t\t\tthrow \"Inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. \" + maskset.mask;\n\t\t\t}\n\t\t\tif (testPos === pos && match.matches === undefined) {\n\t\t\t\tmatches.push({\n\t\t\t\t\t\"match\": match,\n\t\t\t\t\t\"locator\": loopNdx.reverse(),\n\t\t\t\t\t\"cd\": cacheDependency,\n\t\t\t\t\t\"mloc\": {}\n\t\t\t\t});\n\t\t\t\treturn true;\n\t\t\t} else if (match.matches !== undefined) {\n\t\t\t\tif (match.isGroup && quantifierRecurse !== match) { //when a group pass along to the quantifier\n\t\t\t\t\tmatch = handleMatch(maskToken.matches[maskToken.matches.indexOf(match) + 1], loopNdx, quantifierRecurse);\n\t\t\t\t\tif (match) return true;\n\t\t\t\t} else if (match.isOptional) {\n\t\t\t\t\tvar optionalToken = match, mtchsNdx = matches.length;\n\t\t\t\t\tmatch = resolveTestFromToken(match, ndxInitializer, loopNdx, quantifierRecurse);\n\t\t\t\t\tif (match) {\n\t\t\t\t\t\t//mark optionality in matches\n\t\t\t\t\t\tmatches.forEach(function (mtch, ndx) {\n\t\t\t\t\t\t\tif (ndx >= mtchsNdx) {\n\t\t\t\t\t\t\t\tmtch.match.optionality = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tlatestMatch = matches[matches.length - 1].match;\n\t\t\t\t\t\tif (quantifierRecurse === undefined && isFirstMatch(latestMatch, optionalToken)) { //prevent loop see #698\n\t\t\t\t\t\t\tinsertStop = true; //insert a stop\n\t\t\t\t\t\t\ttestPos = pos; //match the position after the group\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (match.isAlternator) {\n\t\t\t\t\tvar alternateToken = match,\n\t\t\t\t\t\tmalternateMatches = [],\n\t\t\t\t\t\tmaltMatches,\n\t\t\t\t\t\tcurrentMatches = matches.slice(),\n\t\t\t\t\t\tloopNdxCnt = loopNdx.length;\n\t\t\t\t\tvar altIndex = ndxInitializer.length > 0 ? ndxInitializer.shift() : -1;\n\t\t\t\t\tif (altIndex === -1 || typeof altIndex === \"string\") {\n\t\t\t\t\t\tvar currentPos = testPos,\n\t\t\t\t\t\t\tndxInitializerClone = ndxInitializer.slice(),\n\t\t\t\t\t\t\taltIndexArr = [],\n\t\t\t\t\t\t\tamndx;\n\t\t\t\t\t\tif (typeof altIndex == \"string\") {\n\t\t\t\t\t\t\taltIndexArr = altIndex.split(\",\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfor (amndx = 0; amndx < alternateToken.matches.length; amndx++) {\n\t\t\t\t\t\t\t\taltIndexArr.push(amndx.toString());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (maskset.excludes[pos] !== undefined) {\n\t\t\t\t\t\t\tvar altIndexArrClone = altIndexArr.slice();\n\t\t\t\t\t\t\tfor (var i = 0, exl = maskset.excludes[pos].length; i < exl; i++) {\n\t\t\t\t\t\t\t\tvar excludeSet = maskset.excludes[pos][i].toString().split(\":\");\n\t\t\t\t\t\t\t\tif (loopNdx.length == excludeSet[1]) {\n\t\t\t\t\t\t\t\t\taltIndexArr.splice(altIndexArr.indexOf(excludeSet[0]), 1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (altIndexArr.length === 0) { //fully alternated => reset\n\t\t\t\t\t\t\t\tdelete maskset.excludes[pos];\n\t\t\t\t\t\t\t\taltIndexArr = altIndexArrClone;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (opts.keepStatic === true || (isFinite(parseInt(opts.keepStatic)) && currentPos >= opts.keepStatic)) altIndexArr = altIndexArr.slice(0, 1);\n\t\t\t\t\t\tvar unMatchedAlternation = false;\n\t\t\t\t\t\tfor (var ndx = 0; ndx < altIndexArr.length; ndx++) {\n\t\t\t\t\t\t\tamndx = parseInt(altIndexArr[ndx]);\n\t\t\t\t\t\t\tmatches = [];\n\t\t\t\t\t\t\t//set the correct ndxInitializer\n\t\t\t\t\t\t\tndxInitializer = typeof altIndex === \"string\" ? resolveNdxInitializer(testPos, amndx, loopNdxCnt) || ndxInitializerClone.slice() : ndxInitializerClone.slice();\n\t\t\t\t\t\t\tif (alternateToken.matches[amndx] && handleMatch(alternateToken.matches[amndx], [amndx].concat(loopNdx), quantifierRecurse)) {\n\t\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t\t} else if (ndx === 0) {\n\t\t\t\t\t\t\t\tunMatchedAlternation = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tmaltMatches = matches.slice();\n\t\t\t\t\t\t\ttestPos = currentPos;\n\t\t\t\t\t\t\tmatches = [];\n\n\t\t\t\t\t\t\t//fuzzy merge matches\n\t\t\t\t\t\t\tfor (var ndx1 = 0; ndx1 < maltMatches.length; ndx1++) {\n\t\t\t\t\t\t\t\tvar altMatch = maltMatches[ndx1],\n\t\t\t\t\t\t\t\t\tdropMatch = false;\n\t\t\t\t\t\t\t\taltMatch.match.jit = altMatch.match.jit || unMatchedAlternation; //mark jit when there are unmatched alternations  ex: mask: \"(a|aa)\"\n\t\t\t\t\t\t\t\taltMatch.alternation = altMatch.alternation || loopNdxCnt;\n\t\t\t\t\t\t\t\tsetMergeLocators(altMatch);\n\t\t\t\t\t\t\t\tfor (var ndx2 = 0; ndx2 < malternateMatches.length; ndx2++) {\n\t\t\t\t\t\t\t\t\tvar altMatch2 = malternateMatches[ndx2];\n\t\t\t\t\t\t\t\t\tif (typeof altIndex !== \"string\" || (altMatch.alternation !== undefined && altIndexArr.includes(altMatch.locator[altMatch.alternation].toString()))) {\n\t\t\t\t\t\t\t\t\t\tif (altMatch.match.nativeDef === altMatch2.match.nativeDef) {\n\t\t\t\t\t\t\t\t\t\t\tdropMatch = true;\n\t\t\t\t\t\t\t\t\t\t\tsetMergeLocators(altMatch2, altMatch);\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t} else if (isSubsetOf(altMatch, altMatch2)) {\n\t\t\t\t\t\t\t\t\t\t\tif (setMergeLocators(altMatch, altMatch2)) {\n\t\t\t\t\t\t\t\t\t\t\t\tdropMatch = true;\n\t\t\t\t\t\t\t\t\t\t\t\tmalternateMatches.splice(malternateMatches.indexOf(altMatch2), 0, altMatch);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t} else if (isSubsetOf(altMatch2, altMatch)) {\n\t\t\t\t\t\t\t\t\t\t\tsetMergeLocators(altMatch2, altMatch);\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t} else if (staticCanMatchDefinition(altMatch, altMatch2)) {\n\t\t\t\t\t\t\t\t\t\t\tif (!isSameLevel(altMatch, altMatch2) && el.inputmask.userOptions.keepStatic === undefined) {\n\t\t\t\t\t\t\t\t\t\t\t\topts.keepStatic = true;\n\t\t\t\t\t\t\t\t\t\t\t} else if (setMergeLocators(altMatch, altMatch2)) {\n\t\t\t\t\t\t\t\t\t\t\t\t//insert match above general match\n\t\t\t\t\t\t\t\t\t\t\t\tdropMatch = true;\n\t\t\t\t\t\t\t\t\t\t\t\tmalternateMatches.splice(malternateMatches.indexOf(altMatch2), 0, altMatch);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (!dropMatch) {\n\t\t\t\t\t\t\t\t\tmalternateMatches.push(altMatch);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmatches = currentMatches.concat(malternateMatches);\n\t\t\t\t\t\ttestPos = pos;\n\t\t\t\t\t\tinsertStop = matches.length > 0; //insert a stopelemnt when there is an alternate - needed for non-greedy option\n\t\t\t\t\t\tmatch = malternateMatches.length > 0; //set correct match state\n\n\t\t\t\t\t\t//cloneback\n\t\t\t\t\t\tndxInitializer = ndxInitializerClone.slice();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmatch = handleMatch(alternateToken.matches[altIndex] || maskToken.matches[altIndex], [altIndex].concat(loopNdx), quantifierRecurse);\n\t\t\t\t\t}\n\t\t\t\t\tif (match) return true;\n\t\t\t\t} else if (match.isQuantifier && quantifierRecurse !== maskToken.matches[maskToken.matches.indexOf(match) - 1]) {\n\t\t\t\t\tvar qt = match;\n\t\t\t\t\tfor (var qndx = (ndxInitializer.length > 0) ? ndxInitializer.shift() : 0; (qndx < (isNaN(qt.quantifier.max) ? qndx + 1 : qt.quantifier.max)) && testPos <= pos; qndx++) {\n\t\t\t\t\t\tvar tokenGroup = maskToken.matches[maskToken.matches.indexOf(qt) - 1];\n\t\t\t\t\t\tmatch = handleMatch(tokenGroup, [qndx].concat(loopNdx), tokenGroup); //set the tokenGroup as quantifierRecurse marker\n\t\t\t\t\t\tif (match) {\n\t\t\t\t\t\t\t//get latest match\n\t\t\t\t\t\t\tlatestMatch = matches[matches.length - 1].match;\n\t\t\t\t\t\t\t//mark optionality\n\t\t\t\t\t\t\t//TODO FIX RECURSIVE QUANTIFIERS\n\t\t\t\t\t\t\tlatestMatch.optionalQuantifier = qndx >= qt.quantifier.min;\n\t\t\t\t\t\t\t// console.log(pos + \" \" + qt.quantifier.min + \" \" + latestMatch.optionalQuantifier);\n\t\t\t\t\t\t\tlatestMatch.jit = (qndx || 1) * tokenGroup.matches.indexOf(latestMatch) >= qt.quantifier.jit;\n\t\t\t\t\t\t\tif (latestMatch.optionalQuantifier && isFirstMatch(latestMatch, tokenGroup)) {\n\t\t\t\t\t\t\t\tinsertStop = true;\n\t\t\t\t\t\t\t\ttestPos = pos; //match the position after the group\n\t\t\t\t\t\t\t\tbreak; //stop quantifierloop && search for next possible match\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (latestMatch.jit /*&& !latestMatch.optionalQuantifier*/) {\n\t\t\t\t\t\t\t\t//always set jitOffset, isvalid checks when to apply\n\t\t\t\t\t\t\t\tmaskset.jitOffset[pos] = tokenGroup.matches.length - tokenGroup.matches.indexOf(latestMatch);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tmatch = resolveTestFromToken(match, ndxInitializer, loopNdx, quantifierRecurse);\n\t\t\t\t\tif (match) return true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttestPos++;\n\t\t\t}\n\t\t}\n\n\t\t//the offset is set in the quantifierloop when git masking is used\n\t\tfor (var tndx = (ndxInitializer.length > 0 ? ndxInitializer.shift() : 0); tndx < maskToken.matches.length; tndx++) {\n\t\t\tif (maskToken.matches[tndx].isQuantifier !== true) {\n\t\t\t\tvar match = handleMatch(maskToken.matches[tndx], [tndx].concat(loopNdx), quantifierRecurse);\n\t\t\t\tif (match && testPos === pos) {\n\t\t\t\t\treturn match;\n\t\t\t\t} else if (testPos > pos) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction mergeLocators(pos, tests) {\n\t\tlet locator = [], alternation;\n\t\tif (!Array.isArray(tests)) tests = [tests];\n\n\t\tif (tests.length > 0) {\n\t\t\tif (tests[0].alternation === undefined || opts.keepStatic === true) {\n\t\t\t\tlocator = determineTestTemplate.call(inputmask, pos, tests.slice()).locator.slice();\n\t\t\t\tif (locator.length === 0) locator = tests[0].locator.slice();\n\t\t\t} else {\n\t\t\t\ttests.forEach(function (tst) {\n\t\t\t\t\tif (tst.def !== \"\") {\n\t\t\t\t\t\tif (locator.length === 0) {\n\t\t\t\t\t\t\talternation = tst.alternation;\n\t\t\t\t\t\t\tlocator = tst.locator.slice();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (tst.locator[alternation] && locator[alternation].toString().indexOf(tst.locator[alternation]) === -1) {\n\t\t\t\t\t\t\t\tlocator[alternation] += \",\" + tst.locator[alternation];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn locator;\n\t}\n\n\tif (pos > -1 && (inputmask.maxLength === undefined || pos < inputmask.maxLength)) {\n\t\tif (ndxIntlzr === undefined) { //determine index initializer\n\t\t\tvar previousPos = pos - 1,\n\t\t\t\ttest;\n\t\t\twhile ((test = maskset.validPositions[previousPos] || maskset.tests[previousPos]) === undefined && previousPos > -1) {\n\t\t\t\tpreviousPos--;\n\t\t\t}\n\t\t\tif (test !== undefined && previousPos > -1) {\n\t\t\t\tndxInitializer = mergeLocators(previousPos, test);\n\t\t\t\tcacheDependency = ndxInitializer.join(\"\");\n\t\t\t\ttestPos = previousPos;\n\t\t\t}\n\t\t}\n\t\tif (maskset.tests[pos] && maskset.tests[pos][0].cd === cacheDependency) { //cacheDependency is set on all tests, just check on the first\n\t\t\treturn maskset.tests[pos];\n\t\t}\n\t\tfor (var mtndx = ndxInitializer.shift(); mtndx < maskTokens.length; mtndx++) {\n\t\t\tvar match = resolveTestFromToken(maskTokens[mtndx], ndxInitializer, [mtndx]);\n\t\t\tif ((match && testPos === pos) || testPos > pos) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tif (matches.length === 0 || insertStop) {\n\t\tmatches.push({\n\t\t\tmatch: {\n\t\t\t\tfn: null,\n\t\t\t\tstatic: true,\n\t\t\t\toptionality: false,\n\t\t\t\tcasing: null,\n\t\t\t\tdef: \"\",\n\t\t\t\tplaceholder: \"\"\n\t\t\t},\n\t\t\tlocator: [],\n\t\t\tmloc: {},\n\t\t\tcd: cacheDependency\n\t\t});\n\t}\n\n\tif (ndxIntlzr !== undefined && maskset.tests[pos]) { //prioritize full tests for caching\n\t\treturn $.extend(true, [], matches);\n\t}\n\tmaskset.tests[pos] = $.extend(true, [], matches); //set a clone to prevent overwriting some props\n\t// console.log(pos + \" - \" + JSON.stringify(matches));\n\treturn maskset.tests[pos];\n}\n","const ua = (window.navigator && window.navigator.userAgent) || \"\",\n\tie = (ua.indexOf(\"MSIE \") > 0) || (ua.indexOf(\"Trident/\") > 0),\n\tmobile = \"ontouchstart\" in window, //not entirely correct but will currently do\n\tiemobile = /iemobile/i.test(ua),\n\tiphone = /iphone/i.test(ua) && !iemobile;\n\nexport {ua, ie, mobile, iemobile, iphone};","import keyCode from \"./keycode.json\";\nimport {getMaskTemplate, getPlaceholder, getTest} from \"./validation-tests\";\nimport {\n\tcaret,\n\tdetermineNewCaretPosition,\n\tgetBuffer, getBufferTemplate,\n\tgetLastValidPosition,\n\tisMask,\n\tresetMaskSet,\n\tseekNext\n} from \"./positioning\";\nimport {isComplete, isValid, refreshFromBuffer} from \"./validation\";\nimport {ie} from \"./environment\";\nimport {EventHandlers} from \"./eventhandlers\";\n\n\nexport {applyInputValue, clearOptionalTail, checkVal, HandleNativePlaceholder, unmaskedvalue, writeBuffer};\n\nfunction applyInputValue(input, value) {\n\tconst inputmask = input ? input.inputmask : this, opts = inputmask.opts;\n\n\tinput.inputmask.refreshValue = false;\n\tif (typeof opts.onBeforeMask === \"function\") value = opts.onBeforeMask.call(inputmask, value, opts) || value;\n\tvalue = value.toString().split(\"\");\n\tcheckVal(input, true, false, value);\n\tinputmask.undoValue = getBuffer.call(inputmask).join(\"\");\n\tif ((opts.clearMaskOnLostFocus || opts.clearIncomplete) && input.inputmask._valueGet() === getBufferTemplate.call(inputmask).join(\"\") && getLastValidPosition.call(inputmask) === -1) {\n\t\tinput.inputmask._valueSet(\"\");\n\t}\n}\n\n//todo put on prototype?\nfunction clearOptionalTail(buffer) {\n\tconst inputmask = this;\n\n\tbuffer.length = 0;\n\tvar template = getMaskTemplate.call(inputmask, true, 0, true, undefined, true), lmnt;\n\twhile ((lmnt = template.shift()) !== undefined) buffer.push(lmnt);\n\treturn buffer;\n}\n\nfunction checkVal(input, writeOut, strict, nptvl, initiatingEvent) {\n\tconst inputmask = input ? input.inputmask : this,\n\t\tmaskset = inputmask.maskset,\n\t\topts = inputmask.opts,$ = inputmask.dependencyLib;\n\n\tvar inputValue = nptvl.slice(),\n\t\tcharCodes = \"\",\n\t\tinitialNdx = -1,\n\t\tresult = undefined, skipOptionalPartCharacter = opts.skipOptionalPartCharacter;\n\topts.skipOptionalPartCharacter = \"\"; //see issue #2311\n\n\tfunction isTemplateMatch(ndx, charCodes) {\n\t\tvar targetTemplate = getMaskTemplate.call(inputmask, true, 0).slice(ndx, seekNext.call(inputmask, ndx)).join(\"\").replace(/'/g, \"\"),\n\t\t\tcharCodeNdx = targetTemplate.indexOf(charCodes);\n\t\t//strip spaces from targetTemplate\n\t\twhile (charCodeNdx > 0 && targetTemplate[charCodeNdx - 1] === \" \") charCodeNdx--;\n\n\t\tvar match = charCodeNdx === 0 && !isMask.call(inputmask, ndx)\n\t\t\t&& (getTest.call(inputmask, ndx).match.nativeDef === charCodes.charAt(0)\n\t\t\t\t|| (getTest.call(inputmask, ndx).match.static === true && getTest.call(inputmask, ndx).match.nativeDef === (\"'\" + charCodes.charAt(0)))\n\t\t\t\t|| (getTest.call(inputmask, ndx).match.nativeDef === \" \" && (getTest.call(inputmask, ndx + 1).match.nativeDef === charCodes.charAt(0)\n\t\t\t\t\t|| (getTest.call(inputmask, ndx + 1).match.static === true && getTest.call(inputmask, ndx + 1).match.nativeDef === (\"'\" + charCodes.charAt(0))))));\n\n\t\tif (!match && charCodeNdx > 0 && !isMask.call(inputmask, ndx, false, true)) {\n\t\t\tvar nextPos = seekNext.call(inputmask, ndx);\n\t\t\tif (inputmask.caretPos.begin < nextPos) {\n\t\t\t\tinputmask.caretPos = {begin: nextPos};\n\t\t\t}\n\t\t}\n\t\treturn match;\n\t}\n\n\tresetMaskSet.call(inputmask);\n\tmaskset.tests = {}; //reset tests ~ possible after alternating\n\tinitialNdx = opts.radixPoint ? determineNewCaretPosition.call(inputmask, {begin: 0, end: 0}).begin : 0;\n\tmaskset.p = initialNdx;\n\tinputmask.caretPos = {begin: initialNdx};\n\n\tvar staticMatches = [], prevCaretPos = inputmask.caretPos;\n\tinputValue.forEach( function ( charCode, ndx) {\n\t\tif (charCode !== undefined) { //inputfallback strips some elements out of the inputarray.  $.each logically presents them as undefined\n\t\t\tif (maskset.validPositions[ndx] === undefined && inputValue[ndx] === getPlaceholder.call(inputmask, ndx) && isMask.call(inputmask, ndx, true) &&\n\t\t\t\tisValid.call(inputmask, ndx, inputValue[ndx], true, undefined, undefined, true) === false) {\n\t\t\t\tmaskset.p++;\n\t\t\t} else {\n\t\t\t\tvar keypress = new $.Event(\"_checkval\");\n\t\t\t\tkeypress.which = charCode.toString().charCodeAt(0);\n\t\t\t\tcharCodes += charCode;\n\t\t\t\tvar lvp = getLastValidPosition.call(inputmask, undefined, true);\n\t\t\t\tif (!isTemplateMatch(initialNdx, charCodes)) {\n\t\t\t\t\tresult = EventHandlers.keypressEvent.call(input || inputmask, keypress, true, false, strict, inputmask.caretPos.begin);\n\n\t\t\t\t\tif (result) {\n\t\t\t\t\t\tinitialNdx = inputmask.caretPos.begin + 1;\n\t\t\t\t\t\tcharCodes = \"\";\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresult = EventHandlers.keypressEvent.call(input || inputmask, keypress, true, false, strict, lvp + 1);\n\t\t\t\t}\n\t\t\t\tif (result) {\n\t\t\t\t\tif (result.pos !== undefined && maskset.validPositions[result.pos] && maskset.validPositions[result.pos].match.static === true && maskset.validPositions[result.pos].alternation === undefined) {\n\t\t\t\t\t\tstaticMatches.push(result.pos);\n\t\t\t\t\t\tif (!inputmask.isRTL) {\n\t\t\t\t\t\t\tresult.forwardPosition = result.pos + 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\twriteBuffer.call(inputmask, undefined, getBuffer.call(inputmask), result.forwardPosition, keypress, false);\n\t\t\t\t\tinputmask.caretPos = {begin: result.forwardPosition, end: result.forwardPosition};\n\t\t\t\t\tprevCaretPos = inputmask.caretPos;\n\t\t\t\t} else {\n\t\t\t\t\tinputmask.caretPos = prevCaretPos;\n\t\t\t\t}  //restore the caret position from before the failed validation\n\t\t\t}\n\t\t}\n\t});\n\tif (staticMatches.length > 0) {\n\t\tvar sndx, validPos, nextValid = seekNext.call(inputmask, -1, undefined, false);\n\t\tif ((!isComplete.call(inputmask, getBuffer.call(inputmask)) && staticMatches.length <= nextValid)\n\t\t\t|| (isComplete.call(inputmask, getBuffer.call(inputmask)) && staticMatches.length > 0 && (staticMatches.length !== nextValid && staticMatches[0] === 0))) { //should check if is sequence starting from 0\n\t\t\tvar nextSndx = nextValid;\n\t\t\twhile ((sndx = staticMatches.shift()) !== undefined) {\n\t\t\t\tvar keypress = new $.Event(\"_checkval\");\n\t\t\t\tvalidPos = maskset.validPositions[sndx];\n\t\t\t\tvalidPos.generatedInput = true;\n\t\t\t\tkeypress.which = validPos.input.charCodeAt(0);\n\t\t\t\tresult = EventHandlers.keypressEvent.call(input, keypress, true, false, strict, nextSndx);\n\t\t\t\tif (result && result.pos !== undefined && result.pos !== sndx && maskset.validPositions[result.pos] && maskset.validPositions[result.pos].match.static === true) {\n\t\t\t\t\tstaticMatches.push(result.pos);\n\t\t\t\t} else if (!result) break;\n\t\t\t\tnextSndx++;\n\t\t\t}\n\t\t} else { //mark al statics as generated\n\t\t\t// while ((sndx = staticMatches.pop())) {\n\t\t\t// \tvalidPos = maskset.validPositions[sndx];\n\t\t\t// \tif (validPos) {\n\t\t\t// \t\tvalidPos.generatedInput = true;\n\t\t\t// \t}\n\t\t\t// }\n\t\t}\n\t}\n\tif (writeOut) {\n\t\twriteBuffer.call(inputmask, input, getBuffer.call(inputmask), result ? result.forwardPosition : inputmask.caretPos.begin, initiatingEvent || new $.Event(\"checkval\"), initiatingEvent && initiatingEvent.type === \"input\" && inputmask.undoValue !== getBuffer.call(inputmask).join(\"\"));\n\t\t// for (var vndx in maskset.validPositions) {\n\t\t// \tif (maskset.validPositions[vndx].match.generated !== true) { //only remove non forced generated\n\t\t// \t\tdelete maskset.validPositions[vndx].generatedInput; //clear generated markings ~ consider initializing with a  value as fully typed\n\t\t// \t}\n\t\t// }\n\t}\n\topts.skipOptionalPartCharacter = skipOptionalPartCharacter;\n}\n\nfunction HandleNativePlaceholder(npt, value) {\n\tconst inputmask = npt ? npt.inputmask : this;\n\n\tif (ie) {\n\t\tif (npt.inputmask._valueGet() !== value && (npt.placeholder !== value || npt.placeholder === \"\")) {\n\t\t\tvar buffer = getBuffer.call(inputmask).slice(),\n\t\t\t\tnptValue = npt.inputmask._valueGet();\n\t\t\tif (nptValue !== value) {\n\t\t\t\tvar lvp = getLastValidPosition.call(inputmask);\n\t\t\t\tif (lvp === -1 && nptValue === getBufferTemplate.call(inputmask).join(\"\")) {\n\t\t\t\t\tbuffer = [];\n\t\t\t\t} else if (lvp !== -1) { //clearout optional tail of the mask\n\t\t\t\t\tclearOptionalTail.call(inputmask, buffer);\n\t\t\t\t}\n\t\t\t\twriteBuffer(npt, buffer);\n\t\t\t}\n\t\t}\n\t} else if (npt.placeholder !== value) {\n\t\tnpt.placeholder = value;\n\t\tif (npt.placeholder === \"\") npt.removeAttribute(\"placeholder\");\n\t}\n}\n\nfunction unmaskedvalue(input) {\n\tconst inputmask = input ? input.inputmask : this,\n\t\topts = inputmask.opts,\n\t\tmaskset = inputmask.maskset;\n\n\tif (input) {\n\t\tif (input.inputmask === undefined) {\n\t\t\treturn input.value;\n\t\t}\n\t\tif (input.inputmask && input.inputmask.refreshValue) { //forced refresh from the value form.reset\n\t\t\tapplyInputValue(input, input.inputmask._valueGet(true));\n\t\t}\n\t}\n\tvar umValue = [],\n\t\tvps = maskset.validPositions;\n\tfor (var pndx in vps) {\n\t\tif (vps[pndx] && vps[pndx].match && (vps[pndx].match.static != true || (Array.isArray(maskset.metadata) && vps[pndx].generatedInput !== true))) {\n\t\t\t//only include generated input with multiple masks (check on metadata)\n\t\t\tumValue.push(vps[pndx].input);\n\t\t}\n\t}\n\tvar unmaskedValue = umValue.length === 0 ? \"\" : (inputmask.isRTL ? umValue.reverse() : umValue).join(\"\");\n\tif (typeof opts.onUnMask === \"function\") {\n\t\tvar bufferValue = (inputmask.isRTL ? getBuffer.call(inputmask).slice().reverse() : getBuffer.call(inputmask)).join(\"\");\n\t\tunmaskedValue = opts.onUnMask.call(inputmask, bufferValue, unmaskedValue, opts);\n\t}\n\treturn unmaskedValue;\n}\n\nfunction writeBuffer(input, buffer, caretPos, event, triggerEvents) {\n\tconst inputmask = input ? input.inputmask : this,\n\t\topts = inputmask.opts,\n\t\t$ = inputmask.dependencyLib;\n\n\tif (event && typeof opts.onBeforeWrite === \"function\") {\n\t\t//    buffer = buffer.slice(); //prevent uncontrolled manipulation of the internal buffer\n\t\tvar result = opts.onBeforeWrite.call(inputmask, event, buffer, caretPos, opts);\n\t\tif (result) {\n\t\t\tif (result.refreshFromBuffer) {\n\t\t\t\tvar refresh = result.refreshFromBuffer;\n\t\t\t\trefreshFromBuffer.call(inputmask, refresh === true ? refresh : refresh.start, refresh.end, result.buffer || buffer);\n\t\t\t\tbuffer = getBuffer.call(inputmask, true);\n\t\t\t}\n\t\t\tif (caretPos !== undefined) caretPos = result.caret !== undefined ? result.caret : caretPos;\n\t\t}\n\t}\n\tif (input !== undefined) {\n\t\tinput.inputmask._valueSet(buffer.join(\"\"));\n\t\tif (caretPos !== undefined && (event === undefined || event.type !== \"blur\")) {\n\t\t\tcaret.call(inputmask, input, caretPos, undefined, undefined, (event !== undefined && event.type === \"keydown\" && (event.keyCode === keyCode.DELETE || event.keyCode === keyCode.BACKSPACE)));\n\t\t}\n\t\tif (triggerEvents === true) {\n\t\t\tvar $input = $(input), nptVal = input.inputmask._valueGet();\n\t\t\tinput.inputmask.skipInputEvent = true;\n\t\t\t$input.trigger(\"input\");\n\t\t\tsetTimeout(function () { //timeout needed for IE\n\t\t\t\tif (nptVal === getBufferTemplate.call(inputmask).join(\"\")) {\n\t\t\t\t\t$input.trigger(\"cleared\");\n\t\t\t\t} else if (isComplete.call(inputmask, buffer) === true) {\n\t\t\t\t\t$input.trigger(\"complete\");\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t}\n\t}\n}\n","import {\n\tcaret, determineNewCaretPosition,\n\tgetBuffer, getBufferTemplate,\n\tgetLastValidPosition, isMask,\n\tresetMaskSet,\n\tseekNext,\n\tseekPrevious,\n\ttranslatePosition\n} from \"./positioning\";\nimport keyCode from \"./keycode.json\";\nimport {iemobile, iphone} from \"./environment\";\nimport {handleRemove, isComplete, isValid} from \"./validation\";\nimport {applyInputValue, checkVal, clearOptionalTail, HandleNativePlaceholder, writeBuffer} from \"./inputHandling\";\nimport {getPlaceholder, getTest} from \"./validation-tests\";\n\nexport {EventHandlers};\n\nvar EventHandlers = {\n\tkeydownEvent: function (e) {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts, $ = inputmask.dependencyLib,\n\t\t\tmaskset = inputmask.maskset;\n\n\t\tvar input = this,\n\t\t\t$input = $(input),\n\t\t\tk = e.keyCode,\n\t\t\tpos = caret.call(inputmask, input);\n\n\t\tvar kdResult = opts.onKeyDown.call(this, e, getBuffer.call(inputmask), pos, opts);\n\t\tif (kdResult !== undefined) return kdResult;\n\n\t\t//backspace, delete, and escape get special treatment\n\t\tif (k === keyCode.BACKSPACE || k === keyCode.DELETE || (iphone && k === keyCode.BACKSPACE_SAFARI) || (e.ctrlKey && k === keyCode.X && !(\"oncut\" in input))) { //backspace/delete\n\t\t\te.preventDefault(); //stop default action but allow propagation\n\t\t\thandleRemove.call(inputmask, input, k, pos);\n\t\t\twriteBuffer(input, getBuffer.call(inputmask, true), maskset.p, e, input.inputmask._valueGet() !== getBuffer.call(inputmask).join(\"\"));\n\t\t} else if (k === keyCode.END || k === keyCode.PAGE_DOWN) { //when END or PAGE_DOWN pressed set position at lastmatch\n\t\t\te.preventDefault();\n\t\t\tvar caretPos = seekNext.call(inputmask, getLastValidPosition.call(inputmask));\n\t\t\tcaret.call(inputmask, input, e.shiftKey ? pos.begin : caretPos, caretPos, true);\n\t\t} else if ((k === keyCode.HOME && !e.shiftKey) || k === keyCode.PAGE_UP) { //Home or page_up\n\t\t\te.preventDefault();\n\t\t\tcaret.call(inputmask, input, 0, e.shiftKey ? pos.begin : 0, true);\n\t\t} else if (((opts.undoOnEscape && k === keyCode.ESCAPE) || (k === 90 && e.ctrlKey)) && e.altKey !== true) { //escape && undo && #762\n\t\t\tcheckVal(input, true, false, inputmask.undoValue.split(\"\"));\n\t\t\t$input.trigger(\"click\");\n\t\t\t// } else if (k === keyCode.INSERT && !(e.shiftKey || e.ctrlKey) && inputmask.userOptions.insertMode === undefined) { //insert\n\t\t\t// \topts.insertMode = !opts.insertMode;\n\t\t\t// \tcaret(input, pos.begin, pos.end);\n\t\t} else if (opts.tabThrough === true && k === keyCode.TAB) {\n\t\t\tif (e.shiftKey === true) {\n\t\t\t\tpos.end = seekPrevious.call(inputmask, pos.end, true);\n\t\t\t\tif (getTest.call(inputmask, pos.end - 1).match.static === true) {\n\t\t\t\t\tpos.end--;\n\t\t\t\t}\n\t\t\t\tpos.begin = seekPrevious.call(inputmask, pos.end, true);\n\t\t\t\tif (pos.begin >= 0 && pos.end > 0) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tcaret.call(inputmask, input, pos.begin, pos.end);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tpos.begin = seekNext.call(inputmask, pos.begin, true);\n\t\t\t\tpos.end = seekNext.call(inputmask, pos.begin, true);\n\t\t\t\tif (pos.end < maskset.maskLength) pos.end--;\n\t\t\t\tif (pos.begin <= maskset.maskLength) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tcaret.call(inputmask, input, pos.begin, pos.end);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!e.shiftKey) {\n\t\t\tif (opts.insertModeVisual && opts.insertMode === false) {\n\t\t\t\tif (k === keyCode.RIGHT) {\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tvar caretPos = caret.call(inputmask, input);\n\t\t\t\t\t\tcaret.call(inputmask, input, caretPos.begin);\n\t\t\t\t\t}, 0);\n\t\t\t\t} else if (k === keyCode.LEFT) {\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tvar caretPos = {\n\t\t\t\t\t\t\tbegin: translatePosition.call(inputmask, input.inputmask.caretPos.begin),\n\t\t\t\t\t\t\tend: translatePosition.call(inputmask, input.inputmask.caretPos.end)\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (inputmask.isRTL) {\n\t\t\t\t\t\t\tcaret.call(inputmask, input, caretPos.begin + (caretPos.begin === maskset.maskLength ? 0 : 1));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcaret.call(inputmask, input, caretPos.begin - (caretPos.begin === 0 ? 0 : 1));\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tinputmask.ignorable = opts.ignorables.includes(k);\n\t},\n\tkeypressEvent: function (e, checkval, writeOut, strict, ndx) {\n\t\tconst inputmask = this.inputmask || this, opts = inputmask.opts, $ = inputmask.dependencyLib,\n\t\t\tmaskset = inputmask.maskset;\n\n\t\tvar input = inputmask.el,\n\t\t\t$input = $(input),\n\t\t\tk = e.which || e.charCode || e.keyCode;\n\n\t\tif (checkval !== true && (!(e.ctrlKey && e.altKey) && (e.ctrlKey || e.metaKey || inputmask.ignorable))) {\n\t\t\tif (k === keyCode.ENTER && inputmask.undoValue !== getBuffer.call(inputmask).join(\"\")) {\n\t\t\t\tinputmask.undoValue = getBuffer.call(inputmask).join(\"\");\n\t\t\t\t// e.preventDefault();\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t$input.trigger(\"change\");\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t\tinputmask.skipInputEvent = true; //skip the input as otherwise the skipped char could be picked up for validation by the inputfallback\n\t\t\treturn true;\n\t\t} else if (k) {\n\t\t\t//special treat the decimal separator\n\t\t\tif ((k === 44 || k === 46) && e.location === 3 && opts.radixPoint !== \"\") k = opts.radixPoint.charCodeAt(0);\n\t\t\tvar pos = checkval ? {\n\t\t\t\t\tbegin: ndx,\n\t\t\t\t\tend: ndx\n\t\t\t\t} : caret.call(inputmask, input),\n\t\t\t\tforwardPosition, c = String.fromCharCode(k);\n\n\t\t\tmaskset.writeOutBuffer = true;\n\t\t\tvar valResult = isValid.call(inputmask, pos, c, strict, undefined, undefined, undefined, checkval);\n\t\t\tif (valResult !== false) {\n\t\t\t\tresetMaskSet.call(inputmask, true);\n\t\t\t\tforwardPosition = valResult.caret !== undefined ? valResult.caret : seekNext.call(inputmask, valResult.pos.begin ? valResult.pos.begin : valResult.pos);\n\t\t\t\tmaskset.p = forwardPosition; //needed for checkval\n\t\t\t}\n\n\t\t\tforwardPosition = ((opts.numericInput && valResult.caret === undefined) ? seekPrevious.call(inputmask, forwardPosition) : forwardPosition);\n\t\t\tif (writeOut !== false) {\n\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\topts.onKeyValidation.call(input, k, valResult);\n\t\t\t\t}, 0);\n\t\t\t\tif (maskset.writeOutBuffer && valResult !== false) {\n\t\t\t\t\tvar buffer = getBuffer.call(inputmask);\n\t\t\t\t\twriteBuffer(input, buffer, forwardPosition, e, checkval !== true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\te.preventDefault();\n\n\t\t\tif (checkval) {\n\t\t\t\tif (valResult !== false) valResult.forwardPosition = forwardPosition;\n\t\t\t\treturn valResult;\n\t\t\t}\n\t\t}\n\t},\n\tkeyupEvent: function (e) {\n\t\tconst inputmask = this.inputmask;\n\n\t\tif (inputmask.isComposing && (e.keyCode === keyCode.KEY_229 || e.keyCode === keyCode.ENTER)) {\n\t\t\tinputmask.$el.trigger(\"input\");\n\t\t}\n\t},\n\tpasteEvent: function (e) {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts;\n\n\t\tvar input = this,\n\t\t\tinputValue = inputmask._valueGet(true),\n\t\t\tcaretPos = caret.call(inputmask, input),\n\t\t\ttempValue;\n\n\t\tif (inputmask.isRTL) {\n\t\t\ttempValue = caretPos.end;\n\t\t\tcaretPos.end = caretPos.begin;\n\t\t\tcaretPos.begin = tempValue;\n\t\t}\n\n\t\tvar valueBeforeCaret = inputValue.substr(0, caretPos.begin),\n\t\t\tvalueAfterCaret = inputValue.substr(caretPos.end, inputValue.length);\n\n\t\tif (valueBeforeCaret == (inputmask.isRTL ? getBufferTemplate.call(inputmask).slice().reverse() : getBufferTemplate.call(inputmask)).slice(0, caretPos.begin).join(\"\")) valueBeforeCaret = \"\";\n\t\tif (valueAfterCaret == (inputmask.isRTL ? getBufferTemplate.call(inputmask).slice().reverse() : getBufferTemplate.call(inputmask)).slice(caretPos.end).join(\"\")) valueAfterCaret = \"\";\n\n\t\tif (window.clipboardData && window.clipboardData.getData) { // IE\n\t\t\tinputValue = valueBeforeCaret + window.clipboardData.getData(\"Text\") + valueAfterCaret;\n\t\t} else if (e.clipboardData && e.clipboardData.getData) {\n\t\t\tinputValue = valueBeforeCaret + e.clipboardData.getData(\"text/plain\") + valueAfterCaret;\n\t\t} else {\n\t\t\treturn true;\n\t\t} //allow native paste event as fallback ~ masking will continue by inputfallback\n\n\t\tvar pasteValue = inputValue;\n\t\tif (typeof opts.onBeforePaste === \"function\") {\n\t\t\tpasteValue = opts.onBeforePaste.call(inputmask, inputValue, opts);\n\t\t\tif (pasteValue === false) {\n\t\t\t\treturn e.preventDefault();\n\t\t\t}\n\t\t\tif (!pasteValue) {\n\t\t\t\tpasteValue = inputValue;\n\t\t\t}\n\t\t}\n\t\tcheckVal(input, true, false, pasteValue.toString().split(\"\"), e);\n\t\t// writeBuffer(input, getBuffer(), seekNext(getLastValidPosition()), e, inputmask.undoValue !== getBuffer().join(\"\"));\n\n\t\treturn e.preventDefault();\n\t},\n\tinputFallBackEvent: function (e) { //fallback when keypress is not triggered\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts, $ = inputmask.dependencyLib;\n\n\t\tfunction ieMobileHandler(input, inputValue, caretPos) {\n\t\t\tif (iemobile) { //iemobile just sets the character at the end althought the caret position is correctly set\n\t\t\t\tvar inputChar = inputValue.replace(getBuffer.call(inputmask).join(\"\"), \"\");\n\t\t\t\tif (inputChar.length === 1) {\n\t\t\t\t\tvar iv = inputValue.split(\"\");\n\t\t\t\t\tiv.splice(caretPos.begin, 0, inputChar);\n\t\t\t\t\tinputValue = iv.join(\"\");\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn inputValue;\n\t\t}\n\n\t\tfunction analyseChanges(inputValue, buffer, caretPos) {\n\t\t\tvar frontPart = inputValue.substr(0, caretPos.begin).split(\"\"),\n\t\t\t\tbackPart = inputValue.substr(caretPos.begin).split(\"\"),\n\t\t\t\tfrontBufferPart = buffer.substr(0, caretPos.begin).split(\"\"),\n\t\t\t\tbackBufferPart = buffer.substr(caretPos.begin).split(\"\");\n\n\t\t\tvar fpl = frontPart.length >= frontBufferPart.length ? frontPart.length : frontBufferPart.length,\n\t\t\t\tbpl = backPart.length >= backBufferPart.length ? backPart.length : backBufferPart.length,\n\t\t\t\tbl, i, action = \"\", data = [], marker = \"~\", placeholder;\n\n\t\t\t//align buffers\n\t\t\twhile (frontPart.length < fpl) frontPart.push(marker);\n\t\t\twhile (frontBufferPart.length < fpl) frontBufferPart.push(marker);\n\t\t\twhile (backPart.length < bpl) backPart.unshift(marker);\n\t\t\twhile (backBufferPart.length < bpl) backBufferPart.unshift(marker);\n\n\t\t\tvar newBuffer = frontPart.concat(backPart);\n\t\t\tvar oldBuffer = frontBufferPart.concat(backBufferPart);\n\n\t\t\t// console.log(\"N \" + newBuffer);\n\t\t\t// console.log(\"O \" + oldBuffer);\n\n\t\t\tfor (i = 0, bl = newBuffer.length; i < bl; i++) {\n\t\t\t\tplaceholder = getPlaceholder.call(inputmask, translatePosition.call(inputmask, i));\n\t\t\t\tswitch (action) {\n\t\t\t\t\tcase \"insertText\":\n\t\t\t\t\t\tif (oldBuffer[i - 1] === newBuffer[i] && caretPos.begin == newBuffer.length - 1) {\n\t\t\t\t\t\t\tdata.push(newBuffer[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\ti = bl;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"insertReplacementText\":\n\t\t\t\t\t\tif (newBuffer[i] === marker) { //extend selection\n\t\t\t\t\t\t\tcaretPos.end++;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// breakout loop\n\t\t\t\t\t\t\ti = bl;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"deleteContentBackward\":\n\t\t\t\t\t\tif (newBuffer[i] === marker) {\n\t\t\t\t\t\t\tcaretPos.end++;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t//breakout loop\n\t\t\t\t\t\t\ti = bl;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif (newBuffer[i] !== oldBuffer[i]) {\n\t\t\t\t\t\t\tif ((newBuffer[i + 1] === marker || newBuffer[i + 1] === placeholder || newBuffer[i + 1] === undefined) && ((oldBuffer[i] === placeholder && oldBuffer[i + 1] === marker) || oldBuffer[i] === marker)) {  //basic insert\n\t\t\t\t\t\t\t\taction = \"insertText\";\n\t\t\t\t\t\t\t\tdata.push(newBuffer[i]);\n\t\t\t\t\t\t\t\tcaretPos.begin--;\n\t\t\t\t\t\t\t\tcaretPos.end--;\n\t\t\t\t\t\t\t} else if (oldBuffer[i + 1] === marker && oldBuffer[i] === newBuffer[i + 1]) { //insert between\n\t\t\t\t\t\t\t\taction = \"insertText\";\n\t\t\t\t\t\t\t\tdata.push(newBuffer[i]);\n\t\t\t\t\t\t\t\tcaretPos.begin--;\n\t\t\t\t\t\t\t\tcaretPos.end--;\n\t\t\t\t\t\t\t} else if (newBuffer[i] !== placeholder && newBuffer[i] !== marker &&\n\t\t\t\t\t\t\t\t(newBuffer[i + 1] === marker || (oldBuffer[i] !== newBuffer[i] && oldBuffer[i + 1] === newBuffer[i + 1] /*single char replacement*/))) { //replace selection\n\t\t\t\t\t\t\t\taction = \"insertReplacementText\";\n\t\t\t\t\t\t\t\tdata.push(newBuffer[i]);\n\t\t\t\t\t\t\t\tcaretPos.begin--;\n\t\t\t\t\t\t\t} else if (newBuffer[i] === marker) {  //delete~backspace\n\t\t\t\t\t\t\t\taction = \"deleteContentBackward\";\n\t\t\t\t\t\t\t\tif (isMask.call(inputmask, translatePosition.call(inputmask, i), true) || oldBuffer[i] === opts.radixPoint) caretPos.end++;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ti = bl;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\taction: action,\n\t\t\t\tdata: data,\n\t\t\t\tcaret: caretPos\n\t\t\t};\n\t\t}\n\n\t\tvar input = this,\n\t\t\tinputValue = input.inputmask._valueGet(true),\n\t\t\tbuffer = (inputmask.isRTL ? getBuffer.call(inputmask).slice().reverse() : getBuffer.call(inputmask)).join(\"\"),\n\t\t\tcaretPos = caret.call(inputmask, input, undefined, undefined, true);\n\n\t\tif (buffer !== inputValue) {\n\t\t\t// inputValue = radixPointHandler(input, inputValue, caretPos);\n\t\t\tinputValue = ieMobileHandler(input, inputValue, caretPos);\n\n\t\t\tvar changes = analyseChanges(inputValue, buffer, caretPos);\n\n\t\t\t// console.log(JSON.stringify(changes));\n\t\t\tif ((input.inputmask.shadowRoot || document).activeElement !== input) {\n\t\t\t\tinput.focus();\n\t\t\t}\n\t\t\twriteBuffer(input, getBuffer.call(inputmask));\n\t\t\tcaret.call(inputmask, input, caretPos.begin, caretPos.end, true);\n\t\t\tswitch (changes.action) {\n\t\t\t\tcase \"insertText\":\n\t\t\t\tcase \"insertReplacementText\":\n\t\t\t\t\tchanges.data.forEach(function (entry, ndx) {\n\t\t\t\t\t\tvar keypress = new $.Event(\"keypress\");\n\t\t\t\t\t\tkeypress.which = entry.charCodeAt(0);\n\t\t\t\t\t\tinputmask.ignorable = false; //make sure ignorable is ignored ;-)\n\t\t\t\t\t\tEventHandlers.keypressEvent.call(input, keypress);\n\t\t\t\t\t});\n\t\t\t\t\tsetTimeout(function () {  //#2195 trigger keyup to help some other plugins to track changes\n\t\t\t\t\t\tinputmask.$el.trigger(\"keyup\");\n\t\t\t\t\t}, 0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"deleteContentBackward\":\n\t\t\t\t\tvar keydown = new $.Event(\"keydown\");\n\t\t\t\t\tkeydown.keyCode = keyCode.BACKSPACE;\n\t\t\t\t\tEventHandlers.keydownEvent.call(input, keydown);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tapplyInputValue(input, inputValue);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\te.preventDefault();\n\t\t}\n\t},\n\tcompositionendEvent: function (e) {\n\t\tconst inputmask = this.inputmask;\n\n\t\tinputmask.isComposing = false;\n\t\tinputmask.$el.trigger(\"input\");\n\t},\n\tsetValueEvent: function (e) {\n\t\tconst inputmask = this.inputmask;\n\t\tvar input = this,\n\t\t\tvalue = (e && e.detail) ? e.detail[0] : arguments[1];\n\n\t\tif (value === undefined) {\n\t\t\tvalue = input.inputmask._valueGet(true);\n\t\t}\n\n\t\tapplyInputValue(input, value);\n\n\t\tif ((e.detail && e.detail[1] !== undefined) || arguments[2] !== undefined) {\n\t\t\tcaret.call(inputmask, input, e.detail ? e.detail[1] : arguments[2]);\n\t\t}\n\t}\n\t,\n\tfocusEvent: function (e) {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts;\n\t\tvar input = this,\n\t\t\tnptValue = input.inputmask._valueGet();\n\n\t\tif (opts.showMaskOnFocus) {\n\t\t\tif (nptValue !== getBuffer.call(inputmask).join(\"\")) {\n\t\t\t\twriteBuffer(input, getBuffer.call(inputmask), seekNext.call(inputmask, getLastValidPosition.call(inputmask)));\n\t\t\t} /*else if (mouseEnter === false) { //only executed on focus without mouseenter\n\t\t\t\t\tcaret(input, seekNext(getLastValidPosition()));\n\t\t\t\t}*/\n\t\t}\n\t\tif (opts.positionCaretOnTab === true && inputmask.mouseEnter === false && (!isComplete.call(inputmask, getBuffer.call(inputmask)) || getLastValidPosition.call(inputmask) === -1)) {\n\t\t\tEventHandlers.clickEvent.apply(input, [e, true]);\n\t\t}\n\t\tinputmask.undoValue = getBuffer.call(inputmask).join(\"\");\n\t},\n\tinvalidEvent: function (e) {\n\t\tthis.inputmask.validationEvent = true;\n\t},\n\tmouseleaveEvent: function () {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts;\n\n\t\tvar input = this;\n\t\tinputmask.mouseEnter = false;\n\t\tif (opts.clearMaskOnLostFocus && (input.inputmask.shadowRoot || document).activeElement !== input) {\n\t\t\tHandleNativePlaceholder(input, inputmask.originalPlaceholder);\n\t\t}\n\t},\n\tclickEvent: function (e, tabbed) {\n\t\tconst inputmask = this.inputmask;\n\n\t\tvar input = this;\n\t\tif ((input.inputmask.shadowRoot || document).activeElement === input) {\n\t\t\tvar newCaretPosition = determineNewCaretPosition.call(inputmask, caret.call(inputmask, input), tabbed);\n\t\t\tif (newCaretPosition !== undefined) {\n\t\t\t\tcaret.call(inputmask, input, newCaretPosition);\n\t\t\t}\n\t\t}\n\t},\n\tcutEvent: function (e) {\n\t\tconst inputmask = this.inputmask, maskset = inputmask.maskset;\n\n\t\tvar input = this,\n\t\t\tpos = caret.call(inputmask, input);\n\n\t\t//correct clipboardData\n\t\tvar clipboardData = window.clipboardData || e.clipboardData,\n\t\t\tclipData = inputmask.isRTL ? getBuffer.call(inputmask).slice(pos.end, pos.begin) : getBuffer.call(inputmask).slice(pos.begin, pos.end);\n\t\tclipboardData.setData(\"text\", inputmask.isRTL ? clipData.reverse().join(\"\") : clipData.join(\"\"));\n\t\tif (document.execCommand) document.execCommand(\"copy\"); // copy selected content to system clipbaord\n\n\t\thandleRemove.call(inputmask, input, keyCode.DELETE, pos);\n\t\twriteBuffer(input, getBuffer.call(inputmask), maskset.p, e, inputmask.undoValue !== getBuffer.call(inputmask).join(\"\"));\n\t}\n\t,\n\tblurEvent: function (e) {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts, $ = inputmask.dependencyLib;\n\n\t\tvar $input = $(this),\n\t\t\tinput = this;\n\t\tif (input.inputmask) {\n\t\t\tHandleNativePlaceholder(input, inputmask.originalPlaceholder);\n\t\t\tvar nptValue = input.inputmask._valueGet(),\n\t\t\t\tbuffer = getBuffer.call(inputmask).slice();\n\n\t\t\tif (nptValue !== \"\") {\n\t\t\t\tif (opts.clearMaskOnLostFocus) {\n\t\t\t\t\tif (getLastValidPosition.call(inputmask) === -1 && nptValue === getBufferTemplate.call(inputmask).join(\"\")) {\n\t\t\t\t\t\tbuffer = [];\n\t\t\t\t\t} else { //clearout optional tail of the mask\n\t\t\t\t\t\tclearOptionalTail.call(inputmask, buffer);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (isComplete.call(inputmask, buffer) === false) {\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t$input.trigger(\"incomplete\");\n\t\t\t\t\t}, 0);\n\t\t\t\t\tif (opts.clearIncomplete) {\n\t\t\t\t\t\tresetMaskSet.call(inputmask);\n\t\t\t\t\t\tif (opts.clearMaskOnLostFocus) {\n\t\t\t\t\t\t\tbuffer = [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tbuffer = getBufferTemplate.call(inputmask).slice();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\twriteBuffer(input, buffer, undefined, e);\n\t\t\t}\n\n\t\t\tif (inputmask.undoValue !== getBuffer.call(inputmask).join(\"\")) {\n\t\t\t\tinputmask.undoValue = getBuffer.call(inputmask).join(\"\");\n\t\t\t\t$input.trigger(\"change\");\n\t\t\t}\n\t\t}\n\t}\n\t,\n\tmouseenterEvent: function () {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts;\n\n\t\tvar input = this;\n\t\tinputmask.mouseEnter = true;\n\t\tif ((input.inputmask.shadowRoot || document).activeElement !== input) {\n\t\t\tif (inputmask.originalPlaceholder == undefined && input.placeholder !== inputmask.originalPlaceholder) {\n\t\t\t\tinputmask.originalPlaceholder = input.placeholder;\n\t\t\t}\n\t\t\tif (opts.showMaskOnHover) {\n\t\t\t\tHandleNativePlaceholder(input, (inputmask.isRTL ? getBufferTemplate.call(inputmask).slice().reverse() : getBufferTemplate.call(inputmask)).join(\"\"));\n\t\t\t}\n\t\t}\n\t}\n\t,\n\tsubmitEvent: function () { //trigger change on submit if any\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts;\n\n\t\tif (inputmask.undoValue !== getBuffer.call(inputmask).join(\"\")) {\n\t\t\tinputmask.$el.trigger(\"change\");\n\t\t}\n\t\tif (opts.clearMaskOnLostFocus && getLastValidPosition.call(inputmask) === -1 && inputmask._valueGet && inputmask._valueGet() === getBufferTemplate.call(inputmask).join(\"\")) {\n\t\t\tinputmask._valueSet(\"\"); //clear masktemplete on submit and still has focus\n\t\t}\n\t\tif (opts.clearIncomplete && isComplete.call(inputmask, getBuffer.call(inputmask)) === false) {\n\t\t\tinputmask._valueSet(\"\");\n\t\t}\n\t\tif (opts.removeMaskOnSubmit) {\n\t\t\tinputmask._valueSet(inputmask.unmaskedvalue(), true);\n\t\t\tsetTimeout(function () {\n\t\t\t\twriteBuffer(inputmask.el, getBuffer.call(inputmask));\n\t\t\t}, 0);\n\t\t}\n\t},\n\tresetEvent: function () {\n\t\tconst inputmask = this.inputmask;\n\n\t\tinputmask.refreshValue = true; //indicate a forced refresh when there is a call to the value before leaving the triggering event fn\n\t\tsetTimeout(function () {\n\t\t\tapplyInputValue(inputmask.el, inputmask._valueGet(true));\n\t\t}, 0);\n\t}\n};\n","import {\n\tdetermineTestTemplate,\n\tgetDecisionTaker,\n\tgetPlaceholder,\n\tgetTest,\n\tgetTests,\n\tgetTestTemplate\n} from \"./validation-tests\";\nimport keyCode from \"./keycode.json\";\nimport {\n\tdetermineLastRequiredPosition, determineNewCaretPosition,\n\tgetBuffer,\n\tgetLastValidPosition,\n\tisMask,\n\tresetMaskSet,\n\tseekNext,\n\tseekPrevious\n} from \"./positioning\";\nimport {EventHandlers} from \"./eventhandlers\";\n\nexport {alternate, checkAlternationMatch, isComplete, isValid, refreshFromBuffer, revalidateMask, handleRemove};\n\n//tobe put on prototype?\nfunction alternate(maskPos, c, strict, fromIsValid, rAltPos, selection) { //pos == true => generalize\n\tconst inputmask = this,\n\t\t$ = this.dependencyLib,\n\t\topts = this.opts,\n\t\tmaskset = inputmask.maskset;\n\n\tvar validPsClone = $.extend(true, {}, maskset.validPositions),\n\t\ttstClone = $.extend(true, {}, maskset.tests),\n\t\tlastAlt,\n\t\talternation,\n\t\tisValidRslt = false, returnRslt = false,\n\t\taltPos, prevAltPos, i, validPos,\n\t\tdecisionPos,\n\t\tlAltPos = rAltPos !== undefined ? rAltPos : getLastValidPosition.call(inputmask), nextPos, input, begin, end;\n\n\tif (selection) {\n\t\tbegin = selection.begin;\n\t\tend = selection.end;\n\t\tif (selection.begin > selection.end) {\n\t\t\tbegin = selection.end;\n\t\t\tend = selection.begin;\n\t\t}\n\t}\n\tif (lAltPos === -1 && rAltPos === undefined) { //do not recurse when already paste the beginning\n\t\tlastAlt = 0;\n\t\tprevAltPos = getTest.call(inputmask, lastAlt);\n\t\talternation = prevAltPos.alternation;\n\t} else {\n\t\t//find last modified alternation\n\t\tfor (; lAltPos >= 0; lAltPos--) {\n\t\t\taltPos = maskset.validPositions[lAltPos];\n\t\t\tif (altPos && altPos.alternation !== undefined) {\n\t\t\t\tif (prevAltPos && prevAltPos.locator[altPos.alternation] !== altPos.locator[altPos.alternation]) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tlastAlt = lAltPos;\n\t\t\t\talternation = maskset.validPositions[lastAlt].alternation;\n\t\t\t\tprevAltPos = altPos;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (alternation !== undefined) {\n\t\tdecisionPos = parseInt(lastAlt);\n\t\tmaskset.excludes[decisionPos] = maskset.excludes[decisionPos] || [];\n\t\tif (maskPos !== true) { //generalize\n\t\t\tmaskset.excludes[decisionPos].push(getDecisionTaker(prevAltPos) + \":\" + prevAltPos.alternation);\n\t\t}\n\n\t\tvar validInputs = [], resultPos = -1;\n\t\tfor (i = decisionPos; i < getLastValidPosition.call(inputmask, undefined, true) + 1; i++) {\n\t\t\tif (resultPos === -1 && maskPos <= i && c !== undefined) {\n\t\t\t\tvalidInputs.push(c);\n\t\t\t\tresultPos = validInputs.length - 1;\n\t\t\t}\n\t\t\tvalidPos = maskset.validPositions[i];\n\t\t\tif (validPos && validPos.generatedInput !== true && (selection === undefined || (i < begin || i >= end))) {\n\t\t\t\tvalidInputs.push(validPos.input);\n\t\t\t}\n\t\t\tdelete maskset.validPositions[i];\n\t\t}\n\t\tif (resultPos === -1 && c !== undefined) {\n\t\t\tvalidInputs.push(c);\n\t\t\tresultPos = validInputs.length - 1;\n\t\t}\n\n\t\twhile (maskset.excludes[decisionPos] !== undefined && maskset.excludes[decisionPos].length < 10) {\n\t\t\t// maskset.tests[decisionPos] = undefined; //clear decisionPos\n\t\t\tmaskset.tests = {};  //clear all\n\t\t\tresetMaskSet.call(inputmask, true); //clear getbuffer\n\t\t\tisValidRslt = true;\n\t\t\tfor (i = 0; i < validInputs.length; i++) {\n\t\t\t\tnextPos = isValidRslt.caret || (getLastValidPosition.call(inputmask, undefined, true) + 1);\n\t\t\t\tinput = validInputs[i];\n\t\t\t\tif (!(isValidRslt = isValid.call(inputmask, nextPos, input, false, fromIsValid, true))) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (i === resultPos) {\n\t\t\t\t\treturnRslt = isValidRslt;\n\t\t\t\t}\n\t\t\t\tif (maskPos == true && isValidRslt) {  //return validposition on generalise\n\t\t\t\t\treturnRslt = {caretPos: i};\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!isValidRslt) {\n\t\t\t\tresetMaskSet.call(inputmask);\n\t\t\t\tprevAltPos = getTest.call(inputmask, decisionPos);  //get the current decisionPos to exclude ~ needs to be before restoring the initial validation\n\t\t\t\t//reset & revert\n\t\t\t\tmaskset.validPositions = $.extend(true, {}, validPsClone);\n\t\t\t\tmaskset.tests = $.extend(true, {}, tstClone); //refresh tests after possible alternating\n\t\t\t\tif (maskset.excludes[decisionPos]) {\n\t\t\t\t\tvar decisionTaker = getDecisionTaker(prevAltPos);\n\t\t\t\t\tif (maskset.excludes[decisionPos].indexOf(decisionTaker + \":\" + prevAltPos.alternation) !== -1) {\n\t\t\t\t\t\treturnRslt = alternate.call(inputmask, maskPos, c, strict, fromIsValid, decisionPos - 1, selection);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tmaskset.excludes[decisionPos].push(decisionTaker + \":\" + prevAltPos.alternation);\n\t\t\t\t\tfor (i = decisionPos; i < getLastValidPosition.call(inputmask, undefined, true) + 1; i++) delete maskset.validPositions[i];\n\t\t\t\t} else { //latest alternation\n\t\t\t\t\treturnRslt = alternate.call(inputmask, maskPos, c, strict, fromIsValid, decisionPos - 1, selection);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\t//reset alternation excludes\n\tif (!returnRslt || opts.keepStatic !== false) {\n\t\tdelete maskset.excludes[decisionPos];\n\t}\n\treturn returnRslt;\n}\n\nfunction casing(elem, test, pos) {\n\tconst opts = this.opts,\n\t\tmaskset = this.maskset;\n\n\tswitch (opts.casing || test.casing) {\n\t\tcase \"upper\":\n\t\t\telem = elem.toUpperCase();\n\t\t\tbreak;\n\t\tcase \"lower\":\n\t\t\telem = elem.toLowerCase();\n\t\t\tbreak;\n\t\tcase \"title\":\n\t\t\tvar posBefore = maskset.validPositions[pos - 1];\n\t\t\tif (pos === 0 || posBefore && posBefore.input === String.fromCharCode(keyCode.SPACE)) {\n\t\t\t\telem = elem.toUpperCase();\n\t\t\t} else {\n\t\t\t\telem = elem.toLowerCase();\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tif (typeof opts.casing === \"function\") {\n\t\t\t\tvar args = Array.prototype.slice.call(arguments);\n\t\t\t\targs.push(maskset.validPositions);\n\t\t\t\telem = opts.casing.apply(this, args);\n\t\t\t}\n\t}\n\n\treturn elem;\n}\n\n//tobe put on prototype?\nfunction checkAlternationMatch(altArr1, altArr2, na) {\n\tconst opts = this.opts;\n\n\tvar altArrC = opts.greedy ? altArr2 : altArr2.slice(0, 1),\n\t\tisMatch = false,\n\t\tnaArr = na !== undefined ? na.split(\",\") : [],\n\t\tnaNdx;\n\n\t//remove no alternate indexes from alternation array\n\tfor (var i = 0; i < naArr.length; i++) {\n\t\tif ((naNdx = altArr1.indexOf(naArr[i])) !== -1) {\n\t\t\taltArr1.splice(naNdx, 1);\n\t\t}\n\t}\n\n\tfor (var alndx = 0; alndx < altArr1.length; alndx++) {\n\t\tif (altArrC.includes(altArr1[alndx])) {\n\t\t\tisMatch = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn isMatch;\n}\n\n//tobe put on prototype?\nfunction handleRemove(input, k, pos, strict, fromIsValid) {\n\tconst inputmask = this, maskset = this.maskset, opts = this.opts;\n\n\tif (opts.numericInput || inputmask.isRTL) {\n\t\tif (k === keyCode.BACKSPACE) {\n\t\t\tk = keyCode.DELETE;\n\t\t} else if (k === keyCode.DELETE) {\n\t\t\tk = keyCode.BACKSPACE;\n\t\t}\n\n\t\tif (inputmask.isRTL) {\n\t\t\tvar pend = pos.end;\n\t\t\tpos.end = pos.begin;\n\t\t\tpos.begin = pend;\n\t\t}\n\t}\n\n\tvar lvp = getLastValidPosition.call(inputmask, undefined, true);\n\tif (pos.end >= getBuffer.call(inputmask).length && lvp >= pos.end) { //handle numeric negate symbol offset, due to  dynamic jit masking\n\t\tpos.end = lvp + 1;\n\t}\n\n\tif (k === keyCode.BACKSPACE) {\n\t\tif ((pos.end - pos.begin < 1)) {\n\t\t\tpos.begin = seekPrevious.call(inputmask, pos.begin);\n\t\t}\n\t} else if (k === keyCode.DELETE) {\n\t\tif (pos.begin === pos.end) {\n\t\t\tpos.end = isMask.call(inputmask, pos.end, true, true) ? pos.end + 1 : seekNext.call(inputmask, pos.end) + 1;\n\t\t}\n\t}\n\tvar offset;\n\tif ((offset = revalidateMask.call(inputmask, pos)) !== false) {\n\t\tif (strict !== true && opts.keepStatic !== false || (opts.regex !== null && getTest.call(inputmask, pos.begin).match.def.indexOf(\"|\") !== -1)) { //TODO NEEDS BETTER CHECK WHEN TO ALTERNATE  ~ opts regex isn\"t good enough\n\t\t\tvar result = alternate.call(inputmask, true);\n\t\t\tif (result) {\n\t\t\t\tvar newPos = result.caret !== undefined ? result.caret : (result.pos ? seekNext.call(inputmask, result.pos.begin ? result.pos.begin : result.pos) : getLastValidPosition.call(inputmask, -1, true));\n\t\t\t\tif (k !== keyCode.DELETE || pos.begin > newPos) {\n\t\t\t\t\tpos.begin == newPos;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (strict !== true) {\n\t\t\tmaskset.p = k === keyCode.DELETE ? pos.begin + offset : pos.begin;\n\t\t}\n\t}\n}\n\n//tobe put on prototype?\nfunction isComplete(buffer) { //return true / false / undefined (repeat *)\n\tconst inputmask = this, opts = this.opts, maskset = this.maskset;\n\n\tif (typeof opts.isComplete === \"function\") return opts.isComplete(buffer, opts);\n\tif (opts.repeat === \"*\") return undefined;\n\tvar complete = false,\n\t\tlrp = determineLastRequiredPosition.call(inputmask, true),\n\t\taml = seekPrevious.call(inputmask, lrp.l);\n\n\tif (lrp.def === undefined || lrp.def.newBlockMarker || lrp.def.optionality || lrp.def.optionalQuantifier) {\n\t\tcomplete = true;\n\t\tfor (var i = 0; i <= aml; i++) {\n\t\t\tvar test = getTestTemplate.call(inputmask, i).match;\n\t\t\tif ((test.static !== true && maskset.validPositions[i] === undefined && test.optionality !== true && test.optionalQuantifier !== true) || (test.static === true && buffer[i] !== getPlaceholder.call(inputmask, i, test))) {\n\t\t\t\tcomplete = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn complete;\n}\n\n//tobe put on prototype?\nfunction isValid(pos, c, strict, fromIsValid, fromAlternate, validateOnly, fromCheckval) { //strict true ~ no correction or autofill\n\tconst inputmask = this,\n\t\t$ = this.dependencyLib,\n\t\topts = this.opts,\n\t\tel = inputmask.el,\n\t\tmaskset = inputmask.maskset;\n\n\tfunction isSelection(posObj) {\n\t\treturn inputmask.isRTL ? (posObj.begin - posObj.end) > 1 || ((posObj.begin - posObj.end) === 1) :\n\t\t\t(posObj.end - posObj.begin) > 1 || ((posObj.end - posObj.begin) === 1);\n\t}\n\n\tstrict = strict === true; //always set a value to strict to prevent possible strange behavior in the extensions\n\n\tvar maskPos = pos;\n\tif (pos.begin !== undefined) { //position was a position object - used to handle a delete by typing over a selection\n\t\tmaskPos = inputmask.isRTL ? pos.end : pos.begin;\n\t}\n\n\tfunction processCommandObject(commandObj) {\n\t\tif (commandObj !== undefined) {\n\t\t\tif (commandObj.remove !== undefined) { //remove position(s)\n\t\t\t\tif (!Array.isArray(commandObj.remove)) commandObj.remove = [commandObj.remove];\n\t\t\t\tcommandObj.remove.sort(function (a, b) {\n\t\t\t\t\treturn b.pos - a.pos;\n\t\t\t\t}).forEach(function (lmnt) {\n\t\t\t\t\trevalidateMask.call(inputmask, {begin: lmnt, end: lmnt + 1});\n\t\t\t\t});\n\t\t\t\tcommandObj.remove = undefined;\n\t\t\t}\n\t\t\tif (commandObj.insert !== undefined) { //insert position(s)\n\t\t\t\tif (!Array.isArray(commandObj.insert)) commandObj.insert = [commandObj.insert];\n\t\t\t\tcommandObj.insert.sort(function (a, b) {\n\t\t\t\t\treturn a.pos - b.pos;\n\t\t\t\t}).forEach(function (lmnt) {\n\t\t\t\t\tif (lmnt.c !== \"\") {\n\t\t\t\t\t\tisValid.call(inputmask, lmnt.pos, lmnt.c, lmnt.strict !== undefined ? lmnt.strict : true, lmnt.fromIsValid !== undefined ? lmnt.fromIsValid : fromIsValid);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tcommandObj.insert = undefined;\n\t\t\t}\n\n\t\t\tif (commandObj.refreshFromBuffer && commandObj.buffer) {\n\t\t\t\tvar refresh = commandObj.refreshFromBuffer;\n\t\t\t\trefreshFromBuffer.call(inputmask, refresh === true ? refresh : refresh.start, refresh.end, commandObj.buffer);\n\t\t\t\tcommandObj.refreshFromBuffer = undefined;\n\t\t\t}\n\n\t\t\tif (commandObj.rewritePosition !== undefined) {\n\t\t\t\tmaskPos = commandObj.rewritePosition;\n\t\t\t\t// commandObj.rewritePosition = undefined;\n\t\t\t\tcommandObj = true;\n\t\t\t}\n\t\t}\n\t\treturn commandObj;\n\t}\n\n\tfunction _isValid(position, c, strict) {\n\t\tvar rslt = false;\n\n\t\tgetTests.call(inputmask, position).every(function (tst, ndx) {\n\t\t\tvar test = tst.match;\n\t\t\t//make sure the buffer is set and correct\n\t\t\tgetBuffer.call(inputmask, true);\n\t\t\t//return is false or a json object => { pos: ??, c: ??} or true\n\t\t\trslt = test.fn != null ?\n\t\t\t\ttest.fn.test(c, maskset, position, strict, opts, isSelection(pos)) : (c === test.def || c === opts.skipOptionalPartCharacter) && test.def !== \"\" ? //non mask\n\t\t\t\t\t{\n\t\t\t\t\t\tc: getPlaceholder.call(inputmask, position, test, true) || test.def,\n\t\t\t\t\t\tpos: position\n\t\t\t\t\t} : false;\n\n\t\t\tif (rslt !== false) {\n\t\t\t\tvar elem = rslt.c !== undefined ? rslt.c : c, validatedPos = position;\n\t\t\t\telem = (elem === opts.skipOptionalPartCharacter && test.static === true) ?\n\t\t\t\t\t(getPlaceholder.call(inputmask, position, test, true) || test.def) : elem;\n\n\t\t\t\trslt = processCommandObject(rslt);\n\n\t\t\t\tif (rslt !== true && rslt.pos !== undefined && rslt.pos !== position) { //their is a position offset\n\t\t\t\t\tvalidatedPos = rslt.pos;\n\t\t\t\t}\n\n\t\t\t\tif (rslt !== true && rslt.pos === undefined && rslt.c === undefined) {\n\t\t\t\t\treturn false; //breakout if nothing to insert\n\t\t\t\t}\n\n\t\t\t\tif (revalidateMask.call(inputmask, pos, $.extend({}, tst, {\n\t\t\t\t\t\"input\": casing.call(inputmask, elem, test, validatedPos)\n\t\t\t\t}), fromIsValid, validatedPos) === false) {\n\t\t\t\t\trslt = false;\n\t\t\t\t}\n\t\t\t\treturn false; //break from loop\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\t\treturn rslt;\n\t}\n\n\tvar result = true,\n\t\tpositionsClone = $.extend(true, {}, maskset.validPositions); //clone the currentPositions\n\n\tif (opts.keepStatic === false && maskset.excludes[maskPos] !== undefined && fromAlternate !== true && fromIsValid !== true) {\n\t\tfor (var i = maskPos; i < (inputmask.isRTL ? pos.begin : pos.end); i++) {\n\t\t\tif (maskset.excludes[i] !== undefined) {\n\t\t\t\tmaskset.excludes[i] = undefined;\n\t\t\t\tdelete maskset.tests[i];\n\t\t\t}\n\t\t}\n\t}\n\n\tif (typeof opts.preValidation === \"function\" && fromIsValid !== true && validateOnly !== true) {\n\t\tresult = opts.preValidation.call(el, getBuffer.call(inputmask), maskPos, c, isSelection(pos), opts, maskset, pos, strict || fromAlternate);\n\t\tresult = processCommandObject(result);\n\t}\n\tif (result === true) { //preValidation result\n\t\tif (inputmask.maxLength === undefined || maskPos < inputmask.maxLength) {\n\t\t\tresult = _isValid(maskPos, c, strict);\n\t\t\tif ((!strict || fromIsValid === true) && result === false && validateOnly !== true) {\n\t\t\t\tvar currentPosValid = maskset.validPositions[maskPos];\n\t\t\t\tif (currentPosValid && currentPosValid.match.static === true && (currentPosValid.match.def === c || c === opts.skipOptionalPartCharacter)) {\n\t\t\t\t\tresult = {\n\t\t\t\t\t\t\"caret\": seekNext.call(inputmask, maskPos)\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tif (opts.insertMode || maskset.validPositions[seekNext.call(inputmask, maskPos)] === undefined || pos.end > maskPos) { //does the input match on a further position?\n\t\t\t\t\t\tvar skip = false;\n\t\t\t\t\t\tif (maskset.jitOffset[maskPos] && maskset.validPositions[seekNext.call(inputmask, maskPos)] === undefined) {\n\t\t\t\t\t\t\tresult = isValid.call(inputmask, maskPos + maskset.jitOffset[maskPos], c, true);\n\t\t\t\t\t\t\tif (result !== false) {\n\t\t\t\t\t\t\t\tif (fromAlternate !== true) result.caret = maskPos;\n\t\t\t\t\t\t\t\tskip = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (pos.end > maskPos) {\n\t\t\t\t\t\t\tmaskset.validPositions[maskPos] = undefined;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!skip && !isMask.call(inputmask, maskPos, opts.keepStatic && maskPos === 0)) {\n\t\t\t\t\t\t\tfor (var nPos = maskPos + 1, snPos = seekNext.call(inputmask, maskPos, false, maskPos !== 0); nPos <= snPos; nPos++) {\n\t\t\t\t\t\t\t\t// if (!isMask(nPos, true)) {\n\t\t\t\t\t\t\t\t// \tcontinue;\n\t\t\t\t\t\t\t\t// }\n\t\t\t\t\t\t\t\tresult = _isValid(nPos, c, strict);\n\t\t\t\t\t\t\t\tif (result !== false) {\n\t\t\t\t\t\t\t\t\tresult = trackbackPositions.call(inputmask, maskPos, result.pos !== undefined ? result.pos : nPos) || result;\n\t\t\t\t\t\t\t\t\tmaskPos = nPos;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tresult = false;\n\t\t}\n\n\n\t\tif (result === false && opts.keepStatic && (isComplete.call(inputmask, getBuffer.call(inputmask)) || maskPos === 0) && !strict && fromAlternate !== true) { //try fuzzy alternator logic\n\t\t\tresult = alternate.call(inputmask, maskPos, c, strict, fromIsValid, undefined, pos);\n\t\t} else if (isSelection(pos) && maskset.tests[maskPos] && maskset.tests[maskPos].length > 1 && opts.keepStatic && !strict && fromAlternate !== true) { //selection clears an alternated keepstatic mask ~ #2189\n\t\t\tresult = alternate.call(inputmask, true);\n\t\t}\n\n\t\tif (result === true) {\n\t\t\tresult = {\n\t\t\t\t\"pos\": maskPos\n\t\t\t};\n\t\t}\n\t}\n\tif (typeof opts.postValidation === \"function\" && fromIsValid !== true && validateOnly !== true) {\n\t\tvar postResult = opts.postValidation.call(el, getBuffer.call(inputmask, true), pos.begin !== undefined ? (inputmask.isRTL ? pos.end : pos.begin) : pos, c, result, opts, maskset, strict, fromCheckval);\n\t\tif (postResult !== undefined) {\n\t\t\tresult = postResult === true ? result : postResult;\n\t\t}\n\t}\n\n\tif (result && result.pos === undefined) {\n\t\tresult.pos = maskPos;\n\t}\n\n\tif (result === false || validateOnly === true) {\n\t\tresetMaskSet.call(inputmask, true);\n\t\tmaskset.validPositions = $.extend(true, {}, positionsClone); //revert validation changes\n\t} else {\n\t\ttrackbackPositions.call(inputmask, undefined, maskPos, true);\n\t}\n\n\tvar endResult = processCommandObject(result);\n\t// console.log(\"returned result \" + JSON.stringify(endResult));\n\treturn endResult;\n}\n\n//tobe put on prototype?\nfunction positionCanMatchDefinition(pos, testDefinition, opts) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset;\n\n\tvar valid = false,\n\t\ttests = getTests.call(inputmask, pos);\n\tfor (var tndx = 0; tndx < tests.length; tndx++) {\n\t\tif (tests[tndx].match &&\n\t\t\t((tests[tndx].match[\"nativeDef\"] === testDefinition.match[opts.shiftPositions ? \"def\" : \"nativeDef\"] && (!opts.shiftPositions || !testDefinition.match.static)) ||\n\t\t\t\ttests[tndx].match[\"nativeDef\"] === testDefinition.match[\"nativeDef\"])) {\n\t\t\tvalid = true;\n\t\t\tbreak;\n\t\t} else if (tests[tndx].match && tests[tndx].match[\"def\"] === testDefinition.match[\"nativeDef\"]) {\n\t\t\tvalid = undefined;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (valid === false) {\n\t\tif (maskset.jitOffset[pos] !== undefined) {\n\t\t\tvalid = positionCanMatchDefinition.call(inputmask, pos + maskset.jitOffset[pos], testDefinition, opts);\n\t\t}\n\t}\n\treturn valid;\n}\n\n//tobe put on prototype?\nfunction refreshFromBuffer(start, end, buffer) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset,\n\t\topts = this.opts,\n\t\t$ = this.dependencyLib,\n\t\tel = inputmask.el;\n\n\t// checkVal.call(inputmask, el, false, true, isRTL ? buffer.reverse() : buffer);\n\tvar i, p, skipOptionalPartCharacter = opts.skipOptionalPartCharacter,\n\t\tbffr = inputmask.isRTL ? buffer.slice().reverse() : buffer;\n\topts.skipOptionalPartCharacter = \"\";\n\tif (start === true) {\n\t\tresetMaskSet.call(inputmask);\n\t\tmaskset.tests = {}; //refresh tests after possible alternating\n\t\tstart = 0;\n\t\tend = buffer.length;\n\t\tp = determineNewCaretPosition.call(inputmask, {begin: 0, end: 0}, false).begin;\n\t} else {\n\t\tfor (i = start; i < end; i++) {\n\t\t\tdelete maskset.validPositions[i];\n\t\t}\n\t\tp = start;\n\t}\n\n\tvar keypress = new $.Event(\"keypress\");\n\tfor (i = start; i < end; i++) {\n\t\tkeypress.which = bffr[i].toString().charCodeAt(0);\n\t\tinputmask.ignorable = false; //make sure ignorable is ignored ;-)\n\t\tvar valResult = EventHandlers.keypressEvent.call(el, keypress, true, false, false, p);\n\t\tif (valResult !== false) {\n\t\t\tp = valResult.forwardPosition;\n\t\t}\n\t}\n\n\topts.skipOptionalPartCharacter = skipOptionalPartCharacter;\n}\n\n//tobe put on prototype?\n//fill in best positions according the current input\nfunction trackbackPositions(originalPos, newPos, fillOnly) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset,\n\t\t$ = this.dependencyLib;\n\n\t// console.log(\"trackbackPositions \" + originalPos + \" \" + newPos);\n\tif (originalPos === undefined) {\n\t\t//find previous valid\n\t\tfor (originalPos = newPos - 1; originalPos > 0; originalPos--) {\n\t\t\tif (maskset.validPositions[originalPos]) break;\n\t\t}\n\t}\n\tfor (var ps = originalPos; ps < newPos; ps++) {\n\t\tif (maskset.validPositions[ps] === undefined && !isMask.call(inputmask, ps, true)) {\n\t\t\tvar vp = ps == 0 ? getTest.call(inputmask, ps) : maskset.validPositions[ps - 1];\n\t\t\tif (vp) {\n\t\t\t\tvar tests = getTests.call(inputmask, ps).slice();\n\t\t\t\tif (tests[tests.length - 1].match.def === \"\") tests.pop();\n\t\t\t\tvar bestMatch = determineTestTemplate.call(inputmask, ps, tests), np;\n\t\t\t\tif (bestMatch && (bestMatch.match.jit !== true || (bestMatch.match.newBlockMarker === \"master\" && (np = maskset.validPositions[ps + 1]) && np.match.optionalQuantifier === true))) {\n\t\t\t\t\tbestMatch = $.extend({}, bestMatch, {\n\t\t\t\t\t\t\"input\": getPlaceholder.call(inputmask, ps, bestMatch.match, true) || bestMatch.match.def\n\t\t\t\t\t});\n\t\t\t\t\tbestMatch.generatedInput = true;\n\t\t\t\t\trevalidateMask.call(inputmask, ps, bestMatch, true);\n\n\t\t\t\t\tif (fillOnly !== true) {\n\t\t\t\t\t\t//revalidate the new position to update the locator value\n\t\t\t\t\t\tvar cvpInput = maskset.validPositions[newPos].input;\n\t\t\t\t\t\tmaskset.validPositions[newPos] = undefined;\n\t\t\t\t\t\treturn isValid.call(inputmask, newPos, cvpInput, true, true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n//tobe put on prototype?\nfunction revalidateMask(pos, validTest, fromIsValid, validatedPos) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset,\n\t\topts = this.opts,\n\t\t$ = this.dependencyLib;\n\n\tfunction IsEnclosedStatic(pos, valids, selection) {\n\t\tvar posMatch = valids[pos];\n\t\tif (posMatch !== undefined && posMatch.match.static === true && posMatch.match.optionality !== true && (valids[0] === undefined || valids[0].alternation === undefined)) {\n\t\t\tvar prevMatch = selection.begin <= pos - 1 ? valids[pos - 1] && valids[pos - 1].match.static === true && valids[pos - 1] : valids[pos - 1],\n\t\t\t\tnextMatch = selection.end > pos + 1 ? valids[pos + 1] && valids[pos + 1].match.static === true && valids[pos + 1] : valids[pos + 1];\n\t\t\treturn prevMatch && nextMatch;\n\t\t}\n\t\treturn false;\n\t}\n\n\tvar offset = 0, begin = pos.begin !== undefined ? pos.begin : pos, end = pos.end !== undefined ? pos.end : pos;\n\tif (pos.begin > pos.end) {\n\t\tbegin = pos.end;\n\t\tend = pos.begin;\n\t}\n\n\tvalidatedPos = validatedPos !== undefined ? validatedPos : begin;\n\tif (begin !== end || (opts.insertMode && maskset.validPositions[validatedPos] !== undefined && fromIsValid === undefined) || validTest === undefined) {\n\t\t//reposition & revalidate others\n\t\tvar positionsClone = $.extend(true, {}, maskset.validPositions),\n\t\t\tlvp = getLastValidPosition.call(inputmask, undefined, true),\n\t\t\ti;\n\t\tmaskset.p = begin; //needed for alternated position after overtype selection\n\n\t\tfor (i = lvp; i >= begin; i--) {\n\t\t\tdelete maskset.validPositions[i];\n\t\t\tif (validTest === undefined) delete maskset.tests[i + 1];\n\t\t}\n\n\t\tvar valid = true, j = validatedPos,\n\t\t\tposMatch = j, t, canMatch;\n\n\t\tif (validTest) {\n\t\t\tmaskset.validPositions[validatedPos] = $.extend(true, {}, validTest);\n\t\t\tposMatch++;\n\t\t\tj++;\n\t\t}\n\n\t\tfor (i = validTest ? end : end - 1; i <= lvp; i++) {\n\t\t\tif ((t = positionsClone[i]) !== undefined && t.generatedInput !== true &&\n\t\t\t\t(i >= end || (i >= begin && IsEnclosedStatic(i, positionsClone, {\n\t\t\t\t\tbegin: begin,\n\t\t\t\t\tend: end\n\t\t\t\t})))) {\n\t\t\t\twhile (getTest.call(inputmask, posMatch).match.def !== \"\") { //loop needed to match further positions\n\t\t\t\t\tif ((canMatch = positionCanMatchDefinition.call(inputmask, posMatch, t, opts)) !== false || t.match.def === \"+\") { //validated match //we still need some hackery for the + validator (numeric alias)\n\t\t\t\t\t\tif (t.match.def === \"+\") getBuffer.call(inputmask, true);\n\t\t\t\t\t\tvar result = isValid.call(inputmask, posMatch, t.input, t.match.def !== \"+\", t.match.def !== \"+\");\n\t\t\t\t\t\tvalid = result !== false;\n\t\t\t\t\t\tj = (result.pos || posMatch) + 1;\n\t\t\t\t\t\tif (!valid && canMatch) break;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t}\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\tif (validTest === undefined && t.match.static && i === pos.begin) offset++;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (!valid && posMatch > maskset.maskLength) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tposMatch++;\n\t\t\t\t}\n\t\t\t\tif (getTest.call(inputmask, posMatch).match.def == \"\") {\n\t\t\t\t\tvalid = false;\n\t\t\t\t}\n\t\t\t\t//restore position\n\t\t\t\tposMatch = j;\n\t\t\t}\n\t\t\tif (!valid) break;\n\t\t}\n\n\t\tif (!valid) {\n\t\t\tmaskset.validPositions = $.extend(true, {}, positionsClone);\n\t\t\tresetMaskSet.call(inputmask, true);\n\t\t\treturn false;\n\t\t}\n\t} else if (validTest && getTest.call(inputmask, validatedPos).match.cd === validTest.match.cd) {\n\t\tmaskset.validPositions[validatedPos] = $.extend(true, {}, validTest);\n\t}\n\n\tresetMaskSet.call(inputmask, true);\n\treturn offset;\n}\n","import {\n\tdetermineTestTemplate,\n\tgetMaskTemplate,\n\tgetPlaceholder,\n\tgetTest,\n\tgetTests,\n\tgetTestTemplate\n} from \"./validation-tests\";\nimport {checkAlternationMatch} from \"./validation\";\nimport {mask} from \"./mask\";\n\nexport {\n\tcaret,\n\tdetermineLastRequiredPosition,\n\tdetermineNewCaretPosition,\n\tgetBuffer,\n\tgetBufferTemplate,\n\tgetLastValidPosition,\n\tisMask,\n\tresetMaskSet,\n\tseekNext,\n\tseekPrevious,\n\ttranslatePosition\n};\n\n//tobe put on prototype?\nfunction caret(input, begin, end, notranslate, isDelete) {\n\tconst inputmask = this,\n\t\topts = this.opts;\n\n\tvar range;\n\tif (begin !== undefined) {\n\t\tif (Array.isArray(begin)) {\n\t\t\tend = inputmask.isRTL ? begin[0] : begin[1];\n\t\t\tbegin = inputmask.isRTL ? begin[1] : begin[0];\n\t\t}\n\t\tif (begin.begin !== undefined) {\n\t\t\tend = inputmask.isRTL ? begin.begin : begin.end;\n\t\t\tbegin = inputmask.isRTL ? begin.end : begin.begin;\n\t\t}\n\t\tif (typeof begin === \"number\") {\n\t\t\tbegin = notranslate ? begin : translatePosition.call(inputmask, begin);\n\t\t\tend = notranslate ? end : translatePosition.call(inputmask, end);\n\t\t\tend = (typeof end == \"number\") ? end : begin;\n\t\t\t// if (!$(input).is(\":visible\")) {\n\t\t\t// \treturn;\n\t\t\t// }\n\n\t\t\tvar scrollCalc = parseInt(((input.ownerDocument.defaultView || window).getComputedStyle ? (input.ownerDocument.defaultView || window).getComputedStyle(input, null) : input.currentStyle).fontSize) * end;\n\t\t\tinput.scrollLeft = scrollCalc > input.scrollWidth ? scrollCalc : 0;\n\t\t\tinput.inputmask.caretPos = {begin: begin, end: end}; //track caret internally\n\t\t\tif (opts.insertModeVisual && opts.insertMode === false && begin === end) {\n\t\t\t\tif (!isDelete) {\n\t\t\t\t\tend++; //set visualization for insert/overwrite mode\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (input === (input.inputmask.shadowRoot || document).activeElement) {\n\t\t\t\tif (\"setSelectionRange\" in input) {\n\t\t\t\t\tinput.setSelectionRange(begin, end);\n\t\t\t\t} else if (window.getSelection) {\n\t\t\t\t\trange = document.createRange();\n\t\t\t\t\tif (input.firstChild === undefined || input.firstChild === null) {\n\t\t\t\t\t\tvar textNode = document.createTextNode(\"\");\n\t\t\t\t\t\tinput.appendChild(textNode);\n\t\t\t\t\t}\n\t\t\t\t\trange.setStart(input.firstChild, begin < input.inputmask._valueGet().length ? begin : input.inputmask._valueGet().length);\n\t\t\t\t\trange.setEnd(input.firstChild, end < input.inputmask._valueGet().length ? end : input.inputmask._valueGet().length);\n\t\t\t\t\trange.collapse(true);\n\t\t\t\t\tvar sel = window.getSelection();\n\t\t\t\t\tsel.removeAllRanges();\n\t\t\t\t\tsel.addRange(range);\n\t\t\t\t\t//input.focus();\n\t\t\t\t} else if (input.createTextRange) {\n\t\t\t\t\trange = input.createTextRange();\n\t\t\t\t\trange.collapse(true);\n\t\t\t\t\trange.moveEnd(\"character\", end);\n\t\t\t\t\trange.moveStart(\"character\", begin);\n\t\t\t\t\trange.select();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (\"selectionStart\" in input && \"selectionEnd\" in input) {\n\t\t\tbegin = input.selectionStart;\n\t\t\tend = input.selectionEnd;\n\t\t} else if (window.getSelection) {\n\t\t\trange = window.getSelection().getRangeAt(0);\n\t\t\tif (range.commonAncestorContainer.parentNode === input || range.commonAncestorContainer === input) {\n\t\t\t\tbegin = range.startOffset;\n\t\t\t\tend = range.endOffset;\n\t\t\t}\n\t\t} else if (document.selection && document.selection.createRange) {\n\t\t\trange = document.selection.createRange();\n\t\t\tbegin = 0 - range.duplicate().moveStart(\"character\", -input.inputmask._valueGet().length);\n\t\t\tend = begin + range.text.length;\n\t\t}\n\n\t\t// if (opts.insertModeVisual && opts.insertMode === false && begin === (end - 1)) end--; //correct caret for insert/overwrite mode\n\n\t\t/*eslint-disable consistent-return */\n\t\treturn {\n\t\t\t\"begin\": notranslate ? begin : translatePosition.call(inputmask, begin),\n\t\t\t\"end\": notranslate ? end : translatePosition.call(inputmask, end)\n\t\t};\n\t\t/*eslint-enable consistent-return */\n\t}\n}\n\n//tobe put on prototype?\nfunction determineLastRequiredPosition(returnDefinition) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset,\n\t\t$ = this.dependencyLib;\n\n\tvar buffer = getMaskTemplate.call(inputmask, true, getLastValidPosition.call(inputmask), true, true),\n\t\tbl = buffer.length,\n\t\tpos, lvp = getLastValidPosition.call(inputmask),\n\t\tpositions = {},\n\t\tlvTest = maskset.validPositions[lvp],\n\t\tndxIntlzr = lvTest !== undefined ? lvTest.locator.slice() : undefined,\n\t\ttestPos;\n\tfor (pos = lvp + 1; pos < buffer.length; pos++) {\n\t\ttestPos = getTestTemplate.call(inputmask, pos, ndxIntlzr, pos - 1);\n\t\tndxIntlzr = testPos.locator.slice();\n\t\tpositions[pos] = $.extend(true, {}, testPos);\n\t}\n\n\tvar lvTestAlt = lvTest && lvTest.alternation !== undefined ? lvTest.locator[lvTest.alternation] : undefined;\n\tfor (pos = bl - 1; pos > lvp; pos--) {\n\t\ttestPos = positions[pos];\n\t\tif ((testPos.match.optionality ||\n\t\t\t(testPos.match.optionalQuantifier && testPos.match.newBlockMarker) ||\n\t\t\t(lvTestAlt &&\n\t\t\t\t(\n\t\t\t\t\t(lvTestAlt !== positions[pos].locator[lvTest.alternation] && testPos.match.static != true) ||\n\t\t\t\t\t(testPos.match.static === true &&\n\t\t\t\t\t\ttestPos.locator[lvTest.alternation] &&\n\t\t\t\t\t\tcheckAlternationMatch.call(inputmask, testPos.locator[lvTest.alternation].toString().split(\",\"), lvTestAlt.toString().split(\",\")) &&\n\t\t\t\t\t\tgetTests.call(inputmask, pos)[0].def !== \"\")\n\t\t\t\t)\n\t\t\t)) &&\n\t\t\tbuffer[pos] === getPlaceholder.call(inputmask, pos, testPos.match)) {\n\t\t\tbl--;\n\t\t} else {\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn returnDefinition ? {\n\t\t\"l\": bl,\n\t\t\"def\": positions[bl] ? positions[bl].match : undefined\n\t} : bl;\n}\n\n//tobe put on prototype?\nfunction determineNewCaretPosition(selectedCaret, tabbed) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset,\n\t\topts = this.opts;\n\n\tfunction doRadixFocus(clickPos) {\n\t\tif (opts.radixPoint !== \"\" && opts.digits !== 0) {\n\t\t\tvar vps = maskset.validPositions;\n\t\t\tif (vps[clickPos] === undefined || (vps[clickPos].input === getPlaceholder.call(inputmask, clickPos))) {\n\t\t\t\tif (clickPos < seekNext.call(inputmask, -1)) return true;\n\t\t\t\tvar radixPos = getBuffer.call(inputmask).indexOf(opts.radixPoint);\n\t\t\t\tif (radixPos !== -1) {\n\t\t\t\t\tfor (var vp in vps) {\n\t\t\t\t\t\tif (vps[vp] && radixPos < vp && vps[vp].input !== getPlaceholder.call(inputmask, vp)) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tif (tabbed) {\n\t\tif (inputmask.isRTL) {\n\t\t\tselectedCaret.end = selectedCaret.begin;\n\t\t} else {\n\t\t\tselectedCaret.begin = selectedCaret.end;\n\t\t}\n\t}\n\tif (selectedCaret.begin === selectedCaret.end) {\n\t\tswitch (opts.positionCaretOnClick) {\n\t\t\tcase \"none\":\n\t\t\t\tbreak;\n\t\t\tcase \"select\":\n\t\t\t\tselectedCaret = {begin: 0, end: getBuffer.call(inputmask).length};\n\t\t\t\tbreak;\n\t\t\tcase \"ignore\":\n\t\t\t\tselectedCaret.end = selectedCaret.begin = seekNext.call(inputmask, getLastValidPosition.call(inputmask));\n\t\t\t\tbreak;\n\t\t\tcase \"radixFocus\":\n\t\t\t\tif (doRadixFocus(selectedCaret.begin)) {\n\t\t\t\t\tvar radixPos = getBuffer.call(inputmask).join(\"\").indexOf(opts.radixPoint);\n\t\t\t\t\tselectedCaret.end = selectedCaret.begin = opts.numericInput ? seekNext.call(inputmask, radixPos) : radixPos;\n\t\t\t\t\tbreak;\n\t\t\t\t} //fallback to lvp\n\t\t\t// eslint-disable-next-line no-fallthrough\n\t\t\tdefault: //lvp:\n\t\t\t\tvar clickPosition = selectedCaret.begin,\n\t\t\t\t\tlvclickPosition = getLastValidPosition.call(inputmask, clickPosition, true),\n\t\t\t\t\tlastPosition = seekNext.call(inputmask, (lvclickPosition === -1 && !isMask.call(inputmask, 0)) ? -1 : lvclickPosition);\n\n\t\t\t\tif (clickPosition <= lastPosition) {\n\t\t\t\t\tselectedCaret.end = selectedCaret.begin = !isMask.call(inputmask, clickPosition, false, true) ? seekNext.call(inputmask, clickPosition) : clickPosition;\n\t\t\t\t} else {\n\t\t\t\t\tvar lvp = maskset.validPositions[lvclickPosition],\n\t\t\t\t\t\ttt = getTestTemplate.call(inputmask, lastPosition, lvp ? lvp.match.locator : undefined, lvp),\n\t\t\t\t\t\tplaceholder = getPlaceholder.call(inputmask, lastPosition, tt.match);\n\t\t\t\t\tif ((placeholder !== \"\" && getBuffer.call(inputmask)[lastPosition] !== placeholder && tt.match.optionalQuantifier !== true && tt.match.newBlockMarker !== true) || (!isMask.call(inputmask, lastPosition, opts.keepStatic, true) && tt.match.def === placeholder)) {\n\t\t\t\t\t\tvar newPos = seekNext.call(inputmask, lastPosition);\n\t\t\t\t\t\tif (clickPosition >= newPos || clickPosition === lastPosition) {\n\t\t\t\t\t\t\tlastPosition = newPos;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tselectedCaret.end = selectedCaret.begin = lastPosition;\n\t\t\t\t}\n\t\t}\n\n\t\treturn selectedCaret;\n\t}\n}\n\n\n//tobe put on prototype?\nfunction getBuffer(noCache) {\n\tconst inputmask = this, maskset = this.maskset;\n\n\tif (maskset.buffer === undefined || noCache === true) {\n\t\tmaskset.buffer = getMaskTemplate.call(inputmask, true, getLastValidPosition.call(inputmask), true);\n\t\tif (maskset._buffer === undefined) maskset._buffer = maskset.buffer.slice();\n\t}\n\treturn maskset.buffer;\n}\n\n//tobe put on prototype?\nfunction getBufferTemplate() {\n\tconst inputmask = this, maskset = this.maskset;\n\n\tif (maskset._buffer === undefined) {\n\t\t//generate template\n\t\tmaskset._buffer = getMaskTemplate.call(inputmask, false, 1);\n\t\tif (maskset.buffer === undefined) maskset.buffer = maskset._buffer.slice();\n\t}\n\treturn maskset._buffer;\n}\n\n//tobe put on prototype?\nfunction getLastValidPosition(closestTo, strict, validPositions) {\n\tconst maskset = this.maskset;\n\n\tvar before = -1,\n\t\tafter = -1,\n\t\tvalids = validPositions || maskset.validPositions; //for use in valhook ~ context switch\n\tif (closestTo === undefined) closestTo = -1;\n\tfor (var posNdx in valids) {\n\t\tvar psNdx = parseInt(posNdx);\n\t\tif (valids[psNdx] && (strict || valids[psNdx].generatedInput !== true)) {\n\t\t\tif (psNdx <= closestTo) before = psNdx;\n\t\t\tif (psNdx >= closestTo) after = psNdx;\n\t\t}\n\t}\n\treturn (before === -1 || before == closestTo) ? after : after == -1 ? before : (closestTo - before) < (after - closestTo) ? before : after;\n}\n\n//tobe put on prototype?\nfunction isMask(pos, strict, fuzzy) {\n\tconst inputmask = this, maskset = this.maskset;\n\n\tvar test = getTestTemplate.call(inputmask, pos).match;\n\tif (test.def === \"\") test = getTest.call(inputmask, pos).match;\n\n\tif (test.static !== true) {\n\t\treturn test.fn;\n\t}\n\tif (fuzzy === true && (maskset.validPositions[pos] !== undefined && maskset.validPositions[pos].generatedInput !== true)) {\n\t\treturn true;\n\t}\n\n\tif (strict !== true && pos > -1) {\n\t\tif (fuzzy) { //check on the number of tests\n\t\t\tvar tests = getTests.call(inputmask, pos);\n\t\t\treturn tests.length > (1 + (tests[tests.length - 1].match.def === \"\" ? 1 : 0));\n\t\t}\n\t\t//else based on the template\n\t\tvar testTemplate = determineTestTemplate.call(inputmask, pos, getTests.call(inputmask, pos));\n\t\tvar testPlaceHolder = getPlaceholder.call(inputmask, pos, testTemplate.match);\n\t\treturn testTemplate.match.def !== testPlaceHolder;\n\n\t}\n\treturn false;\n}\n\n//tobe put on prototype?\nfunction resetMaskSet(soft) {\n\tconst maskset = this.maskset;\n\n\tmaskset.buffer = undefined;\n\tif (soft !== true) {\n\t\tmaskset.validPositions = {};\n\t\tmaskset.p = 0;\n\t}\n}\n\n//tobe put on prototype?\nfunction seekNext(pos, newBlock, fuzzy) {\n\tconst inputmask = this;\n\n\tif (fuzzy === undefined) fuzzy = true;\n\tvar position = pos + 1;\n\twhile (getTest.call(inputmask, position).match.def !== \"\" &&\n\t((newBlock === true && (getTest.call(inputmask, position).match.newBlockMarker !== true || !isMask.call(inputmask, position, undefined, true))) ||\n\t\t(newBlock !== true && !isMask.call(inputmask, position, undefined, fuzzy)))) {\n\t\tposition++;\n\t}\n\treturn position;\n}\n\n//tobe put on prototype?\nfunction seekPrevious(pos, newBlock) {\n\tconst inputmask = this;\n\n\tvar position = pos - 1;\n\tif (pos <= 0) return 0;\n\n\twhile (position > 0 &&\n\t((newBlock === true && (getTest.call(inputmask, position).match.newBlockMarker !== true || !isMask.call(inputmask, position, undefined, true))) ||\n\t\t(newBlock !== true && !isMask.call(inputmask, position, undefined, true)))) {\n\t\tposition--;\n\t}\n\treturn position;\n}\n\n//tobe put on prototype?\nfunction translatePosition(pos) {\n\tconst inputmask = this,\n\t\topts = this.opts,\n\t\tel = this.el;\n\n\tif (inputmask.isRTL && typeof pos === \"number\" && (!opts.greedy || opts.placeholder !== \"\") && el) {\n\t\tpos = inputmask._valueGet().length - pos;\n\t}\n\treturn pos;\n}\n","import Inputmask from \"./inputmask\";\nimport keyCode from \"./keycode.json\";\nimport {getBufferTemplate} from \"./positioning\";\nimport {HandleNativePlaceholder} from \"./inputHandling\";\n\nexport {EventRuler};\n\nvar EventRuler = {\n\ton: function (input, eventName, eventHandler) {\n\t\tconst $ = input.inputmask.dependencyLib;\n\n\t\tvar ev = function (e) {\n\t\t\tif (e.originalEvent) {\n\t\t\t\te = e.originalEvent || e; //get original event from jquery evenbt\n\t\t\t\targuments[0] = e;\n\t\t\t}\n\t\t\t// console.log(e.type);\n\t\t\tvar that = this, args, inputmask = that.inputmask, opts = inputmask ? inputmask.opts : undefined,\n\t\t\t\t$ = inputmask.dependencyLib;\n\t\t\tif (inputmask === undefined && this.nodeName !== \"FORM\") { //happens when cloning an object with jquery.clone\n\t\t\t\tvar imOpts = $.data(that, \"_inputmask_opts\");\n\t\t\t\t$(that).off(); //unbind all events\n\t\t\t\tif (imOpts) {\n\t\t\t\t\t(new Inputmask(imOpts)).mask(that);\n\t\t\t\t}\n\t\t\t} else if (e.type !== \"setvalue\" && this.nodeName !== \"FORM\" && (that.disabled || (that.readOnly && !(e.type === \"keydown\" && (e.ctrlKey && e.keyCode === 67) || (opts.tabThrough === false && e.keyCode === keyCode.TAB))))) {\n\t\t\t\te.preventDefault();\n\t\t\t} else {\n\t\t\t\tswitch (e.type) {\n\t\t\t\t\tcase \"input\":\n\t\t\t\t\t\tif (inputmask.skipInputEvent === true || (e.inputType && e.inputType === \"insertCompositionText\")) {\n\t\t\t\t\t\t\tinputmask.skipInputEvent = false;\n\t\t\t\t\t\t\treturn e.preventDefault();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// if (mobile) { //this causes problem see #2220\n\t\t\t\t\t\t// \targs = arguments;\n\t\t\t\t\t\t// \tsetTimeout(function () { //needed for caret selection when entering a char on Android 8 - #1818\n\t\t\t\t\t\t// \t\teventHandler.apply(that, args);\n\t\t\t\t\t\t// \t\tcaret(that, that.inputmask.caretPos, undefined, true);\n\t\t\t\t\t\t// \t}, 0);\n\t\t\t\t\t\t// \treturn false;\n\t\t\t\t\t\t// }\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"keydown\":\n\t\t\t\t\t\t//Safari 5.1.x - modal dialog fires keypress twice workaround\n\t\t\t\t\t\tinputmask.skipKeyPressEvent = false;\n\t\t\t\t\t\tinputmask.skipInputEvent = inputmask.isComposing = e.keyCode === keyCode.KEY_229;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"keyup\":\n\t\t\t\t\tcase \"compositionend\":\n\t\t\t\t\t\tif (inputmask.isComposing) {\n\t\t\t\t\t\t\tinputmask.skipInputEvent = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"keypress\":\n\t\t\t\t\t\tif (inputmask.skipKeyPressEvent === true) {\n\t\t\t\t\t\t\treturn e.preventDefault();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tinputmask.skipKeyPressEvent = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"click\":\n\t\t\t\t\tcase \"focus\":\n\t\t\t\t\t\tif (inputmask.validationEvent) { // #841\n\t\t\t\t\t\t\tinputmask.validationEvent = false;\n\t\t\t\t\t\t\tinput.blur();\n\t\t\t\t\t\t\tHandleNativePlaceholder(input, (inputmask.isRTL ? getBufferTemplate.call(inputmask).slice().reverse() : getBufferTemplate.call(inputmask)).join(\"\"));\n\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\t\t}, 3000);\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\targs = arguments;\n\t\t\t\t\t\tsetTimeout(function () { //needed for Chrome ~ initial selection clears after the clickevent\n\t\t\t\t\t\t\tif (!input.inputmask) {\n\t\t\t\t\t\t\t\t// `inputmask.remove()` was called before this callback\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\teventHandler.apply(that, args);\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvar returnVal = eventHandler.apply(that, arguments);\n\t\t\t\tif (returnVal === false) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\treturn returnVal;\n\t\t\t}\n\t\t};\n\t\t//keep instance of the event\n\t\tinput.inputmask.events[eventName] = input.inputmask.events[eventName] || [];\n\t\tinput.inputmask.events[eventName].push(ev);\n\n\t\tif ([\"submit\", \"reset\"].includes(eventName)) {\n\t\t\tif (input.form !== null) $(input.form).on(eventName, ev.bind(input));\n\t\t} else {\n\t\t\t$(input).on(eventName, ev);\n\t\t}\n\t},\n\toff: function (input, event) {\n\t\tif (input.inputmask && input.inputmask.events) {\n\t\t\tconst $ = input.inputmask.dependencyLib;\n\t\t\tlet events = input.inputmask.events;\n\t\t\tif (event) {\n\t\t\t\tevents = [];\n\t\t\t\tevents[event] = input.inputmask.events[event];\n\t\t\t}\n\t\t\tfor (let eventName in events) {\n\t\t\t\tlet evArr = events[eventName];\n\t\t\t\twhile (evArr.length > 0) {\n\t\t\t\t\tlet ev = evArr.pop();\n\t\t\t\t\tif ([\"submit\", \"reset\",].includes(eventName)) {\n\t\t\t\t\t\tif (input.form !== null) $(input.form).off(eventName, ev);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(input).off(eventName, ev);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdelete input.inputmask.events[eventName];\n\t\t\t}\n\t\t}\n\t}\n};","import \"./getPrototypeOf\";\nimport keyCode from \"./keycode.json\";\nimport {caret, getBuffer, getBufferTemplate, getLastValidPosition, resetMaskSet, seekNext} from \"./positioning\";\nimport {applyInputValue, clearOptionalTail, writeBuffer} from \"./inputHandling\";\nimport {EventRuler} from \"./eventruler\";\nimport {iphone, mobile} from \"./environment\";\nimport {isComplete} from \"./validation\";\nimport {EventHandlers} from \"./eventhandlers\";\n\nexport{mask};\n\n//todo put on the prototype?\nfunction mask() {\n\tconst inputmask = this,\n\t\topts= this.opts,\n\tel=this.el,$=this.dependencyLib;\n\n\n\tfunction isElementTypeSupported(input, opts) {\n\t\tfunction patchValueProperty(npt) {\n\t\t\tvar valueGet;\n\t\t\tvar valueSet;\n\n\t\t\tfunction patchValhook(type) {\n\t\t\t\tif ($.valHooks && ($.valHooks[type] === undefined || $.valHooks[type].inputmaskpatch !== true)) {\n\t\t\t\t\tvar valhookGet = $.valHooks[type] && $.valHooks[type].get ? $.valHooks[type].get : function (elem) {\n\t\t\t\t\t\treturn elem.value;\n\t\t\t\t\t};\n\t\t\t\t\tvar valhookSet = $.valHooks[type] && $.valHooks[type].set ? $.valHooks[type].set : function (elem, value) {\n\t\t\t\t\t\telem.value = value;\n\t\t\t\t\t\treturn elem;\n\t\t\t\t\t};\n\n\t\t\t\t\t$.valHooks[type] = {\n\t\t\t\t\t\tget: function (elem) {\n\t\t\t\t\t\t\tif (elem.inputmask) {\n\t\t\t\t\t\t\t\tif (elem.inputmask.opts.autoUnmask) {\n\t\t\t\t\t\t\t\t\treturn elem.inputmask.unmaskedvalue();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tvar result = valhookGet(elem);\n\t\t\t\t\t\t\t\t\treturn getLastValidPosition.call(inputmask, undefined, undefined, elem.inputmask.maskset.validPositions) !== -1 || opts.nullable !== true ? result : \"\";\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn valhookGet(elem);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tset: function (elem, value) {\n\t\t\t\t\t\t\tvar result = valhookSet(elem, value);\n\t\t\t\t\t\t\tif (elem.inputmask) {\n\t\t\t\t\t\t\t\tapplyInputValue(elem, value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinputmaskpatch: true\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction getter() {\n\t\t\t\tif (this.inputmask) {\n\t\t\t\t\treturn this.inputmask.opts.autoUnmask ?\n\t\t\t\t\t\tthis.inputmask.unmaskedvalue() :\n\t\t\t\t\t\t(getLastValidPosition.call(inputmask) !== -1 || opts.nullable !== true ?\n\t\t\t\t\t\t\t((this.inputmask.shadowRoot || document.activeElement) === this && opts.clearMaskOnLostFocus ?\n\t\t\t\t\t\t\t\t(inputmask.isRTL ? clearOptionalTail.call(inputmask,getBuffer.call(inputmask).slice()).reverse() : clearOptionalTail.call(inputmask,getBuffer.call(inputmask).slice())).join(\"\") :\n\t\t\t\t\t\t\t\tvalueGet.call(this)) :\n\t\t\t\t\t\t\t\"\");\n\t\t\t\t} else {\n\t\t\t\t\treturn valueGet.call(this);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction setter(value) {\n\t\t\t\tvalueSet.call(this, value);\n\t\t\t\tif (this.inputmask) {\n\t\t\t\t\tapplyInputValue(this, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction installNativeValueSetFallback(npt) {\n\t\t\t\tEventRuler.on(npt, \"mouseenter\", function () {\n\t\t\t\t\tvar input = this,\n\t\t\t\t\t\tvalue = input.inputmask._valueGet(true);\n\t\t\t\t\tif (value !== (inputmask.isRTL ? getBuffer.call(inputmask).reverse() : getBuffer.call(inputmask)).join(\"\")) { //Is this correct? to apply RTL? TOCHECK\n\t\t\t\t\t\tapplyInputValue(input, value);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (!npt.inputmask.__valueGet) {\n\t\t\t\tif (opts.noValuePatching !== true) {\n\t\t\t\t\tif (Object.getOwnPropertyDescriptor) {\n\t\t\t\t\t\tvar valueProperty = Object.getPrototypeOf ? Object.getOwnPropertyDescriptor(Object.getPrototypeOf(npt), \"value\") : undefined;\n\t\t\t\t\t\tif (valueProperty && valueProperty.get && valueProperty.set) {\n\t\t\t\t\t\t\tvalueGet = valueProperty.get;\n\t\t\t\t\t\t\tvalueSet = valueProperty.set;\n\t\t\t\t\t\t\tObject.defineProperty(npt, \"value\", {\n\t\t\t\t\t\t\t\tget: getter,\n\t\t\t\t\t\t\t\tset: setter,\n\t\t\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else if (npt.tagName.toLowerCase() !== \"input\") {\n\t\t\t\t\t\t\tvalueGet = function () {\n\t\t\t\t\t\t\t\treturn this.textContent;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tvalueSet = function (value) {\n\t\t\t\t\t\t\t\tthis.textContent = value;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tObject.defineProperty(npt, \"value\", {\n\t\t\t\t\t\t\t\tget: getter,\n\t\t\t\t\t\t\t\tset: setter,\n\t\t\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (document.__lookupGetter__ && npt.__lookupGetter__(\"value\")) {\n\t\t\t\t\t\tvalueGet = npt.__lookupGetter__(\"value\");\n\t\t\t\t\t\tvalueSet = npt.__lookupSetter__(\"value\");\n\n\t\t\t\t\t\tnpt.__defineGetter__(\"value\", getter);\n\t\t\t\t\t\tnpt.__defineSetter__(\"value\", setter);\n\t\t\t\t\t}\n\t\t\t\t\tnpt.inputmask.__valueGet = valueGet; //store native property getter\n\t\t\t\t\tnpt.inputmask.__valueSet = valueSet; //store native property setter\n\t\t\t\t}\n\t\t\t\tnpt.inputmask._valueGet = function (overruleRTL) {\n\t\t\t\t\treturn inputmask.isRTL && overruleRTL !== true ? valueGet.call(this.el).split(\"\").reverse().join(\"\") : valueGet.call(this.el);\n\t\t\t\t};\n\t\t\t\tnpt.inputmask._valueSet = function (value, overruleRTL) { //null check is needed for IE8 => otherwise converts to \"null\"\n\t\t\t\t\tvalueSet.call(this.el, (value === null || value === undefined) ? \"\" : ((overruleRTL !== true && inputmask.isRTL) ? value.split(\"\").reverse().join(\"\") : value));\n\t\t\t\t};\n\n\t\t\t\tif (valueGet === undefined) { //jquery.val fallback\n\t\t\t\t\tvalueGet = function () {\n\t\t\t\t\t\treturn this.value;\n\t\t\t\t\t};\n\t\t\t\t\tvalueSet = function (value) {\n\t\t\t\t\t\tthis.value = value;\n\t\t\t\t\t};\n\t\t\t\t\tpatchValhook(npt.type);\n\t\t\t\t\tinstallNativeValueSetFallback(npt);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (input.tagName.toLowerCase() !== \"textarea\") {\n\t\t\topts.ignorables.push(keyCode.ENTER);\n\t\t}\n\n\t\tvar elementType = input.getAttribute(\"type\");\n\t\tvar isSupported = (input.tagName.toLowerCase() === \"input\" && opts.supportsInputType.includes(elementType)) || input.isContentEditable || input.tagName.toLowerCase() === \"textarea\";\n\t\tif (!isSupported) {\n\t\t\tif (input.tagName.toLowerCase() === \"input\") {\n\t\t\t\tvar el = document.createElement(\"input\");\n\t\t\t\tel.setAttribute(\"type\", elementType);\n\t\t\t\tisSupported = el.type === \"text\"; //apply mask only if the type is not natively supported\n\t\t\t\tel = null;\n\t\t\t} else {\n\t\t\t\tisSupported = \"partial\";\n\t\t\t}\n\t\t}\n\t\tif (isSupported !== false) {\n\t\t\tpatchValueProperty(input);\n\t\t} else {\n\t\t\tinput.inputmask = undefined;\n\t\t}\n\t\treturn isSupported;\n\t}\n\n\t//unbind all events - to make sure that no other mask will interfere when re-masking\n\tEventRuler.off(el);\n\tvar isSupported = isElementTypeSupported(el, opts);\n\tif (isSupported !== false) {\n\t\tinputmask.originalPlaceholder = el.placeholder;\n\n\t\t//read maxlength prop from el\n\t\tinputmask.maxLength = el !== undefined ? el.maxLength : undefined;\n\t\tif (inputmask.maxLength === -1) inputmask.maxLength = undefined;\n\t\tif (\"inputMode\" in el && el.getAttribute(\"inputmode\") === null) {\n\t\t\tel.inputMode = opts.inputmode;\n\t\t\tel.setAttribute(\"inputmode\", opts.inputmode);\n\t\t}\n\n\n\t\tif (isSupported === true) {\n\t\t\topts.showMaskOnFocus = opts.showMaskOnFocus && [\"cc-number\", \"cc-exp\"].indexOf(el.autocomplete) === -1;\n\t\t\tif (iphone) { //selecting the caret shows as a slection on iphone\n\t\t\t\topts.insertModeVisual = false;\n\t\t\t}\n\n\t\t\t//bind events\n\t\t\tEventRuler.on(el, \"submit\", EventHandlers.submitEvent);\n\t\t\tEventRuler.on(el, \"reset\", EventHandlers.resetEvent);\n\t\t\tEventRuler.on(el, \"blur\", EventHandlers.blurEvent);\n\t\t\tEventRuler.on(el, \"focus\", EventHandlers.focusEvent);\n\t\t\tEventRuler.on(el, \"invalid\", EventHandlers.invalidEvent);\n\t\t\tEventRuler.on(el, \"click\", EventHandlers.clickEvent);\n\t\t\tEventRuler.on(el, \"mouseleave\", EventHandlers.mouseleaveEvent);\n\t\t\tEventRuler.on(el, \"mouseenter\", EventHandlers.mouseenterEvent);\n\t\t\tEventRuler.on(el, \"paste\", EventHandlers.pasteEvent);\n\t\t\tEventRuler.on(el, \"cut\", EventHandlers.cutEvent);\n\t\t\tEventRuler.on(el, \"complete\", opts.oncomplete);\n\t\t\tEventRuler.on(el, \"incomplete\", opts.onincomplete);\n\t\t\tEventRuler.on(el, \"cleared\", opts.oncleared);\n\t\t\tif (opts.inputEventOnly !== true) {\n\t\t\t\tEventRuler.on(el, \"keydown\", EventHandlers.keydownEvent);\n\t\t\t\tEventRuler.on(el, \"keypress\", EventHandlers.keypressEvent);\n\t\t\t\tEventRuler.on(el, \"keyup\", EventHandlers.keyupEvent);\n\t\t\t}\n\t\t\tif (mobile || opts.inputEventOnly) {\n\t\t\t\tel.removeAttribute(\"maxLength\");\n\t\t\t}\n\t\t\tEventRuler.on(el, \"input\", EventHandlers.inputFallBackEvent);\n\t\t\tEventRuler.on(el, \"compositionend\", EventHandlers.compositionendEvent);\n\t\t\t// EventRuler.on(el, \"beforeinput\", EventHandlers.beforeInputEvent); //https://github.com/w3c/input-events - to implement\n\t\t}\n\t\tEventRuler.on(el, \"setvalue\", EventHandlers.setValueEvent);\n\n\t\t//apply mask\n\t\tinputmask.undoValue = getBufferTemplate.call(inputmask).join(\"\"); //initialize the buffer and getmasklength\n\t\tvar activeElement = (el.inputmask.shadowRoot || document).activeElement;\n\t\tif (el.inputmask._valueGet(true) !== \"\" || opts.clearMaskOnLostFocus === false || activeElement === el) {\n\t\t\tapplyInputValue(el, el.inputmask._valueGet(true), opts);\n\t\t\tvar buffer = getBuffer.call(inputmask).slice();\n\t\t\tif (isComplete.call(inputmask, buffer) === false) {\n\t\t\t\tif (opts.clearIncomplete) {\n\t\t\t\t\tresetMaskSet.call(inputmask);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (opts.clearMaskOnLostFocus && activeElement !== el) {\n\t\t\t\tif (getLastValidPosition.call(inputmask) === -1) {\n\t\t\t\t\tbuffer = [];\n\t\t\t\t} else {\n\t\t\t\t\tclearOptionalTail.call(inputmask, buffer);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (opts.clearMaskOnLostFocus === false || (opts.showMaskOnFocus && activeElement === el) || el.inputmask._valueGet(true) !== \"\") {\n\t\t\t\twriteBuffer(el, buffer);\n\t\t\t}\n\t\t\tif (activeElement === el) { //position the caret when in focus\n\t\t\t\tcaret.call(inputmask,el, seekNext.call(inputmask, getLastValidPosition.call(inputmask)));\n\t\t\t}\n\t\t}\n\t}\n}","export default function extend() {\n\tlet options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[0] || {},\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === \"boolean\") {\n\t\tdeep = target;\n\n\t\t// Skip the boolean and the target\n\t\ttarget = arguments[i] || {};\n\t\ti++;\n\t}\n\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif (typeof target !== \"object\" && typeof target !== \"function\") {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; i++) {\n\t\t// Only deal with non-null/undefined values\n\t\tif ((options = arguments[i]) != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = target[name];\n\t\t\t\tcopy = options[name];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target === copy) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif (deep && copy && (Object.prototype.toString.call(copy) === \"[object Object]\" || (copyIsArray = Array.isArray(copy)))) {\n\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\tclone = src && Array.isArray(src) ? src : [];\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src && Object.prototype.toString.call(src) === \"[object Object]\" ? src : {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if (copy !== undefined) {\n\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n}","export default typeof window !== \"undefined\" ? window : new (eval(\"require('jsdom').JSDOM\"))(\"\").window;\n\n","export default function (owner, key, value) {\n\tif (value === undefined) {\n\t\treturn owner.__data ? owner.__data[key] : null;\n\t} else {\n\t\towner.__data = owner.__data || {};\n\t\towner.__data[key] = value;\n\t}\n}","import extend from \"./extend\";\nimport window from \"../global/window\";\nimport DependencyLib from \"./inputmask.dependencyLib\";\n\nexport {on, off, trigger, Event};\n\nfunction isValidElement(elem) {\n\treturn elem instanceof Element;\n}\n\nlet Event;\nif (typeof window.CustomEvent === \"function\") {\n\tEvent = window.CustomEvent;\n} else {\n\tEvent = function (event, params) {\n\t\tparams = params || {bubbles: false, cancelable: false, detail: undefined};\n\t\tvar evt = document.createEvent(\"CustomEvent\");\n\t\tevt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n\t\treturn evt;\n\t};\n\tEvent.prototype = window.Event.prototype;\n}\n\n\nfunction on(events, handler) {\n\tfunction addEvent(ev, namespace) {\n\t\t//register domevent\n\t\tif (elem.addEventListener) { // all browsers except IE before version 9\n\t\t\telem.addEventListener(ev, handler, false);\n\t\t} else if (elem.attachEvent) { // IE before version 9\n\t\t\telem.attachEvent(\"on\" + ev, handler);\n\t\t}\n\t\teventRegistry[ev] = eventRegistry[ev] || {};\n\t\teventRegistry[ev][namespace] = eventRegistry[ev][namespace] || [];\n\t\teventRegistry[ev][namespace].push(handler);\n\t}\n\n\tif (isValidElement(this[0])) {\n\t\tvar eventRegistry = this[0].eventRegistry,\n\t\t\telem = this[0];\n\n\n\t\tvar _events = events.split(\" \");\n\t\tfor (var endx = 0; endx < _events.length; endx++) {\n\t\t\tvar nsEvent = _events[endx].split(\".\"),\n\t\t\t\tev = nsEvent[0],\n\t\t\t\tnamespace = nsEvent[1] || \"global\";\n\t\t\taddEvent(ev, namespace);\n\t\t}\n\t}\n\treturn this;\n}\n\nfunction off(events, handler) {\n\tvar eventRegistry, elem;\n\n\tfunction removeEvent(ev, namespace, handler) {\n\t\tif (ev in eventRegistry === true) {\n\t\t\t//unbind to dom events\n\t\t\tif (elem.removeEventListener) { // all browsers except IE before version 9\n\t\t\t\telem.removeEventListener(ev, handler, false);\n\t\t\t} else if (elem.detachEvent) { // IE before version 9\n\t\t\t\telem.detachEvent(\"on\" + ev, handler);\n\t\t\t}\n\t\t\tif (namespace === \"global\") {\n\t\t\t\tfor (var nmsp in eventRegistry[ev]) {\n\t\t\t\t\teventRegistry[ev][nmsp].splice(eventRegistry[ev][nmsp].indexOf(handler), 1);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\teventRegistry[ev][namespace].splice(eventRegistry[ev][namespace].indexOf(handler), 1);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction resolveNamespace(ev, namespace) {\n\t\tvar evts = [],\n\t\t\thndx, hndL;\n\t\tif (ev.length > 0) {\n\t\t\tif (handler === undefined) {\n\t\t\t\tfor (hndx = 0, hndL = eventRegistry[ev][namespace].length; hndx < hndL; hndx++) {\n\t\t\t\t\tevts.push({\n\t\t\t\t\t\tev: ev,\n\t\t\t\t\t\tnamespace: namespace && namespace.length > 0 ? namespace : \"global\",\n\t\t\t\t\t\thandler: eventRegistry[ev][namespace][hndx]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tevts.push({\n\t\t\t\t\tev: ev,\n\t\t\t\t\tnamespace: namespace && namespace.length > 0 ? namespace : \"global\",\n\t\t\t\t\thandler: handler\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (namespace.length > 0) {\n\t\t\tfor (var evNdx in eventRegistry) {\n\t\t\t\tfor (var nmsp in eventRegistry[evNdx]) {\n\t\t\t\t\tif (nmsp === namespace) {\n\t\t\t\t\t\tif (handler === undefined) {\n\t\t\t\t\t\t\tfor (hndx = 0, hndL = eventRegistry[evNdx][nmsp].length; hndx < hndL; hndx++) {\n\t\t\t\t\t\t\t\tevts.push({\n\t\t\t\t\t\t\t\t\tev: evNdx,\n\t\t\t\t\t\t\t\t\tnamespace: nmsp,\n\t\t\t\t\t\t\t\t\thandler: eventRegistry[evNdx][nmsp][hndx]\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tevts.push({\n\t\t\t\t\t\t\t\tev: evNdx,\n\t\t\t\t\t\t\t\tnamespace: nmsp,\n\t\t\t\t\t\t\t\thandler: handler\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn evts;\n\t}\n\n\tif (isValidElement(this[0])) {\n\t\teventRegistry = this[0].eventRegistry;\n\t\telem = this[0];\n\n\n\t\tvar _events = events.split(\" \");\n\t\tfor (var endx = 0; endx < _events.length; endx++) {\n\t\t\tvar nsEvent = _events[endx].split(\".\"),\n\t\t\t\toffEvents = resolveNamespace(nsEvent[0], nsEvent[1]);\n\t\t\tfor (var i = 0, offEventsL = offEvents.length; i < offEventsL; i++) {\n\t\t\t\tremoveEvent(offEvents[i].ev, offEvents[i].namespace, offEvents[i].handler);\n\t\t\t}\n\t\t}\n\t}\n\treturn this;\n}\n\nfunction trigger(events /* , args... */) {\n\tif (isValidElement(this[0])) {\n\t\tvar eventRegistry = this[0].eventRegistry,\n\t\t\telem = this[0];\n\t\tvar _events = typeof events === \"string\" ? events.split(\" \") : [events.type];\n\t\tfor (var endx = 0; endx < _events.length; endx++) {\n\t\t\tvar nsEvent = _events[endx].split(\".\"),\n\t\t\t\tev = nsEvent[0],\n\t\t\t\tnamespace = nsEvent[1] || \"global\";\n\t\t\tif (document !== undefined && namespace === \"global\") {\n\t\t\t\t//trigger domevent\n\t\t\t\tvar evnt, i, params = {\n\t\t\t\t\tbubbles: true,\n\t\t\t\t\tcancelable: true,\n\t\t\t\t\tdetail: arguments[1]\n\t\t\t\t};\n\t\t\t\t// The custom event that will be created\n\t\t\t\tif (document.createEvent) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tevnt = new CustomEvent(ev, params);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tevnt = document.createEvent(\"CustomEvent\");\n\t\t\t\t\t\tevnt.initCustomEvent(ev, params.bubbles, params.cancelable, params.detail);\n\t\t\t\t\t}\n\t\t\t\t\tif (events.type) extend(evnt, events);\n\t\t\t\t\telem.dispatchEvent(evnt);\n\t\t\t\t} else {\n\t\t\t\t\tevnt = document.createEventObject();\n\t\t\t\t\tevnt.eventType = ev;\n\t\t\t\t\tevnt.detail = arguments[1];\n\t\t\t\t\tif (events.type) extend(evnt, events);\n\t\t\t\t\telem.fireEvent(\"on\" + evnt.eventType, evnt);\n\t\t\t\t}\n\t\t\t} else if (eventRegistry[ev] !== undefined) {\n\t\t\t\targuments[0] = arguments[0].type ? arguments[0] : DependencyLib.Event(arguments[0]);\n\t\t\t\targuments[0].detail = arguments.slice(1);\n\t\t\t\tif (namespace === \"global\") {\n\t\t\t\t\tfor (var nmsp in eventRegistry[ev]) {\n\t\t\t\t\t\tfor (i = 0; i < eventRegistry[ev][nmsp].length; i++) {\n\t\t\t\t\t\t\teventRegistry[ev][nmsp][i].apply(elem, arguments);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (i = 0; i < eventRegistry[ev][namespace].length; i++) {\n\t\t\t\t\t\teventRegistry[ev][namespace][i].apply(elem, arguments);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn this;\n}","/*\n Input Mask plugin dependencyLib\n http://github.com/RobinHerbots/jquery.inputmask\n Copyright (c) Robin Herbots\n Licensed under the MIT license\n */\n\nimport extend from \"./extend\";\nimport window from \"../global/window\";\nimport data from \"./data\";\nimport { on, off, trigger, Event} from \"./events\";\n\nconst document = window.document;\n\nfunction DependencyLib(elem) {\n\tif (elem instanceof DependencyLib) {\n\t\treturn elem;\n\t}\n\tif (!(this instanceof DependencyLib)) {\n\t\treturn new DependencyLib(elem);\n\t}\n\tif (elem !== undefined && elem !== null && elem !== window) {\n\t\tthis[0] = elem.nodeName ? elem : (elem[0] !== undefined && elem[0].nodeName ? elem[0] : document.querySelector(elem));\n\t\tif (this[0] !== undefined && this[0] !== null) {\n\t\t\tthis[0].eventRegistry = this[0].eventRegistry || {};\n\t\t}\n\t}\n}\n\nDependencyLib.prototype = {\n\ton: on,\n\toff: off,\n\ttrigger: trigger\n};\n\n//static\nDependencyLib.extend = extend;\nDependencyLib.data = data;\nDependencyLib.Event = Event;\n\nexport default DependencyLib;\n","import $ from \"./dependencyLibs/inputmask.dependencyLib\";\n\nexport {generateMaskSet, analyseMask};\n\nfunction generateMaskSet(opts, nocache) {\n\tvar ms;\n\n\tfunction generateMask(mask, metadata, opts) {\n\t\tvar regexMask = false;\n\t\tif (mask === null || mask === \"\") {\n\t\t\tregexMask = opts.regex !== null;\n\t\t\tif (regexMask) {\n\t\t\t\tmask = opts.regex;\n\t\t\t\tmask = mask.replace(/^(\\^)(.*)(\\$)$/, \"$2\");\n\t\t\t} else {\n\t\t\t\tregexMask = true;\n\t\t\t\tmask = \".*\";\n\t\t\t}\n\t\t}\n\t\tif (mask.length === 1 && opts.greedy === false && opts.repeat !== 0) {\n\t\t\topts.placeholder = \"\";\n\t\t} //hide placeholder with single non-greedy mask\n\t\tif (opts.repeat > 0 || opts.repeat === \"*\" || opts.repeat === \"+\") {\n\t\t\tvar repeatStart = opts.repeat === \"*\" ? 0 : (opts.repeat === \"+\" ? 1 : opts.repeat);\n\t\t\tmask = opts.groupmarker[0] + mask + opts.groupmarker[1] + opts.quantifiermarker[0] + repeatStart + \",\" + opts.repeat + opts.quantifiermarker[1];\n\t\t}\n\n\t\t// console.log(mask);\n\t\tvar masksetDefinition, maskdefKey;\n\t\tmaskdefKey = regexMask ? \"regex_\" + opts.regex : opts.numericInput ? mask.split(\"\").reverse().join(\"\") : mask;\n\t\tif (opts.keepStatic !== false) { //keepstatic modifies the output from the testdefinitions ~ so differentiate in the maskcache\n\t\t\tmaskdefKey = \"ks_\" + maskdefKey;\n\t\t}\n\n\t\tif (Inputmask.prototype.masksCache[maskdefKey] === undefined || nocache === true) {\n\t\t\tmasksetDefinition = {\n\t\t\t\t\"mask\": mask,\n\t\t\t\t\"maskToken\": Inputmask.prototype.analyseMask(mask, regexMask, opts),\n\t\t\t\t\"validPositions\": {},\n\t\t\t\t\"_buffer\": undefined,\n\t\t\t\t\"buffer\": undefined,\n\t\t\t\t\"tests\": {},\n\t\t\t\t\"excludes\": {}, //excluded alternations\n\t\t\t\t\"metadata\": metadata,\n\t\t\t\t\"maskLength\": undefined,\n\t\t\t\t\"jitOffset\": {}\n\t\t\t};\n\t\t\tif (nocache !== true) {\n\t\t\t\tInputmask.prototype.masksCache[maskdefKey] = masksetDefinition;\n\t\t\t\tmasksetDefinition = $.extend(true, {}, Inputmask.prototype.masksCache[maskdefKey]);\n\t\t\t}\n\t\t} else {\n\t\t\tmasksetDefinition = $.extend(true, {}, Inputmask.prototype.masksCache[maskdefKey]);\n\t\t}\n\n\t\treturn masksetDefinition;\n\t}\n\n\tif (typeof opts.mask === \"function\") { //allow mask to be a preprocessing fn - should return a valid mask\n\t\topts.mask = opts.mask(opts);\n\t}\n\tif (Array.isArray(opts.mask)) {\n\t\tif (opts.mask.length > 1) {\n\t\t\tif (opts.keepStatic === null) { //enable by default when passing multiple masks when the option is not explicitly specified\n\t\t\t\topts.keepStatic = true;\n\t\t\t}\n\t\t\tvar altMask = opts.groupmarker[0];\n\t\t\t(opts.isRTL ? opts.mask.reverse() : opts.mask).forEach(function (msk) {\n\t\t\t\tif (altMask.length > 1) {\n\t\t\t\t\taltMask += opts.groupmarker[1] + opts.alternatormarker + opts.groupmarker[0];\n\t\t\t\t}\n\t\t\t\tif (msk.mask !== undefined && typeof msk.mask !== \"function\") {\n\t\t\t\t\taltMask += msk.mask;\n\t\t\t\t} else {\n\t\t\t\t\taltMask += msk;\n\t\t\t\t}\n\t\t\t});\n\t\t\taltMask += opts.groupmarker[1];\n\t\t\t// console.log(altMask);\n\t\t\treturn generateMask(altMask, opts.mask, opts);\n\t\t} else {\n\t\t\topts.mask = opts.mask.pop();\n\t\t}\n\t}\n\tif (opts.keepStatic === null) opts.keepStatic = false;\n\tif (opts.mask && opts.mask.mask !== undefined && typeof opts.mask.mask !== \"function\") {\n\t\tms = generateMask(opts.mask.mask, opts.mask, opts);\n\t} else {\n\t\tms = generateMask(opts.mask, opts.mask, opts);\n\t}\n\n\treturn ms;\n}\n\nfunction analyseMask(mask, regexMask, opts) {\n\tconst tokenizer = /(?:[?*+]|\\{[0-9+*]+(?:,[0-9+*]*)?(?:\\|[0-9+*]*)?\\})|[^.?*+^${[]()|\\\\]+|./g,\n\t\t//Thx to https://github.com/slevithan/regex-colorizer for the regexTokenizer regex\n\t\tregexTokenizer = /\\[\\^?]?(?:[^\\\\\\]]+|\\\\[\\S\\s]?)*]?|\\\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\\S\\s]?)|\\((?:\\?[:=!]?)?|(?:[?*+]|\\{[0-9]+(?:,[0-9]*)?\\})\\??|[^.?*+^${[()|\\\\]+|./g;\n\tvar escaped = false,\n\t\tcurrentToken = new MaskToken(),\n\t\tmatch,\n\t\tm,\n\t\topenenings = [],\n\t\tmaskTokens = [],\n\t\topeningToken,\n\t\tcurrentOpeningToken,\n\t\talternator,\n\t\tlastMatch,\n\t\tcloseRegexGroup = false;\n\n\tfunction MaskToken(isGroup, isOptional, isQuantifier, isAlternator) {\n\t\tthis.matches = [];\n\t\tthis.openGroup = isGroup || false;\n\t\tthis.alternatorGroup = false;\n\t\tthis.isGroup = isGroup || false;\n\t\tthis.isOptional = isOptional || false;\n\t\tthis.isQuantifier = isQuantifier || false;\n\t\tthis.isAlternator = isAlternator || false;\n\t\tthis.quantifier = {\n\t\t\tmin: 1,\n\t\t\tmax: 1\n\t\t};\n\t}\n\n\t//test definition => {fn: RegExp/function, static: true/false optionality: bool, newBlockMarker: bool, casing: null/upper/lower, def: definitionSymbol, placeholder: placeholder, mask: real maskDefinition}\n\tfunction insertTestDefinition(mtoken, element, position) {\n\t\tposition = position !== undefined ? position : mtoken.matches.length;\n\t\tvar prevMatch = mtoken.matches[position - 1];\n\t\tif (regexMask) {\n\t\t\tif (element.indexOf(\"[\") === 0 || (escaped && /\\\\d|\\\\s|\\\\w]/i.test(element)) || element === \".\") {\n\t\t\t\tmtoken.matches.splice(position++, 0, {\n\t\t\t\t\tfn: new RegExp(element, opts.casing ? \"i\" : \"\"),\n\t\t\t\t\tstatic: false,\n\t\t\t\t\toptionality: false,\n\t\t\t\t\tnewBlockMarker: prevMatch === undefined ? \"master\" : prevMatch.def !== element,\n\t\t\t\t\tcasing: null,\n\t\t\t\t\tdef: element,\n\t\t\t\t\tplaceholder: undefined,\n\t\t\t\t\tnativeDef: element\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (escaped) element = element[element.length - 1];\n\t\t\t\telement.split(\"\").forEach(function (lmnt, ndx) {\n\t\t\t\t\tprevMatch = mtoken.matches[position - 1];\n\t\t\t\t\tmtoken.matches.splice(position++, 0, {\n\t\t\t\t\t\tfn: /[a-z]/i.test((opts.staticDefinitionSymbol || lmnt)) ? new RegExp(\"[\" + (opts.staticDefinitionSymbol || lmnt) + \"]\", opts.casing ? \"i\" : \"\") : null,\n\t\t\t\t\t\tstatic: true,\n\t\t\t\t\t\toptionality: false,\n\t\t\t\t\t\tnewBlockMarker: prevMatch === undefined ? \"master\" : (prevMatch.def !== lmnt && prevMatch.static !== true),\n\t\t\t\t\t\tcasing: null,\n\t\t\t\t\t\tdef: opts.staticDefinitionSymbol || lmnt,\n\t\t\t\t\t\tplaceholder: opts.staticDefinitionSymbol !== undefined ? lmnt : undefined,\n\t\t\t\t\t\tnativeDef: (escaped ? \"'\" : \"\") + lmnt\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\tescaped = false;\n\t\t} else {\n\t\t\tvar maskdef = (opts.definitions && opts.definitions[element]) || (opts.usePrototypeDefinitions && Inputmask.prototype.definitions[element]);\n\t\t\tif (maskdef && !escaped) {\n\t\t\t\tmtoken.matches.splice(position++, 0, {\n\t\t\t\t\tfn: maskdef.validator ? typeof maskdef.validator == \"string\" ? new RegExp(maskdef.validator, opts.casing ? \"i\" : \"\") : new function () {\n\t\t\t\t\t\tthis.test = maskdef.validator;\n\t\t\t\t\t} : new RegExp(\".\"),\n\t\t\t\t\tstatic: maskdef.static || false,\n\t\t\t\t\toptionality: false,\n\t\t\t\t\tnewBlockMarker: prevMatch === undefined ? \"master\" : prevMatch.def !== (maskdef.definitionSymbol || element),\n\t\t\t\t\tcasing: maskdef.casing,\n\t\t\t\t\tdef: maskdef.definitionSymbol || element,\n\t\t\t\t\tplaceholder: maskdef.placeholder,\n\t\t\t\t\tnativeDef: element,\n\t\t\t\t\tgenerated: maskdef.generated\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tmtoken.matches.splice(position++, 0, {\n\t\t\t\t\tfn: /[a-z]/i.test((opts.staticDefinitionSymbol || element)) ? new RegExp(\"[\" + (opts.staticDefinitionSymbol || element) + \"]\", opts.casing ? \"i\" : \"\") : null,\n\t\t\t\t\tstatic: true,\n\t\t\t\t\toptionality: false,\n\t\t\t\t\tnewBlockMarker: prevMatch === undefined ? \"master\" : (prevMatch.def !== element && prevMatch.static !== true),\n\t\t\t\t\tcasing: null,\n\t\t\t\t\tdef: opts.staticDefinitionSymbol || element,\n\t\t\t\t\tplaceholder: opts.staticDefinitionSymbol !== undefined ? element : undefined,\n\t\t\t\t\tnativeDef: (escaped ? \"'\" : \"\") + element\n\t\t\t\t});\n\t\t\t\tescaped = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction verifyGroupMarker(maskToken) {\n\t\tif (maskToken && maskToken.matches) {\n\t\t\tmaskToken.matches.forEach(function (token, ndx) {\n\t\t\t\tvar nextToken = maskToken.matches[ndx + 1];\n\t\t\t\tif ((nextToken === undefined || (nextToken.matches === undefined || nextToken.isQuantifier === false)) && token && token.isGroup) { //this is not a group but a normal mask => convert\n\t\t\t\t\ttoken.isGroup = false;\n\t\t\t\t\tif (!regexMask) {\n\t\t\t\t\t\tinsertTestDefinition(token, opts.groupmarker[0], 0);\n\t\t\t\t\t\tif (token.openGroup !== true) {\n\t\t\t\t\t\t\tinsertTestDefinition(token, opts.groupmarker[1]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tverifyGroupMarker(token);\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction defaultCase() {\n\t\tif (openenings.length > 0) {\n\t\t\tcurrentOpeningToken = openenings[openenings.length - 1];\n\t\t\tinsertTestDefinition(currentOpeningToken, m);\n\t\t\tif (currentOpeningToken.isAlternator) { //handle alternator a | b case\n\t\t\t\talternator = openenings.pop();\n\t\t\t\tfor (var mndx = 0; mndx < alternator.matches.length; mndx++) {\n\t\t\t\t\tif (alternator.matches[mndx].isGroup) alternator.matches[mndx].isGroup = false; //don't mark alternate groups as group\n\t\t\t\t}\n\t\t\t\tif (openenings.length > 0) {\n\t\t\t\t\tcurrentOpeningToken = openenings[openenings.length - 1];\n\t\t\t\t\tcurrentOpeningToken.matches.push(alternator);\n\t\t\t\t} else {\n\t\t\t\t\tcurrentToken.matches.push(alternator);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tinsertTestDefinition(currentToken, m);\n\t\t}\n\t}\n\n\tfunction reverseTokens(maskToken) {\n\t\tfunction reverseStatic(st) {\n\t\t\tif (st === opts.optionalmarker[0]) {\n\t\t\t\tst = opts.optionalmarker[1];\n\t\t\t} else if (st === opts.optionalmarker[1]) {\n\t\t\t\tst = opts.optionalmarker[0];\n\t\t\t} else if (st === opts.groupmarker[0]) {\n\t\t\t\tst = opts.groupmarker[1];\n\t\t\t} else if (st === opts.groupmarker[1]) st = opts.groupmarker[0];\n\n\t\t\treturn st;\n\t\t}\n\n\t\tmaskToken.matches = maskToken.matches.reverse();\n\t\tfor (var match in maskToken.matches) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(maskToken.matches, match)) {\n\t\t\t\tvar intMatch = parseInt(match);\n\t\t\t\tif (maskToken.matches[match].isQuantifier && maskToken.matches[intMatch + 1] && maskToken.matches[intMatch + 1].isGroup) { //reposition quantifier\n\t\t\t\t\tvar qt = maskToken.matches[match];\n\t\t\t\t\tmaskToken.matches.splice(match, 1);\n\t\t\t\t\tmaskToken.matches.splice(intMatch + 1, 0, qt);\n\t\t\t\t}\n\t\t\t\tif (maskToken.matches[match].matches !== undefined) {\n\t\t\t\t\tmaskToken.matches[match] = reverseTokens(maskToken.matches[match]);\n\t\t\t\t} else {\n\t\t\t\t\tmaskToken.matches[match] = reverseStatic(maskToken.matches[match]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn maskToken;\n\t}\n\n\tfunction groupify(matches) {\n\t\tvar groupToken = new MaskToken(true);\n\t\tgroupToken.openGroup = false;\n\t\tgroupToken.matches = matches;\n\t\treturn groupToken;\n\t}\n\n\tfunction closeGroup() {\n\t\t// Group closing\n\t\topeningToken = openenings.pop();\n\t\topeningToken.openGroup = false; //mark group as complete\n\t\tif (openingToken !== undefined) {\n\t\t\tif (openenings.length > 0) {\n\t\t\t\tcurrentOpeningToken = openenings[openenings.length - 1];\n\t\t\t\tcurrentOpeningToken.matches.push(openingToken);\n\t\t\t\tif (currentOpeningToken.isAlternator) { //handle alternator (a) | (b) case\n\t\t\t\t\talternator = openenings.pop();\n\t\t\t\t\tfor (var mndx = 0; mndx < alternator.matches.length; mndx++) {\n\t\t\t\t\t\talternator.matches[mndx].isGroup = false; //don't mark alternate groups as group\n\t\t\t\t\t\talternator.matches[mndx].alternatorGroup = false;\n\t\t\t\t\t}\n\t\t\t\t\tif (openenings.length > 0) {\n\t\t\t\t\t\tcurrentOpeningToken = openenings[openenings.length - 1];\n\t\t\t\t\t\tcurrentOpeningToken.matches.push(alternator);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrentToken.matches.push(alternator);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcurrentToken.matches.push(openingToken);\n\t\t\t}\n\t\t} else {\n\t\t\tdefaultCase();\n\t\t}\n\t}\n\n\tfunction groupQuantifier(matches) {\n\t\tvar lastMatch = matches.pop();\n\t\tif (lastMatch.isQuantifier) {\n\t\t\tlastMatch = groupify([matches.pop(), lastMatch]);\n\t\t}\n\t\treturn lastMatch;\n\t}\n\n\tif (regexMask) {\n\t\topts.optionalmarker[0] = undefined;\n\t\topts.optionalmarker[1] = undefined;\n\t}\n\twhile ((match = regexMask ? regexTokenizer.exec(mask) : tokenizer.exec(mask))) {\n\t\tm = match[0];\n\n\t\tif (regexMask) {\n\t\t\tswitch (m.charAt(0)) {\n\t\t\t\t//Quantifier\n\t\t\t\tcase \"?\":\n\t\t\t\t\tm = \"{0,1}\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"+\":\n\t\t\t\tcase \"*\":\n\t\t\t\t\tm = \"{\" + m + \"}\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"|\":\n\t\t\t\t\t//regex mask alternator  ex: [01][0-9]|2[0-3] => ([01][0-9]|2[0-3])\n\t\t\t\t\tif (openenings.length === 0) { //wrap the mask in a group to form a regex alternator  ([01][0-9]|2[0-3])\n\t\t\t\t\t\tvar altRegexGroup = groupify(currentToken.matches);\n\t\t\t\t\t\taltRegexGroup.openGroup = true;\n\t\t\t\t\t\topenenings.push(altRegexGroup);\n\t\t\t\t\t\tcurrentToken.matches = [];\n\t\t\t\t\t\tcloseRegexGroup = true;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (escaped) {\n\t\t\tdefaultCase();\n\t\t\tcontinue;\n\t\t}\n\t\tswitch (m.charAt(0)) {\n\t\t\tcase \"$\":\n\t\t\tcase \"^\":\n\t\t\t\t//ignore beginswith and endswith as in masking this makes no point\n\t\t\t\tif (!regexMask) {\n\t\t\t\t\tdefaultCase();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"(?=\": //lookahead\n\t\t\t\tbreak;\n\t\t\tcase \"(?!\": //negative lookahead\n\t\t\t\tbreak;\n\t\t\tcase \"(?<=\": //lookbehind\n\t\t\t\tbreak;\n\t\t\tcase \"(?<!\": //negative lookbehind\n\t\t\t\tbreak;\n\t\t\tcase opts.escapeChar:\n\t\t\t\tescaped = true;\n\t\t\t\tif (regexMask) {\n\t\t\t\t\tdefaultCase();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t// optional closing\n\t\t\tcase opts.optionalmarker[1]:\n\t\t\tcase opts.groupmarker[1]:\n\t\t\t\tcloseGroup();\n\t\t\t\tbreak;\n\t\t\tcase opts.optionalmarker[0]:\n\t\t\t\t// optional opening\n\t\t\t\topenenings.push(new MaskToken(false, true));\n\t\t\t\tbreak;\n\t\t\tcase opts.groupmarker[0]:\n\t\t\t\t// Group opening\n\t\t\t\topenenings.push(new MaskToken(true));\n\t\t\t\tbreak;\n\t\t\tcase opts.quantifiermarker[0]:\n\t\t\t\t//Quantifier\n\t\t\t\tvar quantifier = new MaskToken(false, false, true);\n\n\t\t\t\tm = m.replace(/[{}]/g, \"\");\n\t\t\t\tvar mqj = m.split(\"|\"),\n\t\t\t\t\tmq = mqj[0].split(\",\"),\n\t\t\t\t\tmq0 = isNaN(mq[0]) ? mq[0] : parseInt(mq[0]),\n\t\t\t\t\tmq1 = mq.length === 1 ? mq0 : (isNaN(mq[1]) ? mq[1] : parseInt(mq[1]));\n\t\t\t\tif (mq0 === \"*\" || mq0 === \"+\") {\n\t\t\t\t\tmq0 = mq1 === \"*\" ? 0 : 1;\n\t\t\t\t}\n\t\t\t\tquantifier.quantifier = {\n\t\t\t\t\tmin: mq0,\n\t\t\t\t\tmax: mq1,\n\t\t\t\t\tjit: mqj[1]\n\t\t\t\t};\n\t\t\t\tvar matches = openenings.length > 0 ? openenings[openenings.length - 1].matches : currentToken.matches;\n\t\t\t\tmatch = matches.pop();\n\t\t\t\tif (match.isAlternator) { //handle quantifier in an alternation [0-9]{2}|[0-9]{3}\n\t\t\t\t\tmatches.push(match); //push back alternator\n\t\t\t\t\tmatches = match.matches; //remap target matches\n\t\t\t\t\tvar groupToken = new MaskToken(true);\n\t\t\t\t\tvar tmpMatch = matches.pop();\n\t\t\t\t\tmatches.push(groupToken); //push the group\n\t\t\t\t\tmatches = groupToken.matches;\n\t\t\t\t\tmatch = tmpMatch;\n\t\t\t\t}\n\t\t\t\tif (!match.isGroup) {\n\t\t\t\t\t// if (regexMask && match.fn === null) { //why is this needed???\n\t\t\t\t\t//     if (match.def === \".\") match.fn = new RegExp(match.def, opts.casing ? \"i\" : \"\");\n\t\t\t\t\t// }\n\n\t\t\t\t\tmatch = groupify([match]);\n\t\t\t\t}\n\t\t\t\tmatches.push(match);\n\t\t\t\tmatches.push(quantifier);\n\n\t\t\t\tbreak;\n\t\t\tcase opts.alternatormarker:\n\n\n\t\t\t\tif (openenings.length > 0) {\n\t\t\t\t\tcurrentOpeningToken = openenings[openenings.length - 1];\n\t\t\t\t\tvar subToken = currentOpeningToken.matches[currentOpeningToken.matches.length - 1];\n\t\t\t\t\tif (currentOpeningToken.openGroup && //regexp alt syntax\n\t\t\t\t\t\t(subToken.matches === undefined || (subToken.isGroup === false && subToken.isAlternator === false))) { //alternations within group\n\t\t\t\t\t\tlastMatch = openenings.pop();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlastMatch = groupQuantifier(currentOpeningToken.matches);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlastMatch = groupQuantifier(currentToken.matches);\n\t\t\t\t}\n\t\t\t\tif (lastMatch.isAlternator) {\n\t\t\t\t\topenenings.push(lastMatch);\n\t\t\t\t} else {\n\t\t\t\t\tif (lastMatch.alternatorGroup) {\n\t\t\t\t\t\talternator = openenings.pop();\n\t\t\t\t\t\tlastMatch.alternatorGroup = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\talternator = new MaskToken(false, false, false, true);\n\t\t\t\t\t}\n\t\t\t\t\talternator.matches.push(lastMatch);\n\t\t\t\t\topenenings.push(alternator);\n\t\t\t\t\tif (lastMatch.openGroup) { //regexp alt syntax\n\t\t\t\t\t\tlastMatch.openGroup = false;\n\t\t\t\t\t\tvar alternatorGroup = new MaskToken(true);\n\t\t\t\t\t\talternatorGroup.alternatorGroup = true;\n\t\t\t\t\t\topenenings.push(alternatorGroup);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tdefaultCase();\n\t\t}\n\t}\n\n\tif (closeRegexGroup) closeGroup();\n\n\twhile (openenings.length > 0) {\n\t\topeningToken = openenings.pop();\n\t\tcurrentToken.matches.push(openingToken);\n\t}\n\tif (currentToken.matches.length > 0) {\n\t\tverifyGroupMarker(currentToken);\n\t\tmaskTokens.push(currentToken);\n\t}\n\n\tif (opts.numericInput || opts.isRTL) {\n\t\treverseTokens(maskTokens[0]);\n\t}\n\t// console.log(JSON.stringify(maskTokens));\n\treturn maskTokens;\n}\n","export default {\n\t\"9\": { //\\uFF11-\\uFF19 #1606\n\t\tvalidator: \"[0-9\\uFF10-\\uFF19]\",\n\t\tdefinitionSymbol: \"*\"\n\t},\n\t\"a\": { //\\u0410-\\u044F\\u0401\\u0451\\u00C0-\\u00FF\\u00B5 #76\n\t\tvalidator: \"[A-Za-z\\u0410-\\u044F\\u0401\\u0451\\u00C0-\\u00FF\\u00B5]\",\n\t\tdefinitionSymbol: \"*\"\n\t},\n\t\"*\": {\n\t\tvalidator: \"[0-9\\uFF10-\\uFF19A-Za-z\\u0410-\\u044F\\u0401\\u0451\\u00C0-\\u00FF\\u00B5]\"\n\t}\n}","export default {\n\t_maxTestPos: 500,\n\tplaceholder: \"_\",\n\toptionalmarker: [\"[\", \"]\"],\n\tquantifiermarker: [\"{\", \"}\"],\n\tgroupmarker: [\"(\", \")\"],\n\talternatormarker: \"|\",\n\tescapeChar: \"\\\\\",\n\tmask: null, //needs tobe null instead of undefined as the extend method does not consider props with the undefined value\n\tregex: null, //regular expression as a mask\n\toncomplete: () => {\n\t}, //executes when the mask is complete\n\tonincomplete: () => {\n\t}, //executes when the mask is incomplete and focus is lost\n\toncleared: () => {\n\t}, //executes when the mask is cleared\n\trepeat: 0, //repetitions of the mask: * ~ forever, otherwise specify an integer\n\tgreedy: false, //true: allocated buffer for the mask and repetitions - false: allocate only if needed\n\tautoUnmask: false, //automatically unmask when retrieving the value with $.fn.val or value if the browser supports __lookupGetter__ or getOwnPropertyDescriptor\n\tremoveMaskOnSubmit: false, //remove the mask before submitting the form.\n\tclearMaskOnLostFocus: true,\n\tinsertMode: true, //insert the input or overwrite the input\n\tinsertModeVisual: true, //show selected caret when insertmode = false\n\tclearIncomplete: false, //clear the incomplete input on blur\n\talias: null,\n\tonKeyDown: () => {\n\t}, //callback to implement autocomplete on certain keys for example. args => event, buffer, caretPos, opts\n\tonBeforeMask: null, //executes before masking the initial value to allow preprocessing of the initial value.\targs => initialValue, opts => return processedValue\n\tonBeforePaste: function (pastedValue, opts) {\n\t\treturn typeof opts.onBeforeMask === \"function\" ? opts.onBeforeMask.call(this, pastedValue, opts) : pastedValue;\n\t}, //executes before masking the pasted value to allow preprocessing of the pasted value.\targs => pastedValue, opts => return processedValue\n\tonBeforeWrite: null, //executes before writing to the masked element. args => event, opts\n\tonUnMask: null, //executes after unmasking to allow postprocessing of the unmaskedvalue.\targs => maskedValue, unmaskedValue, opts\n\tshowMaskOnFocus: true, //show the mask-placeholder when the input has focus\n\tshowMaskOnHover: true, //show the mask-placeholder when hovering the empty input\n\tonKeyValidation: () => {\n\t}, //executes on every key-press with the result of isValid. Params: key, result, opts\n\tskipOptionalPartCharacter: \" \", //a character which can be used to skip an optional part of a mask\n\tnumericInput: false, //numericInput input direction style (input shifts to the left while holding the caret position)\n\trightAlign: false, //align to the right\n\tundoOnEscape: true, //pressing escape reverts the value to the value before focus\n\t//numeric basic properties\n\tradixPoint: \"\", //\".\", // | \",\"\n\t_radixDance: false, //dance around the radixPoint\n\tgroupSeparator: \"\", //\",\", // | \".\"\n\t//numeric basic properties\n\tkeepStatic: null, //try to keep the mask static while typing. Decisions to alter the mask will be posponed if possible\n\tpositionCaretOnTab: true, //when enabled the caret position is set after the latest valid position on TAB\n\ttabThrough: false, //allows for tabbing through the different parts of the masked field\n\tsupportsInputType: [\"text\", \"tel\", \"url\", \"password\", \"search\"], //list with the supported input types\n\t//specify keyCodes which should not be considered in the keypress event, otherwise the preventDefault will stop their default behavior especially in FF\n\tignorables: [8, 9, 19, 27, 33, 34, 35, 36, 37, 38, 39, 40, 45, 46, 93, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 0, 229],\n\tisComplete: null, //override for isComplete - args => buffer, opts - return true || false\n\tpreValidation: null, //hook to preValidate the input.  Usefull for validating regardless the definition.\targs => buffer, pos, char, isSelection, opts, maskset, caretPos, strict => return true/false/command object\n\tpostValidation: null, //hook to postValidate the result from isValid.\tUsefull for validating the entry as a whole.\targs => buffer, pos, c, currentResult, opts, maskset, strict, fromCheckval => return true/false/json\n\tstaticDefinitionSymbol: undefined, //specify a definitionSymbol for static content, used to make matches for alternators\n\tjitMasking: false, //just in time masking ~ only mask while typing, can n (number), true or false\n\tnullable: true, //return nothing instead of the buffertemplate when the user hasn't entered anything.\n\tinputEventOnly: false, //dev option - testing inputfallback behavior\n\tnoValuePatching: false, //disable value property patching\n\tpositionCaretOnClick: \"lvp\", //none, lvp (based on the last valid position (default), radixFocus (position caret to radixpoint on initial click), select (select the whole input), ignore (ignore the click and continue the mask)\n\tcasing: null, //mask-level casing. Options: null, \"upper\", \"lower\" or \"title\" or callback args => elem, test, pos, validPositions return charValue\n\tinputmode: \"text\", //specify the inputmode\n\timportDataAttributes: true, //import data-inputmask attributes\n\tshiftPositions: true, //shift position of the mask entries on entry and deletion.\n\tusePrototypeDefinitions: true //use the default defined definitions from the prototype\n};","/*\n * Input Mask Core\n * http://github.com/RobinHerbots/jquery.inputmask\n * Copyright (c) Robin Herbots\n * Licensed under the MIT license\n */\nimport \"./getPrototypeOf\";\nimport {mask} from \"./mask\";\nimport $ from \"./dependencyLibs/inputmask.dependencyLib\";\nimport window from \"./global/window\";\nimport {generateMaskSet, analyseMask} from \"./mask-lexer\";\nimport {getMaskTemplate} from \"./validation-tests\";\nimport {determineLastRequiredPosition, getBuffer, getBufferTemplate, isMask} from \"./positioning\";\nimport {isComplete} from \"./validation\";\nimport {checkVal, unmaskedvalue} from \"./inputHandling\";\nimport {EventRuler} from \"./eventruler\";\nimport definitions from \"./definitions\";\nimport defaults from \"./defaults\";\n\nconst document = window.document, dataKey = \"_inputmask_opts\";\n\nfunction Inputmask(alias, options, internal) {\n\t//allow instanciating without new\n\tif (!(this instanceof Inputmask)) {\n\t\treturn new Inputmask(alias, options, internal);\n\t}\n\n\tthis.dependencyLib = $;\n\tthis.el = undefined;\n\tthis.events = {};\n\tthis.maskset = undefined;\n\n\tif (internal !== true) {\n\t\t//init options\n\t\tif (Object.prototype.toString.call(alias) === \"[object Object]\") {\n\t\t\toptions = alias;\n\t\t} else {\n\t\t\toptions = options || {};\n\t\t\tif (alias) options.alias = alias;\n\t\t}\n\t\tthis.opts = $.extend(true, {}, this.defaults, options);\n\t\tthis.noMasksCache = options && options.definitions !== undefined;\n\t\tthis.userOptions = options || {}; //user passed options\n\t\tresolveAlias(this.opts.alias, options, this.opts);\n\t}\n\n\t//maskscope properties\n\tthis.refreshValue = false; //indicate a refresh from the inputvalue is needed (form.reset)\n\tthis.undoValue = undefined;\n\tthis.$el = undefined;\n\tthis.skipKeyPressEvent = false; //Safari 5.1.x - modal dialog fires keypress twice workaround\n\tthis.skipInputEvent = false; //skip when triggered from within inputmask\n\tthis.validationEvent = false;\n\tthis.ignorable = false;\n\tthis.maxLength;\n\tthis.mouseEnter = false;\n\tthis.originalPlaceholder = undefined; //needed for FF\n\tthis.isComposing = false; //keydowncode == 229  compositionevent fallback\n}\n\nInputmask.prototype = {\n\tdataAttribute: \"data-inputmask\", //data attribute prefix used for attribute binding\n\t//options default\n\tdefaults: defaults,\n\tdefinitions: definitions,\n\taliases: {}, //aliases definitions\n\tmasksCache: {},\n\tget isRTL() {\n\t\treturn this.opts.isRTL || this.opts.numericInput;\n\t},\n\tmask: function (elems) {\n\t\tvar that = this;\n\t\tif (typeof elems === \"string\") {\n\t\t\telems = document.getElementById(elems) || document.querySelectorAll(elems);\n\t\t}\n\t\telems = elems.nodeName ? [elems] : elems;\n\t\telems.forEach(function (el, ndx) {\n\t\t\tvar scopedOpts = $.extend(true, {}, that.opts);\n\t\t\tif (importAttributeOptions(el, scopedOpts, $.extend(true, {}, that.userOptions), that.dataAttribute)) {\n\t\t\t\tvar maskset = generateMaskSet(scopedOpts, that.noMasksCache);\n\t\t\t\tif (maskset !== undefined) {\n\t\t\t\t\tif (el.inputmask !== undefined) {\n\t\t\t\t\t\tel.inputmask.opts.autoUnmask = true; //force autounmasking when remasking\n\t\t\t\t\t\tel.inputmask.remove();\n\t\t\t\t\t}\n\t\t\t\t\t//store inputmask instance on the input with element reference\n\t\t\t\t\tel.inputmask = new Inputmask(undefined, undefined, true);\n\t\t\t\t\tel.inputmask.opts = scopedOpts;\n\t\t\t\t\tel.inputmask.noMasksCache = that.noMasksCache;\n\t\t\t\t\tel.inputmask.userOptions = $.extend(true, {}, that.userOptions);\n\t\t\t\t\t// el.inputmask.isRTL = scopedOpts.isRTL || scopedOpts.numericInput;\n\t\t\t\t\tel.inputmask.el = el;\n\t\t\t\t\tel.inputmask.$el = $(el);\n\t\t\t\t\tel.inputmask.maskset = maskset;\n\n\t\t\t\t\t$.data(el, dataKey, that.userOptions);\n\t\t\t\t\tmask.call(el.inputmask);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn elems && elems[0] ? (elems[0].inputmask || this) : this;\n\t},\n\toption: function (options, noremask) { //set extra options || retrieve value of a current option\n\t\tif (typeof options === \"string\") {\n\t\t\treturn this.opts[options];\n\t\t} else if (typeof options === \"object\") {\n\t\t\t$.extend(this.userOptions, options); //user passed options\n\t\t\t//remask\n\t\t\tif (this.el && noremask !== true) {\n\t\t\t\tthis.mask(this.el);\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t},\n\tunmaskedvalue: function (value) {\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\tif (this.el === undefined || value !== undefined) {\n\t\t\tvar valueBuffer = (typeof this.opts.onBeforeMask === \"function\" ? (this.opts.onBeforeMask.call(this, value, this.opts) || value) : value).split(\"\");\n\t\t\tcheckVal.call(this, undefined, false, false, valueBuffer);\n\t\t\tif (typeof this.opts.onBeforeWrite === \"function\") this.opts.onBeforeWrite.call(this, undefined, getBuffer.call(this), 0, this.opts);\n\t\t}\n\t\treturn unmaskedvalue.call(this, this.el);\n\t},\n\tremove: function () {\n\t\tif (this.el) {\n\t\t\t$.data(this.el, dataKey, null); //invalidate\n\t\t\t//writeout the value\n\t\t\tvar cv = this.opts.autoUnmask ? unmaskedvalue(this.el) : this._valueGet(this.opts.autoUnmask);\n\t\t\tif (cv !== getBufferTemplate.call(this).join(\"\")) this._valueSet(cv, this.opts.autoUnmask); else this._valueSet(\"\");\n\t\t\t//unbind all events\n\t\t\tEventRuler.off(this.el);\n\n\t\t\t//restore the value property\n\t\t\tvar valueProperty;\n\t\t\tif (Object.getOwnPropertyDescriptor && Object.getPrototypeOf) {\n\t\t\t\tvalueProperty = Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this.el), \"value\");\n\t\t\t\tif (valueProperty) {\n\t\t\t\t\tif (this.__valueGet) {\n\t\t\t\t\t\tObject.defineProperty(this.el, \"value\", {\n\t\t\t\t\t\t\tget: this.__valueGet,\n\t\t\t\t\t\t\tset: this.__valueSet,\n\t\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (document.__lookupGetter__ && this.el.__lookupGetter__(\"value\")) {\n\t\t\t\tif (this.__valueGet) {\n\t\t\t\t\tthis.el.__defineGetter__(\"value\", this.__valueGet);\n\t\t\t\t\tthis.el.__defineSetter__(\"value\", this.__valueSet);\n\t\t\t\t}\n\t\t\t}\n\t\t\t//clear data\n\t\t\tthis.el.inputmask = undefined;\n\t\t}\n\t\treturn this.el;\n\t},\n\tgetemptymask: function () { //return the default (empty) mask value, usefull for setting the default value in validation\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\treturn getBufferTemplate.call(this).join(\"\");\n\t},\n\thasMaskedValue: function () { //check wheter the returned value is masked or not; currently only works reliable when using jquery.val fn to retrieve the value\n\t\treturn !this.opts.autoUnmask;\n\t},\n\tisComplete: function () {\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\treturn isComplete.call(this, getBuffer.call(this));\n\t},\n\tgetmetadata: function () { //return mask metadata if exists\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\tif (Array.isArray(this.maskset.metadata)) {\n\t\t\tvar maskTarget = getMaskTemplate.call(this, true, 0, false).join(\"\");\n\t\t\tthis.maskset.metadata.forEach(function (mtdt) {\n\t\t\t\tif (mtdt.mask === maskTarget) {\n\t\t\t\t\tmaskTarget = mtdt;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t});\n\t\t\treturn maskTarget;\n\t\t}\n\t\treturn this.maskset.metadata;\n\t},\n\tisValid: function (value) {\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\tif (value) {\n\t\t\tvar valueBuffer = (typeof this.opts.onBeforeMask === \"function\" ? (this.opts.onBeforeMask.call(this, value, this.opts) || value) : value).split(\"\");\n\t\t\tcheckVal.call(this, undefined, true, false, valueBuffer);\n\t\t} else {\n\t\t\tvalue = this.isRTL ? getBuffer.call(this).slice().reverse().join(\"\") : getBuffer.call(this).join(\"\");\n\t\t}\n\t\tvar buffer = getBuffer.call(this);\n\t\tvar rl = determineLastRequiredPosition.call(this),\n\t\t\tlmib = buffer.length - 1;\n\t\tfor (; lmib > rl; lmib--) {\n\t\t\tif (isMask.call(this, lmib)) break;\n\t\t}\n\t\tbuffer.splice(rl, lmib + 1 - rl);\n\n\t\treturn isComplete.call(this, buffer) && value === (this.isRTL ? getBuffer.call(this).slice().reverse().join(\"\") : getBuffer.call(this).join(\"\"));\n\n\t},\n\tformat: function (value, metadata) {\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\tlet valueBuffer = (typeof this.opts.onBeforeMask === \"function\" ? (this.opts.onBeforeMask.call(this, value, this.opts) || value) : value).split(\"\");\n\t\tcheckVal.call(this, undefined, true, false, valueBuffer);\n\t\tlet formattedValue = this.isRTL ? getBuffer.call(this).slice().reverse().join(\"\") : getBuffer.call(this).join(\"\");\n\t\treturn metadata ? {\n\t\t\tvalue: formattedValue,\n\t\t\tmetadata: this.getmetadata()\n\t\t} : formattedValue;\n\t},\n\tsetValue: function (value) {\n\t\tif (this.el) {\n\t\t\t$(this.el).trigger(\"setvalue\", [value]);\n\t\t}\n\t},\n\tanalyseMask: analyseMask\n};\n\nfunction resolveAlias(aliasStr, options, opts) {\n\tvar aliasDefinition = Inputmask.prototype.aliases[aliasStr];\n\tif (aliasDefinition) {\n\t\tif (aliasDefinition.alias) resolveAlias(aliasDefinition.alias, undefined, opts); //alias is another alias\n\t\t$.extend(true, opts, aliasDefinition); //merge alias definition in the options\n\t\t$.extend(true, opts, options); //reapply extra given options\n\t\treturn true;\n\t} else //alias not found - try as mask\n\tif (opts.mask === null) {\n\t\topts.mask = aliasStr;\n\t}\n\n\treturn false;\n}\n\nfunction importAttributeOptions(npt, opts, userOptions, dataAttribute) {\n\tfunction importOption(option, optionData) {\n\t\tconst attrOption = dataAttribute === \"\" ? option : dataAttribute + \"-\" + option;\n\t\toptionData = optionData !== undefined ? optionData : npt.getAttribute(attrOption);\n\t\tif (optionData !== null) {\n\t\t\tif (typeof optionData === \"string\") {\n\t\t\t\tif (option.indexOf(\"on\") === 0) {\n\t\t\t\t\toptionData = window[optionData];\n\t\t\t\t}//get function definition\n\t\t\t\telse if (optionData === \"false\") {\n\t\t\t\t\toptionData = false;\n\t\t\t\t} else if (optionData === \"true\") optionData = true;\n\t\t\t}\n\t\t\tuserOptions[option] = optionData;\n\t\t}\n\t}\n\n\tif (opts.importDataAttributes === true) {\n\t\tvar attrOptions = npt.getAttribute(dataAttribute), option, dataoptions, optionData, p;\n\n\t\tif (attrOptions && attrOptions !== \"\") {\n\t\t\tattrOptions = attrOptions.replace(/'/g, \"\\\"\");\n\t\t\tdataoptions = JSON.parse(\"{\" + attrOptions + \"}\");\n\t\t}\n\n\t\t//resolve aliases\n\t\tif (dataoptions) { //pickup alias from dataAttribute\n\t\t\toptionData = undefined;\n\t\t\tfor (p in dataoptions) {\n\t\t\t\tif (p.toLowerCase() === \"alias\") {\n\t\t\t\t\toptionData = dataoptions[p];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\timportOption(\"alias\", optionData); //pickup alias from dataAttribute-alias\n\t\tif (userOptions.alias) {\n\t\t\tresolveAlias(userOptions.alias, userOptions, opts);\n\t\t}\n\n\t\tfor (option in opts) {\n\t\t\tif (dataoptions) {\n\t\t\t\toptionData = undefined;\n\t\t\t\tfor (p in dataoptions) {\n\t\t\t\t\tif (p.toLowerCase() === option.toLowerCase()) {\n\t\t\t\t\t\toptionData = dataoptions[p];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\timportOption(option, optionData);\n\t\t}\n\t}\n\t$.extend(true, opts, userOptions);\n\n\t//handle dir=rtl\n\tif (npt.dir === \"rtl\" || opts.rightAlign) {\n\t\tnpt.style.textAlign = \"right\";\n\t}\n\n\tif (npt.dir === \"rtl\" || opts.numericInput) {\n\t\tnpt.dir = \"ltr\";\n\t\tnpt.removeAttribute(\"dir\");\n\t\topts.isRTL = true;\n\t}\n\n\treturn Object.keys(userOptions).length;\n}\n\n//apply defaults, definitions, aliases\nInputmask.extendDefaults = function (options) {\n\t$.extend(true, Inputmask.prototype.defaults, options);\n};\nInputmask.extendDefinitions = function (definition) {\n\t$.extend(true, Inputmask.prototype.definitions, definition);\n};\nInputmask.extendAliases = function (alias) {\n\t$.extend(true, Inputmask.prototype.aliases, alias);\n};\n//static fn on inputmask\nInputmask.format = function (value, options, metadata) {\n\treturn Inputmask(options).format(value, metadata);\n};\nInputmask.unmask = function (value, options) {\n\treturn Inputmask(options).unmaskedvalue(value);\n};\nInputmask.isValid = function (value, options) {\n\treturn Inputmask(options).isValid(value);\n};\nInputmask.remove = function (elems) {\n\tif (typeof elems === \"string\") {\n\t\telems = document.getElementById(elems) || document.querySelectorAll(elems);\n\t}\n\telems = elems.nodeName ? [elems] : elems;\n\telems.forEach(function (el) {\n\t\tif (el.inputmask) el.inputmask.remove();\n\t});\n};\nInputmask.setValue = function (elems, value) {\n\tif (typeof elems === \"string\") {\n\t\telems = document.getElementById(elems) || document.querySelectorAll(elems);\n\t}\n\telems = elems.nodeName ? [elems] : elems;\n\telems.forEach(function (el) {\n\t\tif (el.inputmask) el.inputmask.setValue(value); else $(el).trigger(\"setvalue\", [value]);\n\t});\n};\n\nInputmask.dependencyLib = $;\n\n//make inputmask available\nwindow.Inputmask = Inputmask;\nexport default Inputmask;\n","let errors = {};\r\n\r\n// Wyjatki\r\n\r\n// Nie znaleziono elementu DOM\r\nerrors.elementNotFound = function (selector) {\r\n    return new Error(`Cannot find elements with selector \"${selector}\"`);\r\n}\r\n\r\n// Nie znaleziono formularza\r\nerrors.formNotFound = function (formName) {\r\n    return new Error(`Cannot find form with name \"${formName}\"`);\r\n}\r\n\r\n// Nie podano argumentu\r\nerrors.argumentNotFound = function (argumentName) {\r\n    return new Error(`${argumentName.substring(0, 1).toUpperCase() + argumentName.substring(1)} argument cannot be empty`);\r\n}\r\n\r\n// Brak walidatora dla formularza\r\nerrors.noValidator = function () {\r\n    return new Error(`No JQuery validator plugin`);\r\n}\r\n\r\n// Nie podano wspolrzednych geograficznych\r\nerrors.noGeoCoords = function () {\r\n    return new Error(`You must provide geo coordinates.`);\r\n}\r\n\r\nexport default errors;","!function(s){var i={};function o(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return s[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=s,o.c=i,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)o.d(s,i,function(t){return e[t]}.bind(null,i));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,\"a\",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p=\"\",o(o.s=0)}([function(t,e,s){\"use strict\";s.r(e),s.d(e,\"AutoComplete\",function(){return d});var i,o,n,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s])})(t,e)},function(t,e){function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}),l=(_.prototype.getDefaults=function(){return{}},_.prototype.getResults=function(t,e,s){return this.results},_.prototype.search=function(t,e){e(this.getResults())},r(p,o=_),p.prototype.getDefaults=function(){return{url:\"\",method:\"get\",queryKey:\"q\",extraData:{},timeout:void 0,requestThrottling:500}},p.prototype.search=function(t,e){var s=this;null!=this.jqXHR&&this.jqXHR.abort();var i={};i[this._settings.queryKey]=t,$.extend(i,this._settings.extraData),this.requestTID&&window.clearTimeout(this.requestTID),this.requestTID=window.setTimeout(function(){s.jqXHR=$.ajax(s._settings.url,{method:s._settings.method,data:i,timeout:s._settings.timeout}),s.jqXHR.done(function(t){e(t)}),s.jqXHR.fail(function(t){var e;null===(e=s._settings)||void 0===e||e.fail(t)}),s.jqXHR.always(function(){s.jqXHR=null})},this._settings.requestThrottling)},p),a=(f.prototype.init=function(){var s=this,t=$.extend({},this._$el.position(),{height:this._$el[0].offsetHeight});this._dd=$(\"<ul />\"),this._dd.addClass(\"bootstrap-autocomplete dropdown-menu\"),this._dd.insertAfter(this._$el),this._dd.css({top:t.top+this._$el.outerHeight(),left:t.left,width:this._$el.outerWidth()}),this._dd.on(\"click\",\"li\",function(t){var e=$(t.currentTarget).data(\"item\");s.itemSelectedLaunchEvent(e)}),this._dd.on(\"keyup\",function(t){if(s.shown){switch(t.which){case 27:s.hide(),s._$el.focus()}return!1}}),this._dd.on(\"mouseenter\",function(t){s.ddMouseover=!0}),this._dd.on(\"mouseleave\",function(t){s.ddMouseover=!1}),this._dd.on(\"mouseenter\",\"li\",function(t){s.haveResults&&($(t.currentTarget).closest(\"ul\").find(\"li.active\").removeClass(\"active\"),$(t.currentTarget).addClass(\"active\"),s.mouseover=!0)}),this._dd.on(\"mouseleave\",\"li\",function(t){s.mouseover=!1}),this.initialized=!0},f.prototype.checkInitialized=function(){this.initialized||this.init()},Object.defineProperty(f.prototype,\"isMouseOver\",{get:function(){return this.mouseover},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,\"isDdMouseOver\",{get:function(){return this.ddMouseover},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,\"haveResults\",{get:function(){return 0<this.items.length},enumerable:!1,configurable:!0}),f.prototype.focusNextItem=function(t){var e,s;this.haveResults&&(e=this._dd.find(\"li.active\"),0===(s=t?e.prev():e.next()).length&&(s=t?this._dd.find(\"li\").last():this._dd.find(\"li\").first()),e.removeClass(\"active\"),s.addClass(\"active\"))},f.prototype.focusPreviousItem=function(){this.focusNextItem(!0)},f.prototype.selectFocusItem=function(){this._dd.find(\"li.active\").trigger(\"click\")},Object.defineProperty(f.prototype,\"isItemFocused\",{get:function(){return!!(this.isShown()&&0<this._dd.find(\"li.active\").length)},enumerable:!1,configurable:!0}),f.prototype.show=function(){this.shown||(this._dd.dropdown().show(),this.shown=!0)},f.prototype.isShown=function(){return this.shown},f.prototype.hide=function(){this.shown&&(this._dd.dropdown().hide(),this.shown=!1)},f.prototype.updateItems=function(t,e){this.items=t,this.searchText=e,this.refreshItemList()},f.prototype.showMatchedText=function(t,e){var s=t.toLowerCase().indexOf(e.toLowerCase());if(-1<s){var i=s+e.length;return t.slice(0,s)+\"<b>\"+t.slice(s,i)+\"</b>\"+t.slice(i)}return t},f.prototype.refreshItemList=function(){var r=this;this.checkInitialized(),this._dd.empty();var t,l=[];0<this.items.length?this.items.forEach(function(t){var e,s,i=r.formatItem(t);\"string\"==typeof i&&(i={text:i}),e=r.showMatchedText(i.text,r.searchText),s=void 0!==i.html?i.html:e;var o=i.disabled,n=$(\"<li >\");n.append($(\"<a>\").attr(\"href\",\"#!\").html(s)).data(\"item\",t),o&&n.addClass(\"disabled\"),l.push(n)}):((t=$(\"<li >\")).append($(\"<a>\").attr(\"href\",\"#!\").html(this.noResultsText)).addClass(\"disabled\"),l.push(t)),this._dd.append(l)},f.prototype.itemSelectedLaunchEvent=function(t){this._$el.trigger(\"autocomplete.select\",t)},f),h=(c.prototype.getElPos=function(){return $.extend({},this._$el.position(),{height:this._$el[0].offsetHeight})},c.prototype.init=function(){var s=this,t=this.getElPos();this._dd=$(\"<div />\"),this._dd.addClass(\"bootstrap-autocomplete dropdown-menu\"),this._dd.insertAfter(this._$el),this._dd.css({top:t.top+this._$el.outerHeight(),left:t.left,width:this._$el.outerWidth()}),this._dd.on(\"click\",\".dropdown-item\",function(t){var e=$(t.currentTarget).data(\"item\");s.itemSelectedLaunchEvent(e),t.preventDefault()}),this._dd.on(\"keyup\",function(t){if(s.shown){switch(t.which){case 27:s.hide(),s._$el.focus()}return!1}}),this._dd.on(\"mouseenter\",function(t){s.ddMouseover=!0}),this._dd.on(\"mouseleave\",function(t){s.ddMouseover=!1}),this._dd.on(\"mouseenter\",\".dropdown-item\",function(t){s.haveResults&&($(t.currentTarget).closest(\"div\").find(\".dropdown-item.active\").removeClass(\"active\"),$(t.currentTarget).addClass(\"active\"),s.mouseover=!0)}),this._dd.on(\"mouseleave\",\".dropdown-item\",function(t){s.mouseover=!1}),this.initialized=!0},c.prototype.checkInitialized=function(){this.initialized||this.init()},Object.defineProperty(c.prototype,\"isMouseOver\",{get:function(){return this.mouseover},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,\"isDdMouseOver\",{get:function(){return this.ddMouseover},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,\"haveResults\",{get:function(){return 0<this.items.length},enumerable:!1,configurable:!0}),c.prototype.focusNextItem=function(t){var e,s;this.haveResults&&(e=this._dd.find(\".dropdown-item.active\"),0===(s=t?e.prev():e.next()).length&&(s=t?this._dd.find(\".dropdown-item\").last():this._dd.find(\".dropdown-item\").first()),e.removeClass(\"active\"),s.addClass(\"active\"))},c.prototype.focusPreviousItem=function(){this.focusNextItem(!0)},c.prototype.selectFocusItem=function(){this._dd.find(\".dropdown-item.active\").trigger(\"click\")},Object.defineProperty(c.prototype,\"isItemFocused\",{get:function(){return!!(this._dd&&this.isShown()&&0<this._dd.find(\".dropdown-item.active\").length)},enumerable:!1,configurable:!0}),c.prototype.show=function(){this.shown||(this.getElPos(),this._dd.addClass(\"show\"),this.shown=!0,this._$el.trigger(\"autocomplete.dd.shown\"))},c.prototype.isShown=function(){return this.shown},c.prototype.hide=function(){this.shown&&(this._dd.removeClass(\"show\"),this.shown=!1,this._$el.trigger(\"autocomplete.dd.hidden\"))},c.prototype.updateItems=function(t,e){this.items=t,this.searchText=e,this.refreshItemList()},c.prototype.showMatchedText=function(t,e){var s=t.toLowerCase().indexOf(e.toLowerCase());if(-1<s){var i=s+e.length;return t.slice(0,s)+\"<b>\"+t.slice(s,i)+\"</b>\"+t.slice(i)}return t},c.prototype.refreshItemList=function(){var r=this;this.checkInitialized(),this._dd.empty();var t,l=[];0<this.items.length?(this.items.forEach(function(t){var e,s,i=r.formatItem(t);\"string\"==typeof i&&(i={text:i}),e=r.showMatchedText(i.text,r.searchText),s=void 0!==i.html?i.html:e;var o=i.disabled,n=$(\"<a >\");n.addClass(\"dropdown-item\").css({overflow:\"hidden\",\"text-overflow\":\"ellipsis\"}).html(s).data(\"item\",t),o&&n.addClass(\"disabled\"),l.push(n)}),this._dd.append(l),this.show()):\"\"===this.noResultsText?this.hide():((t=$(\"<a >\")).addClass(\"dropdown-item disabled\").html(this.noResultsText),l.push(t),this._dd.append(l),this.show())},c.prototype.itemSelectedLaunchEvent=function(t){this._$el.trigger(\"autocomplete.select\",t)},c),d=(u.prototype.manageInlineDataAttributes=function(){var t=this.getSettings();this._$el.data(\"url\")&&(t.resolverSettings.url=this._$el.data(\"url\")),this._$el.data(\"default-value\")&&(this._defaultValue=this._$el.data(\"default-value\")),this._$el.data(\"default-text\")&&(this._defaultText=this._$el.data(\"default-text\")),void 0!==this._$el.data(\"noresults-text\")&&(t.noResultsText=this._$el.data(\"noresults-text\"))},u.prototype.getSettings=function(){return this._settings},u.prototype.getBootstrapVersion=function(){var t=\"auto\"===this._settings.bootstrapVersion?$.fn.button.Constructor.VERSION.split(\".\").map(parseInt):\"4\"===this._settings.bootstrapVersion?[4]:\"3\"===this._settings.bootstrapVersion?[3]:(console.error(\"INVALID value for 'bootstrapVersion' settings property: \"+this._settings.bootstrapVersion+\" defaulting to 4\"),[4]);return t},u.prototype.convertSelectToText=function(){var t=$(\"<input>\");t.attr(\"type\",\"hidden\"),t.attr(\"name\",this._$el.attr(\"name\")),this._defaultValue&&t.val(this._defaultValue),(this._selectHiddenField=t).insertAfter(this._$el);var e=$(\"<input>\");e.attr(\"type\",\"search\"),e.attr(\"name\",this._$el.attr(\"name\")+\"_text\"),e.attr(\"id\",this._$el.attr(\"id\")),e.attr(\"disabled\",this._$el.attr(\"disabled\")),e.attr(\"placeholder\",this._$el.attr(\"placeholder\")),e.attr(\"autocomplete\",\"off\"),e.addClass(this._$el.attr(\"class\")),this._defaultText&&e.val(this._defaultText);var s=this._$el.attr(\"required\");s&&e.attr(\"required\",s),e.data(u.NAME,this),this._$el.replaceWith(e),this._$el=e,this._el=e.get(0)},u.prototype.init=function(){this.bindDefaultEventListeners(),\"ajax\"===this._settings.resolver&&(this.resolver=new l(this._settings.resolverSettings)),4===this.getBootstrapVersion()[0]?this._dd=new h(this._$el,this._settings.formatResult,this._settings.autoSelect,this._settings.noResultsText):this._dd=new a(this._$el,this._settings.formatResult,this._settings.autoSelect,this._settings.noResultsText)},u.prototype.bindDefaultEventListeners=function(){var s=this;this._$el.on(\"keydown\",function(t){switch(t.which){case 9:s._dd.isItemFocused?s._dd.selectFocusItem():s._selectedItem||\"\"!==s._$el.val()&&s._$el.trigger(\"autocomplete.freevalue\",s._$el.val()),s._dd.hide();break;case 13:s._dd.isItemFocused?s._dd.selectFocusItem():s._selectedItem||\"\"!==s._$el.val()&&s._$el.trigger(\"autocomplete.freevalue\",s._$el.val()),s._dd.hide(),s._settings.preventEnter&&t.preventDefault();break;case 40:s._dd.focusNextItem();break;case 38:s._dd.focusPreviousItem()}}),this._$el.on(\"keyup\",function(t){switch(t.which){case 16:case 17:case 18:case 39:case 37:case 36:case 35:break;case 13:case 27:s._dd.hide();break;case 40:case 38:break;default:s._selectedItem=null;var e=s._$el.val();s.handlerTyped(e)}}),this._$el.on(\"blur\",function(t){!s._dd.isMouseOver&&s._dd.isDdMouseOver&&s._dd.isShown()?(setTimeout(function(){s._$el.focus()}),s._$el.focus()):s._dd.isMouseOver||(s._isSelectElement?s._dd.isItemFocused?s._dd.selectFocusItem():(null!==s._selectedItem&&\"\"!==s._$el.val()||(\"\"!==s._$el.val()&&null!==s._defaultValue?(s._$el.val(s._defaultText),s._selectHiddenField.val(s._defaultValue)):(s._$el.val(\"\"),s._selectHiddenField.val(\"\")),s._selectedItem=null),s._$el.trigger(\"autocomplete.select\",s._selectedItem)):null===s._selectedItem&&s._$el.trigger(\"autocomplete.freevalue\",s._$el.val()),s._dd.hide())}),this._$el.on(\"autocomplete.select\",function(t,e){s._selectedItem=e,s.itemSelectedDefaultHandler(e)}),this._$el.on(\"paste\",function(t){setTimeout(function(){s._$el.trigger(\"keyup\",t)},0)})},u.prototype.handlerTyped=function(t){null!==this._settings.events.typed&&!(t=this._settings.events.typed(t,this._$el))||(t.length>=this._settings.minLength?(this._searchText=t,this.handlerPreSearch()):this._dd.hide())},u.prototype.handlerPreSearch=function(){if(null!==this._settings.events.searchPre){var t=this._settings.events.searchPre(this._searchText,this._$el);if(!t)return;this._searchText=t}this.handlerDoSearch()},u.prototype.handlerDoSearch=function(){var e=this;null!==this._settings.events.search?this._settings.events.search(this._searchText,function(t){e.postSearchCallback(t)},this._$el):this.resolver&&this.resolver.search(this._searchText,function(t){e.postSearchCallback(t)})},u.prototype.postSearchCallback=function(t){this._settings.events.searchPost&&\"boolean\"==typeof(t=this._settings.events.searchPost(t,this._$el))&&!t||this.handlerStartShow(t)},u.prototype.handlerStartShow=function(t){this._dd.updateItems(t,this._searchText)},u.prototype.itemSelectedDefaultHandler=function(t){var e;null!=t?(\"string\"==typeof(e=this._settings.formatResult(t))&&(e={text:e}),this._$el.val(e.text),this._isSelectElement&&this._selectHiddenField.val(e.value)):(this._$el.val(\"\"),this._isSelectElement&&this._selectHiddenField.val(\"\")),this._selectedItem=t,this._dd.hide()},u.prototype.defaultFormatResult=function(t){return\"string\"==typeof t?{text:t}:t.text?t:{text:t.toString()}},u.prototype.manageAPI=function(t,e){\"set\"===t?this.itemSelectedDefaultHandler(e):\"clear\"===t?this.itemSelectedDefaultHandler(null):\"show\"===t?this._$el.trigger(\"keyup\"):\"updateResolver\"===t&&(this.resolver=new l(e))},u.NAME=\"autoComplete\",u);function u(t,e){this._selectedItem=null,this._defaultValue=null,this._defaultText=null,this._isSelectElement=!1,this._settings={resolver:\"ajax\",resolverSettings:{},minLength:3,valueKey:\"value\",formatResult:this.defaultFormatResult,autoSelect:!0,noResultsText:\"No results\",bootstrapVersion:\"auto\",preventEnter:!1,events:{typed:null,searchPre:null,search:null,searchPost:null,select:null,focus:null}},this._el=t,this._$el=$(this._el),this._$el.is(\"select\")&&(this._isSelectElement=!0),this.manageInlineDataAttributes(),\"object\"==typeof e&&(this._settings=$.extend(!0,{},this.getSettings(),e)),this._isSelectElement&&this.convertSelectToText(),this.init()}function c(t,e,s,i){this.initialized=!1,this.shown=!1,this.items=[],this.ddMouseover=!1,this._$el=t,this.formatItem=e,this.autoSelect=s,this.noResultsText=i}function f(t,e,s,i){this.initialized=!1,this.shown=!1,this.items=[],this.ddMouseover=!1,this._$el=t,this.formatItem=e,this.autoSelect=s,this.noResultsText=i}function p(t){return o.call(this,t)||this}function _(t){this._settings=$.extend(!0,{},this.getDefaults(),t)}n=jQuery,window,document,n.fn[d.NAME]=function(e,s){return this.each(function(){var t;(t=n(this).data(d.NAME))||(t=new d(this,e),n(this).data(d.NAME,t)),t.manageAPI(e,s)})}}]);","import Inputmask from \"inputmask/lib/inputmask\";\r\nimport errors from \"../modules/Errors\";\r\nimport \"bootstrap-autocomplete/dist/latest/bootstrap-autocomplete.min\";\r\n\r\nclass KbfAddressAutocomplete extends EventTarget {\r\n\r\n    constructor(selector, config = {}, lang = 'pl') {\r\n\r\n        super();\r\n\r\n        this.$addressAutocomplete = $(selector);\r\n\r\n        // Emituj wyjatek gdy nie podano selektora albo element nie zostal znaleziony\r\n        if (!selector || this.$addressAutocomplete.length === 0) throw errors.elementNotFound(selector);\r\n\r\n        let instance = this;\r\n\r\n        this.lang = lang;\r\n        this.currentAddressInfo = {}; // Aktualne dane o adresie\r\n\r\n        this.config = {\r\n\r\n            minLength: 6,\r\n            requestThrottling: 300,\r\n            noResultsText: this.lang === 'pl' ? 'Nie odneleziono adresu.' : '',\r\n\r\n            // Ustawienia resolvera\r\n            resolverSettings: {\r\n            url: 'http://localhost/kbf2/api/addresses/?',\r\n                fail: function () {\r\n            }\r\n        },\r\n\r\n            // Formatuj wyniki\r\n            formatResult: function (item) {\r\n\r\n                // Aktualizuj dane o adresie\r\n                instance.currentAddressInfo = {\r\n                        lat: item.lat,\r\n                        lon: item.lon,\r\n                        address: item.address.road + ' ' + item.address.house_number,\r\n                        city: item.address.city,\r\n                        zip: item.address.postcode,\r\n                };\r\n\r\n                instance.emitAddressChange();\r\n\r\n                // instance.emit(new CustomEvent('address-change', { detail: instance.currentAddressInfo }))\r\n\r\n                return {\r\n                    id: item.place_id,\r\n                    text: item.address.road + ' ' + item.address.house_number,\r\n                    html: `${item.address.road.toUpperCase() + ' ' + item.address.house_number.toUpperCase()}, <b>${item.address.city.toUpperCase()}</b>`\r\n                }\r\n            },\r\n\r\n            events: {\r\n\r\n                // Testuj query przed zapytaniem\r\n                searchPre: function (query) {\r\n\r\n                    query = query.replace(new RegExp(\"_+\"), '');\r\n                    let isQueryValid = new RegExp(\"[A-Za-z]+\\\\s+\\\\d+[a-zA-Z]?\").test(query);\r\n                    if (isQueryValid ) return query;\r\n                    else return false;\r\n\r\n                },\r\n\r\n                // Przygotuj wyniki\r\n                searchPost: function (results) {\r\n                    return results.filter(function (result) {\r\n                        return result.address.house_number !== undefined && result.address.city !== undefined\r\n                    })\r\n\r\n                },\r\n\r\n            },\r\n\r\n            ...config\r\n        }\r\n\r\n        this.init();\r\n\r\n    }\r\n\r\n    init() {\r\n\r\n        // Aliasy\r\n        this.on = this.addEventListener;\r\n        this.off = this.removeEventListener;\r\n        this.emit = this.dispatchEvent;\r\n\r\n        new Inputmask().mask(this.$addressAutocomplete[0]);\r\n        this.$addressAutocomplete.autoComplete(this.config);\r\n\r\n    }\r\n\r\n    addListeners() {\r\n\r\n    }\r\n\r\n    emitAddressChange() {\r\n\r\n        let instance = this;\r\n\r\n        setTimeout(function () {\r\n            let $dropdownMenu = instance.$addressAutocomplete.next('.dropdown-menu');\r\n            if ($dropdownMenu.length > 0)\r\n\r\n                if ($dropdownMenu.is(':hidden')) {\r\n                    instance.emit(new CustomEvent('address-change', { detail: instance.currentAddressInfo }))\r\n                }\r\n\r\n        }, 500);\r\n\r\n    }\r\n}\r\n\r\nexport default KbfAddressAutocomplete","import KbfAddressAutocomplete from \"../../components/KbfAddressAutocomplete\";\r\n\r\nclass App {\r\n\r\n    constructor() {\r\n\r\n        this.init();\r\n        this.addListeners();\r\n\r\n    }\r\n\r\n    init() {\r\n\r\n        this.autocomplete = new KbfAddressAutocomplete('.address-autocomplete');\r\n\r\n    }\r\n\r\n    addListeners() {\r\n\r\n        this.autocomplete.on('address-change', function (e) {\r\n            console.log(e.detail);\r\n        })\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default App;","import App from './components/App';\r\n\r\n(function($){\r\n\r\n    $(document).ready(function () {\r\n\r\n        new App();\r\n\r\n    })\r\n\r\n})(window.$)"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_defineProperty","obj","value","_assertThisInitialized","self","ReferenceError","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_inherits","subClass","superClass","create","constructor","_typeof","Symbol","iterator","_possibleConstructorReturn","call","assertThisInitialized","_getPrototypeOf","getPrototypeOf","_isNativeFunction","fn","Function","toString","indexOf","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","e","_construct","Parent","args","Class","isNativeReflectConstruct","a","push","apply","bind","arguments","_wrapNativeSuper","_cache","Map","undefined","isNativeFunction","has","get","set","Wrapper","object","getLocator","tst","align","locator","alternation","mloc","getDecisionTaker","join","decisionTaker","split","getPlaceholder","pos","test","returnPL","inputmask","opts","maskset","getTest","match","placeholder","static","validPositions","tests","getTests","staticAlternations","prevTest","def","optionality","optionalQuantifier","charAt","getMaskTemplate","baseOnInput","minimalPos","includeMode","noJit","clearOptionalTail","greedy","maskTemplate","ndxIntlzr","testPos","jitRenderStatic","generatedInput","input","skipOptionalPartCharacter","determineTestTemplate","slice","nativeDef","getTestTemplate","jitMasking","jit","groupSeparator","isFinite","maxLength","pop","maskLength","tstPs","altTest","targetLocator","tstLocator","closest","bestMatch","ndx","distance","Math","abs","newBlockMarker","$","dependencyLib","el","maskTokens","maskToken","ndxInitializer","matches","insertStop","latestMatch","cacheDependency","resolveTestFromToken","loopNdx","quantifierRecurse","handleMatch","isFirstMatch","tokenGroup","firstMatch","every","isQuantifier","hasOwnProperty","resolveNdxInitializer","alternateNdx","targetAlternation","indexPos","lmnt","ndxPos","bestMatchAltIndex","isSubsetOf","source","expand","pattern","expanded","start","end","l","charCodeAt","String","fromCharCode","regex","RegExp","replace","staticCanMatchDefinition","setMergeLocators","targetMatch","altMatch","alternationNdx","shouldMerge","locNdx","keys","isSameLevel","_maxTestPos","mask","reverse","isGroup","isOptional","optionalToken","mtchsNdx","forEach","mtch","isAlternator","alternateToken","malternateMatches","maltMatches","currentMatches","loopNdxCnt","altIndex","shift","currentPos","ndxInitializerClone","altIndexArr","amndx","excludes","altIndexArrClone","exl","excludeSet","splice","keepStatic","parseInt","unMatchedAlternation","concat","ndx1","dropMatch","ndx2","altMatch2","includes","userOptions","qt","qndx","isNaN","quantifier","max","min","jitOffset","tndx","mergeLocators","Array","isArray","previousPos","cd","mtndx","casing","extend","ua","window","navigator","userAgent","ie","mobile","iemobile","iphone","applyInputValue","refreshValue","onBeforeMask","checkVal","undoValue","getBuffer","clearMaskOnLostFocus","clearIncomplete","_valueGet","getBufferTemplate","getLastValidPosition","_valueSet","buffer","template","writeOut","strict","nptvl","initiatingEvent","inputValue","charCodes","initialNdx","result","isTemplateMatch","targetTemplate","seekNext","charCodeNdx","isMask","nextPos","caretPos","begin","resetMaskSet","radixPoint","determineNewCaretPosition","staticMatches","prevCaretPos","charCode","isValid","keypress","Event","which","lvp","EventHandlers","keypressEvent","isRTL","forwardPosition","writeBuffer","sndx","validPos","nextValid","isComplete","nextSndx","type","HandleNativePlaceholder","npt","nptValue","removeAttribute","unmaskedvalue","umValue","vps","pndx","metadata","unmaskedValue","onUnMask","bufferValue","event","triggerEvents","onBeforeWrite","refreshFromBuffer","refresh","caret","keyCode","DELETE","BACKSPACE","$input","nptVal","skipInputEvent","trigger","setTimeout","keydownEvent","k","kdResult","onKeyDown","BACKSPACE_SAFARI","ctrlKey","X","preventDefault","handleRemove","END","PAGE_DOWN","shiftKey","HOME","PAGE_UP","undoOnEscape","ESCAPE","altKey","tabThrough","TAB","seekPrevious","insertModeVisual","insertMode","RIGHT","LEFT","translatePosition","ignorable","ignorables","checkval","metaKey","ENTER","location","c","writeOutBuffer","valResult","numericInput","onKeyValidation","keyupEvent","isComposing","KEY_229","$el","pasteEvent","tempValue","valueBeforeCaret","substr","valueAfterCaret","clipboardData","getData","pasteValue","onBeforePaste","inputFallBackEvent","ieMobileHandler","inputChar","iv","analyseChanges","frontPart","backPart","frontBufferPart","backBufferPart","fpl","bpl","bl","action","data","marker","unshift","newBuffer","oldBuffer","changes","shadowRoot","document","activeElement","focus","entry","keydown","compositionendEvent","setValueEvent","detail","focusEvent","showMaskOnFocus","positionCaretOnTab","mouseEnter","clickEvent","invalidEvent","validationEvent","mouseleaveEvent","originalPlaceholder","tabbed","newCaretPosition","cutEvent","clipData","setData","execCommand","blurEvent","mouseenterEvent","showMaskOnHover","submitEvent","removeMaskOnSubmit","resetEvent","alternate","maskPos","fromIsValid","rAltPos","selection","validPsClone","tstClone","lastAlt","isValidRslt","returnRslt","altPos","prevAltPos","decisionPos","lAltPos","validInputs","resultPos","elem","toUpperCase","toLowerCase","posBefore","SPACE","checkAlternationMatch","altArr1","altArr2","na","altArrC","isMatch","naArr","naNdx","alndx","pend","offset","revalidateMask","newPos","repeat","complete","lrp","determineLastRequiredPosition","aml","fromAlternate","validateOnly","fromCheckval","isSelection","posObj","processCommandObject","commandObj","remove","sort","b","insert","rewritePosition","_isValid","position","rslt","validatedPos","positionsClone","preValidation","currentPosValid","skip","nPos","snPos","trackbackPositions","postValidation","postResult","endResult","positionCanMatchDefinition","testDefinition","valid","shiftPositions","bffr","originalPos","fillOnly","ps","vp","np","cvpInput","validTest","IsEnclosedStatic","valids","posMatch","prevMatch","nextMatch","j","t","canMatch","notranslate","isDelete","range","scrollCalc","ownerDocument","defaultView","getComputedStyle","currentStyle","fontSize","scrollLeft","scrollWidth","setSelectionRange","getSelection","createRange","firstChild","textNode","createTextNode","appendChild","setStart","setEnd","collapse","sel","removeAllRanges","addRange","createTextRange","moveEnd","moveStart","select","selectionStart","selectionEnd","getRangeAt","commonAncestorContainer","parentNode","startOffset","endOffset","duplicate","text","returnDefinition","positions","lvTest","lvTestAlt","selectedCaret","doRadixFocus","clickPos","digits","radixPos","positionCaretOnClick","clickPosition","lvclickPosition","lastPosition","tt","noCache","_buffer","closestTo","before","after","posNdx","psNdx","fuzzy","testTemplate","testPlaceHolder","soft","newBlock","EventRuler","on","eventName","eventHandler","ev","originalEvent","that","nodeName","imOpts","off","Inputmask","disabled","readOnly","inputType","skipKeyPressEvent","blur","returnVal","stopPropagation","events","form","evArr","isElementTypeSupported","patchValueProperty","valueGet","valueSet","patchValhook","valHooks","inputmaskpatch","valhookGet","valhookSet","autoUnmask","nullable","getter","setter","installNativeValueSetFallback","__valueGet","noValuePatching","getOwnPropertyDescriptor","valueProperty","tagName","textContent","__lookupGetter__","__lookupSetter__","__defineGetter__","__defineSetter__","__valueSet","overruleRTL","elementType","getAttribute","isSupported","supportsInputType","isContentEditable","createElement","setAttribute","inputMode","inputmode","autocomplete","oncomplete","onincomplete","oncleared","inputEventOnly","options","name","src","copy","copyIsArray","clone","deep","eval","owner","__data","isValidElement","Element","CustomEvent","params","bubbles","cancelable","evt","createEvent","initCustomEvent","handler","addEvent","namespace","addEventListener","attachEvent","eventRegistry","_events","endx","nsEvent","removeEvent","removeEventListener","detachEvent","nmsp","resolveNamespace","evts","hndx","hndL","evNdx","offEvents","offEventsL","evnt","dispatchEvent","createEventObject","eventType","fireEvent","DependencyLib","querySelector","generateMaskSet","nocache","ms","generateMask","regexMask","repeatStart","groupmarker","quantifiermarker","masksetDefinition","maskdefKey","masksCache","analyseMask","altMask","msk","alternatormarker","tokenizer","regexTokenizer","escaped","currentToken","MaskToken","m","openenings","openingToken","currentOpeningToken","alternator","lastMatch","closeRegexGroup","openGroup","alternatorGroup","insertTestDefinition","mtoken","element","staticDefinitionSymbol","maskdef","definitions","usePrototypeDefinitions","validator","definitionSymbol","generated","verifyGroupMarker","token","nextToken","defaultCase","mndx","reverseTokens","reverseStatic","st","optionalmarker","intMatch","groupify","groupToken","closeGroup","groupQuantifier","exec","altRegexGroup","escapeChar","mqj","mq","mq0","mq1","tmpMatch","subToken","alias","pastedValue","rightAlign","_radixDance","importDataAttributes","dataKey","internal","defaults","noMasksCache","resolveAlias","dataAttribute","aliases","elems","getElementById","querySelectorAll","scopedOpts","importAttributeOptions","option","noremask","valueBuffer","cv","getemptymask","hasMaskedValue","getmetadata","maskTarget","mtdt","rl","lmib","format","formattedValue","setValue","aliasStr","aliasDefinition","importOption","optionData","attrOption","attrOptions","dataoptions","JSON","parse","dir","style","textAlign","extendDefaults","extendDefinitions","definition","extendAliases","unmask","errors","elementNotFound","selector","Error","formNotFound","formName","argumentNotFound","argumentName","substring","noValidator","noGeoCoords","s","exports","d","r","toStringTag","__esModule","n","default","_","getDefaults","getResults","results","search","url","method","queryKey","extraData","timeout","requestThrottling","jqXHR","abort","_settings","requestTID","clearTimeout","ajax","done","fail","always","f","init","_$el","height","offsetHeight","_dd","addClass","insertAfter","css","top","outerHeight","left","width","outerWidth","currentTarget","itemSelectedLaunchEvent","shown","hide","ddMouseover","haveResults","find","removeClass","mouseover","initialized","checkInitialized","items","focusNextItem","prev","next","last","first","focusPreviousItem","selectFocusItem","isShown","show","dropdown","updateItems","searchText","refreshItemList","showMatchedText","empty","formatItem","html","append","attr","noResultsText","h","getElPos","overflow","u","manageInlineDataAttributes","getSettings","resolverSettings","_defaultValue","_defaultText","getBootstrapVersion","bootstrapVersion","button","VERSION","map","console","error","convertSelectToText","val","_selectHiddenField","NAME","replaceWith","_el","bindDefaultEventListeners","resolver","formatResult","autoSelect","isItemFocused","_selectedItem","preventEnter","handlerTyped","isMouseOver","isDdMouseOver","_isSelectElement","itemSelectedDefaultHandler","typed","minLength","_searchText","handlerPreSearch","searchPre","handlerDoSearch","postSearchCallback","searchPost","handlerStartShow","defaultFormatResult","manageAPI","valueKey","is","jQuery","each","KbfAddressAutocomplete","config","lang","$addressAutocomplete","currentAddressInfo","item","lat","lon","address","road","house_number","city","zip","postcode","emitAddressChange","id","place_id","query","isQueryValid","filter","emit","autoComplete","$dropdownMenu","EventTarget","App","addListeners","log","ready"],"mappings":"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"}