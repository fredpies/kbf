{"version":3,"file":"login.js","sources":["../../js/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../js/node_modules/@babel/runtime/helpers/esm/createClass.js","../../js/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../../js/node_modules/@babel/runtime/helpers/esm/superPropBase.js","../../js/node_modules/@babel/runtime/helpers/esm/get.js","../../js/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../../js/node_modules/@babel/runtime/helpers/esm/inherits.js","../../js/node_modules/@babel/runtime/helpers/esm/typeof.js","../../js/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../../js/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../../js/node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","../../js/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../../js/node_modules/@babel/runtime/helpers/esm/construct.js","../../js/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","../../js/modules/Errors.js","../../js/components/KbfPreloaderButton.js","../../js/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../js/node_modules/inputmask/lib/getPrototypeOf.js","../../js/node_modules/inputmask/lib/validation-tests.js","../../js/node_modules/inputmask/lib/environment.js","../../js/node_modules/inputmask/lib/inputHandling.js","../../js/node_modules/inputmask/lib/eventhandlers.js","../../js/node_modules/inputmask/lib/validation.js","../../js/node_modules/inputmask/lib/positioning.js","../../js/node_modules/inputmask/lib/eventruler.js","../../js/node_modules/inputmask/lib/mask.js","../../js/node_modules/inputmask/lib/dependencyLibs/extend.js","../../js/node_modules/inputmask/lib/global/window.js","../../js/node_modules/inputmask/lib/dependencyLibs/data.js","../../js/node_modules/inputmask/lib/dependencyLibs/events.js","../../js/node_modules/inputmask/lib/dependencyLibs/inputmask.dependencyLib.js","../../js/node_modules/inputmask/lib/mask-lexer.js","../../js/node_modules/inputmask/lib/definitions.js","../../js/node_modules/inputmask/lib/defaults.js","../../js/node_modules/inputmask/lib/inputmask.js","../../js/components/KbfForm.js","../../js/login/components/App.js","../../js/login/entry.js"],"sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","import superPropBase from \"./superPropBase.js\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import _typeof from \"@babel/runtime/helpers/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","let errors = {};\r\n\r\n// Wyjatki\r\n\r\n// Nie znaleziono elementu DOM\r\nerrors.elementNotFound = function (selector) {\r\n    return new Error(`Cannot find elements with selector \"${selector}\"`);\r\n}\r\n\r\n// Nie znaleziono formularza\r\nerrors.formNotFound = function (formName) {\r\n    return new Error(`Cannot find form with name \"${formName}\"`);\r\n}\r\n\r\n// Nie podano argumentu\r\nerrors.argumentNotFound = function (argumentName) {\r\n    return new Error(`${argumentName.substring(0, 1).toUpperCase() + argumentName.substring(1)} argument cannot be empty`);\r\n}\r\n\r\n// Brak walidatora dla formularza\r\nerrors.noValidator = function () {\r\n    return new Error(`No JQuery validator plugin`);\r\n}\r\n\r\n// Nie podano wspolrzednych geograficznych\r\nerrors.noGeoCoords = function () {\r\n    return new Error(`You must provide geo coordinates.`);\r\n}\r\n\r\nexport default errors;","import errors from \"../modules/Errors\";\r\n\r\nclass KbfPreloaderButton extends EventTarget {\r\n\r\n    constructor(selector, auto= true) {\r\n\r\n        super();\r\n        let $ = window.$;\r\n\r\n        this.$preloaderButton = $(selector);\r\n\r\n        // Emituj wyjatek gdy nie podano selektora albo element nie zostal znaleziony\r\n        if (!selector || this.$preloaderButton.length === 0) throw errors.elementNotFound(selector);\r\n\r\n        this.auto = auto; // Czy automatycznie dodawac listener\r\n\r\n        this.init();\r\n        this.addListeners();\r\n\r\n    }\r\n\r\n    init() {\r\n\r\n        // Aliasy\r\n        this.on = this.addEventListener;\r\n        this.off = this.removeEventListener;\r\n        this.emit = this.dispatchEvent;\r\n\r\n        this.buttonCurrentContents = this.$preloaderButton.html(); // Aktualna zawartosc\r\n\r\n    }\r\n\r\n    triggerStart(buttonElement) {\r\n\r\n        let buttonGeometry = buttonElement.getBoundingClientRect(); // Aktualna geometria\r\n\r\n        let $buttonElement = $(buttonElement);\r\n        let bgColor;\r\n\r\n\r\n        $buttonElement.on('click', function () {\r\n            console.log('not touch')\r\n            bgColor = getComputedStyle(buttonElement, ':hover').backgroundColor;\r\n        })\r\n\r\n\r\n        this.$preloaderButton.trigger({\r\n            type: 'start-preloader',\r\n            buttonGeometry,\r\n            bgColor\r\n        });\r\n\r\n        this.emit(new CustomEvent('click'));\r\n    }\r\n\r\n    // Startuje preloader\r\n    startPreloader(buttonElement, buttonGeometry, bgColor) {\r\n\r\n        let $ = window.$;\r\n\r\n        let $buttonElement = $(buttonElement);\r\n\r\n        $buttonElement.attr('disabled', 'disabled');\r\n        $buttonElement.css('width', buttonGeometry.width + 'px');\r\n        $buttonElement.css('height', buttonGeometry.height + 'px');\r\n        $buttonElement.css('padding', 0);\r\n        $buttonElement.css('background-color', bgColor);\r\n        $buttonElement.html(KbfPreloaderButton.preloaderMarkup);\r\n\r\n    }\r\n\r\n    // Zatrzymuje preloader\r\n    stopPreloader() {\r\n        this.$preloaderButton.html(this.buttonCurrentContents).attr('style', '');\r\n        this.$preloaderButton.removeAttr('disabled');\r\n    }\r\n\r\n    addListeners() {\r\n\r\n        let instance = this;\r\n\r\n        // Rejestruj handler warunkowo\r\n        if (this.auto) {\r\n            this.$preloaderButton.on('click', function () {\r\n               instance.triggerStart(this);\r\n            });\r\n        }\r\n\r\n        this.$preloaderButton.on('start-preloader', function (e) {\r\n            instance.startPreloader(this, e.buttonGeometry, e.bgColor);\r\n        })\r\n\r\n    }\r\n}\r\n\r\nKbfPreloaderButton.preloaderMarkup = '<div class=\"kbf-button-preloader\"><div id=\"dots\"><span></span><span></span><span></span></div></div>';\r\nexport default KbfPreloaderButton;","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","if (typeof Object.getPrototypeOf !== \"function\") {\n\tObject.getPrototypeOf = typeof \"test\".__proto__ === \"object\" ? function (object) {\n\t\treturn object.__proto__;\n\t} : function (object) {\n\t\treturn object.constructor.prototype;\n\t};\n}","export {determineTestTemplate, getDecisionTaker, getMaskTemplate, getPlaceholder, getTest, getTests, getTestTemplate};\n\nfunction getLocator(tst, align) { //need to align the locators to be correct\n\tvar locator = (tst.alternation != undefined ? tst.mloc[getDecisionTaker(tst)] : tst.locator).join(\"\");\n\tif (locator !== \"\") while (locator.length < align) locator += \"0\";\n\treturn locator;\n}\n\nfunction getDecisionTaker(tst) {\n\tvar decisionTaker = tst.locator[tst.alternation];\n\tif (typeof decisionTaker == \"string\" && decisionTaker.length > 0) { //no decision taken ~ take first one as decider\n\t\tdecisionTaker = decisionTaker.split(\",\")[0];\n\t}\n\treturn decisionTaker !== undefined ? decisionTaker.toString() : \"\";\n}\n\n//tobe put on prototype?\nfunction getPlaceholder(pos, test, returnPL) {\n\tconst inputmask = this,\n\t\topts = this.opts,\n\t\tmaskset = this.maskset;\n\n\ttest = test || getTest.call(inputmask, pos).match;\n\tif (test.placeholder !== undefined || returnPL === true) {\n\t\treturn typeof test.placeholder === \"function\" ? test.placeholder(opts) : test.placeholder;\n\t} else if (test.static === true) {\n\t\tif (pos > -1 && maskset.validPositions[pos] === undefined) {\n\t\t\tvar tests = getTests.call(inputmask, pos),\n\t\t\t\tstaticAlternations = [],\n\t\t\t\tprevTest;\n\t\t\tif (tests.length > 1 + (tests[tests.length - 1].match.def === \"\" ? 1 : 0)) {\n\t\t\t\tfor (var i = 0; i < tests.length; i++) {\n\t\t\t\t\tif (tests[i].match.def !== \"\" && tests[i].match.optionality !== true && tests[i].match.optionalQuantifier !== true &&\n\t\t\t\t\t\t(tests[i].match.static === true || (prevTest === undefined || tests[i].match.fn.test(prevTest.match.def, maskset, pos, true, opts) !== false))) {\n\t\t\t\t\t\tstaticAlternations.push(tests[i]);\n\t\t\t\t\t\tif (tests[i].match.static === true) prevTest = tests[i];\n\t\t\t\t\t\tif (staticAlternations.length > 1) {\n\t\t\t\t\t\t\tif (/[0-9a-bA-Z]/.test(staticAlternations[0].match.def)) {\n\t\t\t\t\t\t\t\treturn opts.placeholder.charAt(pos % opts.placeholder.length);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn test.def;\n\t}\n\n\treturn opts.placeholder.charAt(pos % opts.placeholder.length);\n}\n\n//tobe put on prototype?\nfunction getMaskTemplate(baseOnInput, minimalPos, includeMode, noJit, clearOptionalTail) {\n\t//includeMode true => input, undefined => placeholder, false => mask\n\n\tvar inputmask = this,\n\t\topts = this.opts,\n\t\tmaskset = this.maskset;\n\n\n\tvar greedy = opts.greedy;\n\tif (clearOptionalTail) opts.greedy = false;\n\tminimalPos = minimalPos || 0;\n\tvar maskTemplate = [],\n\t\tndxIntlzr, pos = 0,\n\t\ttest, testPos, jitRenderStatic;\n\tdo {\n\t\tif (baseOnInput === true && maskset.validPositions[pos]) {\n\t\t\ttestPos = (clearOptionalTail && maskset.validPositions[pos].match.optionality === true\n\t\t\t\t&& maskset.validPositions[pos + 1] === undefined\n\t\t\t\t&& (maskset.validPositions[pos].generatedInput === true || (maskset.validPositions[pos].input == opts.skipOptionalPartCharacter && pos > 0)))\n\t\t\t\t? determineTestTemplate.call(inputmask, pos, getTests.call(inputmask, pos, ndxIntlzr, pos - 1))\n\t\t\t\t: maskset.validPositions[pos];\n\t\t\ttest = testPos.match;\n\t\t\tndxIntlzr = testPos.locator.slice();\n\t\t\tmaskTemplate.push(includeMode === true ? testPos.input : includeMode === false ? test.nativeDef : getPlaceholder.call(inputmask, pos, test));\n\t\t} else {\n\t\t\ttestPos = getTestTemplate.call(inputmask, pos, ndxIntlzr, pos - 1);\n\t\t\ttest = testPos.match;\n\t\t\tndxIntlzr = testPos.locator.slice();\n\t\t\tvar jitMasking = noJit === true ? false : (opts.jitMasking !== false ? opts.jitMasking : test.jit);\n\t\t\t//check for groupSeparator is a hack for the numerics as we don't want the render of the groupSeparator beforehand\n\t\t\tjitRenderStatic = (jitRenderStatic && test.static && test.def !== opts.groupSeparator && test.fn === null) || (maskset.validPositions[pos - 1] && test.static && test.def !== opts.groupSeparator && test.fn === null);\n\t\t\tif (jitRenderStatic || jitMasking === false || jitMasking === undefined /*|| pos < lvp*/ || (typeof jitMasking === \"number\" && isFinite(jitMasking) && jitMasking > pos)) {\n\t\t\t\tmaskTemplate.push(includeMode === false ? test.nativeDef : getPlaceholder.call(inputmask, pos, test));\n\t\t\t} else {\n\t\t\t\tjitRenderStatic = false;\n\t\t\t}\n\t\t}\n\n\t\tpos++;\n\t} while ((inputmask.maxLength === undefined || pos < inputmask.maxLength) && (test.static !== true || test.def !== \"\") || minimalPos > pos);\n\tif (maskTemplate[maskTemplate.length - 1] === \"\") {\n\t\tmaskTemplate.pop(); //drop the last one which is empty\n\t}\n\tif (includeMode !== false || //do not alter the masklength when just retrieving the maskdefinition\n\t\tmaskset.maskLength === undefined) //just make sure the maskLength gets initialized in all cases (needed for isValid)\n\t{\n\t\tmaskset.maskLength = pos - 1;\n\t}\n\n\topts.greedy = greedy;\n\treturn maskTemplate;\n}\n\n//tobe put on prototype?\nfunction getTestTemplate(pos, ndxIntlzr, tstPs) {\n\tvar inputmask = this,\n\t\tmaskset = this.maskset;\n\n\treturn maskset.validPositions[pos] || determineTestTemplate.call(inputmask, pos, getTests.call(inputmask, pos, ndxIntlzr ? ndxIntlzr.slice() : ndxIntlzr, tstPs));\n}\n\n//tobe put on prototype?\nfunction determineTestTemplate(pos, tests) {\n\tvar inputmask = this,\n\t\topts = this.opts;\n\n\tpos = pos > 0 ? pos - 1 : 0;\n\tvar altTest = getTest.call(inputmask, pos), targetLocator = getLocator(altTest), tstLocator, closest, bestMatch;\n\tfor (var ndx = 0; ndx < tests.length; ndx++) { //find best matching\n\t\tvar tst = tests[ndx];\n\t\ttstLocator = getLocator(tst, targetLocator.length);\n\t\tvar distance = Math.abs(tstLocator - targetLocator);\n\t\tif (closest === undefined\n\t\t\t|| (tstLocator !== \"\" && distance < closest)\n\t\t\t|| (bestMatch && !opts.greedy && bestMatch.match.optionality && bestMatch.match.newBlockMarker === \"master\" && (!tst.match.optionality || !tst.match.newBlockMarker))\n\t\t\t|| (bestMatch && bestMatch.match.optionalQuantifier && !tst.match.optionalQuantifier)) {\n\t\t\tclosest = distance;\n\t\t\tbestMatch = tst;\n\t\t}\n\t}\n\n\treturn bestMatch;\n}\n\n//tobe put on prototype?\nfunction getTest(pos, tests) {\n\tvar inputmask = this,\n\t\tmaskset = this.maskset;\n\n\tif (maskset.validPositions[pos]) {\n\t\treturn maskset.validPositions[pos];\n\t}\n\treturn (tests || getTests.call(inputmask, pos))[0];\n}\n\n//tobe put on prototype?\nfunction getTests(pos, ndxIntlzr, tstPs) {\n\tvar inputmask = this,\n\t\t$ = this.dependencyLib,\n\t\tmaskset = this.maskset,\n\t\topts = this.opts,\n\t\tel = this.el,\n\t\tmaskTokens = maskset.maskToken,\n\t\ttestPos = ndxIntlzr ? tstPs : 0,\n\t\tndxInitializer = ndxIntlzr ? ndxIntlzr.slice() : [0],\n\t\tmatches = [],\n\t\tinsertStop = false,\n\t\tlatestMatch,\n\t\tcacheDependency = ndxIntlzr ? ndxIntlzr.join(\"\") : \"\";\n\n\tfunction resolveTestFromToken(maskToken, ndxInitializer, loopNdx, quantifierRecurse) { //ndxInitializer contains a set of indexes to speedup searches in the mtokens\n\t\tfunction handleMatch(match, loopNdx, quantifierRecurse) {\n\t\t\tfunction isFirstMatch(latestMatch, tokenGroup) {\n\t\t\t\tvar firstMatch = tokenGroup.matches.indexOf(latestMatch) === 0;\n\t\t\t\tif (!firstMatch) {\n\t\t\t\t\ttokenGroup.matches.every(function (match, ndx) {\n\t\t\t\t\t\tif (match.isQuantifier === true) {\n\t\t\t\t\t\t\tfirstMatch = isFirstMatch(latestMatch, tokenGroup.matches[ndx - 1]);\n\t\t\t\t\t\t} else if (Object.prototype.hasOwnProperty.call(match, \"matches\")) firstMatch = isFirstMatch(latestMatch, match);\n\t\t\t\t\t\tif (firstMatch) return false;\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn firstMatch;\n\t\t\t}\n\n\t\t\tfunction resolveNdxInitializer(pos, alternateNdx, targetAlternation) {\n\t\t\t\tvar bestMatch, indexPos;\n\n\t\t\t\tif (maskset.tests[pos] || maskset.validPositions[pos]) {\n\t\t\t\t\t(maskset.tests[pos] || [maskset.validPositions[pos]]).every(function (lmnt, ndx) {\n\t\t\t\t\t\tif (lmnt.mloc[alternateNdx]) {\n\t\t\t\t\t\t\tbestMatch = lmnt;\n\t\t\t\t\t\t\treturn false; //break\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar alternation = targetAlternation !== undefined ? targetAlternation : lmnt.alternation,\n\t\t\t\t\t\t\tndxPos = lmnt.locator[alternation] !== undefined ? lmnt.locator[alternation].toString().indexOf(alternateNdx) : -1;\n\t\t\t\t\t\tif ((indexPos === undefined || ndxPos < indexPos) && ndxPos !== -1) {\n\t\t\t\t\t\t\tbestMatch = lmnt;\n\t\t\t\t\t\t\tindexPos = ndxPos;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (bestMatch) {\n\t\t\t\t\tvar bestMatchAltIndex = bestMatch.locator[bestMatch.alternation];\n\t\t\t\t\tvar locator = bestMatch.mloc[alternateNdx] || bestMatch.mloc[bestMatchAltIndex] || bestMatch.locator;\n\t\t\t\t\treturn locator.slice((targetAlternation !== undefined ? targetAlternation : bestMatch.alternation) + 1);\n\t\t\t\t} else {\n\t\t\t\t\treturn targetAlternation !== undefined ? resolveNdxInitializer(pos, alternateNdx) : undefined;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction isSubsetOf(source, target) {\n\t\t\t\tfunction expand(pattern) {\n\t\t\t\t\tvar expanded = [], start = -1, end;\n\t\t\t\t\tfor (var i = 0, l = pattern.length; i < l; i++) {\n\t\t\t\t\t\tif (pattern.charAt(i) === \"-\") {\n\t\t\t\t\t\t\tend = pattern.charCodeAt(i + 1);\n\t\t\t\t\t\t\twhile (++start < end) expanded.push(String.fromCharCode(start));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstart = pattern.charCodeAt(i);\n\t\t\t\t\t\t\texpanded.push(pattern.charAt(i));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn expanded.join(\"\");\n\t\t\t\t}\n\n\t\t\t\tif (source.match.def === target.match.nativeDef) return true;\n\t\t\t\tif ((opts.regex || (source.match.fn instanceof RegExp && target.match.fn instanceof RegExp)) && source.match.static !== true && target.match.static !== true) { //is regex a subset\n\t\t\t\t\treturn expand(target.match.fn.toString().replace(/[[\\]/]/g, \"\")).indexOf(expand(source.match.fn.toString().replace(/[[\\]/]/g, \"\"))) !== -1;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tfunction staticCanMatchDefinition(source, target) {\n\t\t\t\treturn source.match.static === true && target.match.static !== true ? target.match.fn.test(source.match.def, maskset, pos, false, opts, false) : false;\n\t\t\t}\n\n\t\t\t//mergelocators for retrieving the correct locator match when merging\n\t\t\tfunction setMergeLocators(targetMatch, altMatch) {\n\t\t\t\tvar alternationNdx = targetMatch.alternation,\n\t\t\t\t\tshouldMerge = altMatch === undefined || (alternationNdx === altMatch.alternation &&\n\t\t\t\t\t\ttargetMatch.locator[alternationNdx].toString().indexOf(altMatch.locator[alternationNdx]) === -1);\n\t\t\t\tif (!shouldMerge && alternationNdx > altMatch.alternation) {\n\t\t\t\t\tfor (var i = altMatch.alternation; i < alternationNdx; i++) {\n\t\t\t\t\t\tif (targetMatch.locator[i] !== altMatch.locator[i]) {\n\t\t\t\t\t\t\talternationNdx = i;\n\t\t\t\t\t\t\tshouldMerge = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (shouldMerge) {\n\t\t\t\t\ttargetMatch.mloc = targetMatch.mloc || {};\n\t\t\t\t\tvar locNdx = targetMatch.locator[alternationNdx];\n\t\t\t\t\tif (locNdx === undefined) {\n\t\t\t\t\t\ttargetMatch.alternation = undefined;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (typeof locNdx === \"string\") locNdx = locNdx.split(\",\")[0];\n\t\t\t\t\t\tif (targetMatch.mloc[locNdx] === undefined) targetMatch.mloc[locNdx] = targetMatch.locator.slice();\n\t\t\t\t\t\tif (altMatch !== undefined) {\n\t\t\t\t\t\t\tfor (var ndx in altMatch.mloc) {\n\t\t\t\t\t\t\t\tif (typeof ndx === \"string\") ndx = ndx.split(\",\")[0];\n\t\t\t\t\t\t\t\tif (targetMatch.mloc[ndx] === undefined) targetMatch.mloc[ndx] = altMatch.mloc[ndx];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttargetMatch.locator[alternationNdx] = Object.keys(targetMatch.mloc).join(\",\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tfunction isSameLevel(targetMatch, altMatch) {\n\t\t\t\tif (targetMatch.locator.length !== altMatch.locator.length) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tfor (let locNdx = targetMatch.alternation + 1; locNdx < targetMatch.locator.length; locNdx++) {\n\t\t\t\t\tif (targetMatch.locator[locNdx] !== altMatch.locator[locNdx]) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (testPos > (pos + opts._maxTestPos)) {\n\t\t\t\tthrow \"Inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. \" + maskset.mask;\n\t\t\t}\n\t\t\tif (testPos === pos && match.matches === undefined) {\n\t\t\t\tmatches.push({\n\t\t\t\t\t\"match\": match,\n\t\t\t\t\t\"locator\": loopNdx.reverse(),\n\t\t\t\t\t\"cd\": cacheDependency,\n\t\t\t\t\t\"mloc\": {}\n\t\t\t\t});\n\t\t\t\treturn true;\n\t\t\t} else if (match.matches !== undefined) {\n\t\t\t\tif (match.isGroup && quantifierRecurse !== match) { //when a group pass along to the quantifier\n\t\t\t\t\tmatch = handleMatch(maskToken.matches[maskToken.matches.indexOf(match) + 1], loopNdx, quantifierRecurse);\n\t\t\t\t\tif (match) return true;\n\t\t\t\t} else if (match.isOptional) {\n\t\t\t\t\tvar optionalToken = match, mtchsNdx = matches.length;\n\t\t\t\t\tmatch = resolveTestFromToken(match, ndxInitializer, loopNdx, quantifierRecurse);\n\t\t\t\t\tif (match) {\n\t\t\t\t\t\t//mark optionality in matches\n\t\t\t\t\t\tmatches.forEach(function (mtch, ndx) {\n\t\t\t\t\t\t\tif (ndx >= mtchsNdx) {\n\t\t\t\t\t\t\t\tmtch.match.optionality = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tlatestMatch = matches[matches.length - 1].match;\n\t\t\t\t\t\tif (quantifierRecurse === undefined && isFirstMatch(latestMatch, optionalToken)) { //prevent loop see #698\n\t\t\t\t\t\t\tinsertStop = true; //insert a stop\n\t\t\t\t\t\t\ttestPos = pos; //match the position after the group\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (match.isAlternator) {\n\t\t\t\t\tvar alternateToken = match,\n\t\t\t\t\t\tmalternateMatches = [],\n\t\t\t\t\t\tmaltMatches,\n\t\t\t\t\t\tcurrentMatches = matches.slice(),\n\t\t\t\t\t\tloopNdxCnt = loopNdx.length;\n\t\t\t\t\tvar altIndex = ndxInitializer.length > 0 ? ndxInitializer.shift() : -1;\n\t\t\t\t\tif (altIndex === -1 || typeof altIndex === \"string\") {\n\t\t\t\t\t\tvar currentPos = testPos,\n\t\t\t\t\t\t\tndxInitializerClone = ndxInitializer.slice(),\n\t\t\t\t\t\t\taltIndexArr = [],\n\t\t\t\t\t\t\tamndx;\n\t\t\t\t\t\tif (typeof altIndex == \"string\") {\n\t\t\t\t\t\t\taltIndexArr = altIndex.split(\",\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfor (amndx = 0; amndx < alternateToken.matches.length; amndx++) {\n\t\t\t\t\t\t\t\taltIndexArr.push(amndx.toString());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (maskset.excludes[pos] !== undefined) {\n\t\t\t\t\t\t\tvar altIndexArrClone = altIndexArr.slice();\n\t\t\t\t\t\t\tfor (var i = 0, exl = maskset.excludes[pos].length; i < exl; i++) {\n\t\t\t\t\t\t\t\tvar excludeSet = maskset.excludes[pos][i].toString().split(\":\");\n\t\t\t\t\t\t\t\tif (loopNdx.length == excludeSet[1]) {\n\t\t\t\t\t\t\t\t\taltIndexArr.splice(altIndexArr.indexOf(excludeSet[0]), 1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (altIndexArr.length === 0) { //fully alternated => reset\n\t\t\t\t\t\t\t\tdelete maskset.excludes[pos];\n\t\t\t\t\t\t\t\taltIndexArr = altIndexArrClone;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (opts.keepStatic === true || (isFinite(parseInt(opts.keepStatic)) && currentPos >= opts.keepStatic)) altIndexArr = altIndexArr.slice(0, 1);\n\t\t\t\t\t\tvar unMatchedAlternation = false;\n\t\t\t\t\t\tfor (var ndx = 0; ndx < altIndexArr.length; ndx++) {\n\t\t\t\t\t\t\tamndx = parseInt(altIndexArr[ndx]);\n\t\t\t\t\t\t\tmatches = [];\n\t\t\t\t\t\t\t//set the correct ndxInitializer\n\t\t\t\t\t\t\tndxInitializer = typeof altIndex === \"string\" ? resolveNdxInitializer(testPos, amndx, loopNdxCnt) || ndxInitializerClone.slice() : ndxInitializerClone.slice();\n\t\t\t\t\t\t\tif (alternateToken.matches[amndx] && handleMatch(alternateToken.matches[amndx], [amndx].concat(loopNdx), quantifierRecurse)) {\n\t\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t\t} else if (ndx === 0) {\n\t\t\t\t\t\t\t\tunMatchedAlternation = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tmaltMatches = matches.slice();\n\t\t\t\t\t\t\ttestPos = currentPos;\n\t\t\t\t\t\t\tmatches = [];\n\n\t\t\t\t\t\t\t//fuzzy merge matches\n\t\t\t\t\t\t\tfor (var ndx1 = 0; ndx1 < maltMatches.length; ndx1++) {\n\t\t\t\t\t\t\t\tvar altMatch = maltMatches[ndx1],\n\t\t\t\t\t\t\t\t\tdropMatch = false;\n\t\t\t\t\t\t\t\taltMatch.match.jit = altMatch.match.jit || unMatchedAlternation; //mark jit when there are unmatched alternations  ex: mask: \"(a|aa)\"\n\t\t\t\t\t\t\t\taltMatch.alternation = altMatch.alternation || loopNdxCnt;\n\t\t\t\t\t\t\t\tsetMergeLocators(altMatch);\n\t\t\t\t\t\t\t\tfor (var ndx2 = 0; ndx2 < malternateMatches.length; ndx2++) {\n\t\t\t\t\t\t\t\t\tvar altMatch2 = malternateMatches[ndx2];\n\t\t\t\t\t\t\t\t\tif (typeof altIndex !== \"string\" || (altMatch.alternation !== undefined && altIndexArr.includes(altMatch.locator[altMatch.alternation].toString()))) {\n\t\t\t\t\t\t\t\t\t\tif (altMatch.match.nativeDef === altMatch2.match.nativeDef) {\n\t\t\t\t\t\t\t\t\t\t\tdropMatch = true;\n\t\t\t\t\t\t\t\t\t\t\tsetMergeLocators(altMatch2, altMatch);\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t} else if (isSubsetOf(altMatch, altMatch2)) {\n\t\t\t\t\t\t\t\t\t\t\tif (setMergeLocators(altMatch, altMatch2)) {\n\t\t\t\t\t\t\t\t\t\t\t\tdropMatch = true;\n\t\t\t\t\t\t\t\t\t\t\t\tmalternateMatches.splice(malternateMatches.indexOf(altMatch2), 0, altMatch);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t} else if (isSubsetOf(altMatch2, altMatch)) {\n\t\t\t\t\t\t\t\t\t\t\tsetMergeLocators(altMatch2, altMatch);\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t} else if (staticCanMatchDefinition(altMatch, altMatch2)) {\n\t\t\t\t\t\t\t\t\t\t\tif (!isSameLevel(altMatch, altMatch2) && el.inputmask.userOptions.keepStatic === undefined) {\n\t\t\t\t\t\t\t\t\t\t\t\topts.keepStatic = true;\n\t\t\t\t\t\t\t\t\t\t\t} else if (setMergeLocators(altMatch, altMatch2)) {\n\t\t\t\t\t\t\t\t\t\t\t\t//insert match above general match\n\t\t\t\t\t\t\t\t\t\t\t\tdropMatch = true;\n\t\t\t\t\t\t\t\t\t\t\t\tmalternateMatches.splice(malternateMatches.indexOf(altMatch2), 0, altMatch);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (!dropMatch) {\n\t\t\t\t\t\t\t\t\tmalternateMatches.push(altMatch);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmatches = currentMatches.concat(malternateMatches);\n\t\t\t\t\t\ttestPos = pos;\n\t\t\t\t\t\tinsertStop = matches.length > 0; //insert a stopelemnt when there is an alternate - needed for non-greedy option\n\t\t\t\t\t\tmatch = malternateMatches.length > 0; //set correct match state\n\n\t\t\t\t\t\t//cloneback\n\t\t\t\t\t\tndxInitializer = ndxInitializerClone.slice();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmatch = handleMatch(alternateToken.matches[altIndex] || maskToken.matches[altIndex], [altIndex].concat(loopNdx), quantifierRecurse);\n\t\t\t\t\t}\n\t\t\t\t\tif (match) return true;\n\t\t\t\t} else if (match.isQuantifier && quantifierRecurse !== maskToken.matches[maskToken.matches.indexOf(match) - 1]) {\n\t\t\t\t\tvar qt = match;\n\t\t\t\t\tfor (var qndx = (ndxInitializer.length > 0) ? ndxInitializer.shift() : 0; (qndx < (isNaN(qt.quantifier.max) ? qndx + 1 : qt.quantifier.max)) && testPos <= pos; qndx++) {\n\t\t\t\t\t\tvar tokenGroup = maskToken.matches[maskToken.matches.indexOf(qt) - 1];\n\t\t\t\t\t\tmatch = handleMatch(tokenGroup, [qndx].concat(loopNdx), tokenGroup); //set the tokenGroup as quantifierRecurse marker\n\t\t\t\t\t\tif (match) {\n\t\t\t\t\t\t\t//get latest match\n\t\t\t\t\t\t\tlatestMatch = matches[matches.length - 1].match;\n\t\t\t\t\t\t\t//mark optionality\n\t\t\t\t\t\t\t//TODO FIX RECURSIVE QUANTIFIERS\n\t\t\t\t\t\t\tlatestMatch.optionalQuantifier = qndx >= qt.quantifier.min;\n\t\t\t\t\t\t\t// console.log(pos + \" \" + qt.quantifier.min + \" \" + latestMatch.optionalQuantifier);\n\t\t\t\t\t\t\tlatestMatch.jit = (qndx || 1) * tokenGroup.matches.indexOf(latestMatch) >= qt.quantifier.jit;\n\t\t\t\t\t\t\tif (latestMatch.optionalQuantifier && isFirstMatch(latestMatch, tokenGroup)) {\n\t\t\t\t\t\t\t\tinsertStop = true;\n\t\t\t\t\t\t\t\ttestPos = pos; //match the position after the group\n\t\t\t\t\t\t\t\tbreak; //stop quantifierloop && search for next possible match\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (latestMatch.jit /*&& !latestMatch.optionalQuantifier*/) {\n\t\t\t\t\t\t\t\t//always set jitOffset, isvalid checks when to apply\n\t\t\t\t\t\t\t\tmaskset.jitOffset[pos] = tokenGroup.matches.length - tokenGroup.matches.indexOf(latestMatch);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tmatch = resolveTestFromToken(match, ndxInitializer, loopNdx, quantifierRecurse);\n\t\t\t\t\tif (match) return true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttestPos++;\n\t\t\t}\n\t\t}\n\n\t\t//the offset is set in the quantifierloop when git masking is used\n\t\tfor (var tndx = (ndxInitializer.length > 0 ? ndxInitializer.shift() : 0); tndx < maskToken.matches.length; tndx++) {\n\t\t\tif (maskToken.matches[tndx].isQuantifier !== true) {\n\t\t\t\tvar match = handleMatch(maskToken.matches[tndx], [tndx].concat(loopNdx), quantifierRecurse);\n\t\t\t\tif (match && testPos === pos) {\n\t\t\t\t\treturn match;\n\t\t\t\t} else if (testPos > pos) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction mergeLocators(pos, tests) {\n\t\tlet locator = [], alternation;\n\t\tif (!Array.isArray(tests)) tests = [tests];\n\n\t\tif (tests.length > 0) {\n\t\t\tif (tests[0].alternation === undefined || opts.keepStatic === true) {\n\t\t\t\tlocator = determineTestTemplate.call(inputmask, pos, tests.slice()).locator.slice();\n\t\t\t\tif (locator.length === 0) locator = tests[0].locator.slice();\n\t\t\t} else {\n\t\t\t\ttests.forEach(function (tst) {\n\t\t\t\t\tif (tst.def !== \"\") {\n\t\t\t\t\t\tif (locator.length === 0) {\n\t\t\t\t\t\t\talternation = tst.alternation;\n\t\t\t\t\t\t\tlocator = tst.locator.slice();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (tst.locator[alternation] && locator[alternation].toString().indexOf(tst.locator[alternation]) === -1) {\n\t\t\t\t\t\t\t\tlocator[alternation] += \",\" + tst.locator[alternation];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn locator;\n\t}\n\n\tif (pos > -1 && (inputmask.maxLength === undefined || pos < inputmask.maxLength)) {\n\t\tif (ndxIntlzr === undefined) { //determine index initializer\n\t\t\tvar previousPos = pos - 1,\n\t\t\t\ttest;\n\t\t\twhile ((test = maskset.validPositions[previousPos] || maskset.tests[previousPos]) === undefined && previousPos > -1) {\n\t\t\t\tpreviousPos--;\n\t\t\t}\n\t\t\tif (test !== undefined && previousPos > -1) {\n\t\t\t\tndxInitializer = mergeLocators(previousPos, test);\n\t\t\t\tcacheDependency = ndxInitializer.join(\"\");\n\t\t\t\ttestPos = previousPos;\n\t\t\t}\n\t\t}\n\t\tif (maskset.tests[pos] && maskset.tests[pos][0].cd === cacheDependency) { //cacheDependency is set on all tests, just check on the first\n\t\t\treturn maskset.tests[pos];\n\t\t}\n\t\tfor (var mtndx = ndxInitializer.shift(); mtndx < maskTokens.length; mtndx++) {\n\t\t\tvar match = resolveTestFromToken(maskTokens[mtndx], ndxInitializer, [mtndx]);\n\t\t\tif ((match && testPos === pos) || testPos > pos) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tif (matches.length === 0 || insertStop) {\n\t\tmatches.push({\n\t\t\tmatch: {\n\t\t\t\tfn: null,\n\t\t\t\tstatic: true,\n\t\t\t\toptionality: false,\n\t\t\t\tcasing: null,\n\t\t\t\tdef: \"\",\n\t\t\t\tplaceholder: \"\"\n\t\t\t},\n\t\t\tlocator: [],\n\t\t\tmloc: {},\n\t\t\tcd: cacheDependency\n\t\t});\n\t}\n\n\tif (ndxIntlzr !== undefined && maskset.tests[pos]) { //prioritize full tests for caching\n\t\treturn $.extend(true, [], matches);\n\t}\n\tmaskset.tests[pos] = $.extend(true, [], matches); //set a clone to prevent overwriting some props\n\t// console.log(pos + \" - \" + JSON.stringify(matches));\n\treturn maskset.tests[pos];\n}\n","const ua = (window.navigator && window.navigator.userAgent) || \"\",\n\tie = (ua.indexOf(\"MSIE \") > 0) || (ua.indexOf(\"Trident/\") > 0),\n\tmobile = \"ontouchstart\" in window, //not entirely correct but will currently do\n\tiemobile = /iemobile/i.test(ua),\n\tiphone = /iphone/i.test(ua) && !iemobile;\n\nexport {ua, ie, mobile, iemobile, iphone};","import keyCode from \"./keycode.json\";\nimport {getMaskTemplate, getPlaceholder, getTest} from \"./validation-tests\";\nimport {\n\tcaret,\n\tdetermineNewCaretPosition,\n\tgetBuffer, getBufferTemplate,\n\tgetLastValidPosition,\n\tisMask,\n\tresetMaskSet,\n\tseekNext\n} from \"./positioning\";\nimport {isComplete, isValid, refreshFromBuffer} from \"./validation\";\nimport {ie} from \"./environment\";\nimport {EventHandlers} from \"./eventhandlers\";\n\n\nexport {applyInputValue, clearOptionalTail, checkVal, HandleNativePlaceholder, unmaskedvalue, writeBuffer};\n\nfunction applyInputValue(input, value) {\n\tconst inputmask = input ? input.inputmask : this, opts = inputmask.opts;\n\n\tinput.inputmask.refreshValue = false;\n\tif (typeof opts.onBeforeMask === \"function\") value = opts.onBeforeMask.call(inputmask, value, opts) || value;\n\tvalue = value.toString().split(\"\");\n\tcheckVal(input, true, false, value);\n\tinputmask.undoValue = getBuffer.call(inputmask).join(\"\");\n\tif ((opts.clearMaskOnLostFocus || opts.clearIncomplete) && input.inputmask._valueGet() === getBufferTemplate.call(inputmask).join(\"\") && getLastValidPosition.call(inputmask) === -1) {\n\t\tinput.inputmask._valueSet(\"\");\n\t}\n}\n\n//todo put on prototype?\nfunction clearOptionalTail(buffer) {\n\tconst inputmask = this;\n\n\tbuffer.length = 0;\n\tvar template = getMaskTemplate.call(inputmask, true, 0, true, undefined, true), lmnt;\n\twhile ((lmnt = template.shift()) !== undefined) buffer.push(lmnt);\n\treturn buffer;\n}\n\nfunction checkVal(input, writeOut, strict, nptvl, initiatingEvent) {\n\tconst inputmask = input ? input.inputmask : this,\n\t\tmaskset = inputmask.maskset,\n\t\topts = inputmask.opts,$ = inputmask.dependencyLib;\n\n\tvar inputValue = nptvl.slice(),\n\t\tcharCodes = \"\",\n\t\tinitialNdx = -1,\n\t\tresult = undefined, skipOptionalPartCharacter = opts.skipOptionalPartCharacter;\n\topts.skipOptionalPartCharacter = \"\"; //see issue #2311\n\n\tfunction isTemplateMatch(ndx, charCodes) {\n\t\tvar targetTemplate = getMaskTemplate.call(inputmask, true, 0).slice(ndx, seekNext.call(inputmask, ndx)).join(\"\").replace(/'/g, \"\"),\n\t\t\tcharCodeNdx = targetTemplate.indexOf(charCodes);\n\t\t//strip spaces from targetTemplate\n\t\twhile (charCodeNdx > 0 && targetTemplate[charCodeNdx - 1] === \" \") charCodeNdx--;\n\n\t\tvar match = charCodeNdx === 0 && !isMask.call(inputmask, ndx)\n\t\t\t&& (getTest.call(inputmask, ndx).match.nativeDef === charCodes.charAt(0)\n\t\t\t\t|| (getTest.call(inputmask, ndx).match.static === true && getTest.call(inputmask, ndx).match.nativeDef === (\"'\" + charCodes.charAt(0)))\n\t\t\t\t|| (getTest.call(inputmask, ndx).match.nativeDef === \" \" && (getTest.call(inputmask, ndx + 1).match.nativeDef === charCodes.charAt(0)\n\t\t\t\t\t|| (getTest.call(inputmask, ndx + 1).match.static === true && getTest.call(inputmask, ndx + 1).match.nativeDef === (\"'\" + charCodes.charAt(0))))));\n\n\t\tif (!match && charCodeNdx > 0 && !isMask.call(inputmask, ndx, false, true)) {\n\t\t\tvar nextPos = seekNext.call(inputmask, ndx);\n\t\t\tif (inputmask.caretPos.begin < nextPos) {\n\t\t\t\tinputmask.caretPos = {begin: nextPos};\n\t\t\t}\n\t\t}\n\t\treturn match;\n\t}\n\n\tresetMaskSet.call(inputmask);\n\tmaskset.tests = {}; //reset tests ~ possible after alternating\n\tinitialNdx = opts.radixPoint ? determineNewCaretPosition.call(inputmask, {begin: 0, end: 0}).begin : 0;\n\tmaskset.p = initialNdx;\n\tinputmask.caretPos = {begin: initialNdx};\n\n\tvar staticMatches = [], prevCaretPos = inputmask.caretPos;\n\tinputValue.forEach( function ( charCode, ndx) {\n\t\tif (charCode !== undefined) { //inputfallback strips some elements out of the inputarray.  $.each logically presents them as undefined\n\t\t\tif (maskset.validPositions[ndx] === undefined && inputValue[ndx] === getPlaceholder.call(inputmask, ndx) && isMask.call(inputmask, ndx, true) &&\n\t\t\t\tisValid.call(inputmask, ndx, inputValue[ndx], true, undefined, undefined, true) === false) {\n\t\t\t\tmaskset.p++;\n\t\t\t} else {\n\t\t\t\tvar keypress = new $.Event(\"_checkval\");\n\t\t\t\tkeypress.which = charCode.toString().charCodeAt(0);\n\t\t\t\tcharCodes += charCode;\n\t\t\t\tvar lvp = getLastValidPosition.call(inputmask, undefined, true);\n\t\t\t\tif (!isTemplateMatch(initialNdx, charCodes)) {\n\t\t\t\t\tresult = EventHandlers.keypressEvent.call(input || inputmask, keypress, true, false, strict, inputmask.caretPos.begin);\n\n\t\t\t\t\tif (result) {\n\t\t\t\t\t\tinitialNdx = inputmask.caretPos.begin + 1;\n\t\t\t\t\t\tcharCodes = \"\";\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresult = EventHandlers.keypressEvent.call(input || inputmask, keypress, true, false, strict, lvp + 1);\n\t\t\t\t}\n\t\t\t\tif (result) {\n\t\t\t\t\tif (result.pos !== undefined && maskset.validPositions[result.pos] && maskset.validPositions[result.pos].match.static === true && maskset.validPositions[result.pos].alternation === undefined) {\n\t\t\t\t\t\tstaticMatches.push(result.pos);\n\t\t\t\t\t\tif (!inputmask.isRTL) {\n\t\t\t\t\t\t\tresult.forwardPosition = result.pos + 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\twriteBuffer.call(inputmask, undefined, getBuffer.call(inputmask), result.forwardPosition, keypress, false);\n\t\t\t\t\tinputmask.caretPos = {begin: result.forwardPosition, end: result.forwardPosition};\n\t\t\t\t\tprevCaretPos = inputmask.caretPos;\n\t\t\t\t} else {\n\t\t\t\t\tinputmask.caretPos = prevCaretPos;\n\t\t\t\t}  //restore the caret position from before the failed validation\n\t\t\t}\n\t\t}\n\t});\n\tif (staticMatches.length > 0) {\n\t\tvar sndx, validPos, nextValid = seekNext.call(inputmask, -1, undefined, false);\n\t\tif ((!isComplete.call(inputmask, getBuffer.call(inputmask)) && staticMatches.length <= nextValid)\n\t\t\t|| (isComplete.call(inputmask, getBuffer.call(inputmask)) && staticMatches.length > 0 && (staticMatches.length !== nextValid && staticMatches[0] === 0))) { //should check if is sequence starting from 0\n\t\t\tvar nextSndx = nextValid;\n\t\t\twhile ((sndx = staticMatches.shift()) !== undefined) {\n\t\t\t\tvar keypress = new $.Event(\"_checkval\");\n\t\t\t\tvalidPos = maskset.validPositions[sndx];\n\t\t\t\tvalidPos.generatedInput = true;\n\t\t\t\tkeypress.which = validPos.input.charCodeAt(0);\n\t\t\t\tresult = EventHandlers.keypressEvent.call(input, keypress, true, false, strict, nextSndx);\n\t\t\t\tif (result && result.pos !== undefined && result.pos !== sndx && maskset.validPositions[result.pos] && maskset.validPositions[result.pos].match.static === true) {\n\t\t\t\t\tstaticMatches.push(result.pos);\n\t\t\t\t} else if (!result) break;\n\t\t\t\tnextSndx++;\n\t\t\t}\n\t\t} else { //mark al statics as generated\n\t\t\t// while ((sndx = staticMatches.pop())) {\n\t\t\t// \tvalidPos = maskset.validPositions[sndx];\n\t\t\t// \tif (validPos) {\n\t\t\t// \t\tvalidPos.generatedInput = true;\n\t\t\t// \t}\n\t\t\t// }\n\t\t}\n\t}\n\tif (writeOut) {\n\t\twriteBuffer.call(inputmask, input, getBuffer.call(inputmask), result ? result.forwardPosition : inputmask.caretPos.begin, initiatingEvent || new $.Event(\"checkval\"), initiatingEvent && initiatingEvent.type === \"input\" && inputmask.undoValue !== getBuffer.call(inputmask).join(\"\"));\n\t\t// for (var vndx in maskset.validPositions) {\n\t\t// \tif (maskset.validPositions[vndx].match.generated !== true) { //only remove non forced generated\n\t\t// \t\tdelete maskset.validPositions[vndx].generatedInput; //clear generated markings ~ consider initializing with a  value as fully typed\n\t\t// \t}\n\t\t// }\n\t}\n\topts.skipOptionalPartCharacter = skipOptionalPartCharacter;\n}\n\nfunction HandleNativePlaceholder(npt, value) {\n\tconst inputmask = npt ? npt.inputmask : this;\n\n\tif (ie) {\n\t\tif (npt.inputmask._valueGet() !== value && (npt.placeholder !== value || npt.placeholder === \"\")) {\n\t\t\tvar buffer = getBuffer.call(inputmask).slice(),\n\t\t\t\tnptValue = npt.inputmask._valueGet();\n\t\t\tif (nptValue !== value) {\n\t\t\t\tvar lvp = getLastValidPosition.call(inputmask);\n\t\t\t\tif (lvp === -1 && nptValue === getBufferTemplate.call(inputmask).join(\"\")) {\n\t\t\t\t\tbuffer = [];\n\t\t\t\t} else if (lvp !== -1) { //clearout optional tail of the mask\n\t\t\t\t\tclearOptionalTail.call(inputmask, buffer);\n\t\t\t\t}\n\t\t\t\twriteBuffer(npt, buffer);\n\t\t\t}\n\t\t}\n\t} else if (npt.placeholder !== value) {\n\t\tnpt.placeholder = value;\n\t\tif (npt.placeholder === \"\") npt.removeAttribute(\"placeholder\");\n\t}\n}\n\nfunction unmaskedvalue(input) {\n\tconst inputmask = input ? input.inputmask : this,\n\t\topts = inputmask.opts,\n\t\tmaskset = inputmask.maskset;\n\n\tif (input) {\n\t\tif (input.inputmask === undefined) {\n\t\t\treturn input.value;\n\t\t}\n\t\tif (input.inputmask && input.inputmask.refreshValue) { //forced refresh from the value form.reset\n\t\t\tapplyInputValue(input, input.inputmask._valueGet(true));\n\t\t}\n\t}\n\tvar umValue = [],\n\t\tvps = maskset.validPositions;\n\tfor (var pndx in vps) {\n\t\tif (vps[pndx] && vps[pndx].match && (vps[pndx].match.static != true || (Array.isArray(maskset.metadata) && vps[pndx].generatedInput !== true))) {\n\t\t\t//only include generated input with multiple masks (check on metadata)\n\t\t\tumValue.push(vps[pndx].input);\n\t\t}\n\t}\n\tvar unmaskedValue = umValue.length === 0 ? \"\" : (inputmask.isRTL ? umValue.reverse() : umValue).join(\"\");\n\tif (typeof opts.onUnMask === \"function\") {\n\t\tvar bufferValue = (inputmask.isRTL ? getBuffer.call(inputmask).slice().reverse() : getBuffer.call(inputmask)).join(\"\");\n\t\tunmaskedValue = opts.onUnMask.call(inputmask, bufferValue, unmaskedValue, opts);\n\t}\n\treturn unmaskedValue;\n}\n\nfunction writeBuffer(input, buffer, caretPos, event, triggerEvents) {\n\tconst inputmask = input ? input.inputmask : this,\n\t\topts = inputmask.opts,\n\t\t$ = inputmask.dependencyLib;\n\n\tif (event && typeof opts.onBeforeWrite === \"function\") {\n\t\t//    buffer = buffer.slice(); //prevent uncontrolled manipulation of the internal buffer\n\t\tvar result = opts.onBeforeWrite.call(inputmask, event, buffer, caretPos, opts);\n\t\tif (result) {\n\t\t\tif (result.refreshFromBuffer) {\n\t\t\t\tvar refresh = result.refreshFromBuffer;\n\t\t\t\trefreshFromBuffer.call(inputmask, refresh === true ? refresh : refresh.start, refresh.end, result.buffer || buffer);\n\t\t\t\tbuffer = getBuffer.call(inputmask, true);\n\t\t\t}\n\t\t\tif (caretPos !== undefined) caretPos = result.caret !== undefined ? result.caret : caretPos;\n\t\t}\n\t}\n\tif (input !== undefined) {\n\t\tinput.inputmask._valueSet(buffer.join(\"\"));\n\t\tif (caretPos !== undefined && (event === undefined || event.type !== \"blur\")) {\n\t\t\tcaret.call(inputmask, input, caretPos, undefined, undefined, (event !== undefined && event.type === \"keydown\" && (event.keyCode === keyCode.DELETE || event.keyCode === keyCode.BACKSPACE)));\n\t\t}\n\t\tif (triggerEvents === true) {\n\t\t\tvar $input = $(input), nptVal = input.inputmask._valueGet();\n\t\t\tinput.inputmask.skipInputEvent = true;\n\t\t\t$input.trigger(\"input\");\n\t\t\tsetTimeout(function () { //timeout needed for IE\n\t\t\t\tif (nptVal === getBufferTemplate.call(inputmask).join(\"\")) {\n\t\t\t\t\t$input.trigger(\"cleared\");\n\t\t\t\t} else if (isComplete.call(inputmask, buffer) === true) {\n\t\t\t\t\t$input.trigger(\"complete\");\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t}\n\t}\n}\n","import {\n\tcaret, determineNewCaretPosition,\n\tgetBuffer, getBufferTemplate,\n\tgetLastValidPosition, isMask,\n\tresetMaskSet,\n\tseekNext,\n\tseekPrevious,\n\ttranslatePosition\n} from \"./positioning\";\nimport keyCode from \"./keycode.json\";\nimport {iemobile, iphone} from \"./environment\";\nimport {handleRemove, isComplete, isValid} from \"./validation\";\nimport {applyInputValue, checkVal, clearOptionalTail, HandleNativePlaceholder, writeBuffer} from \"./inputHandling\";\nimport {getPlaceholder, getTest} from \"./validation-tests\";\n\nexport {EventHandlers};\n\nvar EventHandlers = {\n\tkeydownEvent: function (e) {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts, $ = inputmask.dependencyLib,\n\t\t\tmaskset = inputmask.maskset;\n\n\t\tvar input = this,\n\t\t\t$input = $(input),\n\t\t\tk = e.keyCode,\n\t\t\tpos = caret.call(inputmask, input);\n\n\t\tvar kdResult = opts.onKeyDown.call(this, e, getBuffer.call(inputmask), pos, opts);\n\t\tif (kdResult !== undefined) return kdResult;\n\n\t\t//backspace, delete, and escape get special treatment\n\t\tif (k === keyCode.BACKSPACE || k === keyCode.DELETE || (iphone && k === keyCode.BACKSPACE_SAFARI) || (e.ctrlKey && k === keyCode.X && !(\"oncut\" in input))) { //backspace/delete\n\t\t\te.preventDefault(); //stop default action but allow propagation\n\t\t\thandleRemove.call(inputmask, input, k, pos);\n\t\t\twriteBuffer(input, getBuffer.call(inputmask, true), maskset.p, e, input.inputmask._valueGet() !== getBuffer.call(inputmask).join(\"\"));\n\t\t} else if (k === keyCode.END || k === keyCode.PAGE_DOWN) { //when END or PAGE_DOWN pressed set position at lastmatch\n\t\t\te.preventDefault();\n\t\t\tvar caretPos = seekNext.call(inputmask, getLastValidPosition.call(inputmask));\n\t\t\tcaret.call(inputmask, input, e.shiftKey ? pos.begin : caretPos, caretPos, true);\n\t\t} else if ((k === keyCode.HOME && !e.shiftKey) || k === keyCode.PAGE_UP) { //Home or page_up\n\t\t\te.preventDefault();\n\t\t\tcaret.call(inputmask, input, 0, e.shiftKey ? pos.begin : 0, true);\n\t\t} else if (((opts.undoOnEscape && k === keyCode.ESCAPE) || (k === 90 && e.ctrlKey)) && e.altKey !== true) { //escape && undo && #762\n\t\t\tcheckVal(input, true, false, inputmask.undoValue.split(\"\"));\n\t\t\t$input.trigger(\"click\");\n\t\t\t// } else if (k === keyCode.INSERT && !(e.shiftKey || e.ctrlKey) && inputmask.userOptions.insertMode === undefined) { //insert\n\t\t\t// \topts.insertMode = !opts.insertMode;\n\t\t\t// \tcaret(input, pos.begin, pos.end);\n\t\t} else if (opts.tabThrough === true && k === keyCode.TAB) {\n\t\t\tif (e.shiftKey === true) {\n\t\t\t\tpos.end = seekPrevious.call(inputmask, pos.end, true);\n\t\t\t\tif (getTest.call(inputmask, pos.end - 1).match.static === true) {\n\t\t\t\t\tpos.end--;\n\t\t\t\t}\n\t\t\t\tpos.begin = seekPrevious.call(inputmask, pos.end, true);\n\t\t\t\tif (pos.begin >= 0 && pos.end > 0) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tcaret.call(inputmask, input, pos.begin, pos.end);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tpos.begin = seekNext.call(inputmask, pos.begin, true);\n\t\t\t\tpos.end = seekNext.call(inputmask, pos.begin, true);\n\t\t\t\tif (pos.end < maskset.maskLength) pos.end--;\n\t\t\t\tif (pos.begin <= maskset.maskLength) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tcaret.call(inputmask, input, pos.begin, pos.end);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!e.shiftKey) {\n\t\t\tif (opts.insertModeVisual && opts.insertMode === false) {\n\t\t\t\tif (k === keyCode.RIGHT) {\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tvar caretPos = caret.call(inputmask, input);\n\t\t\t\t\t\tcaret.call(inputmask, input, caretPos.begin);\n\t\t\t\t\t}, 0);\n\t\t\t\t} else if (k === keyCode.LEFT) {\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tvar caretPos = {\n\t\t\t\t\t\t\tbegin: translatePosition.call(inputmask, input.inputmask.caretPos.begin),\n\t\t\t\t\t\t\tend: translatePosition.call(inputmask, input.inputmask.caretPos.end)\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (inputmask.isRTL) {\n\t\t\t\t\t\t\tcaret.call(inputmask, input, caretPos.begin + (caretPos.begin === maskset.maskLength ? 0 : 1));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcaret.call(inputmask, input, caretPos.begin - (caretPos.begin === 0 ? 0 : 1));\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tinputmask.ignorable = opts.ignorables.includes(k);\n\t},\n\tkeypressEvent: function (e, checkval, writeOut, strict, ndx) {\n\t\tconst inputmask = this.inputmask || this, opts = inputmask.opts, $ = inputmask.dependencyLib,\n\t\t\tmaskset = inputmask.maskset;\n\n\t\tvar input = inputmask.el,\n\t\t\t$input = $(input),\n\t\t\tk = e.which || e.charCode || e.keyCode;\n\n\t\tif (checkval !== true && (!(e.ctrlKey && e.altKey) && (e.ctrlKey || e.metaKey || inputmask.ignorable))) {\n\t\t\tif (k === keyCode.ENTER && inputmask.undoValue !== getBuffer.call(inputmask).join(\"\")) {\n\t\t\t\tinputmask.undoValue = getBuffer.call(inputmask).join(\"\");\n\t\t\t\t// e.preventDefault();\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t$input.trigger(\"change\");\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t\tinputmask.skipInputEvent = true; //skip the input as otherwise the skipped char could be picked up for validation by the inputfallback\n\t\t\treturn true;\n\t\t} else if (k) {\n\t\t\t//special treat the decimal separator\n\t\t\tif ((k === 44 || k === 46) && e.location === 3 && opts.radixPoint !== \"\") k = opts.radixPoint.charCodeAt(0);\n\t\t\tvar pos = checkval ? {\n\t\t\t\t\tbegin: ndx,\n\t\t\t\t\tend: ndx\n\t\t\t\t} : caret.call(inputmask, input),\n\t\t\t\tforwardPosition, c = String.fromCharCode(k);\n\n\t\t\tmaskset.writeOutBuffer = true;\n\t\t\tvar valResult = isValid.call(inputmask, pos, c, strict, undefined, undefined, undefined, checkval);\n\t\t\tif (valResult !== false) {\n\t\t\t\tresetMaskSet.call(inputmask, true);\n\t\t\t\tforwardPosition = valResult.caret !== undefined ? valResult.caret : seekNext.call(inputmask, valResult.pos.begin ? valResult.pos.begin : valResult.pos);\n\t\t\t\tmaskset.p = forwardPosition; //needed for checkval\n\t\t\t}\n\n\t\t\tforwardPosition = ((opts.numericInput && valResult.caret === undefined) ? seekPrevious.call(inputmask, forwardPosition) : forwardPosition);\n\t\t\tif (writeOut !== false) {\n\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\topts.onKeyValidation.call(input, k, valResult);\n\t\t\t\t}, 0);\n\t\t\t\tif (maskset.writeOutBuffer && valResult !== false) {\n\t\t\t\t\tvar buffer = getBuffer.call(inputmask);\n\t\t\t\t\twriteBuffer(input, buffer, forwardPosition, e, checkval !== true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\te.preventDefault();\n\n\t\t\tif (checkval) {\n\t\t\t\tif (valResult !== false) valResult.forwardPosition = forwardPosition;\n\t\t\t\treturn valResult;\n\t\t\t}\n\t\t}\n\t},\n\tkeyupEvent: function (e) {\n\t\tconst inputmask = this.inputmask;\n\n\t\tif (inputmask.isComposing && (e.keyCode === keyCode.KEY_229 || e.keyCode === keyCode.ENTER)) {\n\t\t\tinputmask.$el.trigger(\"input\");\n\t\t}\n\t},\n\tpasteEvent: function (e) {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts;\n\n\t\tvar input = this,\n\t\t\tinputValue = inputmask._valueGet(true),\n\t\t\tcaretPos = caret.call(inputmask, input),\n\t\t\ttempValue;\n\n\t\tif (inputmask.isRTL) {\n\t\t\ttempValue = caretPos.end;\n\t\t\tcaretPos.end = caretPos.begin;\n\t\t\tcaretPos.begin = tempValue;\n\t\t}\n\n\t\tvar valueBeforeCaret = inputValue.substr(0, caretPos.begin),\n\t\t\tvalueAfterCaret = inputValue.substr(caretPos.end, inputValue.length);\n\n\t\tif (valueBeforeCaret == (inputmask.isRTL ? getBufferTemplate.call(inputmask).slice().reverse() : getBufferTemplate.call(inputmask)).slice(0, caretPos.begin).join(\"\")) valueBeforeCaret = \"\";\n\t\tif (valueAfterCaret == (inputmask.isRTL ? getBufferTemplate.call(inputmask).slice().reverse() : getBufferTemplate.call(inputmask)).slice(caretPos.end).join(\"\")) valueAfterCaret = \"\";\n\n\t\tif (window.clipboardData && window.clipboardData.getData) { // IE\n\t\t\tinputValue = valueBeforeCaret + window.clipboardData.getData(\"Text\") + valueAfterCaret;\n\t\t} else if (e.clipboardData && e.clipboardData.getData) {\n\t\t\tinputValue = valueBeforeCaret + e.clipboardData.getData(\"text/plain\") + valueAfterCaret;\n\t\t} else {\n\t\t\treturn true;\n\t\t} //allow native paste event as fallback ~ masking will continue by inputfallback\n\n\t\tvar pasteValue = inputValue;\n\t\tif (typeof opts.onBeforePaste === \"function\") {\n\t\t\tpasteValue = opts.onBeforePaste.call(inputmask, inputValue, opts);\n\t\t\tif (pasteValue === false) {\n\t\t\t\treturn e.preventDefault();\n\t\t\t}\n\t\t\tif (!pasteValue) {\n\t\t\t\tpasteValue = inputValue;\n\t\t\t}\n\t\t}\n\t\tcheckVal(input, true, false, pasteValue.toString().split(\"\"), e);\n\t\t// writeBuffer(input, getBuffer(), seekNext(getLastValidPosition()), e, inputmask.undoValue !== getBuffer().join(\"\"));\n\n\t\treturn e.preventDefault();\n\t},\n\tinputFallBackEvent: function (e) { //fallback when keypress is not triggered\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts, $ = inputmask.dependencyLib;\n\n\t\tfunction ieMobileHandler(input, inputValue, caretPos) {\n\t\t\tif (iemobile) { //iemobile just sets the character at the end althought the caret position is correctly set\n\t\t\t\tvar inputChar = inputValue.replace(getBuffer.call(inputmask).join(\"\"), \"\");\n\t\t\t\tif (inputChar.length === 1) {\n\t\t\t\t\tvar iv = inputValue.split(\"\");\n\t\t\t\t\tiv.splice(caretPos.begin, 0, inputChar);\n\t\t\t\t\tinputValue = iv.join(\"\");\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn inputValue;\n\t\t}\n\n\t\tfunction analyseChanges(inputValue, buffer, caretPos) {\n\t\t\tvar frontPart = inputValue.substr(0, caretPos.begin).split(\"\"),\n\t\t\t\tbackPart = inputValue.substr(caretPos.begin).split(\"\"),\n\t\t\t\tfrontBufferPart = buffer.substr(0, caretPos.begin).split(\"\"),\n\t\t\t\tbackBufferPart = buffer.substr(caretPos.begin).split(\"\");\n\n\t\t\tvar fpl = frontPart.length >= frontBufferPart.length ? frontPart.length : frontBufferPart.length,\n\t\t\t\tbpl = backPart.length >= backBufferPart.length ? backPart.length : backBufferPart.length,\n\t\t\t\tbl, i, action = \"\", data = [], marker = \"~\", placeholder;\n\n\t\t\t//align buffers\n\t\t\twhile (frontPart.length < fpl) frontPart.push(marker);\n\t\t\twhile (frontBufferPart.length < fpl) frontBufferPart.push(marker);\n\t\t\twhile (backPart.length < bpl) backPart.unshift(marker);\n\t\t\twhile (backBufferPart.length < bpl) backBufferPart.unshift(marker);\n\n\t\t\tvar newBuffer = frontPart.concat(backPart);\n\t\t\tvar oldBuffer = frontBufferPart.concat(backBufferPart);\n\n\t\t\t// console.log(\"N \" + newBuffer);\n\t\t\t// console.log(\"O \" + oldBuffer);\n\n\t\t\tfor (i = 0, bl = newBuffer.length; i < bl; i++) {\n\t\t\t\tplaceholder = getPlaceholder.call(inputmask, translatePosition.call(inputmask, i));\n\t\t\t\tswitch (action) {\n\t\t\t\t\tcase \"insertText\":\n\t\t\t\t\t\tif (oldBuffer[i - 1] === newBuffer[i] && caretPos.begin == newBuffer.length - 1) {\n\t\t\t\t\t\t\tdata.push(newBuffer[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\ti = bl;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"insertReplacementText\":\n\t\t\t\t\t\tif (newBuffer[i] === marker) { //extend selection\n\t\t\t\t\t\t\tcaretPos.end++;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// breakout loop\n\t\t\t\t\t\t\ti = bl;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"deleteContentBackward\":\n\t\t\t\t\t\tif (newBuffer[i] === marker) {\n\t\t\t\t\t\t\tcaretPos.end++;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t//breakout loop\n\t\t\t\t\t\t\ti = bl;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif (newBuffer[i] !== oldBuffer[i]) {\n\t\t\t\t\t\t\tif ((newBuffer[i + 1] === marker || newBuffer[i + 1] === placeholder || newBuffer[i + 1] === undefined) && ((oldBuffer[i] === placeholder && oldBuffer[i + 1] === marker) || oldBuffer[i] === marker)) {  //basic insert\n\t\t\t\t\t\t\t\taction = \"insertText\";\n\t\t\t\t\t\t\t\tdata.push(newBuffer[i]);\n\t\t\t\t\t\t\t\tcaretPos.begin--;\n\t\t\t\t\t\t\t\tcaretPos.end--;\n\t\t\t\t\t\t\t} else if (oldBuffer[i + 1] === marker && oldBuffer[i] === newBuffer[i + 1]) { //insert between\n\t\t\t\t\t\t\t\taction = \"insertText\";\n\t\t\t\t\t\t\t\tdata.push(newBuffer[i]);\n\t\t\t\t\t\t\t\tcaretPos.begin--;\n\t\t\t\t\t\t\t\tcaretPos.end--;\n\t\t\t\t\t\t\t} else if (newBuffer[i] !== placeholder && newBuffer[i] !== marker &&\n\t\t\t\t\t\t\t\t(newBuffer[i + 1] === marker || (oldBuffer[i] !== newBuffer[i] && oldBuffer[i + 1] === newBuffer[i + 1] /*single char replacement*/))) { //replace selection\n\t\t\t\t\t\t\t\taction = \"insertReplacementText\";\n\t\t\t\t\t\t\t\tdata.push(newBuffer[i]);\n\t\t\t\t\t\t\t\tcaretPos.begin--;\n\t\t\t\t\t\t\t} else if (newBuffer[i] === marker) {  //delete~backspace\n\t\t\t\t\t\t\t\taction = \"deleteContentBackward\";\n\t\t\t\t\t\t\t\tif (isMask.call(inputmask, translatePosition.call(inputmask, i), true) || oldBuffer[i] === opts.radixPoint) caretPos.end++;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ti = bl;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\taction: action,\n\t\t\t\tdata: data,\n\t\t\t\tcaret: caretPos\n\t\t\t};\n\t\t}\n\n\t\tvar input = this,\n\t\t\tinputValue = input.inputmask._valueGet(true),\n\t\t\tbuffer = (inputmask.isRTL ? getBuffer.call(inputmask).slice().reverse() : getBuffer.call(inputmask)).join(\"\"),\n\t\t\tcaretPos = caret.call(inputmask, input, undefined, undefined, true);\n\n\t\tif (buffer !== inputValue) {\n\t\t\t// inputValue = radixPointHandler(input, inputValue, caretPos);\n\t\t\tinputValue = ieMobileHandler(input, inputValue, caretPos);\n\n\t\t\tvar changes = analyseChanges(inputValue, buffer, caretPos);\n\n\t\t\t// console.log(JSON.stringify(changes));\n\t\t\tif ((input.inputmask.shadowRoot || document).activeElement !== input) {\n\t\t\t\tinput.focus();\n\t\t\t}\n\t\t\twriteBuffer(input, getBuffer.call(inputmask));\n\t\t\tcaret.call(inputmask, input, caretPos.begin, caretPos.end, true);\n\t\t\tswitch (changes.action) {\n\t\t\t\tcase \"insertText\":\n\t\t\t\tcase \"insertReplacementText\":\n\t\t\t\t\tchanges.data.forEach(function (entry, ndx) {\n\t\t\t\t\t\tvar keypress = new $.Event(\"keypress\");\n\t\t\t\t\t\tkeypress.which = entry.charCodeAt(0);\n\t\t\t\t\t\tinputmask.ignorable = false; //make sure ignorable is ignored ;-)\n\t\t\t\t\t\tEventHandlers.keypressEvent.call(input, keypress);\n\t\t\t\t\t});\n\t\t\t\t\tsetTimeout(function () {  //#2195 trigger keyup to help some other plugins to track changes\n\t\t\t\t\t\tinputmask.$el.trigger(\"keyup\");\n\t\t\t\t\t}, 0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"deleteContentBackward\":\n\t\t\t\t\tvar keydown = new $.Event(\"keydown\");\n\t\t\t\t\tkeydown.keyCode = keyCode.BACKSPACE;\n\t\t\t\t\tEventHandlers.keydownEvent.call(input, keydown);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tapplyInputValue(input, inputValue);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\te.preventDefault();\n\t\t}\n\t},\n\tcompositionendEvent: function (e) {\n\t\tconst inputmask = this.inputmask;\n\n\t\tinputmask.isComposing = false;\n\t\tinputmask.$el.trigger(\"input\");\n\t},\n\tsetValueEvent: function (e) {\n\t\tconst inputmask = this.inputmask;\n\t\tvar input = this,\n\t\t\tvalue = (e && e.detail) ? e.detail[0] : arguments[1];\n\n\t\tif (value === undefined) {\n\t\t\tvalue = input.inputmask._valueGet(true);\n\t\t}\n\n\t\tapplyInputValue(input, value);\n\n\t\tif ((e.detail && e.detail[1] !== undefined) || arguments[2] !== undefined) {\n\t\t\tcaret.call(inputmask, input, e.detail ? e.detail[1] : arguments[2]);\n\t\t}\n\t}\n\t,\n\tfocusEvent: function (e) {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts;\n\t\tvar input = this,\n\t\t\tnptValue = input.inputmask._valueGet();\n\n\t\tif (opts.showMaskOnFocus) {\n\t\t\tif (nptValue !== getBuffer.call(inputmask).join(\"\")) {\n\t\t\t\twriteBuffer(input, getBuffer.call(inputmask), seekNext.call(inputmask, getLastValidPosition.call(inputmask)));\n\t\t\t} /*else if (mouseEnter === false) { //only executed on focus without mouseenter\n\t\t\t\t\tcaret(input, seekNext(getLastValidPosition()));\n\t\t\t\t}*/\n\t\t}\n\t\tif (opts.positionCaretOnTab === true && inputmask.mouseEnter === false && (!isComplete.call(inputmask, getBuffer.call(inputmask)) || getLastValidPosition.call(inputmask) === -1)) {\n\t\t\tEventHandlers.clickEvent.apply(input, [e, true]);\n\t\t}\n\t\tinputmask.undoValue = getBuffer.call(inputmask).join(\"\");\n\t},\n\tinvalidEvent: function (e) {\n\t\tthis.inputmask.validationEvent = true;\n\t},\n\tmouseleaveEvent: function () {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts;\n\n\t\tvar input = this;\n\t\tinputmask.mouseEnter = false;\n\t\tif (opts.clearMaskOnLostFocus && (input.inputmask.shadowRoot || document).activeElement !== input) {\n\t\t\tHandleNativePlaceholder(input, inputmask.originalPlaceholder);\n\t\t}\n\t},\n\tclickEvent: function (e, tabbed) {\n\t\tconst inputmask = this.inputmask;\n\n\t\tvar input = this;\n\t\tif ((input.inputmask.shadowRoot || document).activeElement === input) {\n\t\t\tvar newCaretPosition = determineNewCaretPosition.call(inputmask, caret.call(inputmask, input), tabbed);\n\t\t\tif (newCaretPosition !== undefined) {\n\t\t\t\tcaret.call(inputmask, input, newCaretPosition);\n\t\t\t}\n\t\t}\n\t},\n\tcutEvent: function (e) {\n\t\tconst inputmask = this.inputmask, maskset = inputmask.maskset;\n\n\t\tvar input = this,\n\t\t\tpos = caret.call(inputmask, input);\n\n\t\t//correct clipboardData\n\t\tvar clipboardData = window.clipboardData || e.clipboardData,\n\t\t\tclipData = inputmask.isRTL ? getBuffer.call(inputmask).slice(pos.end, pos.begin) : getBuffer.call(inputmask).slice(pos.begin, pos.end);\n\t\tclipboardData.setData(\"text\", inputmask.isRTL ? clipData.reverse().join(\"\") : clipData.join(\"\"));\n\t\tif (document.execCommand) document.execCommand(\"copy\"); // copy selected content to system clipbaord\n\n\t\thandleRemove.call(inputmask, input, keyCode.DELETE, pos);\n\t\twriteBuffer(input, getBuffer.call(inputmask), maskset.p, e, inputmask.undoValue !== getBuffer.call(inputmask).join(\"\"));\n\t}\n\t,\n\tblurEvent: function (e) {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts, $ = inputmask.dependencyLib;\n\n\t\tvar $input = $(this),\n\t\t\tinput = this;\n\t\tif (input.inputmask) {\n\t\t\tHandleNativePlaceholder(input, inputmask.originalPlaceholder);\n\t\t\tvar nptValue = input.inputmask._valueGet(),\n\t\t\t\tbuffer = getBuffer.call(inputmask).slice();\n\n\t\t\tif (nptValue !== \"\") {\n\t\t\t\tif (opts.clearMaskOnLostFocus) {\n\t\t\t\t\tif (getLastValidPosition.call(inputmask) === -1 && nptValue === getBufferTemplate.call(inputmask).join(\"\")) {\n\t\t\t\t\t\tbuffer = [];\n\t\t\t\t\t} else { //clearout optional tail of the mask\n\t\t\t\t\t\tclearOptionalTail.call(inputmask, buffer);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (isComplete.call(inputmask, buffer) === false) {\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t$input.trigger(\"incomplete\");\n\t\t\t\t\t}, 0);\n\t\t\t\t\tif (opts.clearIncomplete) {\n\t\t\t\t\t\tresetMaskSet.call(inputmask);\n\t\t\t\t\t\tif (opts.clearMaskOnLostFocus) {\n\t\t\t\t\t\t\tbuffer = [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tbuffer = getBufferTemplate.call(inputmask).slice();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\twriteBuffer(input, buffer, undefined, e);\n\t\t\t}\n\n\t\t\tif (inputmask.undoValue !== getBuffer.call(inputmask).join(\"\")) {\n\t\t\t\tinputmask.undoValue = getBuffer.call(inputmask).join(\"\");\n\t\t\t\t$input.trigger(\"change\");\n\t\t\t}\n\t\t}\n\t}\n\t,\n\tmouseenterEvent: function () {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts;\n\n\t\tvar input = this;\n\t\tinputmask.mouseEnter = true;\n\t\tif ((input.inputmask.shadowRoot || document).activeElement !== input) {\n\t\t\tif (inputmask.originalPlaceholder == undefined && input.placeholder !== inputmask.originalPlaceholder) {\n\t\t\t\tinputmask.originalPlaceholder = input.placeholder;\n\t\t\t}\n\t\t\tif (opts.showMaskOnHover) {\n\t\t\t\tHandleNativePlaceholder(input, (inputmask.isRTL ? getBufferTemplate.call(inputmask).slice().reverse() : getBufferTemplate.call(inputmask)).join(\"\"));\n\t\t\t}\n\t\t}\n\t}\n\t,\n\tsubmitEvent: function () { //trigger change on submit if any\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts;\n\n\t\tif (inputmask.undoValue !== getBuffer.call(inputmask).join(\"\")) {\n\t\t\tinputmask.$el.trigger(\"change\");\n\t\t}\n\t\tif (opts.clearMaskOnLostFocus && getLastValidPosition.call(inputmask) === -1 && inputmask._valueGet && inputmask._valueGet() === getBufferTemplate.call(inputmask).join(\"\")) {\n\t\t\tinputmask._valueSet(\"\"); //clear masktemplete on submit and still has focus\n\t\t}\n\t\tif (opts.clearIncomplete && isComplete.call(inputmask, getBuffer.call(inputmask)) === false) {\n\t\t\tinputmask._valueSet(\"\");\n\t\t}\n\t\tif (opts.removeMaskOnSubmit) {\n\t\t\tinputmask._valueSet(inputmask.unmaskedvalue(), true);\n\t\t\tsetTimeout(function () {\n\t\t\t\twriteBuffer(inputmask.el, getBuffer.call(inputmask));\n\t\t\t}, 0);\n\t\t}\n\t},\n\tresetEvent: function () {\n\t\tconst inputmask = this.inputmask;\n\n\t\tinputmask.refreshValue = true; //indicate a forced refresh when there is a call to the value before leaving the triggering event fn\n\t\tsetTimeout(function () {\n\t\t\tapplyInputValue(inputmask.el, inputmask._valueGet(true));\n\t\t}, 0);\n\t}\n};\n","import {\n\tdetermineTestTemplate,\n\tgetDecisionTaker,\n\tgetPlaceholder,\n\tgetTest,\n\tgetTests,\n\tgetTestTemplate\n} from \"./validation-tests\";\nimport keyCode from \"./keycode.json\";\nimport {\n\tdetermineLastRequiredPosition, determineNewCaretPosition,\n\tgetBuffer,\n\tgetLastValidPosition,\n\tisMask,\n\tresetMaskSet,\n\tseekNext,\n\tseekPrevious\n} from \"./positioning\";\nimport {EventHandlers} from \"./eventhandlers\";\n\nexport {alternate, checkAlternationMatch, isComplete, isValid, refreshFromBuffer, revalidateMask, handleRemove};\n\n//tobe put on prototype?\nfunction alternate(maskPos, c, strict, fromIsValid, rAltPos, selection) { //pos == true => generalize\n\tconst inputmask = this,\n\t\t$ = this.dependencyLib,\n\t\topts = this.opts,\n\t\tmaskset = inputmask.maskset;\n\n\tvar validPsClone = $.extend(true, {}, maskset.validPositions),\n\t\ttstClone = $.extend(true, {}, maskset.tests),\n\t\tlastAlt,\n\t\talternation,\n\t\tisValidRslt = false, returnRslt = false,\n\t\taltPos, prevAltPos, i, validPos,\n\t\tdecisionPos,\n\t\tlAltPos = rAltPos !== undefined ? rAltPos : getLastValidPosition.call(inputmask), nextPos, input, begin, end;\n\n\tif (selection) {\n\t\tbegin = selection.begin;\n\t\tend = selection.end;\n\t\tif (selection.begin > selection.end) {\n\t\t\tbegin = selection.end;\n\t\t\tend = selection.begin;\n\t\t}\n\t}\n\tif (lAltPos === -1 && rAltPos === undefined) { //do not recurse when already paste the beginning\n\t\tlastAlt = 0;\n\t\tprevAltPos = getTest.call(inputmask, lastAlt);\n\t\talternation = prevAltPos.alternation;\n\t} else {\n\t\t//find last modified alternation\n\t\tfor (; lAltPos >= 0; lAltPos--) {\n\t\t\taltPos = maskset.validPositions[lAltPos];\n\t\t\tif (altPos && altPos.alternation !== undefined) {\n\t\t\t\tif (prevAltPos && prevAltPos.locator[altPos.alternation] !== altPos.locator[altPos.alternation]) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tlastAlt = lAltPos;\n\t\t\t\talternation = maskset.validPositions[lastAlt].alternation;\n\t\t\t\tprevAltPos = altPos;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (alternation !== undefined) {\n\t\tdecisionPos = parseInt(lastAlt);\n\t\tmaskset.excludes[decisionPos] = maskset.excludes[decisionPos] || [];\n\t\tif (maskPos !== true) { //generalize\n\t\t\tmaskset.excludes[decisionPos].push(getDecisionTaker(prevAltPos) + \":\" + prevAltPos.alternation);\n\t\t}\n\n\t\tvar validInputs = [], resultPos = -1;\n\t\tfor (i = decisionPos; i < getLastValidPosition.call(inputmask, undefined, true) + 1; i++) {\n\t\t\tif (resultPos === -1 && maskPos <= i && c !== undefined) {\n\t\t\t\tvalidInputs.push(c);\n\t\t\t\tresultPos = validInputs.length - 1;\n\t\t\t}\n\t\t\tvalidPos = maskset.validPositions[i];\n\t\t\tif (validPos && validPos.generatedInput !== true && (selection === undefined || (i < begin || i >= end))) {\n\t\t\t\tvalidInputs.push(validPos.input);\n\t\t\t}\n\t\t\tdelete maskset.validPositions[i];\n\t\t}\n\t\tif (resultPos === -1 && c !== undefined) {\n\t\t\tvalidInputs.push(c);\n\t\t\tresultPos = validInputs.length - 1;\n\t\t}\n\n\t\twhile (maskset.excludes[decisionPos] !== undefined && maskset.excludes[decisionPos].length < 10) {\n\t\t\t// maskset.tests[decisionPos] = undefined; //clear decisionPos\n\t\t\tmaskset.tests = {};  //clear all\n\t\t\tresetMaskSet.call(inputmask, true); //clear getbuffer\n\t\t\tisValidRslt = true;\n\t\t\tfor (i = 0; i < validInputs.length; i++) {\n\t\t\t\tnextPos = isValidRslt.caret || (getLastValidPosition.call(inputmask, undefined, true) + 1);\n\t\t\t\tinput = validInputs[i];\n\t\t\t\tif (!(isValidRslt = isValid.call(inputmask, nextPos, input, false, fromIsValid, true))) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (i === resultPos) {\n\t\t\t\t\treturnRslt = isValidRslt;\n\t\t\t\t}\n\t\t\t\tif (maskPos == true && isValidRslt) {  //return validposition on generalise\n\t\t\t\t\treturnRslt = {caretPos: i};\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!isValidRslt) {\n\t\t\t\tresetMaskSet.call(inputmask);\n\t\t\t\tprevAltPos = getTest.call(inputmask, decisionPos);  //get the current decisionPos to exclude ~ needs to be before restoring the initial validation\n\t\t\t\t//reset & revert\n\t\t\t\tmaskset.validPositions = $.extend(true, {}, validPsClone);\n\t\t\t\tmaskset.tests = $.extend(true, {}, tstClone); //refresh tests after possible alternating\n\t\t\t\tif (maskset.excludes[decisionPos]) {\n\t\t\t\t\tvar decisionTaker = getDecisionTaker(prevAltPos);\n\t\t\t\t\tif (maskset.excludes[decisionPos].indexOf(decisionTaker + \":\" + prevAltPos.alternation) !== -1) {\n\t\t\t\t\t\treturnRslt = alternate.call(inputmask, maskPos, c, strict, fromIsValid, decisionPos - 1, selection);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tmaskset.excludes[decisionPos].push(decisionTaker + \":\" + prevAltPos.alternation);\n\t\t\t\t\tfor (i = decisionPos; i < getLastValidPosition.call(inputmask, undefined, true) + 1; i++) delete maskset.validPositions[i];\n\t\t\t\t} else { //latest alternation\n\t\t\t\t\treturnRslt = alternate.call(inputmask, maskPos, c, strict, fromIsValid, decisionPos - 1, selection);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\t//reset alternation excludes\n\tif (!returnRslt || opts.keepStatic !== false) {\n\t\tdelete maskset.excludes[decisionPos];\n\t}\n\treturn returnRslt;\n}\n\nfunction casing(elem, test, pos) {\n\tconst opts = this.opts,\n\t\tmaskset = this.maskset;\n\n\tswitch (opts.casing || test.casing) {\n\t\tcase \"upper\":\n\t\t\telem = elem.toUpperCase();\n\t\t\tbreak;\n\t\tcase \"lower\":\n\t\t\telem = elem.toLowerCase();\n\t\t\tbreak;\n\t\tcase \"title\":\n\t\t\tvar posBefore = maskset.validPositions[pos - 1];\n\t\t\tif (pos === 0 || posBefore && posBefore.input === String.fromCharCode(keyCode.SPACE)) {\n\t\t\t\telem = elem.toUpperCase();\n\t\t\t} else {\n\t\t\t\telem = elem.toLowerCase();\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tif (typeof opts.casing === \"function\") {\n\t\t\t\tvar args = Array.prototype.slice.call(arguments);\n\t\t\t\targs.push(maskset.validPositions);\n\t\t\t\telem = opts.casing.apply(this, args);\n\t\t\t}\n\t}\n\n\treturn elem;\n}\n\n//tobe put on prototype?\nfunction checkAlternationMatch(altArr1, altArr2, na) {\n\tconst opts = this.opts;\n\n\tvar altArrC = opts.greedy ? altArr2 : altArr2.slice(0, 1),\n\t\tisMatch = false,\n\t\tnaArr = na !== undefined ? na.split(\",\") : [],\n\t\tnaNdx;\n\n\t//remove no alternate indexes from alternation array\n\tfor (var i = 0; i < naArr.length; i++) {\n\t\tif ((naNdx = altArr1.indexOf(naArr[i])) !== -1) {\n\t\t\taltArr1.splice(naNdx, 1);\n\t\t}\n\t}\n\n\tfor (var alndx = 0; alndx < altArr1.length; alndx++) {\n\t\tif (altArrC.includes(altArr1[alndx])) {\n\t\t\tisMatch = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn isMatch;\n}\n\n//tobe put on prototype?\nfunction handleRemove(input, k, pos, strict, fromIsValid) {\n\tconst inputmask = this, maskset = this.maskset, opts = this.opts;\n\n\tif (opts.numericInput || inputmask.isRTL) {\n\t\tif (k === keyCode.BACKSPACE) {\n\t\t\tk = keyCode.DELETE;\n\t\t} else if (k === keyCode.DELETE) {\n\t\t\tk = keyCode.BACKSPACE;\n\t\t}\n\n\t\tif (inputmask.isRTL) {\n\t\t\tvar pend = pos.end;\n\t\t\tpos.end = pos.begin;\n\t\t\tpos.begin = pend;\n\t\t}\n\t}\n\n\tvar lvp = getLastValidPosition.call(inputmask, undefined, true);\n\tif (pos.end >= getBuffer.call(inputmask).length && lvp >= pos.end) { //handle numeric negate symbol offset, due to  dynamic jit masking\n\t\tpos.end = lvp + 1;\n\t}\n\n\tif (k === keyCode.BACKSPACE) {\n\t\tif ((pos.end - pos.begin < 1)) {\n\t\t\tpos.begin = seekPrevious.call(inputmask, pos.begin);\n\t\t}\n\t} else if (k === keyCode.DELETE) {\n\t\tif (pos.begin === pos.end) {\n\t\t\tpos.end = isMask.call(inputmask, pos.end, true, true) ? pos.end + 1 : seekNext.call(inputmask, pos.end) + 1;\n\t\t}\n\t}\n\tvar offset;\n\tif ((offset = revalidateMask.call(inputmask, pos)) !== false) {\n\t\tif (strict !== true && opts.keepStatic !== false || (opts.regex !== null && getTest.call(inputmask, pos.begin).match.def.indexOf(\"|\") !== -1)) { //TODO NEEDS BETTER CHECK WHEN TO ALTERNATE  ~ opts regex isn\"t good enough\n\t\t\tvar result = alternate.call(inputmask, true);\n\t\t\tif (result) {\n\t\t\t\tvar newPos = result.caret !== undefined ? result.caret : (result.pos ? seekNext.call(inputmask, result.pos.begin ? result.pos.begin : result.pos) : getLastValidPosition.call(inputmask, -1, true));\n\t\t\t\tif (k !== keyCode.DELETE || pos.begin > newPos) {\n\t\t\t\t\tpos.begin == newPos;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (strict !== true) {\n\t\t\tmaskset.p = k === keyCode.DELETE ? pos.begin + offset : pos.begin;\n\t\t}\n\t}\n}\n\n//tobe put on prototype?\nfunction isComplete(buffer) { //return true / false / undefined (repeat *)\n\tconst inputmask = this, opts = this.opts, maskset = this.maskset;\n\n\tif (typeof opts.isComplete === \"function\") return opts.isComplete(buffer, opts);\n\tif (opts.repeat === \"*\") return undefined;\n\tvar complete = false,\n\t\tlrp = determineLastRequiredPosition.call(inputmask, true),\n\t\taml = seekPrevious.call(inputmask, lrp.l);\n\n\tif (lrp.def === undefined || lrp.def.newBlockMarker || lrp.def.optionality || lrp.def.optionalQuantifier) {\n\t\tcomplete = true;\n\t\tfor (var i = 0; i <= aml; i++) {\n\t\t\tvar test = getTestTemplate.call(inputmask, i).match;\n\t\t\tif ((test.static !== true && maskset.validPositions[i] === undefined && test.optionality !== true && test.optionalQuantifier !== true) || (test.static === true && buffer[i] !== getPlaceholder.call(inputmask, i, test))) {\n\t\t\t\tcomplete = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn complete;\n}\n\n//tobe put on prototype?\nfunction isValid(pos, c, strict, fromIsValid, fromAlternate, validateOnly, fromCheckval) { //strict true ~ no correction or autofill\n\tconst inputmask = this,\n\t\t$ = this.dependencyLib,\n\t\topts = this.opts,\n\t\tel = inputmask.el,\n\t\tmaskset = inputmask.maskset;\n\n\tfunction isSelection(posObj) {\n\t\treturn inputmask.isRTL ? (posObj.begin - posObj.end) > 1 || ((posObj.begin - posObj.end) === 1) :\n\t\t\t(posObj.end - posObj.begin) > 1 || ((posObj.end - posObj.begin) === 1);\n\t}\n\n\tstrict = strict === true; //always set a value to strict to prevent possible strange behavior in the extensions\n\n\tvar maskPos = pos;\n\tif (pos.begin !== undefined) { //position was a position object - used to handle a delete by typing over a selection\n\t\tmaskPos = inputmask.isRTL ? pos.end : pos.begin;\n\t}\n\n\tfunction processCommandObject(commandObj) {\n\t\tif (commandObj !== undefined) {\n\t\t\tif (commandObj.remove !== undefined) { //remove position(s)\n\t\t\t\tif (!Array.isArray(commandObj.remove)) commandObj.remove = [commandObj.remove];\n\t\t\t\tcommandObj.remove.sort(function (a, b) {\n\t\t\t\t\treturn b.pos - a.pos;\n\t\t\t\t}).forEach(function (lmnt) {\n\t\t\t\t\trevalidateMask.call(inputmask, {begin: lmnt, end: lmnt + 1});\n\t\t\t\t});\n\t\t\t\tcommandObj.remove = undefined;\n\t\t\t}\n\t\t\tif (commandObj.insert !== undefined) { //insert position(s)\n\t\t\t\tif (!Array.isArray(commandObj.insert)) commandObj.insert = [commandObj.insert];\n\t\t\t\tcommandObj.insert.sort(function (a, b) {\n\t\t\t\t\treturn a.pos - b.pos;\n\t\t\t\t}).forEach(function (lmnt) {\n\t\t\t\t\tif (lmnt.c !== \"\") {\n\t\t\t\t\t\tisValid.call(inputmask, lmnt.pos, lmnt.c, lmnt.strict !== undefined ? lmnt.strict : true, lmnt.fromIsValid !== undefined ? lmnt.fromIsValid : fromIsValid);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tcommandObj.insert = undefined;\n\t\t\t}\n\n\t\t\tif (commandObj.refreshFromBuffer && commandObj.buffer) {\n\t\t\t\tvar refresh = commandObj.refreshFromBuffer;\n\t\t\t\trefreshFromBuffer.call(inputmask, refresh === true ? refresh : refresh.start, refresh.end, commandObj.buffer);\n\t\t\t\tcommandObj.refreshFromBuffer = undefined;\n\t\t\t}\n\n\t\t\tif (commandObj.rewritePosition !== undefined) {\n\t\t\t\tmaskPos = commandObj.rewritePosition;\n\t\t\t\t// commandObj.rewritePosition = undefined;\n\t\t\t\tcommandObj = true;\n\t\t\t}\n\t\t}\n\t\treturn commandObj;\n\t}\n\n\tfunction _isValid(position, c, strict) {\n\t\tvar rslt = false;\n\n\t\tgetTests.call(inputmask, position).every(function (tst, ndx) {\n\t\t\tvar test = tst.match;\n\t\t\t//make sure the buffer is set and correct\n\t\t\tgetBuffer.call(inputmask, true);\n\t\t\t//return is false or a json object => { pos: ??, c: ??} or true\n\t\t\trslt = test.fn != null ?\n\t\t\t\ttest.fn.test(c, maskset, position, strict, opts, isSelection(pos)) : (c === test.def || c === opts.skipOptionalPartCharacter) && test.def !== \"\" ? //non mask\n\t\t\t\t\t{\n\t\t\t\t\t\tc: getPlaceholder.call(inputmask, position, test, true) || test.def,\n\t\t\t\t\t\tpos: position\n\t\t\t\t\t} : false;\n\n\t\t\tif (rslt !== false) {\n\t\t\t\tvar elem = rslt.c !== undefined ? rslt.c : c, validatedPos = position;\n\t\t\t\telem = (elem === opts.skipOptionalPartCharacter && test.static === true) ?\n\t\t\t\t\t(getPlaceholder.call(inputmask, position, test, true) || test.def) : elem;\n\n\t\t\t\trslt = processCommandObject(rslt);\n\n\t\t\t\tif (rslt !== true && rslt.pos !== undefined && rslt.pos !== position) { //their is a position offset\n\t\t\t\t\tvalidatedPos = rslt.pos;\n\t\t\t\t}\n\n\t\t\t\tif (rslt !== true && rslt.pos === undefined && rslt.c === undefined) {\n\t\t\t\t\treturn false; //breakout if nothing to insert\n\t\t\t\t}\n\n\t\t\t\tif (revalidateMask.call(inputmask, pos, $.extend({}, tst, {\n\t\t\t\t\t\"input\": casing.call(inputmask, elem, test, validatedPos)\n\t\t\t\t}), fromIsValid, validatedPos) === false) {\n\t\t\t\t\trslt = false;\n\t\t\t\t}\n\t\t\t\treturn false; //break from loop\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\t\treturn rslt;\n\t}\n\n\tvar result = true,\n\t\tpositionsClone = $.extend(true, {}, maskset.validPositions); //clone the currentPositions\n\n\tif (opts.keepStatic === false && maskset.excludes[maskPos] !== undefined && fromAlternate !== true && fromIsValid !== true) {\n\t\tfor (var i = maskPos; i < (inputmask.isRTL ? pos.begin : pos.end); i++) {\n\t\t\tif (maskset.excludes[i] !== undefined) {\n\t\t\t\tmaskset.excludes[i] = undefined;\n\t\t\t\tdelete maskset.tests[i];\n\t\t\t}\n\t\t}\n\t}\n\n\tif (typeof opts.preValidation === \"function\" && fromIsValid !== true && validateOnly !== true) {\n\t\tresult = opts.preValidation.call(el, getBuffer.call(inputmask), maskPos, c, isSelection(pos), opts, maskset, pos, strict || fromAlternate);\n\t\tresult = processCommandObject(result);\n\t}\n\tif (result === true) { //preValidation result\n\t\tif (inputmask.maxLength === undefined || maskPos < inputmask.maxLength) {\n\t\t\tresult = _isValid(maskPos, c, strict);\n\t\t\tif ((!strict || fromIsValid === true) && result === false && validateOnly !== true) {\n\t\t\t\tvar currentPosValid = maskset.validPositions[maskPos];\n\t\t\t\tif (currentPosValid && currentPosValid.match.static === true && (currentPosValid.match.def === c || c === opts.skipOptionalPartCharacter)) {\n\t\t\t\t\tresult = {\n\t\t\t\t\t\t\"caret\": seekNext.call(inputmask, maskPos)\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tif (opts.insertMode || maskset.validPositions[seekNext.call(inputmask, maskPos)] === undefined || pos.end > maskPos) { //does the input match on a further position?\n\t\t\t\t\t\tvar skip = false;\n\t\t\t\t\t\tif (maskset.jitOffset[maskPos] && maskset.validPositions[seekNext.call(inputmask, maskPos)] === undefined) {\n\t\t\t\t\t\t\tresult = isValid.call(inputmask, maskPos + maskset.jitOffset[maskPos], c, true);\n\t\t\t\t\t\t\tif (result !== false) {\n\t\t\t\t\t\t\t\tif (fromAlternate !== true) result.caret = maskPos;\n\t\t\t\t\t\t\t\tskip = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (pos.end > maskPos) {\n\t\t\t\t\t\t\tmaskset.validPositions[maskPos] = undefined;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!skip && !isMask.call(inputmask, maskPos, opts.keepStatic && maskPos === 0)) {\n\t\t\t\t\t\t\tfor (var nPos = maskPos + 1, snPos = seekNext.call(inputmask, maskPos, false, maskPos !== 0); nPos <= snPos; nPos++) {\n\t\t\t\t\t\t\t\t// if (!isMask(nPos, true)) {\n\t\t\t\t\t\t\t\t// \tcontinue;\n\t\t\t\t\t\t\t\t// }\n\t\t\t\t\t\t\t\tresult = _isValid(nPos, c, strict);\n\t\t\t\t\t\t\t\tif (result !== false) {\n\t\t\t\t\t\t\t\t\tresult = trackbackPositions.call(inputmask, maskPos, result.pos !== undefined ? result.pos : nPos) || result;\n\t\t\t\t\t\t\t\t\tmaskPos = nPos;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tresult = false;\n\t\t}\n\n\n\t\tif (result === false && opts.keepStatic && (isComplete.call(inputmask, getBuffer.call(inputmask)) || maskPos === 0) && !strict && fromAlternate !== true) { //try fuzzy alternator logic\n\t\t\tresult = alternate.call(inputmask, maskPos, c, strict, fromIsValid, undefined, pos);\n\t\t} else if (isSelection(pos) && maskset.tests[maskPos] && maskset.tests[maskPos].length > 1 && opts.keepStatic && !strict && fromAlternate !== true) { //selection clears an alternated keepstatic mask ~ #2189\n\t\t\tresult = alternate.call(inputmask, true);\n\t\t}\n\n\t\tif (result === true) {\n\t\t\tresult = {\n\t\t\t\t\"pos\": maskPos\n\t\t\t};\n\t\t}\n\t}\n\tif (typeof opts.postValidation === \"function\" && fromIsValid !== true && validateOnly !== true) {\n\t\tvar postResult = opts.postValidation.call(el, getBuffer.call(inputmask, true), pos.begin !== undefined ? (inputmask.isRTL ? pos.end : pos.begin) : pos, c, result, opts, maskset, strict, fromCheckval);\n\t\tif (postResult !== undefined) {\n\t\t\tresult = postResult === true ? result : postResult;\n\t\t}\n\t}\n\n\tif (result && result.pos === undefined) {\n\t\tresult.pos = maskPos;\n\t}\n\n\tif (result === false || validateOnly === true) {\n\t\tresetMaskSet.call(inputmask, true);\n\t\tmaskset.validPositions = $.extend(true, {}, positionsClone); //revert validation changes\n\t} else {\n\t\ttrackbackPositions.call(inputmask, undefined, maskPos, true);\n\t}\n\n\tvar endResult = processCommandObject(result);\n\t// console.log(\"returned result \" + JSON.stringify(endResult));\n\treturn endResult;\n}\n\n//tobe put on prototype?\nfunction positionCanMatchDefinition(pos, testDefinition, opts) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset;\n\n\tvar valid = false,\n\t\ttests = getTests.call(inputmask, pos);\n\tfor (var tndx = 0; tndx < tests.length; tndx++) {\n\t\tif (tests[tndx].match &&\n\t\t\t((tests[tndx].match[\"nativeDef\"] === testDefinition.match[opts.shiftPositions ? \"def\" : \"nativeDef\"] && (!opts.shiftPositions || !testDefinition.match.static)) ||\n\t\t\t\ttests[tndx].match[\"nativeDef\"] === testDefinition.match[\"nativeDef\"])) {\n\t\t\tvalid = true;\n\t\t\tbreak;\n\t\t} else if (tests[tndx].match && tests[tndx].match[\"def\"] === testDefinition.match[\"nativeDef\"]) {\n\t\t\tvalid = undefined;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (valid === false) {\n\t\tif (maskset.jitOffset[pos] !== undefined) {\n\t\t\tvalid = positionCanMatchDefinition.call(inputmask, pos + maskset.jitOffset[pos], testDefinition, opts);\n\t\t}\n\t}\n\treturn valid;\n}\n\n//tobe put on prototype?\nfunction refreshFromBuffer(start, end, buffer) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset,\n\t\topts = this.opts,\n\t\t$ = this.dependencyLib,\n\t\tel = inputmask.el;\n\n\t// checkVal.call(inputmask, el, false, true, isRTL ? buffer.reverse() : buffer);\n\tvar i, p, skipOptionalPartCharacter = opts.skipOptionalPartCharacter,\n\t\tbffr = inputmask.isRTL ? buffer.slice().reverse() : buffer;\n\topts.skipOptionalPartCharacter = \"\";\n\tif (start === true) {\n\t\tresetMaskSet.call(inputmask);\n\t\tmaskset.tests = {}; //refresh tests after possible alternating\n\t\tstart = 0;\n\t\tend = buffer.length;\n\t\tp = determineNewCaretPosition.call(inputmask, {begin: 0, end: 0}, false).begin;\n\t} else {\n\t\tfor (i = start; i < end; i++) {\n\t\t\tdelete maskset.validPositions[i];\n\t\t}\n\t\tp = start;\n\t}\n\n\tvar keypress = new $.Event(\"keypress\");\n\tfor (i = start; i < end; i++) {\n\t\tkeypress.which = bffr[i].toString().charCodeAt(0);\n\t\tinputmask.ignorable = false; //make sure ignorable is ignored ;-)\n\t\tvar valResult = EventHandlers.keypressEvent.call(el, keypress, true, false, false, p);\n\t\tif (valResult !== false) {\n\t\t\tp = valResult.forwardPosition;\n\t\t}\n\t}\n\n\topts.skipOptionalPartCharacter = skipOptionalPartCharacter;\n}\n\n//tobe put on prototype?\n//fill in best positions according the current input\nfunction trackbackPositions(originalPos, newPos, fillOnly) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset,\n\t\t$ = this.dependencyLib;\n\n\t// console.log(\"trackbackPositions \" + originalPos + \" \" + newPos);\n\tif (originalPos === undefined) {\n\t\t//find previous valid\n\t\tfor (originalPos = newPos - 1; originalPos > 0; originalPos--) {\n\t\t\tif (maskset.validPositions[originalPos]) break;\n\t\t}\n\t}\n\tfor (var ps = originalPos; ps < newPos; ps++) {\n\t\tif (maskset.validPositions[ps] === undefined && !isMask.call(inputmask, ps, true)) {\n\t\t\tvar vp = ps == 0 ? getTest.call(inputmask, ps) : maskset.validPositions[ps - 1];\n\t\t\tif (vp) {\n\t\t\t\tvar tests = getTests.call(inputmask, ps).slice();\n\t\t\t\tif (tests[tests.length - 1].match.def === \"\") tests.pop();\n\t\t\t\tvar bestMatch = determineTestTemplate.call(inputmask, ps, tests), np;\n\t\t\t\tif (bestMatch && (bestMatch.match.jit !== true || (bestMatch.match.newBlockMarker === \"master\" && (np = maskset.validPositions[ps + 1]) && np.match.optionalQuantifier === true))) {\n\t\t\t\t\tbestMatch = $.extend({}, bestMatch, {\n\t\t\t\t\t\t\"input\": getPlaceholder.call(inputmask, ps, bestMatch.match, true) || bestMatch.match.def\n\t\t\t\t\t});\n\t\t\t\t\tbestMatch.generatedInput = true;\n\t\t\t\t\trevalidateMask.call(inputmask, ps, bestMatch, true);\n\n\t\t\t\t\tif (fillOnly !== true) {\n\t\t\t\t\t\t//revalidate the new position to update the locator value\n\t\t\t\t\t\tvar cvpInput = maskset.validPositions[newPos].input;\n\t\t\t\t\t\tmaskset.validPositions[newPos] = undefined;\n\t\t\t\t\t\treturn isValid.call(inputmask, newPos, cvpInput, true, true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n//tobe put on prototype?\nfunction revalidateMask(pos, validTest, fromIsValid, validatedPos) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset,\n\t\topts = this.opts,\n\t\t$ = this.dependencyLib;\n\n\tfunction IsEnclosedStatic(pos, valids, selection) {\n\t\tvar posMatch = valids[pos];\n\t\tif (posMatch !== undefined && posMatch.match.static === true && posMatch.match.optionality !== true && (valids[0] === undefined || valids[0].alternation === undefined)) {\n\t\t\tvar prevMatch = selection.begin <= pos - 1 ? valids[pos - 1] && valids[pos - 1].match.static === true && valids[pos - 1] : valids[pos - 1],\n\t\t\t\tnextMatch = selection.end > pos + 1 ? valids[pos + 1] && valids[pos + 1].match.static === true && valids[pos + 1] : valids[pos + 1];\n\t\t\treturn prevMatch && nextMatch;\n\t\t}\n\t\treturn false;\n\t}\n\n\tvar offset = 0, begin = pos.begin !== undefined ? pos.begin : pos, end = pos.end !== undefined ? pos.end : pos;\n\tif (pos.begin > pos.end) {\n\t\tbegin = pos.end;\n\t\tend = pos.begin;\n\t}\n\n\tvalidatedPos = validatedPos !== undefined ? validatedPos : begin;\n\tif (begin !== end || (opts.insertMode && maskset.validPositions[validatedPos] !== undefined && fromIsValid === undefined) || validTest === undefined) {\n\t\t//reposition & revalidate others\n\t\tvar positionsClone = $.extend(true, {}, maskset.validPositions),\n\t\t\tlvp = getLastValidPosition.call(inputmask, undefined, true),\n\t\t\ti;\n\t\tmaskset.p = begin; //needed for alternated position after overtype selection\n\n\t\tfor (i = lvp; i >= begin; i--) {\n\t\t\tdelete maskset.validPositions[i];\n\t\t\tif (validTest === undefined) delete maskset.tests[i + 1];\n\t\t}\n\n\t\tvar valid = true, j = validatedPos,\n\t\t\tposMatch = j, t, canMatch;\n\n\t\tif (validTest) {\n\t\t\tmaskset.validPositions[validatedPos] = $.extend(true, {}, validTest);\n\t\t\tposMatch++;\n\t\t\tj++;\n\t\t}\n\n\t\tfor (i = validTest ? end : end - 1; i <= lvp; i++) {\n\t\t\tif ((t = positionsClone[i]) !== undefined && t.generatedInput !== true &&\n\t\t\t\t(i >= end || (i >= begin && IsEnclosedStatic(i, positionsClone, {\n\t\t\t\t\tbegin: begin,\n\t\t\t\t\tend: end\n\t\t\t\t})))) {\n\t\t\t\twhile (getTest.call(inputmask, posMatch).match.def !== \"\") { //loop needed to match further positions\n\t\t\t\t\tif ((canMatch = positionCanMatchDefinition.call(inputmask, posMatch, t, opts)) !== false || t.match.def === \"+\") { //validated match //we still need some hackery for the + validator (numeric alias)\n\t\t\t\t\t\tif (t.match.def === \"+\") getBuffer.call(inputmask, true);\n\t\t\t\t\t\tvar result = isValid.call(inputmask, posMatch, t.input, t.match.def !== \"+\", t.match.def !== \"+\");\n\t\t\t\t\t\tvalid = result !== false;\n\t\t\t\t\t\tj = (result.pos || posMatch) + 1;\n\t\t\t\t\t\tif (!valid && canMatch) break;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t}\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\tif (validTest === undefined && t.match.static && i === pos.begin) offset++;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (!valid && posMatch > maskset.maskLength) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tposMatch++;\n\t\t\t\t}\n\t\t\t\tif (getTest.call(inputmask, posMatch).match.def == \"\") {\n\t\t\t\t\tvalid = false;\n\t\t\t\t}\n\t\t\t\t//restore position\n\t\t\t\tposMatch = j;\n\t\t\t}\n\t\t\tif (!valid) break;\n\t\t}\n\n\t\tif (!valid) {\n\t\t\tmaskset.validPositions = $.extend(true, {}, positionsClone);\n\t\t\tresetMaskSet.call(inputmask, true);\n\t\t\treturn false;\n\t\t}\n\t} else if (validTest && getTest.call(inputmask, validatedPos).match.cd === validTest.match.cd) {\n\t\tmaskset.validPositions[validatedPos] = $.extend(true, {}, validTest);\n\t}\n\n\tresetMaskSet.call(inputmask, true);\n\treturn offset;\n}\n","import {\n\tdetermineTestTemplate,\n\tgetMaskTemplate,\n\tgetPlaceholder,\n\tgetTest,\n\tgetTests,\n\tgetTestTemplate\n} from \"./validation-tests\";\nimport {checkAlternationMatch} from \"./validation\";\nimport {mask} from \"./mask\";\n\nexport {\n\tcaret,\n\tdetermineLastRequiredPosition,\n\tdetermineNewCaretPosition,\n\tgetBuffer,\n\tgetBufferTemplate,\n\tgetLastValidPosition,\n\tisMask,\n\tresetMaskSet,\n\tseekNext,\n\tseekPrevious,\n\ttranslatePosition\n};\n\n//tobe put on prototype?\nfunction caret(input, begin, end, notranslate, isDelete) {\n\tconst inputmask = this,\n\t\topts = this.opts;\n\n\tvar range;\n\tif (begin !== undefined) {\n\t\tif (Array.isArray(begin)) {\n\t\t\tend = inputmask.isRTL ? begin[0] : begin[1];\n\t\t\tbegin = inputmask.isRTL ? begin[1] : begin[0];\n\t\t}\n\t\tif (begin.begin !== undefined) {\n\t\t\tend = inputmask.isRTL ? begin.begin : begin.end;\n\t\t\tbegin = inputmask.isRTL ? begin.end : begin.begin;\n\t\t}\n\t\tif (typeof begin === \"number\") {\n\t\t\tbegin = notranslate ? begin : translatePosition.call(inputmask, begin);\n\t\t\tend = notranslate ? end : translatePosition.call(inputmask, end);\n\t\t\tend = (typeof end == \"number\") ? end : begin;\n\t\t\t// if (!$(input).is(\":visible\")) {\n\t\t\t// \treturn;\n\t\t\t// }\n\n\t\t\tvar scrollCalc = parseInt(((input.ownerDocument.defaultView || window).getComputedStyle ? (input.ownerDocument.defaultView || window).getComputedStyle(input, null) : input.currentStyle).fontSize) * end;\n\t\t\tinput.scrollLeft = scrollCalc > input.scrollWidth ? scrollCalc : 0;\n\t\t\tinput.inputmask.caretPos = {begin: begin, end: end}; //track caret internally\n\t\t\tif (opts.insertModeVisual && opts.insertMode === false && begin === end) {\n\t\t\t\tif (!isDelete) {\n\t\t\t\t\tend++; //set visualization for insert/overwrite mode\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (input === (input.inputmask.shadowRoot || document).activeElement) {\n\t\t\t\tif (\"setSelectionRange\" in input) {\n\t\t\t\t\tinput.setSelectionRange(begin, end);\n\t\t\t\t} else if (window.getSelection) {\n\t\t\t\t\trange = document.createRange();\n\t\t\t\t\tif (input.firstChild === undefined || input.firstChild === null) {\n\t\t\t\t\t\tvar textNode = document.createTextNode(\"\");\n\t\t\t\t\t\tinput.appendChild(textNode);\n\t\t\t\t\t}\n\t\t\t\t\trange.setStart(input.firstChild, begin < input.inputmask._valueGet().length ? begin : input.inputmask._valueGet().length);\n\t\t\t\t\trange.setEnd(input.firstChild, end < input.inputmask._valueGet().length ? end : input.inputmask._valueGet().length);\n\t\t\t\t\trange.collapse(true);\n\t\t\t\t\tvar sel = window.getSelection();\n\t\t\t\t\tsel.removeAllRanges();\n\t\t\t\t\tsel.addRange(range);\n\t\t\t\t\t//input.focus();\n\t\t\t\t} else if (input.createTextRange) {\n\t\t\t\t\trange = input.createTextRange();\n\t\t\t\t\trange.collapse(true);\n\t\t\t\t\trange.moveEnd(\"character\", end);\n\t\t\t\t\trange.moveStart(\"character\", begin);\n\t\t\t\t\trange.select();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (\"selectionStart\" in input && \"selectionEnd\" in input) {\n\t\t\tbegin = input.selectionStart;\n\t\t\tend = input.selectionEnd;\n\t\t} else if (window.getSelection) {\n\t\t\trange = window.getSelection().getRangeAt(0);\n\t\t\tif (range.commonAncestorContainer.parentNode === input || range.commonAncestorContainer === input) {\n\t\t\t\tbegin = range.startOffset;\n\t\t\t\tend = range.endOffset;\n\t\t\t}\n\t\t} else if (document.selection && document.selection.createRange) {\n\t\t\trange = document.selection.createRange();\n\t\t\tbegin = 0 - range.duplicate().moveStart(\"character\", -input.inputmask._valueGet().length);\n\t\t\tend = begin + range.text.length;\n\t\t}\n\n\t\t// if (opts.insertModeVisual && opts.insertMode === false && begin === (end - 1)) end--; //correct caret for insert/overwrite mode\n\n\t\t/*eslint-disable consistent-return */\n\t\treturn {\n\t\t\t\"begin\": notranslate ? begin : translatePosition.call(inputmask, begin),\n\t\t\t\"end\": notranslate ? end : translatePosition.call(inputmask, end)\n\t\t};\n\t\t/*eslint-enable consistent-return */\n\t}\n}\n\n//tobe put on prototype?\nfunction determineLastRequiredPosition(returnDefinition) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset,\n\t\t$ = this.dependencyLib;\n\n\tvar buffer = getMaskTemplate.call(inputmask, true, getLastValidPosition.call(inputmask), true, true),\n\t\tbl = buffer.length,\n\t\tpos, lvp = getLastValidPosition.call(inputmask),\n\t\tpositions = {},\n\t\tlvTest = maskset.validPositions[lvp],\n\t\tndxIntlzr = lvTest !== undefined ? lvTest.locator.slice() : undefined,\n\t\ttestPos;\n\tfor (pos = lvp + 1; pos < buffer.length; pos++) {\n\t\ttestPos = getTestTemplate.call(inputmask, pos, ndxIntlzr, pos - 1);\n\t\tndxIntlzr = testPos.locator.slice();\n\t\tpositions[pos] = $.extend(true, {}, testPos);\n\t}\n\n\tvar lvTestAlt = lvTest && lvTest.alternation !== undefined ? lvTest.locator[lvTest.alternation] : undefined;\n\tfor (pos = bl - 1; pos > lvp; pos--) {\n\t\ttestPos = positions[pos];\n\t\tif ((testPos.match.optionality ||\n\t\t\t(testPos.match.optionalQuantifier && testPos.match.newBlockMarker) ||\n\t\t\t(lvTestAlt &&\n\t\t\t\t(\n\t\t\t\t\t(lvTestAlt !== positions[pos].locator[lvTest.alternation] && testPos.match.static != true) ||\n\t\t\t\t\t(testPos.match.static === true &&\n\t\t\t\t\t\ttestPos.locator[lvTest.alternation] &&\n\t\t\t\t\t\tcheckAlternationMatch.call(inputmask, testPos.locator[lvTest.alternation].toString().split(\",\"), lvTestAlt.toString().split(\",\")) &&\n\t\t\t\t\t\tgetTests.call(inputmask, pos)[0].def !== \"\")\n\t\t\t\t)\n\t\t\t)) &&\n\t\t\tbuffer[pos] === getPlaceholder.call(inputmask, pos, testPos.match)) {\n\t\t\tbl--;\n\t\t} else {\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn returnDefinition ? {\n\t\t\"l\": bl,\n\t\t\"def\": positions[bl] ? positions[bl].match : undefined\n\t} : bl;\n}\n\n//tobe put on prototype?\nfunction determineNewCaretPosition(selectedCaret, tabbed) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset,\n\t\topts = this.opts;\n\n\tfunction doRadixFocus(clickPos) {\n\t\tif (opts.radixPoint !== \"\" && opts.digits !== 0) {\n\t\t\tvar vps = maskset.validPositions;\n\t\t\tif (vps[clickPos] === undefined || (vps[clickPos].input === getPlaceholder.call(inputmask, clickPos))) {\n\t\t\t\tif (clickPos < seekNext.call(inputmask, -1)) return true;\n\t\t\t\tvar radixPos = getBuffer.call(inputmask).indexOf(opts.radixPoint);\n\t\t\t\tif (radixPos !== -1) {\n\t\t\t\t\tfor (var vp in vps) {\n\t\t\t\t\t\tif (vps[vp] && radixPos < vp && vps[vp].input !== getPlaceholder.call(inputmask, vp)) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tif (tabbed) {\n\t\tif (inputmask.isRTL) {\n\t\t\tselectedCaret.end = selectedCaret.begin;\n\t\t} else {\n\t\t\tselectedCaret.begin = selectedCaret.end;\n\t\t}\n\t}\n\tif (selectedCaret.begin === selectedCaret.end) {\n\t\tswitch (opts.positionCaretOnClick) {\n\t\t\tcase \"none\":\n\t\t\t\tbreak;\n\t\t\tcase \"select\":\n\t\t\t\tselectedCaret = {begin: 0, end: getBuffer.call(inputmask).length};\n\t\t\t\tbreak;\n\t\t\tcase \"ignore\":\n\t\t\t\tselectedCaret.end = selectedCaret.begin = seekNext.call(inputmask, getLastValidPosition.call(inputmask));\n\t\t\t\tbreak;\n\t\t\tcase \"radixFocus\":\n\t\t\t\tif (doRadixFocus(selectedCaret.begin)) {\n\t\t\t\t\tvar radixPos = getBuffer.call(inputmask).join(\"\").indexOf(opts.radixPoint);\n\t\t\t\t\tselectedCaret.end = selectedCaret.begin = opts.numericInput ? seekNext.call(inputmask, radixPos) : radixPos;\n\t\t\t\t\tbreak;\n\t\t\t\t} //fallback to lvp\n\t\t\t// eslint-disable-next-line no-fallthrough\n\t\t\tdefault: //lvp:\n\t\t\t\tvar clickPosition = selectedCaret.begin,\n\t\t\t\t\tlvclickPosition = getLastValidPosition.call(inputmask, clickPosition, true),\n\t\t\t\t\tlastPosition = seekNext.call(inputmask, (lvclickPosition === -1 && !isMask.call(inputmask, 0)) ? -1 : lvclickPosition);\n\n\t\t\t\tif (clickPosition <= lastPosition) {\n\t\t\t\t\tselectedCaret.end = selectedCaret.begin = !isMask.call(inputmask, clickPosition, false, true) ? seekNext.call(inputmask, clickPosition) : clickPosition;\n\t\t\t\t} else {\n\t\t\t\t\tvar lvp = maskset.validPositions[lvclickPosition],\n\t\t\t\t\t\ttt = getTestTemplate.call(inputmask, lastPosition, lvp ? lvp.match.locator : undefined, lvp),\n\t\t\t\t\t\tplaceholder = getPlaceholder.call(inputmask, lastPosition, tt.match);\n\t\t\t\t\tif ((placeholder !== \"\" && getBuffer.call(inputmask)[lastPosition] !== placeholder && tt.match.optionalQuantifier !== true && tt.match.newBlockMarker !== true) || (!isMask.call(inputmask, lastPosition, opts.keepStatic, true) && tt.match.def === placeholder)) {\n\t\t\t\t\t\tvar newPos = seekNext.call(inputmask, lastPosition);\n\t\t\t\t\t\tif (clickPosition >= newPos || clickPosition === lastPosition) {\n\t\t\t\t\t\t\tlastPosition = newPos;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tselectedCaret.end = selectedCaret.begin = lastPosition;\n\t\t\t\t}\n\t\t}\n\n\t\treturn selectedCaret;\n\t}\n}\n\n\n//tobe put on prototype?\nfunction getBuffer(noCache) {\n\tconst inputmask = this, maskset = this.maskset;\n\n\tif (maskset.buffer === undefined || noCache === true) {\n\t\tmaskset.buffer = getMaskTemplate.call(inputmask, true, getLastValidPosition.call(inputmask), true);\n\t\tif (maskset._buffer === undefined) maskset._buffer = maskset.buffer.slice();\n\t}\n\treturn maskset.buffer;\n}\n\n//tobe put on prototype?\nfunction getBufferTemplate() {\n\tconst inputmask = this, maskset = this.maskset;\n\n\tif (maskset._buffer === undefined) {\n\t\t//generate template\n\t\tmaskset._buffer = getMaskTemplate.call(inputmask, false, 1);\n\t\tif (maskset.buffer === undefined) maskset.buffer = maskset._buffer.slice();\n\t}\n\treturn maskset._buffer;\n}\n\n//tobe put on prototype?\nfunction getLastValidPosition(closestTo, strict, validPositions) {\n\tconst maskset = this.maskset;\n\n\tvar before = -1,\n\t\tafter = -1,\n\t\tvalids = validPositions || maskset.validPositions; //for use in valhook ~ context switch\n\tif (closestTo === undefined) closestTo = -1;\n\tfor (var posNdx in valids) {\n\t\tvar psNdx = parseInt(posNdx);\n\t\tif (valids[psNdx] && (strict || valids[psNdx].generatedInput !== true)) {\n\t\t\tif (psNdx <= closestTo) before = psNdx;\n\t\t\tif (psNdx >= closestTo) after = psNdx;\n\t\t}\n\t}\n\treturn (before === -1 || before == closestTo) ? after : after == -1 ? before : (closestTo - before) < (after - closestTo) ? before : after;\n}\n\n//tobe put on prototype?\nfunction isMask(pos, strict, fuzzy) {\n\tconst inputmask = this, maskset = this.maskset;\n\n\tvar test = getTestTemplate.call(inputmask, pos).match;\n\tif (test.def === \"\") test = getTest.call(inputmask, pos).match;\n\n\tif (test.static !== true) {\n\t\treturn test.fn;\n\t}\n\tif (fuzzy === true && (maskset.validPositions[pos] !== undefined && maskset.validPositions[pos].generatedInput !== true)) {\n\t\treturn true;\n\t}\n\n\tif (strict !== true && pos > -1) {\n\t\tif (fuzzy) { //check on the number of tests\n\t\t\tvar tests = getTests.call(inputmask, pos);\n\t\t\treturn tests.length > (1 + (tests[tests.length - 1].match.def === \"\" ? 1 : 0));\n\t\t}\n\t\t//else based on the template\n\t\tvar testTemplate = determineTestTemplate.call(inputmask, pos, getTests.call(inputmask, pos));\n\t\tvar testPlaceHolder = getPlaceholder.call(inputmask, pos, testTemplate.match);\n\t\treturn testTemplate.match.def !== testPlaceHolder;\n\n\t}\n\treturn false;\n}\n\n//tobe put on prototype?\nfunction resetMaskSet(soft) {\n\tconst maskset = this.maskset;\n\n\tmaskset.buffer = undefined;\n\tif (soft !== true) {\n\t\tmaskset.validPositions = {};\n\t\tmaskset.p = 0;\n\t}\n}\n\n//tobe put on prototype?\nfunction seekNext(pos, newBlock, fuzzy) {\n\tconst inputmask = this;\n\n\tif (fuzzy === undefined) fuzzy = true;\n\tvar position = pos + 1;\n\twhile (getTest.call(inputmask, position).match.def !== \"\" &&\n\t((newBlock === true && (getTest.call(inputmask, position).match.newBlockMarker !== true || !isMask.call(inputmask, position, undefined, true))) ||\n\t\t(newBlock !== true && !isMask.call(inputmask, position, undefined, fuzzy)))) {\n\t\tposition++;\n\t}\n\treturn position;\n}\n\n//tobe put on prototype?\nfunction seekPrevious(pos, newBlock) {\n\tconst inputmask = this;\n\n\tvar position = pos - 1;\n\tif (pos <= 0) return 0;\n\n\twhile (position > 0 &&\n\t((newBlock === true && (getTest.call(inputmask, position).match.newBlockMarker !== true || !isMask.call(inputmask, position, undefined, true))) ||\n\t\t(newBlock !== true && !isMask.call(inputmask, position, undefined, true)))) {\n\t\tposition--;\n\t}\n\treturn position;\n}\n\n//tobe put on prototype?\nfunction translatePosition(pos) {\n\tconst inputmask = this,\n\t\topts = this.opts,\n\t\tel = this.el;\n\n\tif (inputmask.isRTL && typeof pos === \"number\" && (!opts.greedy || opts.placeholder !== \"\") && el) {\n\t\tpos = inputmask._valueGet().length - pos;\n\t}\n\treturn pos;\n}\n","import Inputmask from \"./inputmask\";\nimport keyCode from \"./keycode.json\";\nimport {getBufferTemplate} from \"./positioning\";\nimport {HandleNativePlaceholder} from \"./inputHandling\";\n\nexport {EventRuler};\n\nvar EventRuler = {\n\ton: function (input, eventName, eventHandler) {\n\t\tconst $ = input.inputmask.dependencyLib;\n\n\t\tvar ev = function (e) {\n\t\t\tif (e.originalEvent) {\n\t\t\t\te = e.originalEvent || e; //get original event from jquery evenbt\n\t\t\t\targuments[0] = e;\n\t\t\t}\n\t\t\t// console.log(e.type);\n\t\t\tvar that = this, args, inputmask = that.inputmask, opts = inputmask ? inputmask.opts : undefined,\n\t\t\t\t$ = inputmask.dependencyLib;\n\t\t\tif (inputmask === undefined && this.nodeName !== \"FORM\") { //happens when cloning an object with jquery.clone\n\t\t\t\tvar imOpts = $.data(that, \"_inputmask_opts\");\n\t\t\t\t$(that).off(); //unbind all events\n\t\t\t\tif (imOpts) {\n\t\t\t\t\t(new Inputmask(imOpts)).mask(that);\n\t\t\t\t}\n\t\t\t} else if (e.type !== \"setvalue\" && this.nodeName !== \"FORM\" && (that.disabled || (that.readOnly && !(e.type === \"keydown\" && (e.ctrlKey && e.keyCode === 67) || (opts.tabThrough === false && e.keyCode === keyCode.TAB))))) {\n\t\t\t\te.preventDefault();\n\t\t\t} else {\n\t\t\t\tswitch (e.type) {\n\t\t\t\t\tcase \"input\":\n\t\t\t\t\t\tif (inputmask.skipInputEvent === true || (e.inputType && e.inputType === \"insertCompositionText\")) {\n\t\t\t\t\t\t\tinputmask.skipInputEvent = false;\n\t\t\t\t\t\t\treturn e.preventDefault();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// if (mobile) { //this causes problem see #2220\n\t\t\t\t\t\t// \targs = arguments;\n\t\t\t\t\t\t// \tsetTimeout(function () { //needed for caret selection when entering a char on Android 8 - #1818\n\t\t\t\t\t\t// \t\teventHandler.apply(that, args);\n\t\t\t\t\t\t// \t\tcaret(that, that.inputmask.caretPos, undefined, true);\n\t\t\t\t\t\t// \t}, 0);\n\t\t\t\t\t\t// \treturn false;\n\t\t\t\t\t\t// }\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"keydown\":\n\t\t\t\t\t\t//Safari 5.1.x - modal dialog fires keypress twice workaround\n\t\t\t\t\t\tinputmask.skipKeyPressEvent = false;\n\t\t\t\t\t\tinputmask.skipInputEvent = inputmask.isComposing = e.keyCode === keyCode.KEY_229;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"keyup\":\n\t\t\t\t\tcase \"compositionend\":\n\t\t\t\t\t\tif (inputmask.isComposing) {\n\t\t\t\t\t\t\tinputmask.skipInputEvent = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"keypress\":\n\t\t\t\t\t\tif (inputmask.skipKeyPressEvent === true) {\n\t\t\t\t\t\t\treturn e.preventDefault();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tinputmask.skipKeyPressEvent = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"click\":\n\t\t\t\t\tcase \"focus\":\n\t\t\t\t\t\tif (inputmask.validationEvent) { // #841\n\t\t\t\t\t\t\tinputmask.validationEvent = false;\n\t\t\t\t\t\t\tinput.blur();\n\t\t\t\t\t\t\tHandleNativePlaceholder(input, (inputmask.isRTL ? getBufferTemplate.call(inputmask).slice().reverse() : getBufferTemplate.call(inputmask)).join(\"\"));\n\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\t\t}, 3000);\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\targs = arguments;\n\t\t\t\t\t\tsetTimeout(function () { //needed for Chrome ~ initial selection clears after the clickevent\n\t\t\t\t\t\t\tif (!input.inputmask) {\n\t\t\t\t\t\t\t\t// `inputmask.remove()` was called before this callback\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\teventHandler.apply(that, args);\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvar returnVal = eventHandler.apply(that, arguments);\n\t\t\t\tif (returnVal === false) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\treturn returnVal;\n\t\t\t}\n\t\t};\n\t\t//keep instance of the event\n\t\tinput.inputmask.events[eventName] = input.inputmask.events[eventName] || [];\n\t\tinput.inputmask.events[eventName].push(ev);\n\n\t\tif ([\"submit\", \"reset\"].includes(eventName)) {\n\t\t\tif (input.form !== null) $(input.form).on(eventName, ev.bind(input));\n\t\t} else {\n\t\t\t$(input).on(eventName, ev);\n\t\t}\n\t},\n\toff: function (input, event) {\n\t\tif (input.inputmask && input.inputmask.events) {\n\t\t\tconst $ = input.inputmask.dependencyLib;\n\t\t\tlet events = input.inputmask.events;\n\t\t\tif (event) {\n\t\t\t\tevents = [];\n\t\t\t\tevents[event] = input.inputmask.events[event];\n\t\t\t}\n\t\t\tfor (let eventName in events) {\n\t\t\t\tlet evArr = events[eventName];\n\t\t\t\twhile (evArr.length > 0) {\n\t\t\t\t\tlet ev = evArr.pop();\n\t\t\t\t\tif ([\"submit\", \"reset\",].includes(eventName)) {\n\t\t\t\t\t\tif (input.form !== null) $(input.form).off(eventName, ev);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(input).off(eventName, ev);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdelete input.inputmask.events[eventName];\n\t\t\t}\n\t\t}\n\t}\n};","import \"./getPrototypeOf\";\nimport keyCode from \"./keycode.json\";\nimport {caret, getBuffer, getBufferTemplate, getLastValidPosition, resetMaskSet, seekNext} from \"./positioning\";\nimport {applyInputValue, clearOptionalTail, writeBuffer} from \"./inputHandling\";\nimport {EventRuler} from \"./eventruler\";\nimport {iphone, mobile} from \"./environment\";\nimport {isComplete} from \"./validation\";\nimport {EventHandlers} from \"./eventhandlers\";\n\nexport{mask};\n\n//todo put on the prototype?\nfunction mask() {\n\tconst inputmask = this,\n\t\topts= this.opts,\n\tel=this.el,$=this.dependencyLib;\n\n\n\tfunction isElementTypeSupported(input, opts) {\n\t\tfunction patchValueProperty(npt) {\n\t\t\tvar valueGet;\n\t\t\tvar valueSet;\n\n\t\t\tfunction patchValhook(type) {\n\t\t\t\tif ($.valHooks && ($.valHooks[type] === undefined || $.valHooks[type].inputmaskpatch !== true)) {\n\t\t\t\t\tvar valhookGet = $.valHooks[type] && $.valHooks[type].get ? $.valHooks[type].get : function (elem) {\n\t\t\t\t\t\treturn elem.value;\n\t\t\t\t\t};\n\t\t\t\t\tvar valhookSet = $.valHooks[type] && $.valHooks[type].set ? $.valHooks[type].set : function (elem, value) {\n\t\t\t\t\t\telem.value = value;\n\t\t\t\t\t\treturn elem;\n\t\t\t\t\t};\n\n\t\t\t\t\t$.valHooks[type] = {\n\t\t\t\t\t\tget: function (elem) {\n\t\t\t\t\t\t\tif (elem.inputmask) {\n\t\t\t\t\t\t\t\tif (elem.inputmask.opts.autoUnmask) {\n\t\t\t\t\t\t\t\t\treturn elem.inputmask.unmaskedvalue();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tvar result = valhookGet(elem);\n\t\t\t\t\t\t\t\t\treturn getLastValidPosition.call(inputmask, undefined, undefined, elem.inputmask.maskset.validPositions) !== -1 || opts.nullable !== true ? result : \"\";\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn valhookGet(elem);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tset: function (elem, value) {\n\t\t\t\t\t\t\tvar result = valhookSet(elem, value);\n\t\t\t\t\t\t\tif (elem.inputmask) {\n\t\t\t\t\t\t\t\tapplyInputValue(elem, value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinputmaskpatch: true\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction getter() {\n\t\t\t\tif (this.inputmask) {\n\t\t\t\t\treturn this.inputmask.opts.autoUnmask ?\n\t\t\t\t\t\tthis.inputmask.unmaskedvalue() :\n\t\t\t\t\t\t(getLastValidPosition.call(inputmask) !== -1 || opts.nullable !== true ?\n\t\t\t\t\t\t\t((this.inputmask.shadowRoot || document.activeElement) === this && opts.clearMaskOnLostFocus ?\n\t\t\t\t\t\t\t\t(inputmask.isRTL ? clearOptionalTail.call(inputmask,getBuffer.call(inputmask).slice()).reverse() : clearOptionalTail.call(inputmask,getBuffer.call(inputmask).slice())).join(\"\") :\n\t\t\t\t\t\t\t\tvalueGet.call(this)) :\n\t\t\t\t\t\t\t\"\");\n\t\t\t\t} else {\n\t\t\t\t\treturn valueGet.call(this);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction setter(value) {\n\t\t\t\tvalueSet.call(this, value);\n\t\t\t\tif (this.inputmask) {\n\t\t\t\t\tapplyInputValue(this, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction installNativeValueSetFallback(npt) {\n\t\t\t\tEventRuler.on(npt, \"mouseenter\", function () {\n\t\t\t\t\tvar input = this,\n\t\t\t\t\t\tvalue = input.inputmask._valueGet(true);\n\t\t\t\t\tif (value !== (inputmask.isRTL ? getBuffer.call(inputmask).reverse() : getBuffer.call(inputmask)).join(\"\")) { //Is this correct? to apply RTL? TOCHECK\n\t\t\t\t\t\tapplyInputValue(input, value);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (!npt.inputmask.__valueGet) {\n\t\t\t\tif (opts.noValuePatching !== true) {\n\t\t\t\t\tif (Object.getOwnPropertyDescriptor) {\n\t\t\t\t\t\tvar valueProperty = Object.getPrototypeOf ? Object.getOwnPropertyDescriptor(Object.getPrototypeOf(npt), \"value\") : undefined;\n\t\t\t\t\t\tif (valueProperty && valueProperty.get && valueProperty.set) {\n\t\t\t\t\t\t\tvalueGet = valueProperty.get;\n\t\t\t\t\t\t\tvalueSet = valueProperty.set;\n\t\t\t\t\t\t\tObject.defineProperty(npt, \"value\", {\n\t\t\t\t\t\t\t\tget: getter,\n\t\t\t\t\t\t\t\tset: setter,\n\t\t\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else if (npt.tagName.toLowerCase() !== \"input\") {\n\t\t\t\t\t\t\tvalueGet = function () {\n\t\t\t\t\t\t\t\treturn this.textContent;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tvalueSet = function (value) {\n\t\t\t\t\t\t\t\tthis.textContent = value;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tObject.defineProperty(npt, \"value\", {\n\t\t\t\t\t\t\t\tget: getter,\n\t\t\t\t\t\t\t\tset: setter,\n\t\t\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (document.__lookupGetter__ && npt.__lookupGetter__(\"value\")) {\n\t\t\t\t\t\tvalueGet = npt.__lookupGetter__(\"value\");\n\t\t\t\t\t\tvalueSet = npt.__lookupSetter__(\"value\");\n\n\t\t\t\t\t\tnpt.__defineGetter__(\"value\", getter);\n\t\t\t\t\t\tnpt.__defineSetter__(\"value\", setter);\n\t\t\t\t\t}\n\t\t\t\t\tnpt.inputmask.__valueGet = valueGet; //store native property getter\n\t\t\t\t\tnpt.inputmask.__valueSet = valueSet; //store native property setter\n\t\t\t\t}\n\t\t\t\tnpt.inputmask._valueGet = function (overruleRTL) {\n\t\t\t\t\treturn inputmask.isRTL && overruleRTL !== true ? valueGet.call(this.el).split(\"\").reverse().join(\"\") : valueGet.call(this.el);\n\t\t\t\t};\n\t\t\t\tnpt.inputmask._valueSet = function (value, overruleRTL) { //null check is needed for IE8 => otherwise converts to \"null\"\n\t\t\t\t\tvalueSet.call(this.el, (value === null || value === undefined) ? \"\" : ((overruleRTL !== true && inputmask.isRTL) ? value.split(\"\").reverse().join(\"\") : value));\n\t\t\t\t};\n\n\t\t\t\tif (valueGet === undefined) { //jquery.val fallback\n\t\t\t\t\tvalueGet = function () {\n\t\t\t\t\t\treturn this.value;\n\t\t\t\t\t};\n\t\t\t\t\tvalueSet = function (value) {\n\t\t\t\t\t\tthis.value = value;\n\t\t\t\t\t};\n\t\t\t\t\tpatchValhook(npt.type);\n\t\t\t\t\tinstallNativeValueSetFallback(npt);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (input.tagName.toLowerCase() !== \"textarea\") {\n\t\t\topts.ignorables.push(keyCode.ENTER);\n\t\t}\n\n\t\tvar elementType = input.getAttribute(\"type\");\n\t\tvar isSupported = (input.tagName.toLowerCase() === \"input\" && opts.supportsInputType.includes(elementType)) || input.isContentEditable || input.tagName.toLowerCase() === \"textarea\";\n\t\tif (!isSupported) {\n\t\t\tif (input.tagName.toLowerCase() === \"input\") {\n\t\t\t\tvar el = document.createElement(\"input\");\n\t\t\t\tel.setAttribute(\"type\", elementType);\n\t\t\t\tisSupported = el.type === \"text\"; //apply mask only if the type is not natively supported\n\t\t\t\tel = null;\n\t\t\t} else {\n\t\t\t\tisSupported = \"partial\";\n\t\t\t}\n\t\t}\n\t\tif (isSupported !== false) {\n\t\t\tpatchValueProperty(input);\n\t\t} else {\n\t\t\tinput.inputmask = undefined;\n\t\t}\n\t\treturn isSupported;\n\t}\n\n\t//unbind all events - to make sure that no other mask will interfere when re-masking\n\tEventRuler.off(el);\n\tvar isSupported = isElementTypeSupported(el, opts);\n\tif (isSupported !== false) {\n\t\tinputmask.originalPlaceholder = el.placeholder;\n\n\t\t//read maxlength prop from el\n\t\tinputmask.maxLength = el !== undefined ? el.maxLength : undefined;\n\t\tif (inputmask.maxLength === -1) inputmask.maxLength = undefined;\n\t\tif (\"inputMode\" in el && el.getAttribute(\"inputmode\") === null) {\n\t\t\tel.inputMode = opts.inputmode;\n\t\t\tel.setAttribute(\"inputmode\", opts.inputmode);\n\t\t}\n\n\n\t\tif (isSupported === true) {\n\t\t\topts.showMaskOnFocus = opts.showMaskOnFocus && [\"cc-number\", \"cc-exp\"].indexOf(el.autocomplete) === -1;\n\t\t\tif (iphone) { //selecting the caret shows as a slection on iphone\n\t\t\t\topts.insertModeVisual = false;\n\t\t\t}\n\n\t\t\t//bind events\n\t\t\tEventRuler.on(el, \"submit\", EventHandlers.submitEvent);\n\t\t\tEventRuler.on(el, \"reset\", EventHandlers.resetEvent);\n\t\t\tEventRuler.on(el, \"blur\", EventHandlers.blurEvent);\n\t\t\tEventRuler.on(el, \"focus\", EventHandlers.focusEvent);\n\t\t\tEventRuler.on(el, \"invalid\", EventHandlers.invalidEvent);\n\t\t\tEventRuler.on(el, \"click\", EventHandlers.clickEvent);\n\t\t\tEventRuler.on(el, \"mouseleave\", EventHandlers.mouseleaveEvent);\n\t\t\tEventRuler.on(el, \"mouseenter\", EventHandlers.mouseenterEvent);\n\t\t\tEventRuler.on(el, \"paste\", EventHandlers.pasteEvent);\n\t\t\tEventRuler.on(el, \"cut\", EventHandlers.cutEvent);\n\t\t\tEventRuler.on(el, \"complete\", opts.oncomplete);\n\t\t\tEventRuler.on(el, \"incomplete\", opts.onincomplete);\n\t\t\tEventRuler.on(el, \"cleared\", opts.oncleared);\n\t\t\tif (opts.inputEventOnly !== true) {\n\t\t\t\tEventRuler.on(el, \"keydown\", EventHandlers.keydownEvent);\n\t\t\t\tEventRuler.on(el, \"keypress\", EventHandlers.keypressEvent);\n\t\t\t\tEventRuler.on(el, \"keyup\", EventHandlers.keyupEvent);\n\t\t\t}\n\t\t\tif (mobile || opts.inputEventOnly) {\n\t\t\t\tel.removeAttribute(\"maxLength\");\n\t\t\t}\n\t\t\tEventRuler.on(el, \"input\", EventHandlers.inputFallBackEvent);\n\t\t\tEventRuler.on(el, \"compositionend\", EventHandlers.compositionendEvent);\n\t\t\t// EventRuler.on(el, \"beforeinput\", EventHandlers.beforeInputEvent); //https://github.com/w3c/input-events - to implement\n\t\t}\n\t\tEventRuler.on(el, \"setvalue\", EventHandlers.setValueEvent);\n\n\t\t//apply mask\n\t\tinputmask.undoValue = getBufferTemplate.call(inputmask).join(\"\"); //initialize the buffer and getmasklength\n\t\tvar activeElement = (el.inputmask.shadowRoot || document).activeElement;\n\t\tif (el.inputmask._valueGet(true) !== \"\" || opts.clearMaskOnLostFocus === false || activeElement === el) {\n\t\t\tapplyInputValue(el, el.inputmask._valueGet(true), opts);\n\t\t\tvar buffer = getBuffer.call(inputmask).slice();\n\t\t\tif (isComplete.call(inputmask, buffer) === false) {\n\t\t\t\tif (opts.clearIncomplete) {\n\t\t\t\t\tresetMaskSet.call(inputmask);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (opts.clearMaskOnLostFocus && activeElement !== el) {\n\t\t\t\tif (getLastValidPosition.call(inputmask) === -1) {\n\t\t\t\t\tbuffer = [];\n\t\t\t\t} else {\n\t\t\t\t\tclearOptionalTail.call(inputmask, buffer);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (opts.clearMaskOnLostFocus === false || (opts.showMaskOnFocus && activeElement === el) || el.inputmask._valueGet(true) !== \"\") {\n\t\t\t\twriteBuffer(el, buffer);\n\t\t\t}\n\t\t\tif (activeElement === el) { //position the caret when in focus\n\t\t\t\tcaret.call(inputmask,el, seekNext.call(inputmask, getLastValidPosition.call(inputmask)));\n\t\t\t}\n\t\t}\n\t}\n}","export default function extend() {\n\tlet options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[0] || {},\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === \"boolean\") {\n\t\tdeep = target;\n\n\t\t// Skip the boolean and the target\n\t\ttarget = arguments[i] || {};\n\t\ti++;\n\t}\n\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif (typeof target !== \"object\" && typeof target !== \"function\") {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; i++) {\n\t\t// Only deal with non-null/undefined values\n\t\tif ((options = arguments[i]) != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = target[name];\n\t\t\t\tcopy = options[name];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target === copy) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif (deep && copy && (Object.prototype.toString.call(copy) === \"[object Object]\" || (copyIsArray = Array.isArray(copy)))) {\n\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\tclone = src && Array.isArray(src) ? src : [];\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src && Object.prototype.toString.call(src) === \"[object Object]\" ? src : {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if (copy !== undefined) {\n\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n}","export default typeof window !== \"undefined\" ? window : new (eval(\"require('jsdom').JSDOM\"))(\"\").window;\n\n","export default function (owner, key, value) {\n\tif (value === undefined) {\n\t\treturn owner.__data ? owner.__data[key] : null;\n\t} else {\n\t\towner.__data = owner.__data || {};\n\t\towner.__data[key] = value;\n\t}\n}","import extend from \"./extend\";\nimport window from \"../global/window\";\nimport DependencyLib from \"./inputmask.dependencyLib\";\n\nexport {on, off, trigger, Event};\n\nfunction isValidElement(elem) {\n\treturn elem instanceof Element;\n}\n\nlet Event;\nif (typeof window.CustomEvent === \"function\") {\n\tEvent = window.CustomEvent;\n} else {\n\tEvent = function (event, params) {\n\t\tparams = params || {bubbles: false, cancelable: false, detail: undefined};\n\t\tvar evt = document.createEvent(\"CustomEvent\");\n\t\tevt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n\t\treturn evt;\n\t};\n\tEvent.prototype = window.Event.prototype;\n}\n\n\nfunction on(events, handler) {\n\tfunction addEvent(ev, namespace) {\n\t\t//register domevent\n\t\tif (elem.addEventListener) { // all browsers except IE before version 9\n\t\t\telem.addEventListener(ev, handler, false);\n\t\t} else if (elem.attachEvent) { // IE before version 9\n\t\t\telem.attachEvent(\"on\" + ev, handler);\n\t\t}\n\t\teventRegistry[ev] = eventRegistry[ev] || {};\n\t\teventRegistry[ev][namespace] = eventRegistry[ev][namespace] || [];\n\t\teventRegistry[ev][namespace].push(handler);\n\t}\n\n\tif (isValidElement(this[0])) {\n\t\tvar eventRegistry = this[0].eventRegistry,\n\t\t\telem = this[0];\n\n\n\t\tvar _events = events.split(\" \");\n\t\tfor (var endx = 0; endx < _events.length; endx++) {\n\t\t\tvar nsEvent = _events[endx].split(\".\"),\n\t\t\t\tev = nsEvent[0],\n\t\t\t\tnamespace = nsEvent[1] || \"global\";\n\t\t\taddEvent(ev, namespace);\n\t\t}\n\t}\n\treturn this;\n}\n\nfunction off(events, handler) {\n\tvar eventRegistry, elem;\n\n\tfunction removeEvent(ev, namespace, handler) {\n\t\tif (ev in eventRegistry === true) {\n\t\t\t//unbind to dom events\n\t\t\tif (elem.removeEventListener) { // all browsers except IE before version 9\n\t\t\t\telem.removeEventListener(ev, handler, false);\n\t\t\t} else if (elem.detachEvent) { // IE before version 9\n\t\t\t\telem.detachEvent(\"on\" + ev, handler);\n\t\t\t}\n\t\t\tif (namespace === \"global\") {\n\t\t\t\tfor (var nmsp in eventRegistry[ev]) {\n\t\t\t\t\teventRegistry[ev][nmsp].splice(eventRegistry[ev][nmsp].indexOf(handler), 1);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\teventRegistry[ev][namespace].splice(eventRegistry[ev][namespace].indexOf(handler), 1);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction resolveNamespace(ev, namespace) {\n\t\tvar evts = [],\n\t\t\thndx, hndL;\n\t\tif (ev.length > 0) {\n\t\t\tif (handler === undefined) {\n\t\t\t\tfor (hndx = 0, hndL = eventRegistry[ev][namespace].length; hndx < hndL; hndx++) {\n\t\t\t\t\tevts.push({\n\t\t\t\t\t\tev: ev,\n\t\t\t\t\t\tnamespace: namespace && namespace.length > 0 ? namespace : \"global\",\n\t\t\t\t\t\thandler: eventRegistry[ev][namespace][hndx]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tevts.push({\n\t\t\t\t\tev: ev,\n\t\t\t\t\tnamespace: namespace && namespace.length > 0 ? namespace : \"global\",\n\t\t\t\t\thandler: handler\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (namespace.length > 0) {\n\t\t\tfor (var evNdx in eventRegistry) {\n\t\t\t\tfor (var nmsp in eventRegistry[evNdx]) {\n\t\t\t\t\tif (nmsp === namespace) {\n\t\t\t\t\t\tif (handler === undefined) {\n\t\t\t\t\t\t\tfor (hndx = 0, hndL = eventRegistry[evNdx][nmsp].length; hndx < hndL; hndx++) {\n\t\t\t\t\t\t\t\tevts.push({\n\t\t\t\t\t\t\t\t\tev: evNdx,\n\t\t\t\t\t\t\t\t\tnamespace: nmsp,\n\t\t\t\t\t\t\t\t\thandler: eventRegistry[evNdx][nmsp][hndx]\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tevts.push({\n\t\t\t\t\t\t\t\tev: evNdx,\n\t\t\t\t\t\t\t\tnamespace: nmsp,\n\t\t\t\t\t\t\t\thandler: handler\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn evts;\n\t}\n\n\tif (isValidElement(this[0])) {\n\t\teventRegistry = this[0].eventRegistry;\n\t\telem = this[0];\n\n\n\t\tvar _events = events.split(\" \");\n\t\tfor (var endx = 0; endx < _events.length; endx++) {\n\t\t\tvar nsEvent = _events[endx].split(\".\"),\n\t\t\t\toffEvents = resolveNamespace(nsEvent[0], nsEvent[1]);\n\t\t\tfor (var i = 0, offEventsL = offEvents.length; i < offEventsL; i++) {\n\t\t\t\tremoveEvent(offEvents[i].ev, offEvents[i].namespace, offEvents[i].handler);\n\t\t\t}\n\t\t}\n\t}\n\treturn this;\n}\n\nfunction trigger(events /* , args... */) {\n\tif (isValidElement(this[0])) {\n\t\tvar eventRegistry = this[0].eventRegistry,\n\t\t\telem = this[0];\n\t\tvar _events = typeof events === \"string\" ? events.split(\" \") : [events.type];\n\t\tfor (var endx = 0; endx < _events.length; endx++) {\n\t\t\tvar nsEvent = _events[endx].split(\".\"),\n\t\t\t\tev = nsEvent[0],\n\t\t\t\tnamespace = nsEvent[1] || \"global\";\n\t\t\tif (document !== undefined && namespace === \"global\") {\n\t\t\t\t//trigger domevent\n\t\t\t\tvar evnt, i, params = {\n\t\t\t\t\tbubbles: true,\n\t\t\t\t\tcancelable: true,\n\t\t\t\t\tdetail: arguments[1]\n\t\t\t\t};\n\t\t\t\t// The custom event that will be created\n\t\t\t\tif (document.createEvent) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tevnt = new CustomEvent(ev, params);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tevnt = document.createEvent(\"CustomEvent\");\n\t\t\t\t\t\tevnt.initCustomEvent(ev, params.bubbles, params.cancelable, params.detail);\n\t\t\t\t\t}\n\t\t\t\t\tif (events.type) extend(evnt, events);\n\t\t\t\t\telem.dispatchEvent(evnt);\n\t\t\t\t} else {\n\t\t\t\t\tevnt = document.createEventObject();\n\t\t\t\t\tevnt.eventType = ev;\n\t\t\t\t\tevnt.detail = arguments[1];\n\t\t\t\t\tif (events.type) extend(evnt, events);\n\t\t\t\t\telem.fireEvent(\"on\" + evnt.eventType, evnt);\n\t\t\t\t}\n\t\t\t} else if (eventRegistry[ev] !== undefined) {\n\t\t\t\targuments[0] = arguments[0].type ? arguments[0] : DependencyLib.Event(arguments[0]);\n\t\t\t\targuments[0].detail = arguments.slice(1);\n\t\t\t\tif (namespace === \"global\") {\n\t\t\t\t\tfor (var nmsp in eventRegistry[ev]) {\n\t\t\t\t\t\tfor (i = 0; i < eventRegistry[ev][nmsp].length; i++) {\n\t\t\t\t\t\t\teventRegistry[ev][nmsp][i].apply(elem, arguments);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (i = 0; i < eventRegistry[ev][namespace].length; i++) {\n\t\t\t\t\t\teventRegistry[ev][namespace][i].apply(elem, arguments);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn this;\n}","/*\n Input Mask plugin dependencyLib\n http://github.com/RobinHerbots/jquery.inputmask\n Copyright (c) Robin Herbots\n Licensed under the MIT license\n */\n\nimport extend from \"./extend\";\nimport window from \"../global/window\";\nimport data from \"./data\";\nimport { on, off, trigger, Event} from \"./events\";\n\nconst document = window.document;\n\nfunction DependencyLib(elem) {\n\tif (elem instanceof DependencyLib) {\n\t\treturn elem;\n\t}\n\tif (!(this instanceof DependencyLib)) {\n\t\treturn new DependencyLib(elem);\n\t}\n\tif (elem !== undefined && elem !== null && elem !== window) {\n\t\tthis[0] = elem.nodeName ? elem : (elem[0] !== undefined && elem[0].nodeName ? elem[0] : document.querySelector(elem));\n\t\tif (this[0] !== undefined && this[0] !== null) {\n\t\t\tthis[0].eventRegistry = this[0].eventRegistry || {};\n\t\t}\n\t}\n}\n\nDependencyLib.prototype = {\n\ton: on,\n\toff: off,\n\ttrigger: trigger\n};\n\n//static\nDependencyLib.extend = extend;\nDependencyLib.data = data;\nDependencyLib.Event = Event;\n\nexport default DependencyLib;\n","import $ from \"./dependencyLibs/inputmask.dependencyLib\";\n\nexport {generateMaskSet, analyseMask};\n\nfunction generateMaskSet(opts, nocache) {\n\tvar ms;\n\n\tfunction generateMask(mask, metadata, opts) {\n\t\tvar regexMask = false;\n\t\tif (mask === null || mask === \"\") {\n\t\t\tregexMask = opts.regex !== null;\n\t\t\tif (regexMask) {\n\t\t\t\tmask = opts.regex;\n\t\t\t\tmask = mask.replace(/^(\\^)(.*)(\\$)$/, \"$2\");\n\t\t\t} else {\n\t\t\t\tregexMask = true;\n\t\t\t\tmask = \".*\";\n\t\t\t}\n\t\t}\n\t\tif (mask.length === 1 && opts.greedy === false && opts.repeat !== 0) {\n\t\t\topts.placeholder = \"\";\n\t\t} //hide placeholder with single non-greedy mask\n\t\tif (opts.repeat > 0 || opts.repeat === \"*\" || opts.repeat === \"+\") {\n\t\t\tvar repeatStart = opts.repeat === \"*\" ? 0 : (opts.repeat === \"+\" ? 1 : opts.repeat);\n\t\t\tmask = opts.groupmarker[0] + mask + opts.groupmarker[1] + opts.quantifiermarker[0] + repeatStart + \",\" + opts.repeat + opts.quantifiermarker[1];\n\t\t}\n\n\t\t// console.log(mask);\n\t\tvar masksetDefinition, maskdefKey;\n\t\tmaskdefKey = regexMask ? \"regex_\" + opts.regex : opts.numericInput ? mask.split(\"\").reverse().join(\"\") : mask;\n\t\tif (opts.keepStatic !== false) { //keepstatic modifies the output from the testdefinitions ~ so differentiate in the maskcache\n\t\t\tmaskdefKey = \"ks_\" + maskdefKey;\n\t\t}\n\n\t\tif (Inputmask.prototype.masksCache[maskdefKey] === undefined || nocache === true) {\n\t\t\tmasksetDefinition = {\n\t\t\t\t\"mask\": mask,\n\t\t\t\t\"maskToken\": Inputmask.prototype.analyseMask(mask, regexMask, opts),\n\t\t\t\t\"validPositions\": {},\n\t\t\t\t\"_buffer\": undefined,\n\t\t\t\t\"buffer\": undefined,\n\t\t\t\t\"tests\": {},\n\t\t\t\t\"excludes\": {}, //excluded alternations\n\t\t\t\t\"metadata\": metadata,\n\t\t\t\t\"maskLength\": undefined,\n\t\t\t\t\"jitOffset\": {}\n\t\t\t};\n\t\t\tif (nocache !== true) {\n\t\t\t\tInputmask.prototype.masksCache[maskdefKey] = masksetDefinition;\n\t\t\t\tmasksetDefinition = $.extend(true, {}, Inputmask.prototype.masksCache[maskdefKey]);\n\t\t\t}\n\t\t} else {\n\t\t\tmasksetDefinition = $.extend(true, {}, Inputmask.prototype.masksCache[maskdefKey]);\n\t\t}\n\n\t\treturn masksetDefinition;\n\t}\n\n\tif (typeof opts.mask === \"function\") { //allow mask to be a preprocessing fn - should return a valid mask\n\t\topts.mask = opts.mask(opts);\n\t}\n\tif (Array.isArray(opts.mask)) {\n\t\tif (opts.mask.length > 1) {\n\t\t\tif (opts.keepStatic === null) { //enable by default when passing multiple masks when the option is not explicitly specified\n\t\t\t\topts.keepStatic = true;\n\t\t\t}\n\t\t\tvar altMask = opts.groupmarker[0];\n\t\t\t(opts.isRTL ? opts.mask.reverse() : opts.mask).forEach(function (msk) {\n\t\t\t\tif (altMask.length > 1) {\n\t\t\t\t\taltMask += opts.groupmarker[1] + opts.alternatormarker + opts.groupmarker[0];\n\t\t\t\t}\n\t\t\t\tif (msk.mask !== undefined && typeof msk.mask !== \"function\") {\n\t\t\t\t\taltMask += msk.mask;\n\t\t\t\t} else {\n\t\t\t\t\taltMask += msk;\n\t\t\t\t}\n\t\t\t});\n\t\t\taltMask += opts.groupmarker[1];\n\t\t\t// console.log(altMask);\n\t\t\treturn generateMask(altMask, opts.mask, opts);\n\t\t} else {\n\t\t\topts.mask = opts.mask.pop();\n\t\t}\n\t}\n\tif (opts.keepStatic === null) opts.keepStatic = false;\n\tif (opts.mask && opts.mask.mask !== undefined && typeof opts.mask.mask !== \"function\") {\n\t\tms = generateMask(opts.mask.mask, opts.mask, opts);\n\t} else {\n\t\tms = generateMask(opts.mask, opts.mask, opts);\n\t}\n\n\treturn ms;\n}\n\nfunction analyseMask(mask, regexMask, opts) {\n\tconst tokenizer = /(?:[?*+]|\\{[0-9+*]+(?:,[0-9+*]*)?(?:\\|[0-9+*]*)?\\})|[^.?*+^${[]()|\\\\]+|./g,\n\t\t//Thx to https://github.com/slevithan/regex-colorizer for the regexTokenizer regex\n\t\tregexTokenizer = /\\[\\^?]?(?:[^\\\\\\]]+|\\\\[\\S\\s]?)*]?|\\\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\\S\\s]?)|\\((?:\\?[:=!]?)?|(?:[?*+]|\\{[0-9]+(?:,[0-9]*)?\\})\\??|[^.?*+^${[()|\\\\]+|./g;\n\tvar escaped = false,\n\t\tcurrentToken = new MaskToken(),\n\t\tmatch,\n\t\tm,\n\t\topenenings = [],\n\t\tmaskTokens = [],\n\t\topeningToken,\n\t\tcurrentOpeningToken,\n\t\talternator,\n\t\tlastMatch,\n\t\tcloseRegexGroup = false;\n\n\tfunction MaskToken(isGroup, isOptional, isQuantifier, isAlternator) {\n\t\tthis.matches = [];\n\t\tthis.openGroup = isGroup || false;\n\t\tthis.alternatorGroup = false;\n\t\tthis.isGroup = isGroup || false;\n\t\tthis.isOptional = isOptional || false;\n\t\tthis.isQuantifier = isQuantifier || false;\n\t\tthis.isAlternator = isAlternator || false;\n\t\tthis.quantifier = {\n\t\t\tmin: 1,\n\t\t\tmax: 1\n\t\t};\n\t}\n\n\t//test definition => {fn: RegExp/function, static: true/false optionality: bool, newBlockMarker: bool, casing: null/upper/lower, def: definitionSymbol, placeholder: placeholder, mask: real maskDefinition}\n\tfunction insertTestDefinition(mtoken, element, position) {\n\t\tposition = position !== undefined ? position : mtoken.matches.length;\n\t\tvar prevMatch = mtoken.matches[position - 1];\n\t\tif (regexMask) {\n\t\t\tif (element.indexOf(\"[\") === 0 || (escaped && /\\\\d|\\\\s|\\\\w]/i.test(element)) || element === \".\") {\n\t\t\t\tmtoken.matches.splice(position++, 0, {\n\t\t\t\t\tfn: new RegExp(element, opts.casing ? \"i\" : \"\"),\n\t\t\t\t\tstatic: false,\n\t\t\t\t\toptionality: false,\n\t\t\t\t\tnewBlockMarker: prevMatch === undefined ? \"master\" : prevMatch.def !== element,\n\t\t\t\t\tcasing: null,\n\t\t\t\t\tdef: element,\n\t\t\t\t\tplaceholder: undefined,\n\t\t\t\t\tnativeDef: element\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (escaped) element = element[element.length - 1];\n\t\t\t\telement.split(\"\").forEach(function (lmnt, ndx) {\n\t\t\t\t\tprevMatch = mtoken.matches[position - 1];\n\t\t\t\t\tmtoken.matches.splice(position++, 0, {\n\t\t\t\t\t\tfn: /[a-z]/i.test((opts.staticDefinitionSymbol || lmnt)) ? new RegExp(\"[\" + (opts.staticDefinitionSymbol || lmnt) + \"]\", opts.casing ? \"i\" : \"\") : null,\n\t\t\t\t\t\tstatic: true,\n\t\t\t\t\t\toptionality: false,\n\t\t\t\t\t\tnewBlockMarker: prevMatch === undefined ? \"master\" : (prevMatch.def !== lmnt && prevMatch.static !== true),\n\t\t\t\t\t\tcasing: null,\n\t\t\t\t\t\tdef: opts.staticDefinitionSymbol || lmnt,\n\t\t\t\t\t\tplaceholder: opts.staticDefinitionSymbol !== undefined ? lmnt : undefined,\n\t\t\t\t\t\tnativeDef: (escaped ? \"'\" : \"\") + lmnt\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\tescaped = false;\n\t\t} else {\n\t\t\tvar maskdef = (opts.definitions && opts.definitions[element]) || (opts.usePrototypeDefinitions && Inputmask.prototype.definitions[element]);\n\t\t\tif (maskdef && !escaped) {\n\t\t\t\tmtoken.matches.splice(position++, 0, {\n\t\t\t\t\tfn: maskdef.validator ? typeof maskdef.validator == \"string\" ? new RegExp(maskdef.validator, opts.casing ? \"i\" : \"\") : new function () {\n\t\t\t\t\t\tthis.test = maskdef.validator;\n\t\t\t\t\t} : new RegExp(\".\"),\n\t\t\t\t\tstatic: maskdef.static || false,\n\t\t\t\t\toptionality: false,\n\t\t\t\t\tnewBlockMarker: prevMatch === undefined ? \"master\" : prevMatch.def !== (maskdef.definitionSymbol || element),\n\t\t\t\t\tcasing: maskdef.casing,\n\t\t\t\t\tdef: maskdef.definitionSymbol || element,\n\t\t\t\t\tplaceholder: maskdef.placeholder,\n\t\t\t\t\tnativeDef: element,\n\t\t\t\t\tgenerated: maskdef.generated\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tmtoken.matches.splice(position++, 0, {\n\t\t\t\t\tfn: /[a-z]/i.test((opts.staticDefinitionSymbol || element)) ? new RegExp(\"[\" + (opts.staticDefinitionSymbol || element) + \"]\", opts.casing ? \"i\" : \"\") : null,\n\t\t\t\t\tstatic: true,\n\t\t\t\t\toptionality: false,\n\t\t\t\t\tnewBlockMarker: prevMatch === undefined ? \"master\" : (prevMatch.def !== element && prevMatch.static !== true),\n\t\t\t\t\tcasing: null,\n\t\t\t\t\tdef: opts.staticDefinitionSymbol || element,\n\t\t\t\t\tplaceholder: opts.staticDefinitionSymbol !== undefined ? element : undefined,\n\t\t\t\t\tnativeDef: (escaped ? \"'\" : \"\") + element\n\t\t\t\t});\n\t\t\t\tescaped = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction verifyGroupMarker(maskToken) {\n\t\tif (maskToken && maskToken.matches) {\n\t\t\tmaskToken.matches.forEach(function (token, ndx) {\n\t\t\t\tvar nextToken = maskToken.matches[ndx + 1];\n\t\t\t\tif ((nextToken === undefined || (nextToken.matches === undefined || nextToken.isQuantifier === false)) && token && token.isGroup) { //this is not a group but a normal mask => convert\n\t\t\t\t\ttoken.isGroup = false;\n\t\t\t\t\tif (!regexMask) {\n\t\t\t\t\t\tinsertTestDefinition(token, opts.groupmarker[0], 0);\n\t\t\t\t\t\tif (token.openGroup !== true) {\n\t\t\t\t\t\t\tinsertTestDefinition(token, opts.groupmarker[1]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tverifyGroupMarker(token);\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction defaultCase() {\n\t\tif (openenings.length > 0) {\n\t\t\tcurrentOpeningToken = openenings[openenings.length - 1];\n\t\t\tinsertTestDefinition(currentOpeningToken, m);\n\t\t\tif (currentOpeningToken.isAlternator) { //handle alternator a | b case\n\t\t\t\talternator = openenings.pop();\n\t\t\t\tfor (var mndx = 0; mndx < alternator.matches.length; mndx++) {\n\t\t\t\t\tif (alternator.matches[mndx].isGroup) alternator.matches[mndx].isGroup = false; //don't mark alternate groups as group\n\t\t\t\t}\n\t\t\t\tif (openenings.length > 0) {\n\t\t\t\t\tcurrentOpeningToken = openenings[openenings.length - 1];\n\t\t\t\t\tcurrentOpeningToken.matches.push(alternator);\n\t\t\t\t} else {\n\t\t\t\t\tcurrentToken.matches.push(alternator);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tinsertTestDefinition(currentToken, m);\n\t\t}\n\t}\n\n\tfunction reverseTokens(maskToken) {\n\t\tfunction reverseStatic(st) {\n\t\t\tif (st === opts.optionalmarker[0]) {\n\t\t\t\tst = opts.optionalmarker[1];\n\t\t\t} else if (st === opts.optionalmarker[1]) {\n\t\t\t\tst = opts.optionalmarker[0];\n\t\t\t} else if (st === opts.groupmarker[0]) {\n\t\t\t\tst = opts.groupmarker[1];\n\t\t\t} else if (st === opts.groupmarker[1]) st = opts.groupmarker[0];\n\n\t\t\treturn st;\n\t\t}\n\n\t\tmaskToken.matches = maskToken.matches.reverse();\n\t\tfor (var match in maskToken.matches) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(maskToken.matches, match)) {\n\t\t\t\tvar intMatch = parseInt(match);\n\t\t\t\tif (maskToken.matches[match].isQuantifier && maskToken.matches[intMatch + 1] && maskToken.matches[intMatch + 1].isGroup) { //reposition quantifier\n\t\t\t\t\tvar qt = maskToken.matches[match];\n\t\t\t\t\tmaskToken.matches.splice(match, 1);\n\t\t\t\t\tmaskToken.matches.splice(intMatch + 1, 0, qt);\n\t\t\t\t}\n\t\t\t\tif (maskToken.matches[match].matches !== undefined) {\n\t\t\t\t\tmaskToken.matches[match] = reverseTokens(maskToken.matches[match]);\n\t\t\t\t} else {\n\t\t\t\t\tmaskToken.matches[match] = reverseStatic(maskToken.matches[match]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn maskToken;\n\t}\n\n\tfunction groupify(matches) {\n\t\tvar groupToken = new MaskToken(true);\n\t\tgroupToken.openGroup = false;\n\t\tgroupToken.matches = matches;\n\t\treturn groupToken;\n\t}\n\n\tfunction closeGroup() {\n\t\t// Group closing\n\t\topeningToken = openenings.pop();\n\t\topeningToken.openGroup = false; //mark group as complete\n\t\tif (openingToken !== undefined) {\n\t\t\tif (openenings.length > 0) {\n\t\t\t\tcurrentOpeningToken = openenings[openenings.length - 1];\n\t\t\t\tcurrentOpeningToken.matches.push(openingToken);\n\t\t\t\tif (currentOpeningToken.isAlternator) { //handle alternator (a) | (b) case\n\t\t\t\t\talternator = openenings.pop();\n\t\t\t\t\tfor (var mndx = 0; mndx < alternator.matches.length; mndx++) {\n\t\t\t\t\t\talternator.matches[mndx].isGroup = false; //don't mark alternate groups as group\n\t\t\t\t\t\talternator.matches[mndx].alternatorGroup = false;\n\t\t\t\t\t}\n\t\t\t\t\tif (openenings.length > 0) {\n\t\t\t\t\t\tcurrentOpeningToken = openenings[openenings.length - 1];\n\t\t\t\t\t\tcurrentOpeningToken.matches.push(alternator);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrentToken.matches.push(alternator);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcurrentToken.matches.push(openingToken);\n\t\t\t}\n\t\t} else {\n\t\t\tdefaultCase();\n\t\t}\n\t}\n\n\tfunction groupQuantifier(matches) {\n\t\tvar lastMatch = matches.pop();\n\t\tif (lastMatch.isQuantifier) {\n\t\t\tlastMatch = groupify([matches.pop(), lastMatch]);\n\t\t}\n\t\treturn lastMatch;\n\t}\n\n\tif (regexMask) {\n\t\topts.optionalmarker[0] = undefined;\n\t\topts.optionalmarker[1] = undefined;\n\t}\n\twhile ((match = regexMask ? regexTokenizer.exec(mask) : tokenizer.exec(mask))) {\n\t\tm = match[0];\n\n\t\tif (regexMask) {\n\t\t\tswitch (m.charAt(0)) {\n\t\t\t\t//Quantifier\n\t\t\t\tcase \"?\":\n\t\t\t\t\tm = \"{0,1}\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"+\":\n\t\t\t\tcase \"*\":\n\t\t\t\t\tm = \"{\" + m + \"}\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"|\":\n\t\t\t\t\t//regex mask alternator  ex: [01][0-9]|2[0-3] => ([01][0-9]|2[0-3])\n\t\t\t\t\tif (openenings.length === 0) { //wrap the mask in a group to form a regex alternator  ([01][0-9]|2[0-3])\n\t\t\t\t\t\tvar altRegexGroup = groupify(currentToken.matches);\n\t\t\t\t\t\taltRegexGroup.openGroup = true;\n\t\t\t\t\t\topenenings.push(altRegexGroup);\n\t\t\t\t\t\tcurrentToken.matches = [];\n\t\t\t\t\t\tcloseRegexGroup = true;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (escaped) {\n\t\t\tdefaultCase();\n\t\t\tcontinue;\n\t\t}\n\t\tswitch (m.charAt(0)) {\n\t\t\tcase \"$\":\n\t\t\tcase \"^\":\n\t\t\t\t//ignore beginswith and endswith as in masking this makes no point\n\t\t\t\tif (!regexMask) {\n\t\t\t\t\tdefaultCase();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"(?=\": //lookahead\n\t\t\t\tbreak;\n\t\t\tcase \"(?!\": //negative lookahead\n\t\t\t\tbreak;\n\t\t\tcase \"(?<=\": //lookbehind\n\t\t\t\tbreak;\n\t\t\tcase \"(?<!\": //negative lookbehind\n\t\t\t\tbreak;\n\t\t\tcase opts.escapeChar:\n\t\t\t\tescaped = true;\n\t\t\t\tif (regexMask) {\n\t\t\t\t\tdefaultCase();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t// optional closing\n\t\t\tcase opts.optionalmarker[1]:\n\t\t\tcase opts.groupmarker[1]:\n\t\t\t\tcloseGroup();\n\t\t\t\tbreak;\n\t\t\tcase opts.optionalmarker[0]:\n\t\t\t\t// optional opening\n\t\t\t\topenenings.push(new MaskToken(false, true));\n\t\t\t\tbreak;\n\t\t\tcase opts.groupmarker[0]:\n\t\t\t\t// Group opening\n\t\t\t\topenenings.push(new MaskToken(true));\n\t\t\t\tbreak;\n\t\t\tcase opts.quantifiermarker[0]:\n\t\t\t\t//Quantifier\n\t\t\t\tvar quantifier = new MaskToken(false, false, true);\n\n\t\t\t\tm = m.replace(/[{}]/g, \"\");\n\t\t\t\tvar mqj = m.split(\"|\"),\n\t\t\t\t\tmq = mqj[0].split(\",\"),\n\t\t\t\t\tmq0 = isNaN(mq[0]) ? mq[0] : parseInt(mq[0]),\n\t\t\t\t\tmq1 = mq.length === 1 ? mq0 : (isNaN(mq[1]) ? mq[1] : parseInt(mq[1]));\n\t\t\t\tif (mq0 === \"*\" || mq0 === \"+\") {\n\t\t\t\t\tmq0 = mq1 === \"*\" ? 0 : 1;\n\t\t\t\t}\n\t\t\t\tquantifier.quantifier = {\n\t\t\t\t\tmin: mq0,\n\t\t\t\t\tmax: mq1,\n\t\t\t\t\tjit: mqj[1]\n\t\t\t\t};\n\t\t\t\tvar matches = openenings.length > 0 ? openenings[openenings.length - 1].matches : currentToken.matches;\n\t\t\t\tmatch = matches.pop();\n\t\t\t\tif (match.isAlternator) { //handle quantifier in an alternation [0-9]{2}|[0-9]{3}\n\t\t\t\t\tmatches.push(match); //push back alternator\n\t\t\t\t\tmatches = match.matches; //remap target matches\n\t\t\t\t\tvar groupToken = new MaskToken(true);\n\t\t\t\t\tvar tmpMatch = matches.pop();\n\t\t\t\t\tmatches.push(groupToken); //push the group\n\t\t\t\t\tmatches = groupToken.matches;\n\t\t\t\t\tmatch = tmpMatch;\n\t\t\t\t}\n\t\t\t\tif (!match.isGroup) {\n\t\t\t\t\t// if (regexMask && match.fn === null) { //why is this needed???\n\t\t\t\t\t//     if (match.def === \".\") match.fn = new RegExp(match.def, opts.casing ? \"i\" : \"\");\n\t\t\t\t\t// }\n\n\t\t\t\t\tmatch = groupify([match]);\n\t\t\t\t}\n\t\t\t\tmatches.push(match);\n\t\t\t\tmatches.push(quantifier);\n\n\t\t\t\tbreak;\n\t\t\tcase opts.alternatormarker:\n\n\n\t\t\t\tif (openenings.length > 0) {\n\t\t\t\t\tcurrentOpeningToken = openenings[openenings.length - 1];\n\t\t\t\t\tvar subToken = currentOpeningToken.matches[currentOpeningToken.matches.length - 1];\n\t\t\t\t\tif (currentOpeningToken.openGroup && //regexp alt syntax\n\t\t\t\t\t\t(subToken.matches === undefined || (subToken.isGroup === false && subToken.isAlternator === false))) { //alternations within group\n\t\t\t\t\t\tlastMatch = openenings.pop();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlastMatch = groupQuantifier(currentOpeningToken.matches);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlastMatch = groupQuantifier(currentToken.matches);\n\t\t\t\t}\n\t\t\t\tif (lastMatch.isAlternator) {\n\t\t\t\t\topenenings.push(lastMatch);\n\t\t\t\t} else {\n\t\t\t\t\tif (lastMatch.alternatorGroup) {\n\t\t\t\t\t\talternator = openenings.pop();\n\t\t\t\t\t\tlastMatch.alternatorGroup = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\talternator = new MaskToken(false, false, false, true);\n\t\t\t\t\t}\n\t\t\t\t\talternator.matches.push(lastMatch);\n\t\t\t\t\topenenings.push(alternator);\n\t\t\t\t\tif (lastMatch.openGroup) { //regexp alt syntax\n\t\t\t\t\t\tlastMatch.openGroup = false;\n\t\t\t\t\t\tvar alternatorGroup = new MaskToken(true);\n\t\t\t\t\t\talternatorGroup.alternatorGroup = true;\n\t\t\t\t\t\topenenings.push(alternatorGroup);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tdefaultCase();\n\t\t}\n\t}\n\n\tif (closeRegexGroup) closeGroup();\n\n\twhile (openenings.length > 0) {\n\t\topeningToken = openenings.pop();\n\t\tcurrentToken.matches.push(openingToken);\n\t}\n\tif (currentToken.matches.length > 0) {\n\t\tverifyGroupMarker(currentToken);\n\t\tmaskTokens.push(currentToken);\n\t}\n\n\tif (opts.numericInput || opts.isRTL) {\n\t\treverseTokens(maskTokens[0]);\n\t}\n\t// console.log(JSON.stringify(maskTokens));\n\treturn maskTokens;\n}\n","export default {\n\t\"9\": { //\\uFF11-\\uFF19 #1606\n\t\tvalidator: \"[0-9\\uFF10-\\uFF19]\",\n\t\tdefinitionSymbol: \"*\"\n\t},\n\t\"a\": { //\\u0410-\\u044F\\u0401\\u0451\\u00C0-\\u00FF\\u00B5 #76\n\t\tvalidator: \"[A-Za-z\\u0410-\\u044F\\u0401\\u0451\\u00C0-\\u00FF\\u00B5]\",\n\t\tdefinitionSymbol: \"*\"\n\t},\n\t\"*\": {\n\t\tvalidator: \"[0-9\\uFF10-\\uFF19A-Za-z\\u0410-\\u044F\\u0401\\u0451\\u00C0-\\u00FF\\u00B5]\"\n\t}\n}","export default {\n\t_maxTestPos: 500,\n\tplaceholder: \"_\",\n\toptionalmarker: [\"[\", \"]\"],\n\tquantifiermarker: [\"{\", \"}\"],\n\tgroupmarker: [\"(\", \")\"],\n\talternatormarker: \"|\",\n\tescapeChar: \"\\\\\",\n\tmask: null, //needs tobe null instead of undefined as the extend method does not consider props with the undefined value\n\tregex: null, //regular expression as a mask\n\toncomplete: () => {\n\t}, //executes when the mask is complete\n\tonincomplete: () => {\n\t}, //executes when the mask is incomplete and focus is lost\n\toncleared: () => {\n\t}, //executes when the mask is cleared\n\trepeat: 0, //repetitions of the mask: * ~ forever, otherwise specify an integer\n\tgreedy: false, //true: allocated buffer for the mask and repetitions - false: allocate only if needed\n\tautoUnmask: false, //automatically unmask when retrieving the value with $.fn.val or value if the browser supports __lookupGetter__ or getOwnPropertyDescriptor\n\tremoveMaskOnSubmit: false, //remove the mask before submitting the form.\n\tclearMaskOnLostFocus: true,\n\tinsertMode: true, //insert the input or overwrite the input\n\tinsertModeVisual: true, //show selected caret when insertmode = false\n\tclearIncomplete: false, //clear the incomplete input on blur\n\talias: null,\n\tonKeyDown: () => {\n\t}, //callback to implement autocomplete on certain keys for example. args => event, buffer, caretPos, opts\n\tonBeforeMask: null, //executes before masking the initial value to allow preprocessing of the initial value.\targs => initialValue, opts => return processedValue\n\tonBeforePaste: function (pastedValue, opts) {\n\t\treturn typeof opts.onBeforeMask === \"function\" ? opts.onBeforeMask.call(this, pastedValue, opts) : pastedValue;\n\t}, //executes before masking the pasted value to allow preprocessing of the pasted value.\targs => pastedValue, opts => return processedValue\n\tonBeforeWrite: null, //executes before writing to the masked element. args => event, opts\n\tonUnMask: null, //executes after unmasking to allow postprocessing of the unmaskedvalue.\targs => maskedValue, unmaskedValue, opts\n\tshowMaskOnFocus: true, //show the mask-placeholder when the input has focus\n\tshowMaskOnHover: true, //show the mask-placeholder when hovering the empty input\n\tonKeyValidation: () => {\n\t}, //executes on every key-press with the result of isValid. Params: key, result, opts\n\tskipOptionalPartCharacter: \" \", //a character which can be used to skip an optional part of a mask\n\tnumericInput: false, //numericInput input direction style (input shifts to the left while holding the caret position)\n\trightAlign: false, //align to the right\n\tundoOnEscape: true, //pressing escape reverts the value to the value before focus\n\t//numeric basic properties\n\tradixPoint: \"\", //\".\", // | \",\"\n\t_radixDance: false, //dance around the radixPoint\n\tgroupSeparator: \"\", //\",\", // | \".\"\n\t//numeric basic properties\n\tkeepStatic: null, //try to keep the mask static while typing. Decisions to alter the mask will be posponed if possible\n\tpositionCaretOnTab: true, //when enabled the caret position is set after the latest valid position on TAB\n\ttabThrough: false, //allows for tabbing through the different parts of the masked field\n\tsupportsInputType: [\"text\", \"tel\", \"url\", \"password\", \"search\"], //list with the supported input types\n\t//specify keyCodes which should not be considered in the keypress event, otherwise the preventDefault will stop their default behavior especially in FF\n\tignorables: [8, 9, 19, 27, 33, 34, 35, 36, 37, 38, 39, 40, 45, 46, 93, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 0, 229],\n\tisComplete: null, //override for isComplete - args => buffer, opts - return true || false\n\tpreValidation: null, //hook to preValidate the input.  Usefull for validating regardless the definition.\targs => buffer, pos, char, isSelection, opts, maskset, caretPos, strict => return true/false/command object\n\tpostValidation: null, //hook to postValidate the result from isValid.\tUsefull for validating the entry as a whole.\targs => buffer, pos, c, currentResult, opts, maskset, strict, fromCheckval => return true/false/json\n\tstaticDefinitionSymbol: undefined, //specify a definitionSymbol for static content, used to make matches for alternators\n\tjitMasking: false, //just in time masking ~ only mask while typing, can n (number), true or false\n\tnullable: true, //return nothing instead of the buffertemplate when the user hasn't entered anything.\n\tinputEventOnly: false, //dev option - testing inputfallback behavior\n\tnoValuePatching: false, //disable value property patching\n\tpositionCaretOnClick: \"lvp\", //none, lvp (based on the last valid position (default), radixFocus (position caret to radixpoint on initial click), select (select the whole input), ignore (ignore the click and continue the mask)\n\tcasing: null, //mask-level casing. Options: null, \"upper\", \"lower\" or \"title\" or callback args => elem, test, pos, validPositions return charValue\n\tinputmode: \"text\", //specify the inputmode\n\timportDataAttributes: true, //import data-inputmask attributes\n\tshiftPositions: true, //shift position of the mask entries on entry and deletion.\n\tusePrototypeDefinitions: true //use the default defined definitions from the prototype\n};","/*\n * Input Mask Core\n * http://github.com/RobinHerbots/jquery.inputmask\n * Copyright (c) Robin Herbots\n * Licensed under the MIT license\n */\nimport \"./getPrototypeOf\";\nimport {mask} from \"./mask\";\nimport $ from \"./dependencyLibs/inputmask.dependencyLib\";\nimport window from \"./global/window\";\nimport {generateMaskSet, analyseMask} from \"./mask-lexer\";\nimport {getMaskTemplate} from \"./validation-tests\";\nimport {determineLastRequiredPosition, getBuffer, getBufferTemplate, isMask} from \"./positioning\";\nimport {isComplete} from \"./validation\";\nimport {checkVal, unmaskedvalue} from \"./inputHandling\";\nimport {EventRuler} from \"./eventruler\";\nimport definitions from \"./definitions\";\nimport defaults from \"./defaults\";\n\nconst document = window.document, dataKey = \"_inputmask_opts\";\n\nfunction Inputmask(alias, options, internal) {\n\t//allow instanciating without new\n\tif (!(this instanceof Inputmask)) {\n\t\treturn new Inputmask(alias, options, internal);\n\t}\n\n\tthis.dependencyLib = $;\n\tthis.el = undefined;\n\tthis.events = {};\n\tthis.maskset = undefined;\n\n\tif (internal !== true) {\n\t\t//init options\n\t\tif (Object.prototype.toString.call(alias) === \"[object Object]\") {\n\t\t\toptions = alias;\n\t\t} else {\n\t\t\toptions = options || {};\n\t\t\tif (alias) options.alias = alias;\n\t\t}\n\t\tthis.opts = $.extend(true, {}, this.defaults, options);\n\t\tthis.noMasksCache = options && options.definitions !== undefined;\n\t\tthis.userOptions = options || {}; //user passed options\n\t\tresolveAlias(this.opts.alias, options, this.opts);\n\t}\n\n\t//maskscope properties\n\tthis.refreshValue = false; //indicate a refresh from the inputvalue is needed (form.reset)\n\tthis.undoValue = undefined;\n\tthis.$el = undefined;\n\tthis.skipKeyPressEvent = false; //Safari 5.1.x - modal dialog fires keypress twice workaround\n\tthis.skipInputEvent = false; //skip when triggered from within inputmask\n\tthis.validationEvent = false;\n\tthis.ignorable = false;\n\tthis.maxLength;\n\tthis.mouseEnter = false;\n\tthis.originalPlaceholder = undefined; //needed for FF\n\tthis.isComposing = false; //keydowncode == 229  compositionevent fallback\n}\n\nInputmask.prototype = {\n\tdataAttribute: \"data-inputmask\", //data attribute prefix used for attribute binding\n\t//options default\n\tdefaults: defaults,\n\tdefinitions: definitions,\n\taliases: {}, //aliases definitions\n\tmasksCache: {},\n\tget isRTL() {\n\t\treturn this.opts.isRTL || this.opts.numericInput;\n\t},\n\tmask: function (elems) {\n\t\tvar that = this;\n\t\tif (typeof elems === \"string\") {\n\t\t\telems = document.getElementById(elems) || document.querySelectorAll(elems);\n\t\t}\n\t\telems = elems.nodeName ? [elems] : elems;\n\t\telems.forEach(function (el, ndx) {\n\t\t\tvar scopedOpts = $.extend(true, {}, that.opts);\n\t\t\tif (importAttributeOptions(el, scopedOpts, $.extend(true, {}, that.userOptions), that.dataAttribute)) {\n\t\t\t\tvar maskset = generateMaskSet(scopedOpts, that.noMasksCache);\n\t\t\t\tif (maskset !== undefined) {\n\t\t\t\t\tif (el.inputmask !== undefined) {\n\t\t\t\t\t\tel.inputmask.opts.autoUnmask = true; //force autounmasking when remasking\n\t\t\t\t\t\tel.inputmask.remove();\n\t\t\t\t\t}\n\t\t\t\t\t//store inputmask instance on the input with element reference\n\t\t\t\t\tel.inputmask = new Inputmask(undefined, undefined, true);\n\t\t\t\t\tel.inputmask.opts = scopedOpts;\n\t\t\t\t\tel.inputmask.noMasksCache = that.noMasksCache;\n\t\t\t\t\tel.inputmask.userOptions = $.extend(true, {}, that.userOptions);\n\t\t\t\t\t// el.inputmask.isRTL = scopedOpts.isRTL || scopedOpts.numericInput;\n\t\t\t\t\tel.inputmask.el = el;\n\t\t\t\t\tel.inputmask.$el = $(el);\n\t\t\t\t\tel.inputmask.maskset = maskset;\n\n\t\t\t\t\t$.data(el, dataKey, that.userOptions);\n\t\t\t\t\tmask.call(el.inputmask);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn elems && elems[0] ? (elems[0].inputmask || this) : this;\n\t},\n\toption: function (options, noremask) { //set extra options || retrieve value of a current option\n\t\tif (typeof options === \"string\") {\n\t\t\treturn this.opts[options];\n\t\t} else if (typeof options === \"object\") {\n\t\t\t$.extend(this.userOptions, options); //user passed options\n\t\t\t//remask\n\t\t\tif (this.el && noremask !== true) {\n\t\t\t\tthis.mask(this.el);\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t},\n\tunmaskedvalue: function (value) {\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\tif (this.el === undefined || value !== undefined) {\n\t\t\tvar valueBuffer = (typeof this.opts.onBeforeMask === \"function\" ? (this.opts.onBeforeMask.call(this, value, this.opts) || value) : value).split(\"\");\n\t\t\tcheckVal.call(this, undefined, false, false, valueBuffer);\n\t\t\tif (typeof this.opts.onBeforeWrite === \"function\") this.opts.onBeforeWrite.call(this, undefined, getBuffer.call(this), 0, this.opts);\n\t\t}\n\t\treturn unmaskedvalue.call(this, this.el);\n\t},\n\tremove: function () {\n\t\tif (this.el) {\n\t\t\t$.data(this.el, dataKey, null); //invalidate\n\t\t\t//writeout the value\n\t\t\tvar cv = this.opts.autoUnmask ? unmaskedvalue(this.el) : this._valueGet(this.opts.autoUnmask);\n\t\t\tif (cv !== getBufferTemplate.call(this).join(\"\")) this._valueSet(cv, this.opts.autoUnmask); else this._valueSet(\"\");\n\t\t\t//unbind all events\n\t\t\tEventRuler.off(this.el);\n\n\t\t\t//restore the value property\n\t\t\tvar valueProperty;\n\t\t\tif (Object.getOwnPropertyDescriptor && Object.getPrototypeOf) {\n\t\t\t\tvalueProperty = Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this.el), \"value\");\n\t\t\t\tif (valueProperty) {\n\t\t\t\t\tif (this.__valueGet) {\n\t\t\t\t\t\tObject.defineProperty(this.el, \"value\", {\n\t\t\t\t\t\t\tget: this.__valueGet,\n\t\t\t\t\t\t\tset: this.__valueSet,\n\t\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (document.__lookupGetter__ && this.el.__lookupGetter__(\"value\")) {\n\t\t\t\tif (this.__valueGet) {\n\t\t\t\t\tthis.el.__defineGetter__(\"value\", this.__valueGet);\n\t\t\t\t\tthis.el.__defineSetter__(\"value\", this.__valueSet);\n\t\t\t\t}\n\t\t\t}\n\t\t\t//clear data\n\t\t\tthis.el.inputmask = undefined;\n\t\t}\n\t\treturn this.el;\n\t},\n\tgetemptymask: function () { //return the default (empty) mask value, usefull for setting the default value in validation\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\treturn getBufferTemplate.call(this).join(\"\");\n\t},\n\thasMaskedValue: function () { //check wheter the returned value is masked or not; currently only works reliable when using jquery.val fn to retrieve the value\n\t\treturn !this.opts.autoUnmask;\n\t},\n\tisComplete: function () {\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\treturn isComplete.call(this, getBuffer.call(this));\n\t},\n\tgetmetadata: function () { //return mask metadata if exists\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\tif (Array.isArray(this.maskset.metadata)) {\n\t\t\tvar maskTarget = getMaskTemplate.call(this, true, 0, false).join(\"\");\n\t\t\tthis.maskset.metadata.forEach(function (mtdt) {\n\t\t\t\tif (mtdt.mask === maskTarget) {\n\t\t\t\t\tmaskTarget = mtdt;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t});\n\t\t\treturn maskTarget;\n\t\t}\n\t\treturn this.maskset.metadata;\n\t},\n\tisValid: function (value) {\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\tif (value) {\n\t\t\tvar valueBuffer = (typeof this.opts.onBeforeMask === \"function\" ? (this.opts.onBeforeMask.call(this, value, this.opts) || value) : value).split(\"\");\n\t\t\tcheckVal.call(this, undefined, true, false, valueBuffer);\n\t\t} else {\n\t\t\tvalue = this.isRTL ? getBuffer.call(this).slice().reverse().join(\"\") : getBuffer.call(this).join(\"\");\n\t\t}\n\t\tvar buffer = getBuffer.call(this);\n\t\tvar rl = determineLastRequiredPosition.call(this),\n\t\t\tlmib = buffer.length - 1;\n\t\tfor (; lmib > rl; lmib--) {\n\t\t\tif (isMask.call(this, lmib)) break;\n\t\t}\n\t\tbuffer.splice(rl, lmib + 1 - rl);\n\n\t\treturn isComplete.call(this, buffer) && value === (this.isRTL ? getBuffer.call(this).slice().reverse().join(\"\") : getBuffer.call(this).join(\"\"));\n\n\t},\n\tformat: function (value, metadata) {\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\tlet valueBuffer = (typeof this.opts.onBeforeMask === \"function\" ? (this.opts.onBeforeMask.call(this, value, this.opts) || value) : value).split(\"\");\n\t\tcheckVal.call(this, undefined, true, false, valueBuffer);\n\t\tlet formattedValue = this.isRTL ? getBuffer.call(this).slice().reverse().join(\"\") : getBuffer.call(this).join(\"\");\n\t\treturn metadata ? {\n\t\t\tvalue: formattedValue,\n\t\t\tmetadata: this.getmetadata()\n\t\t} : formattedValue;\n\t},\n\tsetValue: function (value) {\n\t\tif (this.el) {\n\t\t\t$(this.el).trigger(\"setvalue\", [value]);\n\t\t}\n\t},\n\tanalyseMask: analyseMask\n};\n\nfunction resolveAlias(aliasStr, options, opts) {\n\tvar aliasDefinition = Inputmask.prototype.aliases[aliasStr];\n\tif (aliasDefinition) {\n\t\tif (aliasDefinition.alias) resolveAlias(aliasDefinition.alias, undefined, opts); //alias is another alias\n\t\t$.extend(true, opts, aliasDefinition); //merge alias definition in the options\n\t\t$.extend(true, opts, options); //reapply extra given options\n\t\treturn true;\n\t} else //alias not found - try as mask\n\tif (opts.mask === null) {\n\t\topts.mask = aliasStr;\n\t}\n\n\treturn false;\n}\n\nfunction importAttributeOptions(npt, opts, userOptions, dataAttribute) {\n\tfunction importOption(option, optionData) {\n\t\tconst attrOption = dataAttribute === \"\" ? option : dataAttribute + \"-\" + option;\n\t\toptionData = optionData !== undefined ? optionData : npt.getAttribute(attrOption);\n\t\tif (optionData !== null) {\n\t\t\tif (typeof optionData === \"string\") {\n\t\t\t\tif (option.indexOf(\"on\") === 0) {\n\t\t\t\t\toptionData = window[optionData];\n\t\t\t\t}//get function definition\n\t\t\t\telse if (optionData === \"false\") {\n\t\t\t\t\toptionData = false;\n\t\t\t\t} else if (optionData === \"true\") optionData = true;\n\t\t\t}\n\t\t\tuserOptions[option] = optionData;\n\t\t}\n\t}\n\n\tif (opts.importDataAttributes === true) {\n\t\tvar attrOptions = npt.getAttribute(dataAttribute), option, dataoptions, optionData, p;\n\n\t\tif (attrOptions && attrOptions !== \"\") {\n\t\t\tattrOptions = attrOptions.replace(/'/g, \"\\\"\");\n\t\t\tdataoptions = JSON.parse(\"{\" + attrOptions + \"}\");\n\t\t}\n\n\t\t//resolve aliases\n\t\tif (dataoptions) { //pickup alias from dataAttribute\n\t\t\toptionData = undefined;\n\t\t\tfor (p in dataoptions) {\n\t\t\t\tif (p.toLowerCase() === \"alias\") {\n\t\t\t\t\toptionData = dataoptions[p];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\timportOption(\"alias\", optionData); //pickup alias from dataAttribute-alias\n\t\tif (userOptions.alias) {\n\t\t\tresolveAlias(userOptions.alias, userOptions, opts);\n\t\t}\n\n\t\tfor (option in opts) {\n\t\t\tif (dataoptions) {\n\t\t\t\toptionData = undefined;\n\t\t\t\tfor (p in dataoptions) {\n\t\t\t\t\tif (p.toLowerCase() === option.toLowerCase()) {\n\t\t\t\t\t\toptionData = dataoptions[p];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\timportOption(option, optionData);\n\t\t}\n\t}\n\t$.extend(true, opts, userOptions);\n\n\t//handle dir=rtl\n\tif (npt.dir === \"rtl\" || opts.rightAlign) {\n\t\tnpt.style.textAlign = \"right\";\n\t}\n\n\tif (npt.dir === \"rtl\" || opts.numericInput) {\n\t\tnpt.dir = \"ltr\";\n\t\tnpt.removeAttribute(\"dir\");\n\t\topts.isRTL = true;\n\t}\n\n\treturn Object.keys(userOptions).length;\n}\n\n//apply defaults, definitions, aliases\nInputmask.extendDefaults = function (options) {\n\t$.extend(true, Inputmask.prototype.defaults, options);\n};\nInputmask.extendDefinitions = function (definition) {\n\t$.extend(true, Inputmask.prototype.definitions, definition);\n};\nInputmask.extendAliases = function (alias) {\n\t$.extend(true, Inputmask.prototype.aliases, alias);\n};\n//static fn on inputmask\nInputmask.format = function (value, options, metadata) {\n\treturn Inputmask(options).format(value, metadata);\n};\nInputmask.unmask = function (value, options) {\n\treturn Inputmask(options).unmaskedvalue(value);\n};\nInputmask.isValid = function (value, options) {\n\treturn Inputmask(options).isValid(value);\n};\nInputmask.remove = function (elems) {\n\tif (typeof elems === \"string\") {\n\t\telems = document.getElementById(elems) || document.querySelectorAll(elems);\n\t}\n\telems = elems.nodeName ? [elems] : elems;\n\telems.forEach(function (el) {\n\t\tif (el.inputmask) el.inputmask.remove();\n\t});\n};\nInputmask.setValue = function (elems, value) {\n\tif (typeof elems === \"string\") {\n\t\telems = document.getElementById(elems) || document.querySelectorAll(elems);\n\t}\n\telems = elems.nodeName ? [elems] : elems;\n\telems.forEach(function (el) {\n\t\tif (el.inputmask) el.inputmask.setValue(value); else $(el).trigger(\"setvalue\", [value]);\n\t});\n};\n\nInputmask.dependencyLib = $;\n\n//make inputmask available\nwindow.Inputmask = Inputmask;\nexport default Inputmask;\n","import errors from \"../modules/Errors\";\r\nimport Inputmask from \"inputmask/lib/inputmask\";\r\n\r\nclass KbfForm {\r\n\r\n    constructor(formConfig, lang) {\r\n\r\n        let $ = window.$;\r\n\r\n        this.formConfig = formConfig;\r\n        this.formName = this.formConfig.formName;\r\n        this.formElement = document.forms[this.formName];\r\n        this.lang = lang || 'pl';\r\n\r\n        // Sprawdz czy formularz o podanej nazwie istnieje\r\n        if (!this.formElement) throw errors.formNotFound(this.formName);\r\n\r\n        this.$formElement = $(this.formElement);\r\n\r\n        // Error message\r\n        this.$errorMessageElement = $('.kbf-error-message');\r\n\r\n        // Sprawdz czy walidator istnieje\r\n        if (!$.fn.validate) throw errors.noValidator();\r\n\r\n        // Domyslna konfiguracja walidatora\r\n        this.defaultValidatorConfig = {\r\n\r\n            ignore: [],\r\n\r\n            // Umiejscowienie komunikatu o bledzie\r\n            errorPlacement: function ($label, $element) {\r\n                $label.addClass('kbf-error-message');\r\n\r\n                let $column = $element.closest('[class*=\"col\"]');\r\n\r\n                if ($column.length > 0) {\r\n                    $column.append($label);\r\n                } else $label.insertAfter($element);\r\n            }\r\n        };\r\n\r\n        this.init();\r\n        this.addListeners();\r\n\r\n    }\r\n\r\n    init() {\r\n\r\n        let instance = this;\r\n        this.inputmask = new Inputmask();\r\n\r\n        // Ustaw maski\r\n        Array.from(this.formElement.elements).forEach(function (formElement) {\r\n                instance.inputmask.mask(formElement)\r\n\r\n        })\r\n\r\n    }\r\n\r\n    addListeners() {\r\n    }\r\n\r\n    validate() {\r\n\r\n        this.$formElement.validate({ ...this.defaultValidatorConfig, ...this.formConfig });\r\n        this.handleErrorMessage();\r\n    }\r\n\r\n    // Ustawia error message jezeli istnieje\r\n    handleErrorMessage() {\r\n\r\n        this.formIsValid = this.$formElement.valid();\r\n\r\n        // Wyswietl komunikat o bledzie jeżeli pole komunikatu istnieje\r\n        if (this.$errorMessageElement.length > 0) {\r\n            if(this.formIsValid && !this.$errorMessageElement.hasClass('d-none')) this.$errorMessageElement.addClass('d-none');\r\n            if(!this.formIsValid && this.$errorMessageElement.hasClass('d-none')) this.$errorMessageElement.removeClass('d-none');\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default KbfForm;","import KbfPreloaderButton from \"../../components/KbfPreloaderButton\";\r\nimport KbfForm from \"../../components/KbfForm\";\r\n\r\nclass App extends KbfForm {\r\n\r\n    constructor() {\r\n        super({ formName: 'login-form'}, 'pl');\r\n        this.init();\r\n        this.addListeners();\r\n  }\r\n\r\n    init() {\r\n\r\n        super.init();\r\n\r\n        this.$loginForm = $('.login-form');\r\n        this.$submitButton = $('.submit-button');\r\n        this.preloaderButton = new KbfPreloaderButton('.submit-button', false);\r\n\r\n    }\r\n\r\n    addListeners() {\r\n\r\n        let instance = this;\r\n\r\n        this.$submitButton.on('click', function (e) {\r\n\r\n            e.preventDefault();\r\n            instance.validate();\r\n\r\n            if (instance.formIsValid) {\r\n                instance.preloaderButton.triggerStart(instance.$submitButton[0]);\r\n                instance.$loginForm.submit();\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nexport default App;","import App from './components/App';\r\n\r\n(function($){\r\n\r\n    $(document).ready(function () {\r\n\r\n        new App();\r\n\r\n    })\r\n\r\n})(window.$)"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_superPropBase","object","property","hasOwnProperty","call","_get","receiver","Reflect","get","base","superPropBase","desc","getOwnPropertyDescriptor","value","_setPrototypeOf","p","_inherits","subClass","superClass","create","constructor","_typeof","obj","Symbol","iterator","_assertThisInitialized","self","ReferenceError","_possibleConstructorReturn","assertThisInitialized","_isNativeFunction","fn","Function","toString","indexOf","_isNativeReflectConstruct","construct","sham","Proxy","Boolean","valueOf","e","_construct","Parent","args","Class","isNativeReflectConstruct","a","push","apply","bind","arguments","_wrapNativeSuper","_cache","Map","undefined","isNativeFunction","has","set","Wrapper","errors","elementNotFound","selector","Error","formNotFound","formName","argumentNotFound","argumentName","substring","toUpperCase","noValidator","noGeoCoords","KbfPreloaderButton","auto","$","window","$preloaderButton","init","addListeners","on","addEventListener","off","removeEventListener","emit","dispatchEvent","buttonCurrentContents","html","buttonElement","buttonGeometry","getBoundingClientRect","$buttonElement","bgColor","console","log","getComputedStyle","backgroundColor","trigger","type","CustomEvent","attr","css","width","height","preloaderMarkup","removeAttr","triggerStart","startPreloader","EventTarget","_defineProperty","getLocator","tst","align","locator","alternation","mloc","getDecisionTaker","join","decisionTaker","split","getPlaceholder","pos","test","returnPL","inputmask","opts","maskset","getTest","match","placeholder","static","validPositions","tests","getTests","staticAlternations","prevTest","def","optionality","optionalQuantifier","charAt","getMaskTemplate","baseOnInput","minimalPos","includeMode","noJit","clearOptionalTail","greedy","maskTemplate","ndxIntlzr","testPos","jitRenderStatic","generatedInput","input","skipOptionalPartCharacter","determineTestTemplate","slice","nativeDef","getTestTemplate","jitMasking","jit","groupSeparator","isFinite","maxLength","pop","maskLength","tstPs","altTest","targetLocator","tstLocator","closest","bestMatch","ndx","distance","Math","abs","newBlockMarker","dependencyLib","el","maskTokens","maskToken","ndxInitializer","matches","insertStop","latestMatch","cacheDependency","resolveTestFromToken","loopNdx","quantifierRecurse","handleMatch","isFirstMatch","tokenGroup","firstMatch","every","isQuantifier","resolveNdxInitializer","alternateNdx","targetAlternation","indexPos","lmnt","ndxPos","bestMatchAltIndex","isSubsetOf","source","expand","pattern","expanded","start","end","l","charCodeAt","String","fromCharCode","regex","RegExp","replace","staticCanMatchDefinition","setMergeLocators","targetMatch","altMatch","alternationNdx","shouldMerge","locNdx","keys","isSameLevel","_maxTestPos","mask","reverse","isGroup","isOptional","optionalToken","mtchsNdx","forEach","mtch","isAlternator","alternateToken","malternateMatches","maltMatches","currentMatches","loopNdxCnt","altIndex","shift","currentPos","ndxInitializerClone","altIndexArr","amndx","excludes","altIndexArrClone","exl","excludeSet","splice","keepStatic","parseInt","unMatchedAlternation","concat","ndx1","dropMatch","ndx2","altMatch2","includes","userOptions","qt","qndx","isNaN","quantifier","max","min","jitOffset","tndx","mergeLocators","Array","isArray","previousPos","cd","mtndx","casing","extend","ua","navigator","userAgent","ie","mobile","iemobile","iphone","applyInputValue","refreshValue","onBeforeMask","checkVal","undoValue","getBuffer","clearMaskOnLostFocus","clearIncomplete","_valueGet","getBufferTemplate","getLastValidPosition","_valueSet","buffer","template","writeOut","strict","nptvl","initiatingEvent","inputValue","charCodes","initialNdx","result","isTemplateMatch","targetTemplate","seekNext","charCodeNdx","isMask","nextPos","caretPos","begin","resetMaskSet","radixPoint","determineNewCaretPosition","staticMatches","prevCaretPos","charCode","isValid","keypress","Event","which","lvp","EventHandlers","keypressEvent","isRTL","forwardPosition","writeBuffer","sndx","validPos","nextValid","isComplete","nextSndx","HandleNativePlaceholder","npt","nptValue","removeAttribute","unmaskedvalue","umValue","vps","pndx","metadata","unmaskedValue","onUnMask","bufferValue","event","triggerEvents","onBeforeWrite","refreshFromBuffer","refresh","caret","keyCode","DELETE","BACKSPACE","$input","nptVal","skipInputEvent","setTimeout","keydownEvent","k","kdResult","onKeyDown","BACKSPACE_SAFARI","ctrlKey","X","preventDefault","handleRemove","END","PAGE_DOWN","shiftKey","HOME","PAGE_UP","undoOnEscape","ESCAPE","altKey","tabThrough","TAB","seekPrevious","insertModeVisual","insertMode","RIGHT","LEFT","translatePosition","ignorable","ignorables","checkval","metaKey","ENTER","location","c","writeOutBuffer","valResult","numericInput","onKeyValidation","keyupEvent","isComposing","KEY_229","$el","pasteEvent","tempValue","valueBeforeCaret","substr","valueAfterCaret","clipboardData","getData","pasteValue","onBeforePaste","inputFallBackEvent","ieMobileHandler","inputChar","iv","analyseChanges","frontPart","backPart","frontBufferPart","backBufferPart","fpl","bpl","bl","action","data","marker","unshift","newBuffer","oldBuffer","changes","shadowRoot","document","activeElement","focus","entry","keydown","compositionendEvent","setValueEvent","detail","focusEvent","showMaskOnFocus","positionCaretOnTab","mouseEnter","clickEvent","invalidEvent","validationEvent","mouseleaveEvent","originalPlaceholder","tabbed","newCaretPosition","cutEvent","clipData","setData","execCommand","blurEvent","mouseenterEvent","showMaskOnHover","submitEvent","removeMaskOnSubmit","resetEvent","alternate","maskPos","fromIsValid","rAltPos","selection","validPsClone","tstClone","lastAlt","isValidRslt","returnRslt","altPos","prevAltPos","decisionPos","lAltPos","validInputs","resultPos","elem","toLowerCase","posBefore","SPACE","checkAlternationMatch","altArr1","altArr2","na","altArrC","isMatch","naArr","naNdx","alndx","pend","offset","revalidateMask","newPos","repeat","complete","lrp","determineLastRequiredPosition","aml","fromAlternate","validateOnly","fromCheckval","isSelection","posObj","processCommandObject","commandObj","remove","sort","b","insert","rewritePosition","_isValid","position","rslt","validatedPos","positionsClone","preValidation","currentPosValid","skip","nPos","snPos","trackbackPositions","postValidation","postResult","endResult","positionCanMatchDefinition","testDefinition","valid","shiftPositions","bffr","originalPos","fillOnly","ps","vp","np","cvpInput","validTest","IsEnclosedStatic","valids","posMatch","prevMatch","nextMatch","j","t","canMatch","notranslate","isDelete","range","scrollCalc","ownerDocument","defaultView","currentStyle","fontSize","scrollLeft","scrollWidth","setSelectionRange","getSelection","createRange","firstChild","textNode","createTextNode","appendChild","setStart","setEnd","collapse","sel","removeAllRanges","addRange","createTextRange","moveEnd","moveStart","select","selectionStart","selectionEnd","getRangeAt","commonAncestorContainer","parentNode","startOffset","endOffset","duplicate","text","returnDefinition","positions","lvTest","lvTestAlt","selectedCaret","doRadixFocus","clickPos","digits","radixPos","positionCaretOnClick","clickPosition","lvclickPosition","lastPosition","tt","noCache","_buffer","closestTo","before","after","posNdx","psNdx","fuzzy","testTemplate","testPlaceHolder","soft","newBlock","EventRuler","eventName","eventHandler","ev","originalEvent","that","nodeName","imOpts","Inputmask","disabled","readOnly","inputType","skipKeyPressEvent","blur","returnVal","stopPropagation","events","form","evArr","isElementTypeSupported","patchValueProperty","valueGet","valueSet","patchValhook","valHooks","inputmaskpatch","valhookGet","valhookSet","autoUnmask","nullable","getter","setter","installNativeValueSetFallback","__valueGet","noValuePatching","valueProperty","tagName","textContent","__lookupGetter__","__lookupSetter__","__defineGetter__","__defineSetter__","__valueSet","overruleRTL","elementType","getAttribute","isSupported","supportsInputType","isContentEditable","createElement","setAttribute","inputMode","inputmode","autocomplete","oncomplete","onincomplete","oncleared","inputEventOnly","options","name","src","copy","copyIsArray","clone","deep","eval","owner","__data","isValidElement","Element","params","bubbles","cancelable","evt","createEvent","initCustomEvent","handler","addEvent","namespace","attachEvent","eventRegistry","_events","endx","nsEvent","removeEvent","detachEvent","nmsp","resolveNamespace","evts","hndx","hndL","evNdx","offEvents","offEventsL","evnt","createEventObject","eventType","fireEvent","DependencyLib","querySelector","generateMaskSet","nocache","ms","generateMask","regexMask","repeatStart","groupmarker","quantifiermarker","masksetDefinition","maskdefKey","masksCache","analyseMask","altMask","msk","alternatormarker","tokenizer","regexTokenizer","escaped","currentToken","MaskToken","m","openenings","openingToken","currentOpeningToken","alternator","lastMatch","closeRegexGroup","openGroup","alternatorGroup","insertTestDefinition","mtoken","element","staticDefinitionSymbol","maskdef","definitions","usePrototypeDefinitions","validator","definitionSymbol","generated","verifyGroupMarker","token","nextToken","defaultCase","mndx","reverseTokens","reverseStatic","st","optionalmarker","intMatch","groupify","groupToken","closeGroup","groupQuantifier","exec","altRegexGroup","escapeChar","mqj","mq","mq0","mq1","tmpMatch","subToken","alias","pastedValue","rightAlign","_radixDance","importDataAttributes","dataKey","internal","defaults","noMasksCache","resolveAlias","dataAttribute","aliases","elems","getElementById","querySelectorAll","scopedOpts","importAttributeOptions","option","noremask","valueBuffer","cv","getemptymask","hasMaskedValue","getmetadata","maskTarget","mtdt","rl","lmib","format","formattedValue","setValue","aliasStr","aliasDefinition","importOption","optionData","attrOption","attrOptions","dataoptions","JSON","parse","dir","style","textAlign","extendDefaults","extendDefinitions","definition","extendAliases","unmask","KbfForm","formConfig","lang","formElement","forms","$formElement","$errorMessageElement","validate","defaultValidatorConfig","ignore","errorPlacement","$label","$element","addClass","$column","append","insertAfter","from","elements","handleErrorMessage","formIsValid","hasClass","removeClass","App","$loginForm","$submitButton","preloaderButton","submit","ready"],"mappings":"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"}