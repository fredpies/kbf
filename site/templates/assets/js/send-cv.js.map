{"version":3,"file":"send-cv.js","sources":["../../js/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../js/node_modules/@babel/runtime/helpers/esm/createClass.js","../../js/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../../js/node_modules/@babel/runtime/helpers/esm/superPropBase.js","../../js/node_modules/@babel/runtime/helpers/esm/get.js","../../js/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../../js/node_modules/@babel/runtime/helpers/esm/inherits.js","../../js/node_modules/@babel/runtime/helpers/esm/typeof.js","../../js/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../../js/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../../js/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../js/modules/Errors.js","../../js/node_modules/inputmask/lib/getPrototypeOf.js","../../js/node_modules/inputmask/lib/validation-tests.js","../../js/node_modules/inputmask/lib/environment.js","../../js/node_modules/inputmask/lib/inputHandling.js","../../js/node_modules/inputmask/lib/eventhandlers.js","../../js/node_modules/inputmask/lib/validation.js","../../js/node_modules/inputmask/lib/positioning.js","../../js/node_modules/inputmask/lib/eventruler.js","../../js/node_modules/inputmask/lib/mask.js","../../js/node_modules/inputmask/lib/dependencyLibs/extend.js","../../js/node_modules/inputmask/lib/global/window.js","../../js/node_modules/inputmask/lib/dependencyLibs/data.js","../../js/node_modules/inputmask/lib/dependencyLibs/events.js","../../js/node_modules/inputmask/lib/dependencyLibs/inputmask.dependencyLib.js","../../js/node_modules/inputmask/lib/mask-lexer.js","../../js/node_modules/inputmask/lib/definitions.js","../../js/node_modules/inputmask/lib/defaults.js","../../js/node_modules/inputmask/lib/inputmask.js","../../js/components/KbfForm.js","../../js/node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","../../js/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../../js/node_modules/@babel/runtime/helpers/esm/construct.js","../../js/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","../../js/components/KbfPreloaderButton.js","../../js/config/config.js","../../js/send-cv/components/KbfSendCv.js","../../js/components/KbfBackButton.js","../../js/send-cv/components/App.js","../../js/send-cv/entry.js"],"sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","import superPropBase from \"./superPropBase.js\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import _typeof from \"@babel/runtime/helpers/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","let errors = {};\r\n\r\n// Wyjatki\r\n\r\n// Nie znaleziono elementu DOM\r\nerrors.elementNotFound = function (selector) {\r\n    return new Error(`Cannot find elements with selector \"${selector}\"`);\r\n}\r\n\r\n// Nie znaleziono formularza\r\nerrors.formNotFound = function (formName) {\r\n    return new Error(`Cannot find form with name \"${formName}\"`);\r\n}\r\n\r\n// Nie podano argumentu\r\nerrors.argumentNotFound = function (argumentName) {\r\n    return new Error(`${argumentName.substring(0, 1).toUpperCase() + argumentName.substring(1)} argument cannot be empty`);\r\n}\r\n\r\n// Brak walidatora dla formularza\r\nerrors.noValidator = function () {\r\n    return new Error(`No JQuery validator plugin`);\r\n}\r\n\r\n// Nie podano wspolrzednych geograficznych\r\nerrors.noGeoCoords = function () {\r\n    return new Error(`You must provide geo coordinates.`);\r\n}\r\n\r\nexport default errors;","if (typeof Object.getPrototypeOf !== \"function\") {\n\tObject.getPrototypeOf = typeof \"test\".__proto__ === \"object\" ? function (object) {\n\t\treturn object.__proto__;\n\t} : function (object) {\n\t\treturn object.constructor.prototype;\n\t};\n}","export {determineTestTemplate, getDecisionTaker, getMaskTemplate, getPlaceholder, getTest, getTests, getTestTemplate};\n\nfunction getLocator(tst, align) { //need to align the locators to be correct\n\tvar locator = (tst.alternation != undefined ? tst.mloc[getDecisionTaker(tst)] : tst.locator).join(\"\");\n\tif (locator !== \"\") while (locator.length < align) locator += \"0\";\n\treturn locator;\n}\n\nfunction getDecisionTaker(tst) {\n\tvar decisionTaker = tst.locator[tst.alternation];\n\tif (typeof decisionTaker == \"string\" && decisionTaker.length > 0) { //no decision taken ~ take first one as decider\n\t\tdecisionTaker = decisionTaker.split(\",\")[0];\n\t}\n\treturn decisionTaker !== undefined ? decisionTaker.toString() : \"\";\n}\n\n//tobe put on prototype?\nfunction getPlaceholder(pos, test, returnPL) {\n\tconst inputmask = this,\n\t\topts = this.opts,\n\t\tmaskset = this.maskset;\n\n\ttest = test || getTest.call(inputmask, pos).match;\n\tif (test.placeholder !== undefined || returnPL === true) {\n\t\treturn typeof test.placeholder === \"function\" ? test.placeholder(opts) : test.placeholder;\n\t} else if (test.static === true) {\n\t\tif (pos > -1 && maskset.validPositions[pos] === undefined) {\n\t\t\tvar tests = getTests.call(inputmask, pos),\n\t\t\t\tstaticAlternations = [],\n\t\t\t\tprevTest;\n\t\t\tif (tests.length > 1 + (tests[tests.length - 1].match.def === \"\" ? 1 : 0)) {\n\t\t\t\tfor (var i = 0; i < tests.length; i++) {\n\t\t\t\t\tif (tests[i].match.def !== \"\" && tests[i].match.optionality !== true && tests[i].match.optionalQuantifier !== true &&\n\t\t\t\t\t\t(tests[i].match.static === true || (prevTest === undefined || tests[i].match.fn.test(prevTest.match.def, maskset, pos, true, opts) !== false))) {\n\t\t\t\t\t\tstaticAlternations.push(tests[i]);\n\t\t\t\t\t\tif (tests[i].match.static === true) prevTest = tests[i];\n\t\t\t\t\t\tif (staticAlternations.length > 1) {\n\t\t\t\t\t\t\tif (/[0-9a-bA-Z]/.test(staticAlternations[0].match.def)) {\n\t\t\t\t\t\t\t\treturn opts.placeholder.charAt(pos % opts.placeholder.length);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn test.def;\n\t}\n\n\treturn opts.placeholder.charAt(pos % opts.placeholder.length);\n}\n\n//tobe put on prototype?\nfunction getMaskTemplate(baseOnInput, minimalPos, includeMode, noJit, clearOptionalTail) {\n\t//includeMode true => input, undefined => placeholder, false => mask\n\n\tvar inputmask = this,\n\t\topts = this.opts,\n\t\tmaskset = this.maskset;\n\n\n\tvar greedy = opts.greedy;\n\tif (clearOptionalTail) opts.greedy = false;\n\tminimalPos = minimalPos || 0;\n\tvar maskTemplate = [],\n\t\tndxIntlzr, pos = 0,\n\t\ttest, testPos, jitRenderStatic;\n\tdo {\n\t\tif (baseOnInput === true && maskset.validPositions[pos]) {\n\t\t\ttestPos = (clearOptionalTail && maskset.validPositions[pos].match.optionality === true\n\t\t\t\t&& maskset.validPositions[pos + 1] === undefined\n\t\t\t\t&& (maskset.validPositions[pos].generatedInput === true || (maskset.validPositions[pos].input == opts.skipOptionalPartCharacter && pos > 0)))\n\t\t\t\t? determineTestTemplate.call(inputmask, pos, getTests.call(inputmask, pos, ndxIntlzr, pos - 1))\n\t\t\t\t: maskset.validPositions[pos];\n\t\t\ttest = testPos.match;\n\t\t\tndxIntlzr = testPos.locator.slice();\n\t\t\tmaskTemplate.push(includeMode === true ? testPos.input : includeMode === false ? test.nativeDef : getPlaceholder.call(inputmask, pos, test));\n\t\t} else {\n\t\t\ttestPos = getTestTemplate.call(inputmask, pos, ndxIntlzr, pos - 1);\n\t\t\ttest = testPos.match;\n\t\t\tndxIntlzr = testPos.locator.slice();\n\t\t\tvar jitMasking = noJit === true ? false : (opts.jitMasking !== false ? opts.jitMasking : test.jit);\n\t\t\t//check for groupSeparator is a hack for the numerics as we don't want the render of the groupSeparator beforehand\n\t\t\tjitRenderStatic = (jitRenderStatic && test.static && test.def !== opts.groupSeparator && test.fn === null) || (maskset.validPositions[pos - 1] && test.static && test.def !== opts.groupSeparator && test.fn === null);\n\t\t\tif (jitRenderStatic || jitMasking === false || jitMasking === undefined /*|| pos < lvp*/ || (typeof jitMasking === \"number\" && isFinite(jitMasking) && jitMasking > pos)) {\n\t\t\t\tmaskTemplate.push(includeMode === false ? test.nativeDef : getPlaceholder.call(inputmask, pos, test));\n\t\t\t} else {\n\t\t\t\tjitRenderStatic = false;\n\t\t\t}\n\t\t}\n\n\t\tpos++;\n\t} while ((inputmask.maxLength === undefined || pos < inputmask.maxLength) && (test.static !== true || test.def !== \"\") || minimalPos > pos);\n\tif (maskTemplate[maskTemplate.length - 1] === \"\") {\n\t\tmaskTemplate.pop(); //drop the last one which is empty\n\t}\n\tif (includeMode !== false || //do not alter the masklength when just retrieving the maskdefinition\n\t\tmaskset.maskLength === undefined) //just make sure the maskLength gets initialized in all cases (needed for isValid)\n\t{\n\t\tmaskset.maskLength = pos - 1;\n\t}\n\n\topts.greedy = greedy;\n\treturn maskTemplate;\n}\n\n//tobe put on prototype?\nfunction getTestTemplate(pos, ndxIntlzr, tstPs) {\n\tvar inputmask = this,\n\t\tmaskset = this.maskset;\n\n\treturn maskset.validPositions[pos] || determineTestTemplate.call(inputmask, pos, getTests.call(inputmask, pos, ndxIntlzr ? ndxIntlzr.slice() : ndxIntlzr, tstPs));\n}\n\n//tobe put on prototype?\nfunction determineTestTemplate(pos, tests) {\n\tvar inputmask = this,\n\t\topts = this.opts;\n\n\tpos = pos > 0 ? pos - 1 : 0;\n\tvar altTest = getTest.call(inputmask, pos), targetLocator = getLocator(altTest), tstLocator, closest, bestMatch;\n\tfor (var ndx = 0; ndx < tests.length; ndx++) { //find best matching\n\t\tvar tst = tests[ndx];\n\t\ttstLocator = getLocator(tst, targetLocator.length);\n\t\tvar distance = Math.abs(tstLocator - targetLocator);\n\t\tif (closest === undefined\n\t\t\t|| (tstLocator !== \"\" && distance < closest)\n\t\t\t|| (bestMatch && !opts.greedy && bestMatch.match.optionality && bestMatch.match.newBlockMarker === \"master\" && (!tst.match.optionality || !tst.match.newBlockMarker))\n\t\t\t|| (bestMatch && bestMatch.match.optionalQuantifier && !tst.match.optionalQuantifier)) {\n\t\t\tclosest = distance;\n\t\t\tbestMatch = tst;\n\t\t}\n\t}\n\n\treturn bestMatch;\n}\n\n//tobe put on prototype?\nfunction getTest(pos, tests) {\n\tvar inputmask = this,\n\t\tmaskset = this.maskset;\n\n\tif (maskset.validPositions[pos]) {\n\t\treturn maskset.validPositions[pos];\n\t}\n\treturn (tests || getTests.call(inputmask, pos))[0];\n}\n\n//tobe put on prototype?\nfunction getTests(pos, ndxIntlzr, tstPs) {\n\tvar inputmask = this,\n\t\t$ = this.dependencyLib,\n\t\tmaskset = this.maskset,\n\t\topts = this.opts,\n\t\tel = this.el,\n\t\tmaskTokens = maskset.maskToken,\n\t\ttestPos = ndxIntlzr ? tstPs : 0,\n\t\tndxInitializer = ndxIntlzr ? ndxIntlzr.slice() : [0],\n\t\tmatches = [],\n\t\tinsertStop = false,\n\t\tlatestMatch,\n\t\tcacheDependency = ndxIntlzr ? ndxIntlzr.join(\"\") : \"\";\n\n\tfunction resolveTestFromToken(maskToken, ndxInitializer, loopNdx, quantifierRecurse) { //ndxInitializer contains a set of indexes to speedup searches in the mtokens\n\t\tfunction handleMatch(match, loopNdx, quantifierRecurse) {\n\t\t\tfunction isFirstMatch(latestMatch, tokenGroup) {\n\t\t\t\tvar firstMatch = tokenGroup.matches.indexOf(latestMatch) === 0;\n\t\t\t\tif (!firstMatch) {\n\t\t\t\t\ttokenGroup.matches.every(function (match, ndx) {\n\t\t\t\t\t\tif (match.isQuantifier === true) {\n\t\t\t\t\t\t\tfirstMatch = isFirstMatch(latestMatch, tokenGroup.matches[ndx - 1]);\n\t\t\t\t\t\t} else if (Object.prototype.hasOwnProperty.call(match, \"matches\")) firstMatch = isFirstMatch(latestMatch, match);\n\t\t\t\t\t\tif (firstMatch) return false;\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn firstMatch;\n\t\t\t}\n\n\t\t\tfunction resolveNdxInitializer(pos, alternateNdx, targetAlternation) {\n\t\t\t\tvar bestMatch, indexPos;\n\n\t\t\t\tif (maskset.tests[pos] || maskset.validPositions[pos]) {\n\t\t\t\t\t(maskset.tests[pos] || [maskset.validPositions[pos]]).every(function (lmnt, ndx) {\n\t\t\t\t\t\tif (lmnt.mloc[alternateNdx]) {\n\t\t\t\t\t\t\tbestMatch = lmnt;\n\t\t\t\t\t\t\treturn false; //break\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar alternation = targetAlternation !== undefined ? targetAlternation : lmnt.alternation,\n\t\t\t\t\t\t\tndxPos = lmnt.locator[alternation] !== undefined ? lmnt.locator[alternation].toString().indexOf(alternateNdx) : -1;\n\t\t\t\t\t\tif ((indexPos === undefined || ndxPos < indexPos) && ndxPos !== -1) {\n\t\t\t\t\t\t\tbestMatch = lmnt;\n\t\t\t\t\t\t\tindexPos = ndxPos;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (bestMatch) {\n\t\t\t\t\tvar bestMatchAltIndex = bestMatch.locator[bestMatch.alternation];\n\t\t\t\t\tvar locator = bestMatch.mloc[alternateNdx] || bestMatch.mloc[bestMatchAltIndex] || bestMatch.locator;\n\t\t\t\t\treturn locator.slice((targetAlternation !== undefined ? targetAlternation : bestMatch.alternation) + 1);\n\t\t\t\t} else {\n\t\t\t\t\treturn targetAlternation !== undefined ? resolveNdxInitializer(pos, alternateNdx) : undefined;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction isSubsetOf(source, target) {\n\t\t\t\tfunction expand(pattern) {\n\t\t\t\t\tvar expanded = [], start = -1, end;\n\t\t\t\t\tfor (var i = 0, l = pattern.length; i < l; i++) {\n\t\t\t\t\t\tif (pattern.charAt(i) === \"-\") {\n\t\t\t\t\t\t\tend = pattern.charCodeAt(i + 1);\n\t\t\t\t\t\t\twhile (++start < end) expanded.push(String.fromCharCode(start));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstart = pattern.charCodeAt(i);\n\t\t\t\t\t\t\texpanded.push(pattern.charAt(i));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn expanded.join(\"\");\n\t\t\t\t}\n\n\t\t\t\tif (source.match.def === target.match.nativeDef) return true;\n\t\t\t\tif ((opts.regex || (source.match.fn instanceof RegExp && target.match.fn instanceof RegExp)) && source.match.static !== true && target.match.static !== true) { //is regex a subset\n\t\t\t\t\treturn expand(target.match.fn.toString().replace(/[[\\]/]/g, \"\")).indexOf(expand(source.match.fn.toString().replace(/[[\\]/]/g, \"\"))) !== -1;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tfunction staticCanMatchDefinition(source, target) {\n\t\t\t\treturn source.match.static === true && target.match.static !== true ? target.match.fn.test(source.match.def, maskset, pos, false, opts, false) : false;\n\t\t\t}\n\n\t\t\t//mergelocators for retrieving the correct locator match when merging\n\t\t\tfunction setMergeLocators(targetMatch, altMatch) {\n\t\t\t\tvar alternationNdx = targetMatch.alternation,\n\t\t\t\t\tshouldMerge = altMatch === undefined || (alternationNdx === altMatch.alternation &&\n\t\t\t\t\t\ttargetMatch.locator[alternationNdx].toString().indexOf(altMatch.locator[alternationNdx]) === -1);\n\t\t\t\tif (!shouldMerge && alternationNdx > altMatch.alternation) {\n\t\t\t\t\tfor (var i = altMatch.alternation; i < alternationNdx; i++) {\n\t\t\t\t\t\tif (targetMatch.locator[i] !== altMatch.locator[i]) {\n\t\t\t\t\t\t\talternationNdx = i;\n\t\t\t\t\t\t\tshouldMerge = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (shouldMerge) {\n\t\t\t\t\ttargetMatch.mloc = targetMatch.mloc || {};\n\t\t\t\t\tvar locNdx = targetMatch.locator[alternationNdx];\n\t\t\t\t\tif (locNdx === undefined) {\n\t\t\t\t\t\ttargetMatch.alternation = undefined;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (typeof locNdx === \"string\") locNdx = locNdx.split(\",\")[0];\n\t\t\t\t\t\tif (targetMatch.mloc[locNdx] === undefined) targetMatch.mloc[locNdx] = targetMatch.locator.slice();\n\t\t\t\t\t\tif (altMatch !== undefined) {\n\t\t\t\t\t\t\tfor (var ndx in altMatch.mloc) {\n\t\t\t\t\t\t\t\tif (typeof ndx === \"string\") ndx = ndx.split(\",\")[0];\n\t\t\t\t\t\t\t\tif (targetMatch.mloc[ndx] === undefined) targetMatch.mloc[ndx] = altMatch.mloc[ndx];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttargetMatch.locator[alternationNdx] = Object.keys(targetMatch.mloc).join(\",\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tfunction isSameLevel(targetMatch, altMatch) {\n\t\t\t\tif (targetMatch.locator.length !== altMatch.locator.length) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tfor (let locNdx = targetMatch.alternation + 1; locNdx < targetMatch.locator.length; locNdx++) {\n\t\t\t\t\tif (targetMatch.locator[locNdx] !== altMatch.locator[locNdx]) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (testPos > (pos + opts._maxTestPos)) {\n\t\t\t\tthrow \"Inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. \" + maskset.mask;\n\t\t\t}\n\t\t\tif (testPos === pos && match.matches === undefined) {\n\t\t\t\tmatches.push({\n\t\t\t\t\t\"match\": match,\n\t\t\t\t\t\"locator\": loopNdx.reverse(),\n\t\t\t\t\t\"cd\": cacheDependency,\n\t\t\t\t\t\"mloc\": {}\n\t\t\t\t});\n\t\t\t\treturn true;\n\t\t\t} else if (match.matches !== undefined) {\n\t\t\t\tif (match.isGroup && quantifierRecurse !== match) { //when a group pass along to the quantifier\n\t\t\t\t\tmatch = handleMatch(maskToken.matches[maskToken.matches.indexOf(match) + 1], loopNdx, quantifierRecurse);\n\t\t\t\t\tif (match) return true;\n\t\t\t\t} else if (match.isOptional) {\n\t\t\t\t\tvar optionalToken = match, mtchsNdx = matches.length;\n\t\t\t\t\tmatch = resolveTestFromToken(match, ndxInitializer, loopNdx, quantifierRecurse);\n\t\t\t\t\tif (match) {\n\t\t\t\t\t\t//mark optionality in matches\n\t\t\t\t\t\tmatches.forEach(function (mtch, ndx) {\n\t\t\t\t\t\t\tif (ndx >= mtchsNdx) {\n\t\t\t\t\t\t\t\tmtch.match.optionality = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tlatestMatch = matches[matches.length - 1].match;\n\t\t\t\t\t\tif (quantifierRecurse === undefined && isFirstMatch(latestMatch, optionalToken)) { //prevent loop see #698\n\t\t\t\t\t\t\tinsertStop = true; //insert a stop\n\t\t\t\t\t\t\ttestPos = pos; //match the position after the group\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (match.isAlternator) {\n\t\t\t\t\tvar alternateToken = match,\n\t\t\t\t\t\tmalternateMatches = [],\n\t\t\t\t\t\tmaltMatches,\n\t\t\t\t\t\tcurrentMatches = matches.slice(),\n\t\t\t\t\t\tloopNdxCnt = loopNdx.length;\n\t\t\t\t\tvar altIndex = ndxInitializer.length > 0 ? ndxInitializer.shift() : -1;\n\t\t\t\t\tif (altIndex === -1 || typeof altIndex === \"string\") {\n\t\t\t\t\t\tvar currentPos = testPos,\n\t\t\t\t\t\t\tndxInitializerClone = ndxInitializer.slice(),\n\t\t\t\t\t\t\taltIndexArr = [],\n\t\t\t\t\t\t\tamndx;\n\t\t\t\t\t\tif (typeof altIndex == \"string\") {\n\t\t\t\t\t\t\taltIndexArr = altIndex.split(\",\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfor (amndx = 0; amndx < alternateToken.matches.length; amndx++) {\n\t\t\t\t\t\t\t\taltIndexArr.push(amndx.toString());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (maskset.excludes[pos] !== undefined) {\n\t\t\t\t\t\t\tvar altIndexArrClone = altIndexArr.slice();\n\t\t\t\t\t\t\tfor (var i = 0, exl = maskset.excludes[pos].length; i < exl; i++) {\n\t\t\t\t\t\t\t\tvar excludeSet = maskset.excludes[pos][i].toString().split(\":\");\n\t\t\t\t\t\t\t\tif (loopNdx.length == excludeSet[1]) {\n\t\t\t\t\t\t\t\t\taltIndexArr.splice(altIndexArr.indexOf(excludeSet[0]), 1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (altIndexArr.length === 0) { //fully alternated => reset\n\t\t\t\t\t\t\t\tdelete maskset.excludes[pos];\n\t\t\t\t\t\t\t\taltIndexArr = altIndexArrClone;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (opts.keepStatic === true || (isFinite(parseInt(opts.keepStatic)) && currentPos >= opts.keepStatic)) altIndexArr = altIndexArr.slice(0, 1);\n\t\t\t\t\t\tvar unMatchedAlternation = false;\n\t\t\t\t\t\tfor (var ndx = 0; ndx < altIndexArr.length; ndx++) {\n\t\t\t\t\t\t\tamndx = parseInt(altIndexArr[ndx]);\n\t\t\t\t\t\t\tmatches = [];\n\t\t\t\t\t\t\t//set the correct ndxInitializer\n\t\t\t\t\t\t\tndxInitializer = typeof altIndex === \"string\" ? resolveNdxInitializer(testPos, amndx, loopNdxCnt) || ndxInitializerClone.slice() : ndxInitializerClone.slice();\n\t\t\t\t\t\t\tif (alternateToken.matches[amndx] && handleMatch(alternateToken.matches[amndx], [amndx].concat(loopNdx), quantifierRecurse)) {\n\t\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t\t} else if (ndx === 0) {\n\t\t\t\t\t\t\t\tunMatchedAlternation = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tmaltMatches = matches.slice();\n\t\t\t\t\t\t\ttestPos = currentPos;\n\t\t\t\t\t\t\tmatches = [];\n\n\t\t\t\t\t\t\t//fuzzy merge matches\n\t\t\t\t\t\t\tfor (var ndx1 = 0; ndx1 < maltMatches.length; ndx1++) {\n\t\t\t\t\t\t\t\tvar altMatch = maltMatches[ndx1],\n\t\t\t\t\t\t\t\t\tdropMatch = false;\n\t\t\t\t\t\t\t\taltMatch.match.jit = altMatch.match.jit || unMatchedAlternation; //mark jit when there are unmatched alternations  ex: mask: \"(a|aa)\"\n\t\t\t\t\t\t\t\taltMatch.alternation = altMatch.alternation || loopNdxCnt;\n\t\t\t\t\t\t\t\tsetMergeLocators(altMatch);\n\t\t\t\t\t\t\t\tfor (var ndx2 = 0; ndx2 < malternateMatches.length; ndx2++) {\n\t\t\t\t\t\t\t\t\tvar altMatch2 = malternateMatches[ndx2];\n\t\t\t\t\t\t\t\t\tif (typeof altIndex !== \"string\" || (altMatch.alternation !== undefined && altIndexArr.includes(altMatch.locator[altMatch.alternation].toString()))) {\n\t\t\t\t\t\t\t\t\t\tif (altMatch.match.nativeDef === altMatch2.match.nativeDef) {\n\t\t\t\t\t\t\t\t\t\t\tdropMatch = true;\n\t\t\t\t\t\t\t\t\t\t\tsetMergeLocators(altMatch2, altMatch);\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t} else if (isSubsetOf(altMatch, altMatch2)) {\n\t\t\t\t\t\t\t\t\t\t\tif (setMergeLocators(altMatch, altMatch2)) {\n\t\t\t\t\t\t\t\t\t\t\t\tdropMatch = true;\n\t\t\t\t\t\t\t\t\t\t\t\tmalternateMatches.splice(malternateMatches.indexOf(altMatch2), 0, altMatch);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t} else if (isSubsetOf(altMatch2, altMatch)) {\n\t\t\t\t\t\t\t\t\t\t\tsetMergeLocators(altMatch2, altMatch);\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t} else if (staticCanMatchDefinition(altMatch, altMatch2)) {\n\t\t\t\t\t\t\t\t\t\t\tif (!isSameLevel(altMatch, altMatch2) && el.inputmask.userOptions.keepStatic === undefined) {\n\t\t\t\t\t\t\t\t\t\t\t\topts.keepStatic = true;\n\t\t\t\t\t\t\t\t\t\t\t} else if (setMergeLocators(altMatch, altMatch2)) {\n\t\t\t\t\t\t\t\t\t\t\t\t//insert match above general match\n\t\t\t\t\t\t\t\t\t\t\t\tdropMatch = true;\n\t\t\t\t\t\t\t\t\t\t\t\tmalternateMatches.splice(malternateMatches.indexOf(altMatch2), 0, altMatch);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (!dropMatch) {\n\t\t\t\t\t\t\t\t\tmalternateMatches.push(altMatch);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmatches = currentMatches.concat(malternateMatches);\n\t\t\t\t\t\ttestPos = pos;\n\t\t\t\t\t\tinsertStop = matches.length > 0; //insert a stopelemnt when there is an alternate - needed for non-greedy option\n\t\t\t\t\t\tmatch = malternateMatches.length > 0; //set correct match state\n\n\t\t\t\t\t\t//cloneback\n\t\t\t\t\t\tndxInitializer = ndxInitializerClone.slice();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmatch = handleMatch(alternateToken.matches[altIndex] || maskToken.matches[altIndex], [altIndex].concat(loopNdx), quantifierRecurse);\n\t\t\t\t\t}\n\t\t\t\t\tif (match) return true;\n\t\t\t\t} else if (match.isQuantifier && quantifierRecurse !== maskToken.matches[maskToken.matches.indexOf(match) - 1]) {\n\t\t\t\t\tvar qt = match;\n\t\t\t\t\tfor (var qndx = (ndxInitializer.length > 0) ? ndxInitializer.shift() : 0; (qndx < (isNaN(qt.quantifier.max) ? qndx + 1 : qt.quantifier.max)) && testPos <= pos; qndx++) {\n\t\t\t\t\t\tvar tokenGroup = maskToken.matches[maskToken.matches.indexOf(qt) - 1];\n\t\t\t\t\t\tmatch = handleMatch(tokenGroup, [qndx].concat(loopNdx), tokenGroup); //set the tokenGroup as quantifierRecurse marker\n\t\t\t\t\t\tif (match) {\n\t\t\t\t\t\t\t//get latest match\n\t\t\t\t\t\t\tlatestMatch = matches[matches.length - 1].match;\n\t\t\t\t\t\t\t//mark optionality\n\t\t\t\t\t\t\t//TODO FIX RECURSIVE QUANTIFIERS\n\t\t\t\t\t\t\tlatestMatch.optionalQuantifier = qndx >= qt.quantifier.min;\n\t\t\t\t\t\t\t// console.log(pos + \" \" + qt.quantifier.min + \" \" + latestMatch.optionalQuantifier);\n\t\t\t\t\t\t\tlatestMatch.jit = (qndx || 1) * tokenGroup.matches.indexOf(latestMatch) >= qt.quantifier.jit;\n\t\t\t\t\t\t\tif (latestMatch.optionalQuantifier && isFirstMatch(latestMatch, tokenGroup)) {\n\t\t\t\t\t\t\t\tinsertStop = true;\n\t\t\t\t\t\t\t\ttestPos = pos; //match the position after the group\n\t\t\t\t\t\t\t\tbreak; //stop quantifierloop && search for next possible match\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (latestMatch.jit /*&& !latestMatch.optionalQuantifier*/) {\n\t\t\t\t\t\t\t\t//always set jitOffset, isvalid checks when to apply\n\t\t\t\t\t\t\t\tmaskset.jitOffset[pos] = tokenGroup.matches.length - tokenGroup.matches.indexOf(latestMatch);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tmatch = resolveTestFromToken(match, ndxInitializer, loopNdx, quantifierRecurse);\n\t\t\t\t\tif (match) return true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttestPos++;\n\t\t\t}\n\t\t}\n\n\t\t//the offset is set in the quantifierloop when git masking is used\n\t\tfor (var tndx = (ndxInitializer.length > 0 ? ndxInitializer.shift() : 0); tndx < maskToken.matches.length; tndx++) {\n\t\t\tif (maskToken.matches[tndx].isQuantifier !== true) {\n\t\t\t\tvar match = handleMatch(maskToken.matches[tndx], [tndx].concat(loopNdx), quantifierRecurse);\n\t\t\t\tif (match && testPos === pos) {\n\t\t\t\t\treturn match;\n\t\t\t\t} else if (testPos > pos) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction mergeLocators(pos, tests) {\n\t\tlet locator = [], alternation;\n\t\tif (!Array.isArray(tests)) tests = [tests];\n\n\t\tif (tests.length > 0) {\n\t\t\tif (tests[0].alternation === undefined || opts.keepStatic === true) {\n\t\t\t\tlocator = determineTestTemplate.call(inputmask, pos, tests.slice()).locator.slice();\n\t\t\t\tif (locator.length === 0) locator = tests[0].locator.slice();\n\t\t\t} else {\n\t\t\t\ttests.forEach(function (tst) {\n\t\t\t\t\tif (tst.def !== \"\") {\n\t\t\t\t\t\tif (locator.length === 0) {\n\t\t\t\t\t\t\talternation = tst.alternation;\n\t\t\t\t\t\t\tlocator = tst.locator.slice();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (tst.locator[alternation] && locator[alternation].toString().indexOf(tst.locator[alternation]) === -1) {\n\t\t\t\t\t\t\t\tlocator[alternation] += \",\" + tst.locator[alternation];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn locator;\n\t}\n\n\tif (pos > -1 && (inputmask.maxLength === undefined || pos < inputmask.maxLength)) {\n\t\tif (ndxIntlzr === undefined) { //determine index initializer\n\t\t\tvar previousPos = pos - 1,\n\t\t\t\ttest;\n\t\t\twhile ((test = maskset.validPositions[previousPos] || maskset.tests[previousPos]) === undefined && previousPos > -1) {\n\t\t\t\tpreviousPos--;\n\t\t\t}\n\t\t\tif (test !== undefined && previousPos > -1) {\n\t\t\t\tndxInitializer = mergeLocators(previousPos, test);\n\t\t\t\tcacheDependency = ndxInitializer.join(\"\");\n\t\t\t\ttestPos = previousPos;\n\t\t\t}\n\t\t}\n\t\tif (maskset.tests[pos] && maskset.tests[pos][0].cd === cacheDependency) { //cacheDependency is set on all tests, just check on the first\n\t\t\treturn maskset.tests[pos];\n\t\t}\n\t\tfor (var mtndx = ndxInitializer.shift(); mtndx < maskTokens.length; mtndx++) {\n\t\t\tvar match = resolveTestFromToken(maskTokens[mtndx], ndxInitializer, [mtndx]);\n\t\t\tif ((match && testPos === pos) || testPos > pos) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tif (matches.length === 0 || insertStop) {\n\t\tmatches.push({\n\t\t\tmatch: {\n\t\t\t\tfn: null,\n\t\t\t\tstatic: true,\n\t\t\t\toptionality: false,\n\t\t\t\tcasing: null,\n\t\t\t\tdef: \"\",\n\t\t\t\tplaceholder: \"\"\n\t\t\t},\n\t\t\tlocator: [],\n\t\t\tmloc: {},\n\t\t\tcd: cacheDependency\n\t\t});\n\t}\n\n\tif (ndxIntlzr !== undefined && maskset.tests[pos]) { //prioritize full tests for caching\n\t\treturn $.extend(true, [], matches);\n\t}\n\tmaskset.tests[pos] = $.extend(true, [], matches); //set a clone to prevent overwriting some props\n\t// console.log(pos + \" - \" + JSON.stringify(matches));\n\treturn maskset.tests[pos];\n}\n","const ua = (window.navigator && window.navigator.userAgent) || \"\",\n\tie = (ua.indexOf(\"MSIE \") > 0) || (ua.indexOf(\"Trident/\") > 0),\n\tmobile = \"ontouchstart\" in window, //not entirely correct but will currently do\n\tiemobile = /iemobile/i.test(ua),\n\tiphone = /iphone/i.test(ua) && !iemobile;\n\nexport {ua, ie, mobile, iemobile, iphone};","import keyCode from \"./keycode.json\";\nimport {getMaskTemplate, getPlaceholder, getTest} from \"./validation-tests\";\nimport {\n\tcaret,\n\tdetermineNewCaretPosition,\n\tgetBuffer, getBufferTemplate,\n\tgetLastValidPosition,\n\tisMask,\n\tresetMaskSet,\n\tseekNext\n} from \"./positioning\";\nimport {isComplete, isValid, refreshFromBuffer} from \"./validation\";\nimport {ie} from \"./environment\";\nimport {EventHandlers} from \"./eventhandlers\";\n\n\nexport {applyInputValue, clearOptionalTail, checkVal, HandleNativePlaceholder, unmaskedvalue, writeBuffer};\n\nfunction applyInputValue(input, value) {\n\tconst inputmask = input ? input.inputmask : this, opts = inputmask.opts;\n\n\tinput.inputmask.refreshValue = false;\n\tif (typeof opts.onBeforeMask === \"function\") value = opts.onBeforeMask.call(inputmask, value, opts) || value;\n\tvalue = value.toString().split(\"\");\n\tcheckVal(input, true, false, value);\n\tinputmask.undoValue = getBuffer.call(inputmask).join(\"\");\n\tif ((opts.clearMaskOnLostFocus || opts.clearIncomplete) && input.inputmask._valueGet() === getBufferTemplate.call(inputmask).join(\"\") && getLastValidPosition.call(inputmask) === -1) {\n\t\tinput.inputmask._valueSet(\"\");\n\t}\n}\n\n//todo put on prototype?\nfunction clearOptionalTail(buffer) {\n\tconst inputmask = this;\n\n\tbuffer.length = 0;\n\tvar template = getMaskTemplate.call(inputmask, true, 0, true, undefined, true), lmnt;\n\twhile ((lmnt = template.shift()) !== undefined) buffer.push(lmnt);\n\treturn buffer;\n}\n\nfunction checkVal(input, writeOut, strict, nptvl, initiatingEvent) {\n\tconst inputmask = input ? input.inputmask : this,\n\t\tmaskset = inputmask.maskset,\n\t\topts = inputmask.opts,$ = inputmask.dependencyLib;\n\n\tvar inputValue = nptvl.slice(),\n\t\tcharCodes = \"\",\n\t\tinitialNdx = -1,\n\t\tresult = undefined, skipOptionalPartCharacter = opts.skipOptionalPartCharacter;\n\topts.skipOptionalPartCharacter = \"\"; //see issue #2311\n\n\tfunction isTemplateMatch(ndx, charCodes) {\n\t\tvar targetTemplate = getMaskTemplate.call(inputmask, true, 0).slice(ndx, seekNext.call(inputmask, ndx)).join(\"\").replace(/'/g, \"\"),\n\t\t\tcharCodeNdx = targetTemplate.indexOf(charCodes);\n\t\t//strip spaces from targetTemplate\n\t\twhile (charCodeNdx > 0 && targetTemplate[charCodeNdx - 1] === \" \") charCodeNdx--;\n\n\t\tvar match = charCodeNdx === 0 && !isMask.call(inputmask, ndx)\n\t\t\t&& (getTest.call(inputmask, ndx).match.nativeDef === charCodes.charAt(0)\n\t\t\t\t|| (getTest.call(inputmask, ndx).match.static === true && getTest.call(inputmask, ndx).match.nativeDef === (\"'\" + charCodes.charAt(0)))\n\t\t\t\t|| (getTest.call(inputmask, ndx).match.nativeDef === \" \" && (getTest.call(inputmask, ndx + 1).match.nativeDef === charCodes.charAt(0)\n\t\t\t\t\t|| (getTest.call(inputmask, ndx + 1).match.static === true && getTest.call(inputmask, ndx + 1).match.nativeDef === (\"'\" + charCodes.charAt(0))))));\n\n\t\tif (!match && charCodeNdx > 0 && !isMask.call(inputmask, ndx, false, true)) {\n\t\t\tvar nextPos = seekNext.call(inputmask, ndx);\n\t\t\tif (inputmask.caretPos.begin < nextPos) {\n\t\t\t\tinputmask.caretPos = {begin: nextPos};\n\t\t\t}\n\t\t}\n\t\treturn match;\n\t}\n\n\tresetMaskSet.call(inputmask);\n\tmaskset.tests = {}; //reset tests ~ possible after alternating\n\tinitialNdx = opts.radixPoint ? determineNewCaretPosition.call(inputmask, {begin: 0, end: 0}).begin : 0;\n\tmaskset.p = initialNdx;\n\tinputmask.caretPos = {begin: initialNdx};\n\n\tvar staticMatches = [], prevCaretPos = inputmask.caretPos;\n\tinputValue.forEach( function ( charCode, ndx) {\n\t\tif (charCode !== undefined) { //inputfallback strips some elements out of the inputarray.  $.each logically presents them as undefined\n\t\t\tif (maskset.validPositions[ndx] === undefined && inputValue[ndx] === getPlaceholder.call(inputmask, ndx) && isMask.call(inputmask, ndx, true) &&\n\t\t\t\tisValid.call(inputmask, ndx, inputValue[ndx], true, undefined, undefined, true) === false) {\n\t\t\t\tmaskset.p++;\n\t\t\t} else {\n\t\t\t\tvar keypress = new $.Event(\"_checkval\");\n\t\t\t\tkeypress.which = charCode.toString().charCodeAt(0);\n\t\t\t\tcharCodes += charCode;\n\t\t\t\tvar lvp = getLastValidPosition.call(inputmask, undefined, true);\n\t\t\t\tif (!isTemplateMatch(initialNdx, charCodes)) {\n\t\t\t\t\tresult = EventHandlers.keypressEvent.call(input || inputmask, keypress, true, false, strict, inputmask.caretPos.begin);\n\n\t\t\t\t\tif (result) {\n\t\t\t\t\t\tinitialNdx = inputmask.caretPos.begin + 1;\n\t\t\t\t\t\tcharCodes = \"\";\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresult = EventHandlers.keypressEvent.call(input || inputmask, keypress, true, false, strict, lvp + 1);\n\t\t\t\t}\n\t\t\t\tif (result) {\n\t\t\t\t\tif (result.pos !== undefined && maskset.validPositions[result.pos] && maskset.validPositions[result.pos].match.static === true && maskset.validPositions[result.pos].alternation === undefined) {\n\t\t\t\t\t\tstaticMatches.push(result.pos);\n\t\t\t\t\t\tif (!inputmask.isRTL) {\n\t\t\t\t\t\t\tresult.forwardPosition = result.pos + 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\twriteBuffer.call(inputmask, undefined, getBuffer.call(inputmask), result.forwardPosition, keypress, false);\n\t\t\t\t\tinputmask.caretPos = {begin: result.forwardPosition, end: result.forwardPosition};\n\t\t\t\t\tprevCaretPos = inputmask.caretPos;\n\t\t\t\t} else {\n\t\t\t\t\tinputmask.caretPos = prevCaretPos;\n\t\t\t\t}  //restore the caret position from before the failed validation\n\t\t\t}\n\t\t}\n\t});\n\tif (staticMatches.length > 0) {\n\t\tvar sndx, validPos, nextValid = seekNext.call(inputmask, -1, undefined, false);\n\t\tif ((!isComplete.call(inputmask, getBuffer.call(inputmask)) && staticMatches.length <= nextValid)\n\t\t\t|| (isComplete.call(inputmask, getBuffer.call(inputmask)) && staticMatches.length > 0 && (staticMatches.length !== nextValid && staticMatches[0] === 0))) { //should check if is sequence starting from 0\n\t\t\tvar nextSndx = nextValid;\n\t\t\twhile ((sndx = staticMatches.shift()) !== undefined) {\n\t\t\t\tvar keypress = new $.Event(\"_checkval\");\n\t\t\t\tvalidPos = maskset.validPositions[sndx];\n\t\t\t\tvalidPos.generatedInput = true;\n\t\t\t\tkeypress.which = validPos.input.charCodeAt(0);\n\t\t\t\tresult = EventHandlers.keypressEvent.call(input, keypress, true, false, strict, nextSndx);\n\t\t\t\tif (result && result.pos !== undefined && result.pos !== sndx && maskset.validPositions[result.pos] && maskset.validPositions[result.pos].match.static === true) {\n\t\t\t\t\tstaticMatches.push(result.pos);\n\t\t\t\t} else if (!result) break;\n\t\t\t\tnextSndx++;\n\t\t\t}\n\t\t} else { //mark al statics as generated\n\t\t\t// while ((sndx = staticMatches.pop())) {\n\t\t\t// \tvalidPos = maskset.validPositions[sndx];\n\t\t\t// \tif (validPos) {\n\t\t\t// \t\tvalidPos.generatedInput = true;\n\t\t\t// \t}\n\t\t\t// }\n\t\t}\n\t}\n\tif (writeOut) {\n\t\twriteBuffer.call(inputmask, input, getBuffer.call(inputmask), result ? result.forwardPosition : inputmask.caretPos.begin, initiatingEvent || new $.Event(\"checkval\"), initiatingEvent && initiatingEvent.type === \"input\" && inputmask.undoValue !== getBuffer.call(inputmask).join(\"\"));\n\t\t// for (var vndx in maskset.validPositions) {\n\t\t// \tif (maskset.validPositions[vndx].match.generated !== true) { //only remove non forced generated\n\t\t// \t\tdelete maskset.validPositions[vndx].generatedInput; //clear generated markings ~ consider initializing with a  value as fully typed\n\t\t// \t}\n\t\t// }\n\t}\n\topts.skipOptionalPartCharacter = skipOptionalPartCharacter;\n}\n\nfunction HandleNativePlaceholder(npt, value) {\n\tconst inputmask = npt ? npt.inputmask : this;\n\n\tif (ie) {\n\t\tif (npt.inputmask._valueGet() !== value && (npt.placeholder !== value || npt.placeholder === \"\")) {\n\t\t\tvar buffer = getBuffer.call(inputmask).slice(),\n\t\t\t\tnptValue = npt.inputmask._valueGet();\n\t\t\tif (nptValue !== value) {\n\t\t\t\tvar lvp = getLastValidPosition.call(inputmask);\n\t\t\t\tif (lvp === -1 && nptValue === getBufferTemplate.call(inputmask).join(\"\")) {\n\t\t\t\t\tbuffer = [];\n\t\t\t\t} else if (lvp !== -1) { //clearout optional tail of the mask\n\t\t\t\t\tclearOptionalTail.call(inputmask, buffer);\n\t\t\t\t}\n\t\t\t\twriteBuffer(npt, buffer);\n\t\t\t}\n\t\t}\n\t} else if (npt.placeholder !== value) {\n\t\tnpt.placeholder = value;\n\t\tif (npt.placeholder === \"\") npt.removeAttribute(\"placeholder\");\n\t}\n}\n\nfunction unmaskedvalue(input) {\n\tconst inputmask = input ? input.inputmask : this,\n\t\topts = inputmask.opts,\n\t\tmaskset = inputmask.maskset;\n\n\tif (input) {\n\t\tif (input.inputmask === undefined) {\n\t\t\treturn input.value;\n\t\t}\n\t\tif (input.inputmask && input.inputmask.refreshValue) { //forced refresh from the value form.reset\n\t\t\tapplyInputValue(input, input.inputmask._valueGet(true));\n\t\t}\n\t}\n\tvar umValue = [],\n\t\tvps = maskset.validPositions;\n\tfor (var pndx in vps) {\n\t\tif (vps[pndx] && vps[pndx].match && (vps[pndx].match.static != true || (Array.isArray(maskset.metadata) && vps[pndx].generatedInput !== true))) {\n\t\t\t//only include generated input with multiple masks (check on metadata)\n\t\t\tumValue.push(vps[pndx].input);\n\t\t}\n\t}\n\tvar unmaskedValue = umValue.length === 0 ? \"\" : (inputmask.isRTL ? umValue.reverse() : umValue).join(\"\");\n\tif (typeof opts.onUnMask === \"function\") {\n\t\tvar bufferValue = (inputmask.isRTL ? getBuffer.call(inputmask).slice().reverse() : getBuffer.call(inputmask)).join(\"\");\n\t\tunmaskedValue = opts.onUnMask.call(inputmask, bufferValue, unmaskedValue, opts);\n\t}\n\treturn unmaskedValue;\n}\n\nfunction writeBuffer(input, buffer, caretPos, event, triggerEvents) {\n\tconst inputmask = input ? input.inputmask : this,\n\t\topts = inputmask.opts,\n\t\t$ = inputmask.dependencyLib;\n\n\tif (event && typeof opts.onBeforeWrite === \"function\") {\n\t\t//    buffer = buffer.slice(); //prevent uncontrolled manipulation of the internal buffer\n\t\tvar result = opts.onBeforeWrite.call(inputmask, event, buffer, caretPos, opts);\n\t\tif (result) {\n\t\t\tif (result.refreshFromBuffer) {\n\t\t\t\tvar refresh = result.refreshFromBuffer;\n\t\t\t\trefreshFromBuffer.call(inputmask, refresh === true ? refresh : refresh.start, refresh.end, result.buffer || buffer);\n\t\t\t\tbuffer = getBuffer.call(inputmask, true);\n\t\t\t}\n\t\t\tif (caretPos !== undefined) caretPos = result.caret !== undefined ? result.caret : caretPos;\n\t\t}\n\t}\n\tif (input !== undefined) {\n\t\tinput.inputmask._valueSet(buffer.join(\"\"));\n\t\tif (caretPos !== undefined && (event === undefined || event.type !== \"blur\")) {\n\t\t\tcaret.call(inputmask, input, caretPos, undefined, undefined, (event !== undefined && event.type === \"keydown\" && (event.keyCode === keyCode.DELETE || event.keyCode === keyCode.BACKSPACE)));\n\t\t}\n\t\tif (triggerEvents === true) {\n\t\t\tvar $input = $(input), nptVal = input.inputmask._valueGet();\n\t\t\tinput.inputmask.skipInputEvent = true;\n\t\t\t$input.trigger(\"input\");\n\t\t\tsetTimeout(function () { //timeout needed for IE\n\t\t\t\tif (nptVal === getBufferTemplate.call(inputmask).join(\"\")) {\n\t\t\t\t\t$input.trigger(\"cleared\");\n\t\t\t\t} else if (isComplete.call(inputmask, buffer) === true) {\n\t\t\t\t\t$input.trigger(\"complete\");\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t}\n\t}\n}\n","import {\n\tcaret, determineNewCaretPosition,\n\tgetBuffer, getBufferTemplate,\n\tgetLastValidPosition, isMask,\n\tresetMaskSet,\n\tseekNext,\n\tseekPrevious,\n\ttranslatePosition\n} from \"./positioning\";\nimport keyCode from \"./keycode.json\";\nimport {iemobile, iphone} from \"./environment\";\nimport {handleRemove, isComplete, isValid} from \"./validation\";\nimport {applyInputValue, checkVal, clearOptionalTail, HandleNativePlaceholder, writeBuffer} from \"./inputHandling\";\nimport {getPlaceholder, getTest} from \"./validation-tests\";\n\nexport {EventHandlers};\n\nvar EventHandlers = {\n\tkeydownEvent: function (e) {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts, $ = inputmask.dependencyLib,\n\t\t\tmaskset = inputmask.maskset;\n\n\t\tvar input = this,\n\t\t\t$input = $(input),\n\t\t\tk = e.keyCode,\n\t\t\tpos = caret.call(inputmask, input);\n\n\t\tvar kdResult = opts.onKeyDown.call(this, e, getBuffer.call(inputmask), pos, opts);\n\t\tif (kdResult !== undefined) return kdResult;\n\n\t\t//backspace, delete, and escape get special treatment\n\t\tif (k === keyCode.BACKSPACE || k === keyCode.DELETE || (iphone && k === keyCode.BACKSPACE_SAFARI) || (e.ctrlKey && k === keyCode.X && !(\"oncut\" in input))) { //backspace/delete\n\t\t\te.preventDefault(); //stop default action but allow propagation\n\t\t\thandleRemove.call(inputmask, input, k, pos);\n\t\t\twriteBuffer(input, getBuffer.call(inputmask, true), maskset.p, e, input.inputmask._valueGet() !== getBuffer.call(inputmask).join(\"\"));\n\t\t} else if (k === keyCode.END || k === keyCode.PAGE_DOWN) { //when END or PAGE_DOWN pressed set position at lastmatch\n\t\t\te.preventDefault();\n\t\t\tvar caretPos = seekNext.call(inputmask, getLastValidPosition.call(inputmask));\n\t\t\tcaret.call(inputmask, input, e.shiftKey ? pos.begin : caretPos, caretPos, true);\n\t\t} else if ((k === keyCode.HOME && !e.shiftKey) || k === keyCode.PAGE_UP) { //Home or page_up\n\t\t\te.preventDefault();\n\t\t\tcaret.call(inputmask, input, 0, e.shiftKey ? pos.begin : 0, true);\n\t\t} else if (((opts.undoOnEscape && k === keyCode.ESCAPE) || (k === 90 && e.ctrlKey)) && e.altKey !== true) { //escape && undo && #762\n\t\t\tcheckVal(input, true, false, inputmask.undoValue.split(\"\"));\n\t\t\t$input.trigger(\"click\");\n\t\t\t// } else if (k === keyCode.INSERT && !(e.shiftKey || e.ctrlKey) && inputmask.userOptions.insertMode === undefined) { //insert\n\t\t\t// \topts.insertMode = !opts.insertMode;\n\t\t\t// \tcaret(input, pos.begin, pos.end);\n\t\t} else if (opts.tabThrough === true && k === keyCode.TAB) {\n\t\t\tif (e.shiftKey === true) {\n\t\t\t\tpos.end = seekPrevious.call(inputmask, pos.end, true);\n\t\t\t\tif (getTest.call(inputmask, pos.end - 1).match.static === true) {\n\t\t\t\t\tpos.end--;\n\t\t\t\t}\n\t\t\t\tpos.begin = seekPrevious.call(inputmask, pos.end, true);\n\t\t\t\tif (pos.begin >= 0 && pos.end > 0) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tcaret.call(inputmask, input, pos.begin, pos.end);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tpos.begin = seekNext.call(inputmask, pos.begin, true);\n\t\t\t\tpos.end = seekNext.call(inputmask, pos.begin, true);\n\t\t\t\tif (pos.end < maskset.maskLength) pos.end--;\n\t\t\t\tif (pos.begin <= maskset.maskLength) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tcaret.call(inputmask, input, pos.begin, pos.end);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!e.shiftKey) {\n\t\t\tif (opts.insertModeVisual && opts.insertMode === false) {\n\t\t\t\tif (k === keyCode.RIGHT) {\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tvar caretPos = caret.call(inputmask, input);\n\t\t\t\t\t\tcaret.call(inputmask, input, caretPos.begin);\n\t\t\t\t\t}, 0);\n\t\t\t\t} else if (k === keyCode.LEFT) {\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tvar caretPos = {\n\t\t\t\t\t\t\tbegin: translatePosition.call(inputmask, input.inputmask.caretPos.begin),\n\t\t\t\t\t\t\tend: translatePosition.call(inputmask, input.inputmask.caretPos.end)\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (inputmask.isRTL) {\n\t\t\t\t\t\t\tcaret.call(inputmask, input, caretPos.begin + (caretPos.begin === maskset.maskLength ? 0 : 1));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcaret.call(inputmask, input, caretPos.begin - (caretPos.begin === 0 ? 0 : 1));\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tinputmask.ignorable = opts.ignorables.includes(k);\n\t},\n\tkeypressEvent: function (e, checkval, writeOut, strict, ndx) {\n\t\tconst inputmask = this.inputmask || this, opts = inputmask.opts, $ = inputmask.dependencyLib,\n\t\t\tmaskset = inputmask.maskset;\n\n\t\tvar input = inputmask.el,\n\t\t\t$input = $(input),\n\t\t\tk = e.which || e.charCode || e.keyCode;\n\n\t\tif (checkval !== true && (!(e.ctrlKey && e.altKey) && (e.ctrlKey || e.metaKey || inputmask.ignorable))) {\n\t\t\tif (k === keyCode.ENTER && inputmask.undoValue !== getBuffer.call(inputmask).join(\"\")) {\n\t\t\t\tinputmask.undoValue = getBuffer.call(inputmask).join(\"\");\n\t\t\t\t// e.preventDefault();\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t$input.trigger(\"change\");\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t\tinputmask.skipInputEvent = true; //skip the input as otherwise the skipped char could be picked up for validation by the inputfallback\n\t\t\treturn true;\n\t\t} else if (k) {\n\t\t\t//special treat the decimal separator\n\t\t\tif ((k === 44 || k === 46) && e.location === 3 && opts.radixPoint !== \"\") k = opts.radixPoint.charCodeAt(0);\n\t\t\tvar pos = checkval ? {\n\t\t\t\t\tbegin: ndx,\n\t\t\t\t\tend: ndx\n\t\t\t\t} : caret.call(inputmask, input),\n\t\t\t\tforwardPosition, c = String.fromCharCode(k);\n\n\t\t\tmaskset.writeOutBuffer = true;\n\t\t\tvar valResult = isValid.call(inputmask, pos, c, strict, undefined, undefined, undefined, checkval);\n\t\t\tif (valResult !== false) {\n\t\t\t\tresetMaskSet.call(inputmask, true);\n\t\t\t\tforwardPosition = valResult.caret !== undefined ? valResult.caret : seekNext.call(inputmask, valResult.pos.begin ? valResult.pos.begin : valResult.pos);\n\t\t\t\tmaskset.p = forwardPosition; //needed for checkval\n\t\t\t}\n\n\t\t\tforwardPosition = ((opts.numericInput && valResult.caret === undefined) ? seekPrevious.call(inputmask, forwardPosition) : forwardPosition);\n\t\t\tif (writeOut !== false) {\n\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\topts.onKeyValidation.call(input, k, valResult);\n\t\t\t\t}, 0);\n\t\t\t\tif (maskset.writeOutBuffer && valResult !== false) {\n\t\t\t\t\tvar buffer = getBuffer.call(inputmask);\n\t\t\t\t\twriteBuffer(input, buffer, forwardPosition, e, checkval !== true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\te.preventDefault();\n\n\t\t\tif (checkval) {\n\t\t\t\tif (valResult !== false) valResult.forwardPosition = forwardPosition;\n\t\t\t\treturn valResult;\n\t\t\t}\n\t\t}\n\t},\n\tkeyupEvent: function (e) {\n\t\tconst inputmask = this.inputmask;\n\n\t\tif (inputmask.isComposing && (e.keyCode === keyCode.KEY_229 || e.keyCode === keyCode.ENTER)) {\n\t\t\tinputmask.$el.trigger(\"input\");\n\t\t}\n\t},\n\tpasteEvent: function (e) {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts;\n\n\t\tvar input = this,\n\t\t\tinputValue = inputmask._valueGet(true),\n\t\t\tcaretPos = caret.call(inputmask, input),\n\t\t\ttempValue;\n\n\t\tif (inputmask.isRTL) {\n\t\t\ttempValue = caretPos.end;\n\t\t\tcaretPos.end = caretPos.begin;\n\t\t\tcaretPos.begin = tempValue;\n\t\t}\n\n\t\tvar valueBeforeCaret = inputValue.substr(0, caretPos.begin),\n\t\t\tvalueAfterCaret = inputValue.substr(caretPos.end, inputValue.length);\n\n\t\tif (valueBeforeCaret == (inputmask.isRTL ? getBufferTemplate.call(inputmask).slice().reverse() : getBufferTemplate.call(inputmask)).slice(0, caretPos.begin).join(\"\")) valueBeforeCaret = \"\";\n\t\tif (valueAfterCaret == (inputmask.isRTL ? getBufferTemplate.call(inputmask).slice().reverse() : getBufferTemplate.call(inputmask)).slice(caretPos.end).join(\"\")) valueAfterCaret = \"\";\n\n\t\tif (window.clipboardData && window.clipboardData.getData) { // IE\n\t\t\tinputValue = valueBeforeCaret + window.clipboardData.getData(\"Text\") + valueAfterCaret;\n\t\t} else if (e.clipboardData && e.clipboardData.getData) {\n\t\t\tinputValue = valueBeforeCaret + e.clipboardData.getData(\"text/plain\") + valueAfterCaret;\n\t\t} else {\n\t\t\treturn true;\n\t\t} //allow native paste event as fallback ~ masking will continue by inputfallback\n\n\t\tvar pasteValue = inputValue;\n\t\tif (typeof opts.onBeforePaste === \"function\") {\n\t\t\tpasteValue = opts.onBeforePaste.call(inputmask, inputValue, opts);\n\t\t\tif (pasteValue === false) {\n\t\t\t\treturn e.preventDefault();\n\t\t\t}\n\t\t\tif (!pasteValue) {\n\t\t\t\tpasteValue = inputValue;\n\t\t\t}\n\t\t}\n\t\tcheckVal(input, true, false, pasteValue.toString().split(\"\"), e);\n\t\t// writeBuffer(input, getBuffer(), seekNext(getLastValidPosition()), e, inputmask.undoValue !== getBuffer().join(\"\"));\n\n\t\treturn e.preventDefault();\n\t},\n\tinputFallBackEvent: function (e) { //fallback when keypress is not triggered\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts, $ = inputmask.dependencyLib;\n\n\t\tfunction ieMobileHandler(input, inputValue, caretPos) {\n\t\t\tif (iemobile) { //iemobile just sets the character at the end althought the caret position is correctly set\n\t\t\t\tvar inputChar = inputValue.replace(getBuffer.call(inputmask).join(\"\"), \"\");\n\t\t\t\tif (inputChar.length === 1) {\n\t\t\t\t\tvar iv = inputValue.split(\"\");\n\t\t\t\t\tiv.splice(caretPos.begin, 0, inputChar);\n\t\t\t\t\tinputValue = iv.join(\"\");\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn inputValue;\n\t\t}\n\n\t\tfunction analyseChanges(inputValue, buffer, caretPos) {\n\t\t\tvar frontPart = inputValue.substr(0, caretPos.begin).split(\"\"),\n\t\t\t\tbackPart = inputValue.substr(caretPos.begin).split(\"\"),\n\t\t\t\tfrontBufferPart = buffer.substr(0, caretPos.begin).split(\"\"),\n\t\t\t\tbackBufferPart = buffer.substr(caretPos.begin).split(\"\");\n\n\t\t\tvar fpl = frontPart.length >= frontBufferPart.length ? frontPart.length : frontBufferPart.length,\n\t\t\t\tbpl = backPart.length >= backBufferPart.length ? backPart.length : backBufferPart.length,\n\t\t\t\tbl, i, action = \"\", data = [], marker = \"~\", placeholder;\n\n\t\t\t//align buffers\n\t\t\twhile (frontPart.length < fpl) frontPart.push(marker);\n\t\t\twhile (frontBufferPart.length < fpl) frontBufferPart.push(marker);\n\t\t\twhile (backPart.length < bpl) backPart.unshift(marker);\n\t\t\twhile (backBufferPart.length < bpl) backBufferPart.unshift(marker);\n\n\t\t\tvar newBuffer = frontPart.concat(backPart);\n\t\t\tvar oldBuffer = frontBufferPart.concat(backBufferPart);\n\n\t\t\t// console.log(\"N \" + newBuffer);\n\t\t\t// console.log(\"O \" + oldBuffer);\n\n\t\t\tfor (i = 0, bl = newBuffer.length; i < bl; i++) {\n\t\t\t\tplaceholder = getPlaceholder.call(inputmask, translatePosition.call(inputmask, i));\n\t\t\t\tswitch (action) {\n\t\t\t\t\tcase \"insertText\":\n\t\t\t\t\t\tif (oldBuffer[i - 1] === newBuffer[i] && caretPos.begin == newBuffer.length - 1) {\n\t\t\t\t\t\t\tdata.push(newBuffer[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\ti = bl;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"insertReplacementText\":\n\t\t\t\t\t\tif (newBuffer[i] === marker) { //extend selection\n\t\t\t\t\t\t\tcaretPos.end++;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// breakout loop\n\t\t\t\t\t\t\ti = bl;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"deleteContentBackward\":\n\t\t\t\t\t\tif (newBuffer[i] === marker) {\n\t\t\t\t\t\t\tcaretPos.end++;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t//breakout loop\n\t\t\t\t\t\t\ti = bl;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif (newBuffer[i] !== oldBuffer[i]) {\n\t\t\t\t\t\t\tif ((newBuffer[i + 1] === marker || newBuffer[i + 1] === placeholder || newBuffer[i + 1] === undefined) && ((oldBuffer[i] === placeholder && oldBuffer[i + 1] === marker) || oldBuffer[i] === marker)) {  //basic insert\n\t\t\t\t\t\t\t\taction = \"insertText\";\n\t\t\t\t\t\t\t\tdata.push(newBuffer[i]);\n\t\t\t\t\t\t\t\tcaretPos.begin--;\n\t\t\t\t\t\t\t\tcaretPos.end--;\n\t\t\t\t\t\t\t} else if (oldBuffer[i + 1] === marker && oldBuffer[i] === newBuffer[i + 1]) { //insert between\n\t\t\t\t\t\t\t\taction = \"insertText\";\n\t\t\t\t\t\t\t\tdata.push(newBuffer[i]);\n\t\t\t\t\t\t\t\tcaretPos.begin--;\n\t\t\t\t\t\t\t\tcaretPos.end--;\n\t\t\t\t\t\t\t} else if (newBuffer[i] !== placeholder && newBuffer[i] !== marker &&\n\t\t\t\t\t\t\t\t(newBuffer[i + 1] === marker || (oldBuffer[i] !== newBuffer[i] && oldBuffer[i + 1] === newBuffer[i + 1] /*single char replacement*/))) { //replace selection\n\t\t\t\t\t\t\t\taction = \"insertReplacementText\";\n\t\t\t\t\t\t\t\tdata.push(newBuffer[i]);\n\t\t\t\t\t\t\t\tcaretPos.begin--;\n\t\t\t\t\t\t\t} else if (newBuffer[i] === marker) {  //delete~backspace\n\t\t\t\t\t\t\t\taction = \"deleteContentBackward\";\n\t\t\t\t\t\t\t\tif (isMask.call(inputmask, translatePosition.call(inputmask, i), true) || oldBuffer[i] === opts.radixPoint) caretPos.end++;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ti = bl;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\taction: action,\n\t\t\t\tdata: data,\n\t\t\t\tcaret: caretPos\n\t\t\t};\n\t\t}\n\n\t\tvar input = this,\n\t\t\tinputValue = input.inputmask._valueGet(true),\n\t\t\tbuffer = (inputmask.isRTL ? getBuffer.call(inputmask).slice().reverse() : getBuffer.call(inputmask)).join(\"\"),\n\t\t\tcaretPos = caret.call(inputmask, input, undefined, undefined, true);\n\n\t\tif (buffer !== inputValue) {\n\t\t\t// inputValue = radixPointHandler(input, inputValue, caretPos);\n\t\t\tinputValue = ieMobileHandler(input, inputValue, caretPos);\n\n\t\t\tvar changes = analyseChanges(inputValue, buffer, caretPos);\n\n\t\t\t// console.log(JSON.stringify(changes));\n\t\t\tif ((input.inputmask.shadowRoot || document).activeElement !== input) {\n\t\t\t\tinput.focus();\n\t\t\t}\n\t\t\twriteBuffer(input, getBuffer.call(inputmask));\n\t\t\tcaret.call(inputmask, input, caretPos.begin, caretPos.end, true);\n\t\t\tswitch (changes.action) {\n\t\t\t\tcase \"insertText\":\n\t\t\t\tcase \"insertReplacementText\":\n\t\t\t\t\tchanges.data.forEach(function (entry, ndx) {\n\t\t\t\t\t\tvar keypress = new $.Event(\"keypress\");\n\t\t\t\t\t\tkeypress.which = entry.charCodeAt(0);\n\t\t\t\t\t\tinputmask.ignorable = false; //make sure ignorable is ignored ;-)\n\t\t\t\t\t\tEventHandlers.keypressEvent.call(input, keypress);\n\t\t\t\t\t});\n\t\t\t\t\tsetTimeout(function () {  //#2195 trigger keyup to help some other plugins to track changes\n\t\t\t\t\t\tinputmask.$el.trigger(\"keyup\");\n\t\t\t\t\t}, 0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"deleteContentBackward\":\n\t\t\t\t\tvar keydown = new $.Event(\"keydown\");\n\t\t\t\t\tkeydown.keyCode = keyCode.BACKSPACE;\n\t\t\t\t\tEventHandlers.keydownEvent.call(input, keydown);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tapplyInputValue(input, inputValue);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\te.preventDefault();\n\t\t}\n\t},\n\tcompositionendEvent: function (e) {\n\t\tconst inputmask = this.inputmask;\n\n\t\tinputmask.isComposing = false;\n\t\tinputmask.$el.trigger(\"input\");\n\t},\n\tsetValueEvent: function (e) {\n\t\tconst inputmask = this.inputmask;\n\t\tvar input = this,\n\t\t\tvalue = (e && e.detail) ? e.detail[0] : arguments[1];\n\n\t\tif (value === undefined) {\n\t\t\tvalue = input.inputmask._valueGet(true);\n\t\t}\n\n\t\tapplyInputValue(input, value);\n\n\t\tif ((e.detail && e.detail[1] !== undefined) || arguments[2] !== undefined) {\n\t\t\tcaret.call(inputmask, input, e.detail ? e.detail[1] : arguments[2]);\n\t\t}\n\t}\n\t,\n\tfocusEvent: function (e) {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts;\n\t\tvar input = this,\n\t\t\tnptValue = input.inputmask._valueGet();\n\n\t\tif (opts.showMaskOnFocus) {\n\t\t\tif (nptValue !== getBuffer.call(inputmask).join(\"\")) {\n\t\t\t\twriteBuffer(input, getBuffer.call(inputmask), seekNext.call(inputmask, getLastValidPosition.call(inputmask)));\n\t\t\t} /*else if (mouseEnter === false) { //only executed on focus without mouseenter\n\t\t\t\t\tcaret(input, seekNext(getLastValidPosition()));\n\t\t\t\t}*/\n\t\t}\n\t\tif (opts.positionCaretOnTab === true && inputmask.mouseEnter === false && (!isComplete.call(inputmask, getBuffer.call(inputmask)) || getLastValidPosition.call(inputmask) === -1)) {\n\t\t\tEventHandlers.clickEvent.apply(input, [e, true]);\n\t\t}\n\t\tinputmask.undoValue = getBuffer.call(inputmask).join(\"\");\n\t},\n\tinvalidEvent: function (e) {\n\t\tthis.inputmask.validationEvent = true;\n\t},\n\tmouseleaveEvent: function () {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts;\n\n\t\tvar input = this;\n\t\tinputmask.mouseEnter = false;\n\t\tif (opts.clearMaskOnLostFocus && (input.inputmask.shadowRoot || document).activeElement !== input) {\n\t\t\tHandleNativePlaceholder(input, inputmask.originalPlaceholder);\n\t\t}\n\t},\n\tclickEvent: function (e, tabbed) {\n\t\tconst inputmask = this.inputmask;\n\n\t\tvar input = this;\n\t\tif ((input.inputmask.shadowRoot || document).activeElement === input) {\n\t\t\tvar newCaretPosition = determineNewCaretPosition.call(inputmask, caret.call(inputmask, input), tabbed);\n\t\t\tif (newCaretPosition !== undefined) {\n\t\t\t\tcaret.call(inputmask, input, newCaretPosition);\n\t\t\t}\n\t\t}\n\t},\n\tcutEvent: function (e) {\n\t\tconst inputmask = this.inputmask, maskset = inputmask.maskset;\n\n\t\tvar input = this,\n\t\t\tpos = caret.call(inputmask, input);\n\n\t\t//correct clipboardData\n\t\tvar clipboardData = window.clipboardData || e.clipboardData,\n\t\t\tclipData = inputmask.isRTL ? getBuffer.call(inputmask).slice(pos.end, pos.begin) : getBuffer.call(inputmask).slice(pos.begin, pos.end);\n\t\tclipboardData.setData(\"text\", inputmask.isRTL ? clipData.reverse().join(\"\") : clipData.join(\"\"));\n\t\tif (document.execCommand) document.execCommand(\"copy\"); // copy selected content to system clipbaord\n\n\t\thandleRemove.call(inputmask, input, keyCode.DELETE, pos);\n\t\twriteBuffer(input, getBuffer.call(inputmask), maskset.p, e, inputmask.undoValue !== getBuffer.call(inputmask).join(\"\"));\n\t}\n\t,\n\tblurEvent: function (e) {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts, $ = inputmask.dependencyLib;\n\n\t\tvar $input = $(this),\n\t\t\tinput = this;\n\t\tif (input.inputmask) {\n\t\t\tHandleNativePlaceholder(input, inputmask.originalPlaceholder);\n\t\t\tvar nptValue = input.inputmask._valueGet(),\n\t\t\t\tbuffer = getBuffer.call(inputmask).slice();\n\n\t\t\tif (nptValue !== \"\") {\n\t\t\t\tif (opts.clearMaskOnLostFocus) {\n\t\t\t\t\tif (getLastValidPosition.call(inputmask) === -1 && nptValue === getBufferTemplate.call(inputmask).join(\"\")) {\n\t\t\t\t\t\tbuffer = [];\n\t\t\t\t\t} else { //clearout optional tail of the mask\n\t\t\t\t\t\tclearOptionalTail.call(inputmask, buffer);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (isComplete.call(inputmask, buffer) === false) {\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t$input.trigger(\"incomplete\");\n\t\t\t\t\t}, 0);\n\t\t\t\t\tif (opts.clearIncomplete) {\n\t\t\t\t\t\tresetMaskSet.call(inputmask);\n\t\t\t\t\t\tif (opts.clearMaskOnLostFocus) {\n\t\t\t\t\t\t\tbuffer = [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tbuffer = getBufferTemplate.call(inputmask).slice();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\twriteBuffer(input, buffer, undefined, e);\n\t\t\t}\n\n\t\t\tif (inputmask.undoValue !== getBuffer.call(inputmask).join(\"\")) {\n\t\t\t\tinputmask.undoValue = getBuffer.call(inputmask).join(\"\");\n\t\t\t\t$input.trigger(\"change\");\n\t\t\t}\n\t\t}\n\t}\n\t,\n\tmouseenterEvent: function () {\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts;\n\n\t\tvar input = this;\n\t\tinputmask.mouseEnter = true;\n\t\tif ((input.inputmask.shadowRoot || document).activeElement !== input) {\n\t\t\tif (inputmask.originalPlaceholder == undefined && input.placeholder !== inputmask.originalPlaceholder) {\n\t\t\t\tinputmask.originalPlaceholder = input.placeholder;\n\t\t\t}\n\t\t\tif (opts.showMaskOnHover) {\n\t\t\t\tHandleNativePlaceholder(input, (inputmask.isRTL ? getBufferTemplate.call(inputmask).slice().reverse() : getBufferTemplate.call(inputmask)).join(\"\"));\n\t\t\t}\n\t\t}\n\t}\n\t,\n\tsubmitEvent: function () { //trigger change on submit if any\n\t\tconst inputmask = this.inputmask, opts = inputmask.opts;\n\n\t\tif (inputmask.undoValue !== getBuffer.call(inputmask).join(\"\")) {\n\t\t\tinputmask.$el.trigger(\"change\");\n\t\t}\n\t\tif (opts.clearMaskOnLostFocus && getLastValidPosition.call(inputmask) === -1 && inputmask._valueGet && inputmask._valueGet() === getBufferTemplate.call(inputmask).join(\"\")) {\n\t\t\tinputmask._valueSet(\"\"); //clear masktemplete on submit and still has focus\n\t\t}\n\t\tif (opts.clearIncomplete && isComplete.call(inputmask, getBuffer.call(inputmask)) === false) {\n\t\t\tinputmask._valueSet(\"\");\n\t\t}\n\t\tif (opts.removeMaskOnSubmit) {\n\t\t\tinputmask._valueSet(inputmask.unmaskedvalue(), true);\n\t\t\tsetTimeout(function () {\n\t\t\t\twriteBuffer(inputmask.el, getBuffer.call(inputmask));\n\t\t\t}, 0);\n\t\t}\n\t},\n\tresetEvent: function () {\n\t\tconst inputmask = this.inputmask;\n\n\t\tinputmask.refreshValue = true; //indicate a forced refresh when there is a call to the value before leaving the triggering event fn\n\t\tsetTimeout(function () {\n\t\t\tapplyInputValue(inputmask.el, inputmask._valueGet(true));\n\t\t}, 0);\n\t}\n};\n","import {\n\tdetermineTestTemplate,\n\tgetDecisionTaker,\n\tgetPlaceholder,\n\tgetTest,\n\tgetTests,\n\tgetTestTemplate\n} from \"./validation-tests\";\nimport keyCode from \"./keycode.json\";\nimport {\n\tdetermineLastRequiredPosition, determineNewCaretPosition,\n\tgetBuffer,\n\tgetLastValidPosition,\n\tisMask,\n\tresetMaskSet,\n\tseekNext,\n\tseekPrevious\n} from \"./positioning\";\nimport {EventHandlers} from \"./eventhandlers\";\n\nexport {alternate, checkAlternationMatch, isComplete, isValid, refreshFromBuffer, revalidateMask, handleRemove};\n\n//tobe put on prototype?\nfunction alternate(maskPos, c, strict, fromIsValid, rAltPos, selection) { //pos == true => generalize\n\tconst inputmask = this,\n\t\t$ = this.dependencyLib,\n\t\topts = this.opts,\n\t\tmaskset = inputmask.maskset;\n\n\tvar validPsClone = $.extend(true, {}, maskset.validPositions),\n\t\ttstClone = $.extend(true, {}, maskset.tests),\n\t\tlastAlt,\n\t\talternation,\n\t\tisValidRslt = false, returnRslt = false,\n\t\taltPos, prevAltPos, i, validPos,\n\t\tdecisionPos,\n\t\tlAltPos = rAltPos !== undefined ? rAltPos : getLastValidPosition.call(inputmask), nextPos, input, begin, end;\n\n\tif (selection) {\n\t\tbegin = selection.begin;\n\t\tend = selection.end;\n\t\tif (selection.begin > selection.end) {\n\t\t\tbegin = selection.end;\n\t\t\tend = selection.begin;\n\t\t}\n\t}\n\tif (lAltPos === -1 && rAltPos === undefined) { //do not recurse when already paste the beginning\n\t\tlastAlt = 0;\n\t\tprevAltPos = getTest.call(inputmask, lastAlt);\n\t\talternation = prevAltPos.alternation;\n\t} else {\n\t\t//find last modified alternation\n\t\tfor (; lAltPos >= 0; lAltPos--) {\n\t\t\taltPos = maskset.validPositions[lAltPos];\n\t\t\tif (altPos && altPos.alternation !== undefined) {\n\t\t\t\tif (prevAltPos && prevAltPos.locator[altPos.alternation] !== altPos.locator[altPos.alternation]) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tlastAlt = lAltPos;\n\t\t\t\talternation = maskset.validPositions[lastAlt].alternation;\n\t\t\t\tprevAltPos = altPos;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (alternation !== undefined) {\n\t\tdecisionPos = parseInt(lastAlt);\n\t\tmaskset.excludes[decisionPos] = maskset.excludes[decisionPos] || [];\n\t\tif (maskPos !== true) { //generalize\n\t\t\tmaskset.excludes[decisionPos].push(getDecisionTaker(prevAltPos) + \":\" + prevAltPos.alternation);\n\t\t}\n\n\t\tvar validInputs = [], resultPos = -1;\n\t\tfor (i = decisionPos; i < getLastValidPosition.call(inputmask, undefined, true) + 1; i++) {\n\t\t\tif (resultPos === -1 && maskPos <= i && c !== undefined) {\n\t\t\t\tvalidInputs.push(c);\n\t\t\t\tresultPos = validInputs.length - 1;\n\t\t\t}\n\t\t\tvalidPos = maskset.validPositions[i];\n\t\t\tif (validPos && validPos.generatedInput !== true && (selection === undefined || (i < begin || i >= end))) {\n\t\t\t\tvalidInputs.push(validPos.input);\n\t\t\t}\n\t\t\tdelete maskset.validPositions[i];\n\t\t}\n\t\tif (resultPos === -1 && c !== undefined) {\n\t\t\tvalidInputs.push(c);\n\t\t\tresultPos = validInputs.length - 1;\n\t\t}\n\n\t\twhile (maskset.excludes[decisionPos] !== undefined && maskset.excludes[decisionPos].length < 10) {\n\t\t\t// maskset.tests[decisionPos] = undefined; //clear decisionPos\n\t\t\tmaskset.tests = {};  //clear all\n\t\t\tresetMaskSet.call(inputmask, true); //clear getbuffer\n\t\t\tisValidRslt = true;\n\t\t\tfor (i = 0; i < validInputs.length; i++) {\n\t\t\t\tnextPos = isValidRslt.caret || (getLastValidPosition.call(inputmask, undefined, true) + 1);\n\t\t\t\tinput = validInputs[i];\n\t\t\t\tif (!(isValidRslt = isValid.call(inputmask, nextPos, input, false, fromIsValid, true))) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (i === resultPos) {\n\t\t\t\t\treturnRslt = isValidRslt;\n\t\t\t\t}\n\t\t\t\tif (maskPos == true && isValidRslt) {  //return validposition on generalise\n\t\t\t\t\treturnRslt = {caretPos: i};\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!isValidRslt) {\n\t\t\t\tresetMaskSet.call(inputmask);\n\t\t\t\tprevAltPos = getTest.call(inputmask, decisionPos);  //get the current decisionPos to exclude ~ needs to be before restoring the initial validation\n\t\t\t\t//reset & revert\n\t\t\t\tmaskset.validPositions = $.extend(true, {}, validPsClone);\n\t\t\t\tmaskset.tests = $.extend(true, {}, tstClone); //refresh tests after possible alternating\n\t\t\t\tif (maskset.excludes[decisionPos]) {\n\t\t\t\t\tvar decisionTaker = getDecisionTaker(prevAltPos);\n\t\t\t\t\tif (maskset.excludes[decisionPos].indexOf(decisionTaker + \":\" + prevAltPos.alternation) !== -1) {\n\t\t\t\t\t\treturnRslt = alternate.call(inputmask, maskPos, c, strict, fromIsValid, decisionPos - 1, selection);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tmaskset.excludes[decisionPos].push(decisionTaker + \":\" + prevAltPos.alternation);\n\t\t\t\t\tfor (i = decisionPos; i < getLastValidPosition.call(inputmask, undefined, true) + 1; i++) delete maskset.validPositions[i];\n\t\t\t\t} else { //latest alternation\n\t\t\t\t\treturnRslt = alternate.call(inputmask, maskPos, c, strict, fromIsValid, decisionPos - 1, selection);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\t//reset alternation excludes\n\tif (!returnRslt || opts.keepStatic !== false) {\n\t\tdelete maskset.excludes[decisionPos];\n\t}\n\treturn returnRslt;\n}\n\nfunction casing(elem, test, pos) {\n\tconst opts = this.opts,\n\t\tmaskset = this.maskset;\n\n\tswitch (opts.casing || test.casing) {\n\t\tcase \"upper\":\n\t\t\telem = elem.toUpperCase();\n\t\t\tbreak;\n\t\tcase \"lower\":\n\t\t\telem = elem.toLowerCase();\n\t\t\tbreak;\n\t\tcase \"title\":\n\t\t\tvar posBefore = maskset.validPositions[pos - 1];\n\t\t\tif (pos === 0 || posBefore && posBefore.input === String.fromCharCode(keyCode.SPACE)) {\n\t\t\t\telem = elem.toUpperCase();\n\t\t\t} else {\n\t\t\t\telem = elem.toLowerCase();\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tif (typeof opts.casing === \"function\") {\n\t\t\t\tvar args = Array.prototype.slice.call(arguments);\n\t\t\t\targs.push(maskset.validPositions);\n\t\t\t\telem = opts.casing.apply(this, args);\n\t\t\t}\n\t}\n\n\treturn elem;\n}\n\n//tobe put on prototype?\nfunction checkAlternationMatch(altArr1, altArr2, na) {\n\tconst opts = this.opts;\n\n\tvar altArrC = opts.greedy ? altArr2 : altArr2.slice(0, 1),\n\t\tisMatch = false,\n\t\tnaArr = na !== undefined ? na.split(\",\") : [],\n\t\tnaNdx;\n\n\t//remove no alternate indexes from alternation array\n\tfor (var i = 0; i < naArr.length; i++) {\n\t\tif ((naNdx = altArr1.indexOf(naArr[i])) !== -1) {\n\t\t\taltArr1.splice(naNdx, 1);\n\t\t}\n\t}\n\n\tfor (var alndx = 0; alndx < altArr1.length; alndx++) {\n\t\tif (altArrC.includes(altArr1[alndx])) {\n\t\t\tisMatch = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn isMatch;\n}\n\n//tobe put on prototype?\nfunction handleRemove(input, k, pos, strict, fromIsValid) {\n\tconst inputmask = this, maskset = this.maskset, opts = this.opts;\n\n\tif (opts.numericInput || inputmask.isRTL) {\n\t\tif (k === keyCode.BACKSPACE) {\n\t\t\tk = keyCode.DELETE;\n\t\t} else if (k === keyCode.DELETE) {\n\t\t\tk = keyCode.BACKSPACE;\n\t\t}\n\n\t\tif (inputmask.isRTL) {\n\t\t\tvar pend = pos.end;\n\t\t\tpos.end = pos.begin;\n\t\t\tpos.begin = pend;\n\t\t}\n\t}\n\n\tvar lvp = getLastValidPosition.call(inputmask, undefined, true);\n\tif (pos.end >= getBuffer.call(inputmask).length && lvp >= pos.end) { //handle numeric negate symbol offset, due to  dynamic jit masking\n\t\tpos.end = lvp + 1;\n\t}\n\n\tif (k === keyCode.BACKSPACE) {\n\t\tif ((pos.end - pos.begin < 1)) {\n\t\t\tpos.begin = seekPrevious.call(inputmask, pos.begin);\n\t\t}\n\t} else if (k === keyCode.DELETE) {\n\t\tif (pos.begin === pos.end) {\n\t\t\tpos.end = isMask.call(inputmask, pos.end, true, true) ? pos.end + 1 : seekNext.call(inputmask, pos.end) + 1;\n\t\t}\n\t}\n\tvar offset;\n\tif ((offset = revalidateMask.call(inputmask, pos)) !== false) {\n\t\tif (strict !== true && opts.keepStatic !== false || (opts.regex !== null && getTest.call(inputmask, pos.begin).match.def.indexOf(\"|\") !== -1)) { //TODO NEEDS BETTER CHECK WHEN TO ALTERNATE  ~ opts regex isn\"t good enough\n\t\t\tvar result = alternate.call(inputmask, true);\n\t\t\tif (result) {\n\t\t\t\tvar newPos = result.caret !== undefined ? result.caret : (result.pos ? seekNext.call(inputmask, result.pos.begin ? result.pos.begin : result.pos) : getLastValidPosition.call(inputmask, -1, true));\n\t\t\t\tif (k !== keyCode.DELETE || pos.begin > newPos) {\n\t\t\t\t\tpos.begin == newPos;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (strict !== true) {\n\t\t\tmaskset.p = k === keyCode.DELETE ? pos.begin + offset : pos.begin;\n\t\t}\n\t}\n}\n\n//tobe put on prototype?\nfunction isComplete(buffer) { //return true / false / undefined (repeat *)\n\tconst inputmask = this, opts = this.opts, maskset = this.maskset;\n\n\tif (typeof opts.isComplete === \"function\") return opts.isComplete(buffer, opts);\n\tif (opts.repeat === \"*\") return undefined;\n\tvar complete = false,\n\t\tlrp = determineLastRequiredPosition.call(inputmask, true),\n\t\taml = seekPrevious.call(inputmask, lrp.l);\n\n\tif (lrp.def === undefined || lrp.def.newBlockMarker || lrp.def.optionality || lrp.def.optionalQuantifier) {\n\t\tcomplete = true;\n\t\tfor (var i = 0; i <= aml; i++) {\n\t\t\tvar test = getTestTemplate.call(inputmask, i).match;\n\t\t\tif ((test.static !== true && maskset.validPositions[i] === undefined && test.optionality !== true && test.optionalQuantifier !== true) || (test.static === true && buffer[i] !== getPlaceholder.call(inputmask, i, test))) {\n\t\t\t\tcomplete = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn complete;\n}\n\n//tobe put on prototype?\nfunction isValid(pos, c, strict, fromIsValid, fromAlternate, validateOnly, fromCheckval) { //strict true ~ no correction or autofill\n\tconst inputmask = this,\n\t\t$ = this.dependencyLib,\n\t\topts = this.opts,\n\t\tel = inputmask.el,\n\t\tmaskset = inputmask.maskset;\n\n\tfunction isSelection(posObj) {\n\t\treturn inputmask.isRTL ? (posObj.begin - posObj.end) > 1 || ((posObj.begin - posObj.end) === 1) :\n\t\t\t(posObj.end - posObj.begin) > 1 || ((posObj.end - posObj.begin) === 1);\n\t}\n\n\tstrict = strict === true; //always set a value to strict to prevent possible strange behavior in the extensions\n\n\tvar maskPos = pos;\n\tif (pos.begin !== undefined) { //position was a position object - used to handle a delete by typing over a selection\n\t\tmaskPos = inputmask.isRTL ? pos.end : pos.begin;\n\t}\n\n\tfunction processCommandObject(commandObj) {\n\t\tif (commandObj !== undefined) {\n\t\t\tif (commandObj.remove !== undefined) { //remove position(s)\n\t\t\t\tif (!Array.isArray(commandObj.remove)) commandObj.remove = [commandObj.remove];\n\t\t\t\tcommandObj.remove.sort(function (a, b) {\n\t\t\t\t\treturn b.pos - a.pos;\n\t\t\t\t}).forEach(function (lmnt) {\n\t\t\t\t\trevalidateMask.call(inputmask, {begin: lmnt, end: lmnt + 1});\n\t\t\t\t});\n\t\t\t\tcommandObj.remove = undefined;\n\t\t\t}\n\t\t\tif (commandObj.insert !== undefined) { //insert position(s)\n\t\t\t\tif (!Array.isArray(commandObj.insert)) commandObj.insert = [commandObj.insert];\n\t\t\t\tcommandObj.insert.sort(function (a, b) {\n\t\t\t\t\treturn a.pos - b.pos;\n\t\t\t\t}).forEach(function (lmnt) {\n\t\t\t\t\tif (lmnt.c !== \"\") {\n\t\t\t\t\t\tisValid.call(inputmask, lmnt.pos, lmnt.c, lmnt.strict !== undefined ? lmnt.strict : true, lmnt.fromIsValid !== undefined ? lmnt.fromIsValid : fromIsValid);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tcommandObj.insert = undefined;\n\t\t\t}\n\n\t\t\tif (commandObj.refreshFromBuffer && commandObj.buffer) {\n\t\t\t\tvar refresh = commandObj.refreshFromBuffer;\n\t\t\t\trefreshFromBuffer.call(inputmask, refresh === true ? refresh : refresh.start, refresh.end, commandObj.buffer);\n\t\t\t\tcommandObj.refreshFromBuffer = undefined;\n\t\t\t}\n\n\t\t\tif (commandObj.rewritePosition !== undefined) {\n\t\t\t\tmaskPos = commandObj.rewritePosition;\n\t\t\t\t// commandObj.rewritePosition = undefined;\n\t\t\t\tcommandObj = true;\n\t\t\t}\n\t\t}\n\t\treturn commandObj;\n\t}\n\n\tfunction _isValid(position, c, strict) {\n\t\tvar rslt = false;\n\n\t\tgetTests.call(inputmask, position).every(function (tst, ndx) {\n\t\t\tvar test = tst.match;\n\t\t\t//make sure the buffer is set and correct\n\t\t\tgetBuffer.call(inputmask, true);\n\t\t\t//return is false or a json object => { pos: ??, c: ??} or true\n\t\t\trslt = test.fn != null ?\n\t\t\t\ttest.fn.test(c, maskset, position, strict, opts, isSelection(pos)) : (c === test.def || c === opts.skipOptionalPartCharacter) && test.def !== \"\" ? //non mask\n\t\t\t\t\t{\n\t\t\t\t\t\tc: getPlaceholder.call(inputmask, position, test, true) || test.def,\n\t\t\t\t\t\tpos: position\n\t\t\t\t\t} : false;\n\n\t\t\tif (rslt !== false) {\n\t\t\t\tvar elem = rslt.c !== undefined ? rslt.c : c, validatedPos = position;\n\t\t\t\telem = (elem === opts.skipOptionalPartCharacter && test.static === true) ?\n\t\t\t\t\t(getPlaceholder.call(inputmask, position, test, true) || test.def) : elem;\n\n\t\t\t\trslt = processCommandObject(rslt);\n\n\t\t\t\tif (rslt !== true && rslt.pos !== undefined && rslt.pos !== position) { //their is a position offset\n\t\t\t\t\tvalidatedPos = rslt.pos;\n\t\t\t\t}\n\n\t\t\t\tif (rslt !== true && rslt.pos === undefined && rslt.c === undefined) {\n\t\t\t\t\treturn false; //breakout if nothing to insert\n\t\t\t\t}\n\n\t\t\t\tif (revalidateMask.call(inputmask, pos, $.extend({}, tst, {\n\t\t\t\t\t\"input\": casing.call(inputmask, elem, test, validatedPos)\n\t\t\t\t}), fromIsValid, validatedPos) === false) {\n\t\t\t\t\trslt = false;\n\t\t\t\t}\n\t\t\t\treturn false; //break from loop\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\t\treturn rslt;\n\t}\n\n\tvar result = true,\n\t\tpositionsClone = $.extend(true, {}, maskset.validPositions); //clone the currentPositions\n\n\tif (opts.keepStatic === false && maskset.excludes[maskPos] !== undefined && fromAlternate !== true && fromIsValid !== true) {\n\t\tfor (var i = maskPos; i < (inputmask.isRTL ? pos.begin : pos.end); i++) {\n\t\t\tif (maskset.excludes[i] !== undefined) {\n\t\t\t\tmaskset.excludes[i] = undefined;\n\t\t\t\tdelete maskset.tests[i];\n\t\t\t}\n\t\t}\n\t}\n\n\tif (typeof opts.preValidation === \"function\" && fromIsValid !== true && validateOnly !== true) {\n\t\tresult = opts.preValidation.call(el, getBuffer.call(inputmask), maskPos, c, isSelection(pos), opts, maskset, pos, strict || fromAlternate);\n\t\tresult = processCommandObject(result);\n\t}\n\tif (result === true) { //preValidation result\n\t\tif (inputmask.maxLength === undefined || maskPos < inputmask.maxLength) {\n\t\t\tresult = _isValid(maskPos, c, strict);\n\t\t\tif ((!strict || fromIsValid === true) && result === false && validateOnly !== true) {\n\t\t\t\tvar currentPosValid = maskset.validPositions[maskPos];\n\t\t\t\tif (currentPosValid && currentPosValid.match.static === true && (currentPosValid.match.def === c || c === opts.skipOptionalPartCharacter)) {\n\t\t\t\t\tresult = {\n\t\t\t\t\t\t\"caret\": seekNext.call(inputmask, maskPos)\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tif (opts.insertMode || maskset.validPositions[seekNext.call(inputmask, maskPos)] === undefined || pos.end > maskPos) { //does the input match on a further position?\n\t\t\t\t\t\tvar skip = false;\n\t\t\t\t\t\tif (maskset.jitOffset[maskPos] && maskset.validPositions[seekNext.call(inputmask, maskPos)] === undefined) {\n\t\t\t\t\t\t\tresult = isValid.call(inputmask, maskPos + maskset.jitOffset[maskPos], c, true);\n\t\t\t\t\t\t\tif (result !== false) {\n\t\t\t\t\t\t\t\tif (fromAlternate !== true) result.caret = maskPos;\n\t\t\t\t\t\t\t\tskip = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (pos.end > maskPos) {\n\t\t\t\t\t\t\tmaskset.validPositions[maskPos] = undefined;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!skip && !isMask.call(inputmask, maskPos, opts.keepStatic && maskPos === 0)) {\n\t\t\t\t\t\t\tfor (var nPos = maskPos + 1, snPos = seekNext.call(inputmask, maskPos, false, maskPos !== 0); nPos <= snPos; nPos++) {\n\t\t\t\t\t\t\t\t// if (!isMask(nPos, true)) {\n\t\t\t\t\t\t\t\t// \tcontinue;\n\t\t\t\t\t\t\t\t// }\n\t\t\t\t\t\t\t\tresult = _isValid(nPos, c, strict);\n\t\t\t\t\t\t\t\tif (result !== false) {\n\t\t\t\t\t\t\t\t\tresult = trackbackPositions.call(inputmask, maskPos, result.pos !== undefined ? result.pos : nPos) || result;\n\t\t\t\t\t\t\t\t\tmaskPos = nPos;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tresult = false;\n\t\t}\n\n\n\t\tif (result === false && opts.keepStatic && (isComplete.call(inputmask, getBuffer.call(inputmask)) || maskPos === 0) && !strict && fromAlternate !== true) { //try fuzzy alternator logic\n\t\t\tresult = alternate.call(inputmask, maskPos, c, strict, fromIsValid, undefined, pos);\n\t\t} else if (isSelection(pos) && maskset.tests[maskPos] && maskset.tests[maskPos].length > 1 && opts.keepStatic && !strict && fromAlternate !== true) { //selection clears an alternated keepstatic mask ~ #2189\n\t\t\tresult = alternate.call(inputmask, true);\n\t\t}\n\n\t\tif (result === true) {\n\t\t\tresult = {\n\t\t\t\t\"pos\": maskPos\n\t\t\t};\n\t\t}\n\t}\n\tif (typeof opts.postValidation === \"function\" && fromIsValid !== true && validateOnly !== true) {\n\t\tvar postResult = opts.postValidation.call(el, getBuffer.call(inputmask, true), pos.begin !== undefined ? (inputmask.isRTL ? pos.end : pos.begin) : pos, c, result, opts, maskset, strict, fromCheckval);\n\t\tif (postResult !== undefined) {\n\t\t\tresult = postResult === true ? result : postResult;\n\t\t}\n\t}\n\n\tif (result && result.pos === undefined) {\n\t\tresult.pos = maskPos;\n\t}\n\n\tif (result === false || validateOnly === true) {\n\t\tresetMaskSet.call(inputmask, true);\n\t\tmaskset.validPositions = $.extend(true, {}, positionsClone); //revert validation changes\n\t} else {\n\t\ttrackbackPositions.call(inputmask, undefined, maskPos, true);\n\t}\n\n\tvar endResult = processCommandObject(result);\n\t// console.log(\"returned result \" + JSON.stringify(endResult));\n\treturn endResult;\n}\n\n//tobe put on prototype?\nfunction positionCanMatchDefinition(pos, testDefinition, opts) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset;\n\n\tvar valid = false,\n\t\ttests = getTests.call(inputmask, pos);\n\tfor (var tndx = 0; tndx < tests.length; tndx++) {\n\t\tif (tests[tndx].match &&\n\t\t\t((tests[tndx].match[\"nativeDef\"] === testDefinition.match[opts.shiftPositions ? \"def\" : \"nativeDef\"] && (!opts.shiftPositions || !testDefinition.match.static)) ||\n\t\t\t\ttests[tndx].match[\"nativeDef\"] === testDefinition.match[\"nativeDef\"])) {\n\t\t\tvalid = true;\n\t\t\tbreak;\n\t\t} else if (tests[tndx].match && tests[tndx].match[\"def\"] === testDefinition.match[\"nativeDef\"]) {\n\t\t\tvalid = undefined;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (valid === false) {\n\t\tif (maskset.jitOffset[pos] !== undefined) {\n\t\t\tvalid = positionCanMatchDefinition.call(inputmask, pos + maskset.jitOffset[pos], testDefinition, opts);\n\t\t}\n\t}\n\treturn valid;\n}\n\n//tobe put on prototype?\nfunction refreshFromBuffer(start, end, buffer) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset,\n\t\topts = this.opts,\n\t\t$ = this.dependencyLib,\n\t\tel = inputmask.el;\n\n\t// checkVal.call(inputmask, el, false, true, isRTL ? buffer.reverse() : buffer);\n\tvar i, p, skipOptionalPartCharacter = opts.skipOptionalPartCharacter,\n\t\tbffr = inputmask.isRTL ? buffer.slice().reverse() : buffer;\n\topts.skipOptionalPartCharacter = \"\";\n\tif (start === true) {\n\t\tresetMaskSet.call(inputmask);\n\t\tmaskset.tests = {}; //refresh tests after possible alternating\n\t\tstart = 0;\n\t\tend = buffer.length;\n\t\tp = determineNewCaretPosition.call(inputmask, {begin: 0, end: 0}, false).begin;\n\t} else {\n\t\tfor (i = start; i < end; i++) {\n\t\t\tdelete maskset.validPositions[i];\n\t\t}\n\t\tp = start;\n\t}\n\n\tvar keypress = new $.Event(\"keypress\");\n\tfor (i = start; i < end; i++) {\n\t\tkeypress.which = bffr[i].toString().charCodeAt(0);\n\t\tinputmask.ignorable = false; //make sure ignorable is ignored ;-)\n\t\tvar valResult = EventHandlers.keypressEvent.call(el, keypress, true, false, false, p);\n\t\tif (valResult !== false) {\n\t\t\tp = valResult.forwardPosition;\n\t\t}\n\t}\n\n\topts.skipOptionalPartCharacter = skipOptionalPartCharacter;\n}\n\n//tobe put on prototype?\n//fill in best positions according the current input\nfunction trackbackPositions(originalPos, newPos, fillOnly) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset,\n\t\t$ = this.dependencyLib;\n\n\t// console.log(\"trackbackPositions \" + originalPos + \" \" + newPos);\n\tif (originalPos === undefined) {\n\t\t//find previous valid\n\t\tfor (originalPos = newPos - 1; originalPos > 0; originalPos--) {\n\t\t\tif (maskset.validPositions[originalPos]) break;\n\t\t}\n\t}\n\tfor (var ps = originalPos; ps < newPos; ps++) {\n\t\tif (maskset.validPositions[ps] === undefined && !isMask.call(inputmask, ps, true)) {\n\t\t\tvar vp = ps == 0 ? getTest.call(inputmask, ps) : maskset.validPositions[ps - 1];\n\t\t\tif (vp) {\n\t\t\t\tvar tests = getTests.call(inputmask, ps).slice();\n\t\t\t\tif (tests[tests.length - 1].match.def === \"\") tests.pop();\n\t\t\t\tvar bestMatch = determineTestTemplate.call(inputmask, ps, tests), np;\n\t\t\t\tif (bestMatch && (bestMatch.match.jit !== true || (bestMatch.match.newBlockMarker === \"master\" && (np = maskset.validPositions[ps + 1]) && np.match.optionalQuantifier === true))) {\n\t\t\t\t\tbestMatch = $.extend({}, bestMatch, {\n\t\t\t\t\t\t\"input\": getPlaceholder.call(inputmask, ps, bestMatch.match, true) || bestMatch.match.def\n\t\t\t\t\t});\n\t\t\t\t\tbestMatch.generatedInput = true;\n\t\t\t\t\trevalidateMask.call(inputmask, ps, bestMatch, true);\n\n\t\t\t\t\tif (fillOnly !== true) {\n\t\t\t\t\t\t//revalidate the new position to update the locator value\n\t\t\t\t\t\tvar cvpInput = maskset.validPositions[newPos].input;\n\t\t\t\t\t\tmaskset.validPositions[newPos] = undefined;\n\t\t\t\t\t\treturn isValid.call(inputmask, newPos, cvpInput, true, true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n//tobe put on prototype?\nfunction revalidateMask(pos, validTest, fromIsValid, validatedPos) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset,\n\t\topts = this.opts,\n\t\t$ = this.dependencyLib;\n\n\tfunction IsEnclosedStatic(pos, valids, selection) {\n\t\tvar posMatch = valids[pos];\n\t\tif (posMatch !== undefined && posMatch.match.static === true && posMatch.match.optionality !== true && (valids[0] === undefined || valids[0].alternation === undefined)) {\n\t\t\tvar prevMatch = selection.begin <= pos - 1 ? valids[pos - 1] && valids[pos - 1].match.static === true && valids[pos - 1] : valids[pos - 1],\n\t\t\t\tnextMatch = selection.end > pos + 1 ? valids[pos + 1] && valids[pos + 1].match.static === true && valids[pos + 1] : valids[pos + 1];\n\t\t\treturn prevMatch && nextMatch;\n\t\t}\n\t\treturn false;\n\t}\n\n\tvar offset = 0, begin = pos.begin !== undefined ? pos.begin : pos, end = pos.end !== undefined ? pos.end : pos;\n\tif (pos.begin > pos.end) {\n\t\tbegin = pos.end;\n\t\tend = pos.begin;\n\t}\n\n\tvalidatedPos = validatedPos !== undefined ? validatedPos : begin;\n\tif (begin !== end || (opts.insertMode && maskset.validPositions[validatedPos] !== undefined && fromIsValid === undefined) || validTest === undefined) {\n\t\t//reposition & revalidate others\n\t\tvar positionsClone = $.extend(true, {}, maskset.validPositions),\n\t\t\tlvp = getLastValidPosition.call(inputmask, undefined, true),\n\t\t\ti;\n\t\tmaskset.p = begin; //needed for alternated position after overtype selection\n\n\t\tfor (i = lvp; i >= begin; i--) {\n\t\t\tdelete maskset.validPositions[i];\n\t\t\tif (validTest === undefined) delete maskset.tests[i + 1];\n\t\t}\n\n\t\tvar valid = true, j = validatedPos,\n\t\t\tposMatch = j, t, canMatch;\n\n\t\tif (validTest) {\n\t\t\tmaskset.validPositions[validatedPos] = $.extend(true, {}, validTest);\n\t\t\tposMatch++;\n\t\t\tj++;\n\t\t}\n\n\t\tfor (i = validTest ? end : end - 1; i <= lvp; i++) {\n\t\t\tif ((t = positionsClone[i]) !== undefined && t.generatedInput !== true &&\n\t\t\t\t(i >= end || (i >= begin && IsEnclosedStatic(i, positionsClone, {\n\t\t\t\t\tbegin: begin,\n\t\t\t\t\tend: end\n\t\t\t\t})))) {\n\t\t\t\twhile (getTest.call(inputmask, posMatch).match.def !== \"\") { //loop needed to match further positions\n\t\t\t\t\tif ((canMatch = positionCanMatchDefinition.call(inputmask, posMatch, t, opts)) !== false || t.match.def === \"+\") { //validated match //we still need some hackery for the + validator (numeric alias)\n\t\t\t\t\t\tif (t.match.def === \"+\") getBuffer.call(inputmask, true);\n\t\t\t\t\t\tvar result = isValid.call(inputmask, posMatch, t.input, t.match.def !== \"+\", t.match.def !== \"+\");\n\t\t\t\t\t\tvalid = result !== false;\n\t\t\t\t\t\tj = (result.pos || posMatch) + 1;\n\t\t\t\t\t\tif (!valid && canMatch) break;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t}\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\tif (validTest === undefined && t.match.static && i === pos.begin) offset++;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (!valid && posMatch > maskset.maskLength) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tposMatch++;\n\t\t\t\t}\n\t\t\t\tif (getTest.call(inputmask, posMatch).match.def == \"\") {\n\t\t\t\t\tvalid = false;\n\t\t\t\t}\n\t\t\t\t//restore position\n\t\t\t\tposMatch = j;\n\t\t\t}\n\t\t\tif (!valid) break;\n\t\t}\n\n\t\tif (!valid) {\n\t\t\tmaskset.validPositions = $.extend(true, {}, positionsClone);\n\t\t\tresetMaskSet.call(inputmask, true);\n\t\t\treturn false;\n\t\t}\n\t} else if (validTest && getTest.call(inputmask, validatedPos).match.cd === validTest.match.cd) {\n\t\tmaskset.validPositions[validatedPos] = $.extend(true, {}, validTest);\n\t}\n\n\tresetMaskSet.call(inputmask, true);\n\treturn offset;\n}\n","import {\n\tdetermineTestTemplate,\n\tgetMaskTemplate,\n\tgetPlaceholder,\n\tgetTest,\n\tgetTests,\n\tgetTestTemplate\n} from \"./validation-tests\";\nimport {checkAlternationMatch} from \"./validation\";\nimport {mask} from \"./mask\";\n\nexport {\n\tcaret,\n\tdetermineLastRequiredPosition,\n\tdetermineNewCaretPosition,\n\tgetBuffer,\n\tgetBufferTemplate,\n\tgetLastValidPosition,\n\tisMask,\n\tresetMaskSet,\n\tseekNext,\n\tseekPrevious,\n\ttranslatePosition\n};\n\n//tobe put on prototype?\nfunction caret(input, begin, end, notranslate, isDelete) {\n\tconst inputmask = this,\n\t\topts = this.opts;\n\n\tvar range;\n\tif (begin !== undefined) {\n\t\tif (Array.isArray(begin)) {\n\t\t\tend = inputmask.isRTL ? begin[0] : begin[1];\n\t\t\tbegin = inputmask.isRTL ? begin[1] : begin[0];\n\t\t}\n\t\tif (begin.begin !== undefined) {\n\t\t\tend = inputmask.isRTL ? begin.begin : begin.end;\n\t\t\tbegin = inputmask.isRTL ? begin.end : begin.begin;\n\t\t}\n\t\tif (typeof begin === \"number\") {\n\t\t\tbegin = notranslate ? begin : translatePosition.call(inputmask, begin);\n\t\t\tend = notranslate ? end : translatePosition.call(inputmask, end);\n\t\t\tend = (typeof end == \"number\") ? end : begin;\n\t\t\t// if (!$(input).is(\":visible\")) {\n\t\t\t// \treturn;\n\t\t\t// }\n\n\t\t\tvar scrollCalc = parseInt(((input.ownerDocument.defaultView || window).getComputedStyle ? (input.ownerDocument.defaultView || window).getComputedStyle(input, null) : input.currentStyle).fontSize) * end;\n\t\t\tinput.scrollLeft = scrollCalc > input.scrollWidth ? scrollCalc : 0;\n\t\t\tinput.inputmask.caretPos = {begin: begin, end: end}; //track caret internally\n\t\t\tif (opts.insertModeVisual && opts.insertMode === false && begin === end) {\n\t\t\t\tif (!isDelete) {\n\t\t\t\t\tend++; //set visualization for insert/overwrite mode\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (input === (input.inputmask.shadowRoot || document).activeElement) {\n\t\t\t\tif (\"setSelectionRange\" in input) {\n\t\t\t\t\tinput.setSelectionRange(begin, end);\n\t\t\t\t} else if (window.getSelection) {\n\t\t\t\t\trange = document.createRange();\n\t\t\t\t\tif (input.firstChild === undefined || input.firstChild === null) {\n\t\t\t\t\t\tvar textNode = document.createTextNode(\"\");\n\t\t\t\t\t\tinput.appendChild(textNode);\n\t\t\t\t\t}\n\t\t\t\t\trange.setStart(input.firstChild, begin < input.inputmask._valueGet().length ? begin : input.inputmask._valueGet().length);\n\t\t\t\t\trange.setEnd(input.firstChild, end < input.inputmask._valueGet().length ? end : input.inputmask._valueGet().length);\n\t\t\t\t\trange.collapse(true);\n\t\t\t\t\tvar sel = window.getSelection();\n\t\t\t\t\tsel.removeAllRanges();\n\t\t\t\t\tsel.addRange(range);\n\t\t\t\t\t//input.focus();\n\t\t\t\t} else if (input.createTextRange) {\n\t\t\t\t\trange = input.createTextRange();\n\t\t\t\t\trange.collapse(true);\n\t\t\t\t\trange.moveEnd(\"character\", end);\n\t\t\t\t\trange.moveStart(\"character\", begin);\n\t\t\t\t\trange.select();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (\"selectionStart\" in input && \"selectionEnd\" in input) {\n\t\t\tbegin = input.selectionStart;\n\t\t\tend = input.selectionEnd;\n\t\t} else if (window.getSelection) {\n\t\t\trange = window.getSelection().getRangeAt(0);\n\t\t\tif (range.commonAncestorContainer.parentNode === input || range.commonAncestorContainer === input) {\n\t\t\t\tbegin = range.startOffset;\n\t\t\t\tend = range.endOffset;\n\t\t\t}\n\t\t} else if (document.selection && document.selection.createRange) {\n\t\t\trange = document.selection.createRange();\n\t\t\tbegin = 0 - range.duplicate().moveStart(\"character\", -input.inputmask._valueGet().length);\n\t\t\tend = begin + range.text.length;\n\t\t}\n\n\t\t// if (opts.insertModeVisual && opts.insertMode === false && begin === (end - 1)) end--; //correct caret for insert/overwrite mode\n\n\t\t/*eslint-disable consistent-return */\n\t\treturn {\n\t\t\t\"begin\": notranslate ? begin : translatePosition.call(inputmask, begin),\n\t\t\t\"end\": notranslate ? end : translatePosition.call(inputmask, end)\n\t\t};\n\t\t/*eslint-enable consistent-return */\n\t}\n}\n\n//tobe put on prototype?\nfunction determineLastRequiredPosition(returnDefinition) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset,\n\t\t$ = this.dependencyLib;\n\n\tvar buffer = getMaskTemplate.call(inputmask, true, getLastValidPosition.call(inputmask), true, true),\n\t\tbl = buffer.length,\n\t\tpos, lvp = getLastValidPosition.call(inputmask),\n\t\tpositions = {},\n\t\tlvTest = maskset.validPositions[lvp],\n\t\tndxIntlzr = lvTest !== undefined ? lvTest.locator.slice() : undefined,\n\t\ttestPos;\n\tfor (pos = lvp + 1; pos < buffer.length; pos++) {\n\t\ttestPos = getTestTemplate.call(inputmask, pos, ndxIntlzr, pos - 1);\n\t\tndxIntlzr = testPos.locator.slice();\n\t\tpositions[pos] = $.extend(true, {}, testPos);\n\t}\n\n\tvar lvTestAlt = lvTest && lvTest.alternation !== undefined ? lvTest.locator[lvTest.alternation] : undefined;\n\tfor (pos = bl - 1; pos > lvp; pos--) {\n\t\ttestPos = positions[pos];\n\t\tif ((testPos.match.optionality ||\n\t\t\t(testPos.match.optionalQuantifier && testPos.match.newBlockMarker) ||\n\t\t\t(lvTestAlt &&\n\t\t\t\t(\n\t\t\t\t\t(lvTestAlt !== positions[pos].locator[lvTest.alternation] && testPos.match.static != true) ||\n\t\t\t\t\t(testPos.match.static === true &&\n\t\t\t\t\t\ttestPos.locator[lvTest.alternation] &&\n\t\t\t\t\t\tcheckAlternationMatch.call(inputmask, testPos.locator[lvTest.alternation].toString().split(\",\"), lvTestAlt.toString().split(\",\")) &&\n\t\t\t\t\t\tgetTests.call(inputmask, pos)[0].def !== \"\")\n\t\t\t\t)\n\t\t\t)) &&\n\t\t\tbuffer[pos] === getPlaceholder.call(inputmask, pos, testPos.match)) {\n\t\t\tbl--;\n\t\t} else {\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn returnDefinition ? {\n\t\t\"l\": bl,\n\t\t\"def\": positions[bl] ? positions[bl].match : undefined\n\t} : bl;\n}\n\n//tobe put on prototype?\nfunction determineNewCaretPosition(selectedCaret, tabbed) {\n\tconst inputmask = this,\n\t\tmaskset = this.maskset,\n\t\topts = this.opts;\n\n\tfunction doRadixFocus(clickPos) {\n\t\tif (opts.radixPoint !== \"\" && opts.digits !== 0) {\n\t\t\tvar vps = maskset.validPositions;\n\t\t\tif (vps[clickPos] === undefined || (vps[clickPos].input === getPlaceholder.call(inputmask, clickPos))) {\n\t\t\t\tif (clickPos < seekNext.call(inputmask, -1)) return true;\n\t\t\t\tvar radixPos = getBuffer.call(inputmask).indexOf(opts.radixPoint);\n\t\t\t\tif (radixPos !== -1) {\n\t\t\t\t\tfor (var vp in vps) {\n\t\t\t\t\t\tif (vps[vp] && radixPos < vp && vps[vp].input !== getPlaceholder.call(inputmask, vp)) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tif (tabbed) {\n\t\tif (inputmask.isRTL) {\n\t\t\tselectedCaret.end = selectedCaret.begin;\n\t\t} else {\n\t\t\tselectedCaret.begin = selectedCaret.end;\n\t\t}\n\t}\n\tif (selectedCaret.begin === selectedCaret.end) {\n\t\tswitch (opts.positionCaretOnClick) {\n\t\t\tcase \"none\":\n\t\t\t\tbreak;\n\t\t\tcase \"select\":\n\t\t\t\tselectedCaret = {begin: 0, end: getBuffer.call(inputmask).length};\n\t\t\t\tbreak;\n\t\t\tcase \"ignore\":\n\t\t\t\tselectedCaret.end = selectedCaret.begin = seekNext.call(inputmask, getLastValidPosition.call(inputmask));\n\t\t\t\tbreak;\n\t\t\tcase \"radixFocus\":\n\t\t\t\tif (doRadixFocus(selectedCaret.begin)) {\n\t\t\t\t\tvar radixPos = getBuffer.call(inputmask).join(\"\").indexOf(opts.radixPoint);\n\t\t\t\t\tselectedCaret.end = selectedCaret.begin = opts.numericInput ? seekNext.call(inputmask, radixPos) : radixPos;\n\t\t\t\t\tbreak;\n\t\t\t\t} //fallback to lvp\n\t\t\t// eslint-disable-next-line no-fallthrough\n\t\t\tdefault: //lvp:\n\t\t\t\tvar clickPosition = selectedCaret.begin,\n\t\t\t\t\tlvclickPosition = getLastValidPosition.call(inputmask, clickPosition, true),\n\t\t\t\t\tlastPosition = seekNext.call(inputmask, (lvclickPosition === -1 && !isMask.call(inputmask, 0)) ? -1 : lvclickPosition);\n\n\t\t\t\tif (clickPosition <= lastPosition) {\n\t\t\t\t\tselectedCaret.end = selectedCaret.begin = !isMask.call(inputmask, clickPosition, false, true) ? seekNext.call(inputmask, clickPosition) : clickPosition;\n\t\t\t\t} else {\n\t\t\t\t\tvar lvp = maskset.validPositions[lvclickPosition],\n\t\t\t\t\t\ttt = getTestTemplate.call(inputmask, lastPosition, lvp ? lvp.match.locator : undefined, lvp),\n\t\t\t\t\t\tplaceholder = getPlaceholder.call(inputmask, lastPosition, tt.match);\n\t\t\t\t\tif ((placeholder !== \"\" && getBuffer.call(inputmask)[lastPosition] !== placeholder && tt.match.optionalQuantifier !== true && tt.match.newBlockMarker !== true) || (!isMask.call(inputmask, lastPosition, opts.keepStatic, true) && tt.match.def === placeholder)) {\n\t\t\t\t\t\tvar newPos = seekNext.call(inputmask, lastPosition);\n\t\t\t\t\t\tif (clickPosition >= newPos || clickPosition === lastPosition) {\n\t\t\t\t\t\t\tlastPosition = newPos;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tselectedCaret.end = selectedCaret.begin = lastPosition;\n\t\t\t\t}\n\t\t}\n\n\t\treturn selectedCaret;\n\t}\n}\n\n\n//tobe put on prototype?\nfunction getBuffer(noCache) {\n\tconst inputmask = this, maskset = this.maskset;\n\n\tif (maskset.buffer === undefined || noCache === true) {\n\t\tmaskset.buffer = getMaskTemplate.call(inputmask, true, getLastValidPosition.call(inputmask), true);\n\t\tif (maskset._buffer === undefined) maskset._buffer = maskset.buffer.slice();\n\t}\n\treturn maskset.buffer;\n}\n\n//tobe put on prototype?\nfunction getBufferTemplate() {\n\tconst inputmask = this, maskset = this.maskset;\n\n\tif (maskset._buffer === undefined) {\n\t\t//generate template\n\t\tmaskset._buffer = getMaskTemplate.call(inputmask, false, 1);\n\t\tif (maskset.buffer === undefined) maskset.buffer = maskset._buffer.slice();\n\t}\n\treturn maskset._buffer;\n}\n\n//tobe put on prototype?\nfunction getLastValidPosition(closestTo, strict, validPositions) {\n\tconst maskset = this.maskset;\n\n\tvar before = -1,\n\t\tafter = -1,\n\t\tvalids = validPositions || maskset.validPositions; //for use in valhook ~ context switch\n\tif (closestTo === undefined) closestTo = -1;\n\tfor (var posNdx in valids) {\n\t\tvar psNdx = parseInt(posNdx);\n\t\tif (valids[psNdx] && (strict || valids[psNdx].generatedInput !== true)) {\n\t\t\tif (psNdx <= closestTo) before = psNdx;\n\t\t\tif (psNdx >= closestTo) after = psNdx;\n\t\t}\n\t}\n\treturn (before === -1 || before == closestTo) ? after : after == -1 ? before : (closestTo - before) < (after - closestTo) ? before : after;\n}\n\n//tobe put on prototype?\nfunction isMask(pos, strict, fuzzy) {\n\tconst inputmask = this, maskset = this.maskset;\n\n\tvar test = getTestTemplate.call(inputmask, pos).match;\n\tif (test.def === \"\") test = getTest.call(inputmask, pos).match;\n\n\tif (test.static !== true) {\n\t\treturn test.fn;\n\t}\n\tif (fuzzy === true && (maskset.validPositions[pos] !== undefined && maskset.validPositions[pos].generatedInput !== true)) {\n\t\treturn true;\n\t}\n\n\tif (strict !== true && pos > -1) {\n\t\tif (fuzzy) { //check on the number of tests\n\t\t\tvar tests = getTests.call(inputmask, pos);\n\t\t\treturn tests.length > (1 + (tests[tests.length - 1].match.def === \"\" ? 1 : 0));\n\t\t}\n\t\t//else based on the template\n\t\tvar testTemplate = determineTestTemplate.call(inputmask, pos, getTests.call(inputmask, pos));\n\t\tvar testPlaceHolder = getPlaceholder.call(inputmask, pos, testTemplate.match);\n\t\treturn testTemplate.match.def !== testPlaceHolder;\n\n\t}\n\treturn false;\n}\n\n//tobe put on prototype?\nfunction resetMaskSet(soft) {\n\tconst maskset = this.maskset;\n\n\tmaskset.buffer = undefined;\n\tif (soft !== true) {\n\t\tmaskset.validPositions = {};\n\t\tmaskset.p = 0;\n\t}\n}\n\n//tobe put on prototype?\nfunction seekNext(pos, newBlock, fuzzy) {\n\tconst inputmask = this;\n\n\tif (fuzzy === undefined) fuzzy = true;\n\tvar position = pos + 1;\n\twhile (getTest.call(inputmask, position).match.def !== \"\" &&\n\t((newBlock === true && (getTest.call(inputmask, position).match.newBlockMarker !== true || !isMask.call(inputmask, position, undefined, true))) ||\n\t\t(newBlock !== true && !isMask.call(inputmask, position, undefined, fuzzy)))) {\n\t\tposition++;\n\t}\n\treturn position;\n}\n\n//tobe put on prototype?\nfunction seekPrevious(pos, newBlock) {\n\tconst inputmask = this;\n\n\tvar position = pos - 1;\n\tif (pos <= 0) return 0;\n\n\twhile (position > 0 &&\n\t((newBlock === true && (getTest.call(inputmask, position).match.newBlockMarker !== true || !isMask.call(inputmask, position, undefined, true))) ||\n\t\t(newBlock !== true && !isMask.call(inputmask, position, undefined, true)))) {\n\t\tposition--;\n\t}\n\treturn position;\n}\n\n//tobe put on prototype?\nfunction translatePosition(pos) {\n\tconst inputmask = this,\n\t\topts = this.opts,\n\t\tel = this.el;\n\n\tif (inputmask.isRTL && typeof pos === \"number\" && (!opts.greedy || opts.placeholder !== \"\") && el) {\n\t\tpos = inputmask._valueGet().length - pos;\n\t}\n\treturn pos;\n}\n","import Inputmask from \"./inputmask\";\nimport keyCode from \"./keycode.json\";\nimport {getBufferTemplate} from \"./positioning\";\nimport {HandleNativePlaceholder} from \"./inputHandling\";\n\nexport {EventRuler};\n\nvar EventRuler = {\n\ton: function (input, eventName, eventHandler) {\n\t\tconst $ = input.inputmask.dependencyLib;\n\n\t\tvar ev = function (e) {\n\t\t\tif (e.originalEvent) {\n\t\t\t\te = e.originalEvent || e; //get original event from jquery evenbt\n\t\t\t\targuments[0] = e;\n\t\t\t}\n\t\t\t// console.log(e.type);\n\t\t\tvar that = this, args, inputmask = that.inputmask, opts = inputmask ? inputmask.opts : undefined,\n\t\t\t\t$ = inputmask.dependencyLib;\n\t\t\tif (inputmask === undefined && this.nodeName !== \"FORM\") { //happens when cloning an object with jquery.clone\n\t\t\t\tvar imOpts = $.data(that, \"_inputmask_opts\");\n\t\t\t\t$(that).off(); //unbind all events\n\t\t\t\tif (imOpts) {\n\t\t\t\t\t(new Inputmask(imOpts)).mask(that);\n\t\t\t\t}\n\t\t\t} else if (e.type !== \"setvalue\" && this.nodeName !== \"FORM\" && (that.disabled || (that.readOnly && !(e.type === \"keydown\" && (e.ctrlKey && e.keyCode === 67) || (opts.tabThrough === false && e.keyCode === keyCode.TAB))))) {\n\t\t\t\te.preventDefault();\n\t\t\t} else {\n\t\t\t\tswitch (e.type) {\n\t\t\t\t\tcase \"input\":\n\t\t\t\t\t\tif (inputmask.skipInputEvent === true || (e.inputType && e.inputType === \"insertCompositionText\")) {\n\t\t\t\t\t\t\tinputmask.skipInputEvent = false;\n\t\t\t\t\t\t\treturn e.preventDefault();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// if (mobile) { //this causes problem see #2220\n\t\t\t\t\t\t// \targs = arguments;\n\t\t\t\t\t\t// \tsetTimeout(function () { //needed for caret selection when entering a char on Android 8 - #1818\n\t\t\t\t\t\t// \t\teventHandler.apply(that, args);\n\t\t\t\t\t\t// \t\tcaret(that, that.inputmask.caretPos, undefined, true);\n\t\t\t\t\t\t// \t}, 0);\n\t\t\t\t\t\t// \treturn false;\n\t\t\t\t\t\t// }\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"keydown\":\n\t\t\t\t\t\t//Safari 5.1.x - modal dialog fires keypress twice workaround\n\t\t\t\t\t\tinputmask.skipKeyPressEvent = false;\n\t\t\t\t\t\tinputmask.skipInputEvent = inputmask.isComposing = e.keyCode === keyCode.KEY_229;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"keyup\":\n\t\t\t\t\tcase \"compositionend\":\n\t\t\t\t\t\tif (inputmask.isComposing) {\n\t\t\t\t\t\t\tinputmask.skipInputEvent = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"keypress\":\n\t\t\t\t\t\tif (inputmask.skipKeyPressEvent === true) {\n\t\t\t\t\t\t\treturn e.preventDefault();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tinputmask.skipKeyPressEvent = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"click\":\n\t\t\t\t\tcase \"focus\":\n\t\t\t\t\t\tif (inputmask.validationEvent) { // #841\n\t\t\t\t\t\t\tinputmask.validationEvent = false;\n\t\t\t\t\t\t\tinput.blur();\n\t\t\t\t\t\t\tHandleNativePlaceholder(input, (inputmask.isRTL ? getBufferTemplate.call(inputmask).slice().reverse() : getBufferTemplate.call(inputmask)).join(\"\"));\n\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\t\t}, 3000);\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\targs = arguments;\n\t\t\t\t\t\tsetTimeout(function () { //needed for Chrome ~ initial selection clears after the clickevent\n\t\t\t\t\t\t\tif (!input.inputmask) {\n\t\t\t\t\t\t\t\t// `inputmask.remove()` was called before this callback\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\teventHandler.apply(that, args);\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvar returnVal = eventHandler.apply(that, arguments);\n\t\t\t\tif (returnVal === false) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\treturn returnVal;\n\t\t\t}\n\t\t};\n\t\t//keep instance of the event\n\t\tinput.inputmask.events[eventName] = input.inputmask.events[eventName] || [];\n\t\tinput.inputmask.events[eventName].push(ev);\n\n\t\tif ([\"submit\", \"reset\"].includes(eventName)) {\n\t\t\tif (input.form !== null) $(input.form).on(eventName, ev.bind(input));\n\t\t} else {\n\t\t\t$(input).on(eventName, ev);\n\t\t}\n\t},\n\toff: function (input, event) {\n\t\tif (input.inputmask && input.inputmask.events) {\n\t\t\tconst $ = input.inputmask.dependencyLib;\n\t\t\tlet events = input.inputmask.events;\n\t\t\tif (event) {\n\t\t\t\tevents = [];\n\t\t\t\tevents[event] = input.inputmask.events[event];\n\t\t\t}\n\t\t\tfor (let eventName in events) {\n\t\t\t\tlet evArr = events[eventName];\n\t\t\t\twhile (evArr.length > 0) {\n\t\t\t\t\tlet ev = evArr.pop();\n\t\t\t\t\tif ([\"submit\", \"reset\",].includes(eventName)) {\n\t\t\t\t\t\tif (input.form !== null) $(input.form).off(eventName, ev);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(input).off(eventName, ev);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdelete input.inputmask.events[eventName];\n\t\t\t}\n\t\t}\n\t}\n};","import \"./getPrototypeOf\";\nimport keyCode from \"./keycode.json\";\nimport {caret, getBuffer, getBufferTemplate, getLastValidPosition, resetMaskSet, seekNext} from \"./positioning\";\nimport {applyInputValue, clearOptionalTail, writeBuffer} from \"./inputHandling\";\nimport {EventRuler} from \"./eventruler\";\nimport {iphone, mobile} from \"./environment\";\nimport {isComplete} from \"./validation\";\nimport {EventHandlers} from \"./eventhandlers\";\n\nexport{mask};\n\n//todo put on the prototype?\nfunction mask() {\n\tconst inputmask = this,\n\t\topts= this.opts,\n\tel=this.el,$=this.dependencyLib;\n\n\n\tfunction isElementTypeSupported(input, opts) {\n\t\tfunction patchValueProperty(npt) {\n\t\t\tvar valueGet;\n\t\t\tvar valueSet;\n\n\t\t\tfunction patchValhook(type) {\n\t\t\t\tif ($.valHooks && ($.valHooks[type] === undefined || $.valHooks[type].inputmaskpatch !== true)) {\n\t\t\t\t\tvar valhookGet = $.valHooks[type] && $.valHooks[type].get ? $.valHooks[type].get : function (elem) {\n\t\t\t\t\t\treturn elem.value;\n\t\t\t\t\t};\n\t\t\t\t\tvar valhookSet = $.valHooks[type] && $.valHooks[type].set ? $.valHooks[type].set : function (elem, value) {\n\t\t\t\t\t\telem.value = value;\n\t\t\t\t\t\treturn elem;\n\t\t\t\t\t};\n\n\t\t\t\t\t$.valHooks[type] = {\n\t\t\t\t\t\tget: function (elem) {\n\t\t\t\t\t\t\tif (elem.inputmask) {\n\t\t\t\t\t\t\t\tif (elem.inputmask.opts.autoUnmask) {\n\t\t\t\t\t\t\t\t\treturn elem.inputmask.unmaskedvalue();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tvar result = valhookGet(elem);\n\t\t\t\t\t\t\t\t\treturn getLastValidPosition.call(inputmask, undefined, undefined, elem.inputmask.maskset.validPositions) !== -1 || opts.nullable !== true ? result : \"\";\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn valhookGet(elem);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tset: function (elem, value) {\n\t\t\t\t\t\t\tvar result = valhookSet(elem, value);\n\t\t\t\t\t\t\tif (elem.inputmask) {\n\t\t\t\t\t\t\t\tapplyInputValue(elem, value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinputmaskpatch: true\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction getter() {\n\t\t\t\tif (this.inputmask) {\n\t\t\t\t\treturn this.inputmask.opts.autoUnmask ?\n\t\t\t\t\t\tthis.inputmask.unmaskedvalue() :\n\t\t\t\t\t\t(getLastValidPosition.call(inputmask) !== -1 || opts.nullable !== true ?\n\t\t\t\t\t\t\t((this.inputmask.shadowRoot || document.activeElement) === this && opts.clearMaskOnLostFocus ?\n\t\t\t\t\t\t\t\t(inputmask.isRTL ? clearOptionalTail.call(inputmask,getBuffer.call(inputmask).slice()).reverse() : clearOptionalTail.call(inputmask,getBuffer.call(inputmask).slice())).join(\"\") :\n\t\t\t\t\t\t\t\tvalueGet.call(this)) :\n\t\t\t\t\t\t\t\"\");\n\t\t\t\t} else {\n\t\t\t\t\treturn valueGet.call(this);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction setter(value) {\n\t\t\t\tvalueSet.call(this, value);\n\t\t\t\tif (this.inputmask) {\n\t\t\t\t\tapplyInputValue(this, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction installNativeValueSetFallback(npt) {\n\t\t\t\tEventRuler.on(npt, \"mouseenter\", function () {\n\t\t\t\t\tvar input = this,\n\t\t\t\t\t\tvalue = input.inputmask._valueGet(true);\n\t\t\t\t\tif (value !== (inputmask.isRTL ? getBuffer.call(inputmask).reverse() : getBuffer.call(inputmask)).join(\"\")) { //Is this correct? to apply RTL? TOCHECK\n\t\t\t\t\t\tapplyInputValue(input, value);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (!npt.inputmask.__valueGet) {\n\t\t\t\tif (opts.noValuePatching !== true) {\n\t\t\t\t\tif (Object.getOwnPropertyDescriptor) {\n\t\t\t\t\t\tvar valueProperty = Object.getPrototypeOf ? Object.getOwnPropertyDescriptor(Object.getPrototypeOf(npt), \"value\") : undefined;\n\t\t\t\t\t\tif (valueProperty && valueProperty.get && valueProperty.set) {\n\t\t\t\t\t\t\tvalueGet = valueProperty.get;\n\t\t\t\t\t\t\tvalueSet = valueProperty.set;\n\t\t\t\t\t\t\tObject.defineProperty(npt, \"value\", {\n\t\t\t\t\t\t\t\tget: getter,\n\t\t\t\t\t\t\t\tset: setter,\n\t\t\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else if (npt.tagName.toLowerCase() !== \"input\") {\n\t\t\t\t\t\t\tvalueGet = function () {\n\t\t\t\t\t\t\t\treturn this.textContent;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tvalueSet = function (value) {\n\t\t\t\t\t\t\t\tthis.textContent = value;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tObject.defineProperty(npt, \"value\", {\n\t\t\t\t\t\t\t\tget: getter,\n\t\t\t\t\t\t\t\tset: setter,\n\t\t\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (document.__lookupGetter__ && npt.__lookupGetter__(\"value\")) {\n\t\t\t\t\t\tvalueGet = npt.__lookupGetter__(\"value\");\n\t\t\t\t\t\tvalueSet = npt.__lookupSetter__(\"value\");\n\n\t\t\t\t\t\tnpt.__defineGetter__(\"value\", getter);\n\t\t\t\t\t\tnpt.__defineSetter__(\"value\", setter);\n\t\t\t\t\t}\n\t\t\t\t\tnpt.inputmask.__valueGet = valueGet; //store native property getter\n\t\t\t\t\tnpt.inputmask.__valueSet = valueSet; //store native property setter\n\t\t\t\t}\n\t\t\t\tnpt.inputmask._valueGet = function (overruleRTL) {\n\t\t\t\t\treturn inputmask.isRTL && overruleRTL !== true ? valueGet.call(this.el).split(\"\").reverse().join(\"\") : valueGet.call(this.el);\n\t\t\t\t};\n\t\t\t\tnpt.inputmask._valueSet = function (value, overruleRTL) { //null check is needed for IE8 => otherwise converts to \"null\"\n\t\t\t\t\tvalueSet.call(this.el, (value === null || value === undefined) ? \"\" : ((overruleRTL !== true && inputmask.isRTL) ? value.split(\"\").reverse().join(\"\") : value));\n\t\t\t\t};\n\n\t\t\t\tif (valueGet === undefined) { //jquery.val fallback\n\t\t\t\t\tvalueGet = function () {\n\t\t\t\t\t\treturn this.value;\n\t\t\t\t\t};\n\t\t\t\t\tvalueSet = function (value) {\n\t\t\t\t\t\tthis.value = value;\n\t\t\t\t\t};\n\t\t\t\t\tpatchValhook(npt.type);\n\t\t\t\t\tinstallNativeValueSetFallback(npt);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (input.tagName.toLowerCase() !== \"textarea\") {\n\t\t\topts.ignorables.push(keyCode.ENTER);\n\t\t}\n\n\t\tvar elementType = input.getAttribute(\"type\");\n\t\tvar isSupported = (input.tagName.toLowerCase() === \"input\" && opts.supportsInputType.includes(elementType)) || input.isContentEditable || input.tagName.toLowerCase() === \"textarea\";\n\t\tif (!isSupported) {\n\t\t\tif (input.tagName.toLowerCase() === \"input\") {\n\t\t\t\tvar el = document.createElement(\"input\");\n\t\t\t\tel.setAttribute(\"type\", elementType);\n\t\t\t\tisSupported = el.type === \"text\"; //apply mask only if the type is not natively supported\n\t\t\t\tel = null;\n\t\t\t} else {\n\t\t\t\tisSupported = \"partial\";\n\t\t\t}\n\t\t}\n\t\tif (isSupported !== false) {\n\t\t\tpatchValueProperty(input);\n\t\t} else {\n\t\t\tinput.inputmask = undefined;\n\t\t}\n\t\treturn isSupported;\n\t}\n\n\t//unbind all events - to make sure that no other mask will interfere when re-masking\n\tEventRuler.off(el);\n\tvar isSupported = isElementTypeSupported(el, opts);\n\tif (isSupported !== false) {\n\t\tinputmask.originalPlaceholder = el.placeholder;\n\n\t\t//read maxlength prop from el\n\t\tinputmask.maxLength = el !== undefined ? el.maxLength : undefined;\n\t\tif (inputmask.maxLength === -1) inputmask.maxLength = undefined;\n\t\tif (\"inputMode\" in el && el.getAttribute(\"inputmode\") === null) {\n\t\t\tel.inputMode = opts.inputmode;\n\t\t\tel.setAttribute(\"inputmode\", opts.inputmode);\n\t\t}\n\n\n\t\tif (isSupported === true) {\n\t\t\topts.showMaskOnFocus = opts.showMaskOnFocus && [\"cc-number\", \"cc-exp\"].indexOf(el.autocomplete) === -1;\n\t\t\tif (iphone) { //selecting the caret shows as a slection on iphone\n\t\t\t\topts.insertModeVisual = false;\n\t\t\t}\n\n\t\t\t//bind events\n\t\t\tEventRuler.on(el, \"submit\", EventHandlers.submitEvent);\n\t\t\tEventRuler.on(el, \"reset\", EventHandlers.resetEvent);\n\t\t\tEventRuler.on(el, \"blur\", EventHandlers.blurEvent);\n\t\t\tEventRuler.on(el, \"focus\", EventHandlers.focusEvent);\n\t\t\tEventRuler.on(el, \"invalid\", EventHandlers.invalidEvent);\n\t\t\tEventRuler.on(el, \"click\", EventHandlers.clickEvent);\n\t\t\tEventRuler.on(el, \"mouseleave\", EventHandlers.mouseleaveEvent);\n\t\t\tEventRuler.on(el, \"mouseenter\", EventHandlers.mouseenterEvent);\n\t\t\tEventRuler.on(el, \"paste\", EventHandlers.pasteEvent);\n\t\t\tEventRuler.on(el, \"cut\", EventHandlers.cutEvent);\n\t\t\tEventRuler.on(el, \"complete\", opts.oncomplete);\n\t\t\tEventRuler.on(el, \"incomplete\", opts.onincomplete);\n\t\t\tEventRuler.on(el, \"cleared\", opts.oncleared);\n\t\t\tif (opts.inputEventOnly !== true) {\n\t\t\t\tEventRuler.on(el, \"keydown\", EventHandlers.keydownEvent);\n\t\t\t\tEventRuler.on(el, \"keypress\", EventHandlers.keypressEvent);\n\t\t\t\tEventRuler.on(el, \"keyup\", EventHandlers.keyupEvent);\n\t\t\t}\n\t\t\tif (mobile || opts.inputEventOnly) {\n\t\t\t\tel.removeAttribute(\"maxLength\");\n\t\t\t}\n\t\t\tEventRuler.on(el, \"input\", EventHandlers.inputFallBackEvent);\n\t\t\tEventRuler.on(el, \"compositionend\", EventHandlers.compositionendEvent);\n\t\t\t// EventRuler.on(el, \"beforeinput\", EventHandlers.beforeInputEvent); //https://github.com/w3c/input-events - to implement\n\t\t}\n\t\tEventRuler.on(el, \"setvalue\", EventHandlers.setValueEvent);\n\n\t\t//apply mask\n\t\tinputmask.undoValue = getBufferTemplate.call(inputmask).join(\"\"); //initialize the buffer and getmasklength\n\t\tvar activeElement = (el.inputmask.shadowRoot || document).activeElement;\n\t\tif (el.inputmask._valueGet(true) !== \"\" || opts.clearMaskOnLostFocus === false || activeElement === el) {\n\t\t\tapplyInputValue(el, el.inputmask._valueGet(true), opts);\n\t\t\tvar buffer = getBuffer.call(inputmask).slice();\n\t\t\tif (isComplete.call(inputmask, buffer) === false) {\n\t\t\t\tif (opts.clearIncomplete) {\n\t\t\t\t\tresetMaskSet.call(inputmask);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (opts.clearMaskOnLostFocus && activeElement !== el) {\n\t\t\t\tif (getLastValidPosition.call(inputmask) === -1) {\n\t\t\t\t\tbuffer = [];\n\t\t\t\t} else {\n\t\t\t\t\tclearOptionalTail.call(inputmask, buffer);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (opts.clearMaskOnLostFocus === false || (opts.showMaskOnFocus && activeElement === el) || el.inputmask._valueGet(true) !== \"\") {\n\t\t\t\twriteBuffer(el, buffer);\n\t\t\t}\n\t\t\tif (activeElement === el) { //position the caret when in focus\n\t\t\t\tcaret.call(inputmask,el, seekNext.call(inputmask, getLastValidPosition.call(inputmask)));\n\t\t\t}\n\t\t}\n\t}\n}","export default function extend() {\n\tlet options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[0] || {},\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === \"boolean\") {\n\t\tdeep = target;\n\n\t\t// Skip the boolean and the target\n\t\ttarget = arguments[i] || {};\n\t\ti++;\n\t}\n\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif (typeof target !== \"object\" && typeof target !== \"function\") {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; i++) {\n\t\t// Only deal with non-null/undefined values\n\t\tif ((options = arguments[i]) != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = target[name];\n\t\t\t\tcopy = options[name];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target === copy) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif (deep && copy && (Object.prototype.toString.call(copy) === \"[object Object]\" || (copyIsArray = Array.isArray(copy)))) {\n\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\tclone = src && Array.isArray(src) ? src : [];\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src && Object.prototype.toString.call(src) === \"[object Object]\" ? src : {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if (copy !== undefined) {\n\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n}","export default typeof window !== \"undefined\" ? window : new (eval(\"require('jsdom').JSDOM\"))(\"\").window;\n\n","export default function (owner, key, value) {\n\tif (value === undefined) {\n\t\treturn owner.__data ? owner.__data[key] : null;\n\t} else {\n\t\towner.__data = owner.__data || {};\n\t\towner.__data[key] = value;\n\t}\n}","import extend from \"./extend\";\nimport window from \"../global/window\";\nimport DependencyLib from \"./inputmask.dependencyLib\";\n\nexport {on, off, trigger, Event};\n\nfunction isValidElement(elem) {\n\treturn elem instanceof Element;\n}\n\nlet Event;\nif (typeof window.CustomEvent === \"function\") {\n\tEvent = window.CustomEvent;\n} else {\n\tEvent = function (event, params) {\n\t\tparams = params || {bubbles: false, cancelable: false, detail: undefined};\n\t\tvar evt = document.createEvent(\"CustomEvent\");\n\t\tevt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n\t\treturn evt;\n\t};\n\tEvent.prototype = window.Event.prototype;\n}\n\n\nfunction on(events, handler) {\n\tfunction addEvent(ev, namespace) {\n\t\t//register domevent\n\t\tif (elem.addEventListener) { // all browsers except IE before version 9\n\t\t\telem.addEventListener(ev, handler, false);\n\t\t} else if (elem.attachEvent) { // IE before version 9\n\t\t\telem.attachEvent(\"on\" + ev, handler);\n\t\t}\n\t\teventRegistry[ev] = eventRegistry[ev] || {};\n\t\teventRegistry[ev][namespace] = eventRegistry[ev][namespace] || [];\n\t\teventRegistry[ev][namespace].push(handler);\n\t}\n\n\tif (isValidElement(this[0])) {\n\t\tvar eventRegistry = this[0].eventRegistry,\n\t\t\telem = this[0];\n\n\n\t\tvar _events = events.split(\" \");\n\t\tfor (var endx = 0; endx < _events.length; endx++) {\n\t\t\tvar nsEvent = _events[endx].split(\".\"),\n\t\t\t\tev = nsEvent[0],\n\t\t\t\tnamespace = nsEvent[1] || \"global\";\n\t\t\taddEvent(ev, namespace);\n\t\t}\n\t}\n\treturn this;\n}\n\nfunction off(events, handler) {\n\tvar eventRegistry, elem;\n\n\tfunction removeEvent(ev, namespace, handler) {\n\t\tif (ev in eventRegistry === true) {\n\t\t\t//unbind to dom events\n\t\t\tif (elem.removeEventListener) { // all browsers except IE before version 9\n\t\t\t\telem.removeEventListener(ev, handler, false);\n\t\t\t} else if (elem.detachEvent) { // IE before version 9\n\t\t\t\telem.detachEvent(\"on\" + ev, handler);\n\t\t\t}\n\t\t\tif (namespace === \"global\") {\n\t\t\t\tfor (var nmsp in eventRegistry[ev]) {\n\t\t\t\t\teventRegistry[ev][nmsp].splice(eventRegistry[ev][nmsp].indexOf(handler), 1);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\teventRegistry[ev][namespace].splice(eventRegistry[ev][namespace].indexOf(handler), 1);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction resolveNamespace(ev, namespace) {\n\t\tvar evts = [],\n\t\t\thndx, hndL;\n\t\tif (ev.length > 0) {\n\t\t\tif (handler === undefined) {\n\t\t\t\tfor (hndx = 0, hndL = eventRegistry[ev][namespace].length; hndx < hndL; hndx++) {\n\t\t\t\t\tevts.push({\n\t\t\t\t\t\tev: ev,\n\t\t\t\t\t\tnamespace: namespace && namespace.length > 0 ? namespace : \"global\",\n\t\t\t\t\t\thandler: eventRegistry[ev][namespace][hndx]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tevts.push({\n\t\t\t\t\tev: ev,\n\t\t\t\t\tnamespace: namespace && namespace.length > 0 ? namespace : \"global\",\n\t\t\t\t\thandler: handler\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (namespace.length > 0) {\n\t\t\tfor (var evNdx in eventRegistry) {\n\t\t\t\tfor (var nmsp in eventRegistry[evNdx]) {\n\t\t\t\t\tif (nmsp === namespace) {\n\t\t\t\t\t\tif (handler === undefined) {\n\t\t\t\t\t\t\tfor (hndx = 0, hndL = eventRegistry[evNdx][nmsp].length; hndx < hndL; hndx++) {\n\t\t\t\t\t\t\t\tevts.push({\n\t\t\t\t\t\t\t\t\tev: evNdx,\n\t\t\t\t\t\t\t\t\tnamespace: nmsp,\n\t\t\t\t\t\t\t\t\thandler: eventRegistry[evNdx][nmsp][hndx]\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tevts.push({\n\t\t\t\t\t\t\t\tev: evNdx,\n\t\t\t\t\t\t\t\tnamespace: nmsp,\n\t\t\t\t\t\t\t\thandler: handler\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn evts;\n\t}\n\n\tif (isValidElement(this[0])) {\n\t\teventRegistry = this[0].eventRegistry;\n\t\telem = this[0];\n\n\n\t\tvar _events = events.split(\" \");\n\t\tfor (var endx = 0; endx < _events.length; endx++) {\n\t\t\tvar nsEvent = _events[endx].split(\".\"),\n\t\t\t\toffEvents = resolveNamespace(nsEvent[0], nsEvent[1]);\n\t\t\tfor (var i = 0, offEventsL = offEvents.length; i < offEventsL; i++) {\n\t\t\t\tremoveEvent(offEvents[i].ev, offEvents[i].namespace, offEvents[i].handler);\n\t\t\t}\n\t\t}\n\t}\n\treturn this;\n}\n\nfunction trigger(events /* , args... */) {\n\tif (isValidElement(this[0])) {\n\t\tvar eventRegistry = this[0].eventRegistry,\n\t\t\telem = this[0];\n\t\tvar _events = typeof events === \"string\" ? events.split(\" \") : [events.type];\n\t\tfor (var endx = 0; endx < _events.length; endx++) {\n\t\t\tvar nsEvent = _events[endx].split(\".\"),\n\t\t\t\tev = nsEvent[0],\n\t\t\t\tnamespace = nsEvent[1] || \"global\";\n\t\t\tif (document !== undefined && namespace === \"global\") {\n\t\t\t\t//trigger domevent\n\t\t\t\tvar evnt, i, params = {\n\t\t\t\t\tbubbles: true,\n\t\t\t\t\tcancelable: true,\n\t\t\t\t\tdetail: arguments[1]\n\t\t\t\t};\n\t\t\t\t// The custom event that will be created\n\t\t\t\tif (document.createEvent) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tevnt = new CustomEvent(ev, params);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tevnt = document.createEvent(\"CustomEvent\");\n\t\t\t\t\t\tevnt.initCustomEvent(ev, params.bubbles, params.cancelable, params.detail);\n\t\t\t\t\t}\n\t\t\t\t\tif (events.type) extend(evnt, events);\n\t\t\t\t\telem.dispatchEvent(evnt);\n\t\t\t\t} else {\n\t\t\t\t\tevnt = document.createEventObject();\n\t\t\t\t\tevnt.eventType = ev;\n\t\t\t\t\tevnt.detail = arguments[1];\n\t\t\t\t\tif (events.type) extend(evnt, events);\n\t\t\t\t\telem.fireEvent(\"on\" + evnt.eventType, evnt);\n\t\t\t\t}\n\t\t\t} else if (eventRegistry[ev] !== undefined) {\n\t\t\t\targuments[0] = arguments[0].type ? arguments[0] : DependencyLib.Event(arguments[0]);\n\t\t\t\targuments[0].detail = arguments.slice(1);\n\t\t\t\tif (namespace === \"global\") {\n\t\t\t\t\tfor (var nmsp in eventRegistry[ev]) {\n\t\t\t\t\t\tfor (i = 0; i < eventRegistry[ev][nmsp].length; i++) {\n\t\t\t\t\t\t\teventRegistry[ev][nmsp][i].apply(elem, arguments);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (i = 0; i < eventRegistry[ev][namespace].length; i++) {\n\t\t\t\t\t\teventRegistry[ev][namespace][i].apply(elem, arguments);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn this;\n}","/*\n Input Mask plugin dependencyLib\n http://github.com/RobinHerbots/jquery.inputmask\n Copyright (c) Robin Herbots\n Licensed under the MIT license\n */\n\nimport extend from \"./extend\";\nimport window from \"../global/window\";\nimport data from \"./data\";\nimport { on, off, trigger, Event} from \"./events\";\n\nconst document = window.document;\n\nfunction DependencyLib(elem) {\n\tif (elem instanceof DependencyLib) {\n\t\treturn elem;\n\t}\n\tif (!(this instanceof DependencyLib)) {\n\t\treturn new DependencyLib(elem);\n\t}\n\tif (elem !== undefined && elem !== null && elem !== window) {\n\t\tthis[0] = elem.nodeName ? elem : (elem[0] !== undefined && elem[0].nodeName ? elem[0] : document.querySelector(elem));\n\t\tif (this[0] !== undefined && this[0] !== null) {\n\t\t\tthis[0].eventRegistry = this[0].eventRegistry || {};\n\t\t}\n\t}\n}\n\nDependencyLib.prototype = {\n\ton: on,\n\toff: off,\n\ttrigger: trigger\n};\n\n//static\nDependencyLib.extend = extend;\nDependencyLib.data = data;\nDependencyLib.Event = Event;\n\nexport default DependencyLib;\n","import $ from \"./dependencyLibs/inputmask.dependencyLib\";\n\nexport {generateMaskSet, analyseMask};\n\nfunction generateMaskSet(opts, nocache) {\n\tvar ms;\n\n\tfunction generateMask(mask, metadata, opts) {\n\t\tvar regexMask = false;\n\t\tif (mask === null || mask === \"\") {\n\t\t\tregexMask = opts.regex !== null;\n\t\t\tif (regexMask) {\n\t\t\t\tmask = opts.regex;\n\t\t\t\tmask = mask.replace(/^(\\^)(.*)(\\$)$/, \"$2\");\n\t\t\t} else {\n\t\t\t\tregexMask = true;\n\t\t\t\tmask = \".*\";\n\t\t\t}\n\t\t}\n\t\tif (mask.length === 1 && opts.greedy === false && opts.repeat !== 0) {\n\t\t\topts.placeholder = \"\";\n\t\t} //hide placeholder with single non-greedy mask\n\t\tif (opts.repeat > 0 || opts.repeat === \"*\" || opts.repeat === \"+\") {\n\t\t\tvar repeatStart = opts.repeat === \"*\" ? 0 : (opts.repeat === \"+\" ? 1 : opts.repeat);\n\t\t\tmask = opts.groupmarker[0] + mask + opts.groupmarker[1] + opts.quantifiermarker[0] + repeatStart + \",\" + opts.repeat + opts.quantifiermarker[1];\n\t\t}\n\n\t\t// console.log(mask);\n\t\tvar masksetDefinition, maskdefKey;\n\t\tmaskdefKey = regexMask ? \"regex_\" + opts.regex : opts.numericInput ? mask.split(\"\").reverse().join(\"\") : mask;\n\t\tif (opts.keepStatic !== false) { //keepstatic modifies the output from the testdefinitions ~ so differentiate in the maskcache\n\t\t\tmaskdefKey = \"ks_\" + maskdefKey;\n\t\t}\n\n\t\tif (Inputmask.prototype.masksCache[maskdefKey] === undefined || nocache === true) {\n\t\t\tmasksetDefinition = {\n\t\t\t\t\"mask\": mask,\n\t\t\t\t\"maskToken\": Inputmask.prototype.analyseMask(mask, regexMask, opts),\n\t\t\t\t\"validPositions\": {},\n\t\t\t\t\"_buffer\": undefined,\n\t\t\t\t\"buffer\": undefined,\n\t\t\t\t\"tests\": {},\n\t\t\t\t\"excludes\": {}, //excluded alternations\n\t\t\t\t\"metadata\": metadata,\n\t\t\t\t\"maskLength\": undefined,\n\t\t\t\t\"jitOffset\": {}\n\t\t\t};\n\t\t\tif (nocache !== true) {\n\t\t\t\tInputmask.prototype.masksCache[maskdefKey] = masksetDefinition;\n\t\t\t\tmasksetDefinition = $.extend(true, {}, Inputmask.prototype.masksCache[maskdefKey]);\n\t\t\t}\n\t\t} else {\n\t\t\tmasksetDefinition = $.extend(true, {}, Inputmask.prototype.masksCache[maskdefKey]);\n\t\t}\n\n\t\treturn masksetDefinition;\n\t}\n\n\tif (typeof opts.mask === \"function\") { //allow mask to be a preprocessing fn - should return a valid mask\n\t\topts.mask = opts.mask(opts);\n\t}\n\tif (Array.isArray(opts.mask)) {\n\t\tif (opts.mask.length > 1) {\n\t\t\tif (opts.keepStatic === null) { //enable by default when passing multiple masks when the option is not explicitly specified\n\t\t\t\topts.keepStatic = true;\n\t\t\t}\n\t\t\tvar altMask = opts.groupmarker[0];\n\t\t\t(opts.isRTL ? opts.mask.reverse() : opts.mask).forEach(function (msk) {\n\t\t\t\tif (altMask.length > 1) {\n\t\t\t\t\taltMask += opts.groupmarker[1] + opts.alternatormarker + opts.groupmarker[0];\n\t\t\t\t}\n\t\t\t\tif (msk.mask !== undefined && typeof msk.mask !== \"function\") {\n\t\t\t\t\taltMask += msk.mask;\n\t\t\t\t} else {\n\t\t\t\t\taltMask += msk;\n\t\t\t\t}\n\t\t\t});\n\t\t\taltMask += opts.groupmarker[1];\n\t\t\t// console.log(altMask);\n\t\t\treturn generateMask(altMask, opts.mask, opts);\n\t\t} else {\n\t\t\topts.mask = opts.mask.pop();\n\t\t}\n\t}\n\tif (opts.keepStatic === null) opts.keepStatic = false;\n\tif (opts.mask && opts.mask.mask !== undefined && typeof opts.mask.mask !== \"function\") {\n\t\tms = generateMask(opts.mask.mask, opts.mask, opts);\n\t} else {\n\t\tms = generateMask(opts.mask, opts.mask, opts);\n\t}\n\n\treturn ms;\n}\n\nfunction analyseMask(mask, regexMask, opts) {\n\tconst tokenizer = /(?:[?*+]|\\{[0-9+*]+(?:,[0-9+*]*)?(?:\\|[0-9+*]*)?\\})|[^.?*+^${[]()|\\\\]+|./g,\n\t\t//Thx to https://github.com/slevithan/regex-colorizer for the regexTokenizer regex\n\t\tregexTokenizer = /\\[\\^?]?(?:[^\\\\\\]]+|\\\\[\\S\\s]?)*]?|\\\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\\S\\s]?)|\\((?:\\?[:=!]?)?|(?:[?*+]|\\{[0-9]+(?:,[0-9]*)?\\})\\??|[^.?*+^${[()|\\\\]+|./g;\n\tvar escaped = false,\n\t\tcurrentToken = new MaskToken(),\n\t\tmatch,\n\t\tm,\n\t\topenenings = [],\n\t\tmaskTokens = [],\n\t\topeningToken,\n\t\tcurrentOpeningToken,\n\t\talternator,\n\t\tlastMatch,\n\t\tcloseRegexGroup = false;\n\n\tfunction MaskToken(isGroup, isOptional, isQuantifier, isAlternator) {\n\t\tthis.matches = [];\n\t\tthis.openGroup = isGroup || false;\n\t\tthis.alternatorGroup = false;\n\t\tthis.isGroup = isGroup || false;\n\t\tthis.isOptional = isOptional || false;\n\t\tthis.isQuantifier = isQuantifier || false;\n\t\tthis.isAlternator = isAlternator || false;\n\t\tthis.quantifier = {\n\t\t\tmin: 1,\n\t\t\tmax: 1\n\t\t};\n\t}\n\n\t//test definition => {fn: RegExp/function, static: true/false optionality: bool, newBlockMarker: bool, casing: null/upper/lower, def: definitionSymbol, placeholder: placeholder, mask: real maskDefinition}\n\tfunction insertTestDefinition(mtoken, element, position) {\n\t\tposition = position !== undefined ? position : mtoken.matches.length;\n\t\tvar prevMatch = mtoken.matches[position - 1];\n\t\tif (regexMask) {\n\t\t\tif (element.indexOf(\"[\") === 0 || (escaped && /\\\\d|\\\\s|\\\\w]/i.test(element)) || element === \".\") {\n\t\t\t\tmtoken.matches.splice(position++, 0, {\n\t\t\t\t\tfn: new RegExp(element, opts.casing ? \"i\" : \"\"),\n\t\t\t\t\tstatic: false,\n\t\t\t\t\toptionality: false,\n\t\t\t\t\tnewBlockMarker: prevMatch === undefined ? \"master\" : prevMatch.def !== element,\n\t\t\t\t\tcasing: null,\n\t\t\t\t\tdef: element,\n\t\t\t\t\tplaceholder: undefined,\n\t\t\t\t\tnativeDef: element\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (escaped) element = element[element.length - 1];\n\t\t\t\telement.split(\"\").forEach(function (lmnt, ndx) {\n\t\t\t\t\tprevMatch = mtoken.matches[position - 1];\n\t\t\t\t\tmtoken.matches.splice(position++, 0, {\n\t\t\t\t\t\tfn: /[a-z]/i.test((opts.staticDefinitionSymbol || lmnt)) ? new RegExp(\"[\" + (opts.staticDefinitionSymbol || lmnt) + \"]\", opts.casing ? \"i\" : \"\") : null,\n\t\t\t\t\t\tstatic: true,\n\t\t\t\t\t\toptionality: false,\n\t\t\t\t\t\tnewBlockMarker: prevMatch === undefined ? \"master\" : (prevMatch.def !== lmnt && prevMatch.static !== true),\n\t\t\t\t\t\tcasing: null,\n\t\t\t\t\t\tdef: opts.staticDefinitionSymbol || lmnt,\n\t\t\t\t\t\tplaceholder: opts.staticDefinitionSymbol !== undefined ? lmnt : undefined,\n\t\t\t\t\t\tnativeDef: (escaped ? \"'\" : \"\") + lmnt\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\tescaped = false;\n\t\t} else {\n\t\t\tvar maskdef = (opts.definitions && opts.definitions[element]) || (opts.usePrototypeDefinitions && Inputmask.prototype.definitions[element]);\n\t\t\tif (maskdef && !escaped) {\n\t\t\t\tmtoken.matches.splice(position++, 0, {\n\t\t\t\t\tfn: maskdef.validator ? typeof maskdef.validator == \"string\" ? new RegExp(maskdef.validator, opts.casing ? \"i\" : \"\") : new function () {\n\t\t\t\t\t\tthis.test = maskdef.validator;\n\t\t\t\t\t} : new RegExp(\".\"),\n\t\t\t\t\tstatic: maskdef.static || false,\n\t\t\t\t\toptionality: false,\n\t\t\t\t\tnewBlockMarker: prevMatch === undefined ? \"master\" : prevMatch.def !== (maskdef.definitionSymbol || element),\n\t\t\t\t\tcasing: maskdef.casing,\n\t\t\t\t\tdef: maskdef.definitionSymbol || element,\n\t\t\t\t\tplaceholder: maskdef.placeholder,\n\t\t\t\t\tnativeDef: element,\n\t\t\t\t\tgenerated: maskdef.generated\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tmtoken.matches.splice(position++, 0, {\n\t\t\t\t\tfn: /[a-z]/i.test((opts.staticDefinitionSymbol || element)) ? new RegExp(\"[\" + (opts.staticDefinitionSymbol || element) + \"]\", opts.casing ? \"i\" : \"\") : null,\n\t\t\t\t\tstatic: true,\n\t\t\t\t\toptionality: false,\n\t\t\t\t\tnewBlockMarker: prevMatch === undefined ? \"master\" : (prevMatch.def !== element && prevMatch.static !== true),\n\t\t\t\t\tcasing: null,\n\t\t\t\t\tdef: opts.staticDefinitionSymbol || element,\n\t\t\t\t\tplaceholder: opts.staticDefinitionSymbol !== undefined ? element : undefined,\n\t\t\t\t\tnativeDef: (escaped ? \"'\" : \"\") + element\n\t\t\t\t});\n\t\t\t\tescaped = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction verifyGroupMarker(maskToken) {\n\t\tif (maskToken && maskToken.matches) {\n\t\t\tmaskToken.matches.forEach(function (token, ndx) {\n\t\t\t\tvar nextToken = maskToken.matches[ndx + 1];\n\t\t\t\tif ((nextToken === undefined || (nextToken.matches === undefined || nextToken.isQuantifier === false)) && token && token.isGroup) { //this is not a group but a normal mask => convert\n\t\t\t\t\ttoken.isGroup = false;\n\t\t\t\t\tif (!regexMask) {\n\t\t\t\t\t\tinsertTestDefinition(token, opts.groupmarker[0], 0);\n\t\t\t\t\t\tif (token.openGroup !== true) {\n\t\t\t\t\t\t\tinsertTestDefinition(token, opts.groupmarker[1]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tverifyGroupMarker(token);\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction defaultCase() {\n\t\tif (openenings.length > 0) {\n\t\t\tcurrentOpeningToken = openenings[openenings.length - 1];\n\t\t\tinsertTestDefinition(currentOpeningToken, m);\n\t\t\tif (currentOpeningToken.isAlternator) { //handle alternator a | b case\n\t\t\t\talternator = openenings.pop();\n\t\t\t\tfor (var mndx = 0; mndx < alternator.matches.length; mndx++) {\n\t\t\t\t\tif (alternator.matches[mndx].isGroup) alternator.matches[mndx].isGroup = false; //don't mark alternate groups as group\n\t\t\t\t}\n\t\t\t\tif (openenings.length > 0) {\n\t\t\t\t\tcurrentOpeningToken = openenings[openenings.length - 1];\n\t\t\t\t\tcurrentOpeningToken.matches.push(alternator);\n\t\t\t\t} else {\n\t\t\t\t\tcurrentToken.matches.push(alternator);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tinsertTestDefinition(currentToken, m);\n\t\t}\n\t}\n\n\tfunction reverseTokens(maskToken) {\n\t\tfunction reverseStatic(st) {\n\t\t\tif (st === opts.optionalmarker[0]) {\n\t\t\t\tst = opts.optionalmarker[1];\n\t\t\t} else if (st === opts.optionalmarker[1]) {\n\t\t\t\tst = opts.optionalmarker[0];\n\t\t\t} else if (st === opts.groupmarker[0]) {\n\t\t\t\tst = opts.groupmarker[1];\n\t\t\t} else if (st === opts.groupmarker[1]) st = opts.groupmarker[0];\n\n\t\t\treturn st;\n\t\t}\n\n\t\tmaskToken.matches = maskToken.matches.reverse();\n\t\tfor (var match in maskToken.matches) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(maskToken.matches, match)) {\n\t\t\t\tvar intMatch = parseInt(match);\n\t\t\t\tif (maskToken.matches[match].isQuantifier && maskToken.matches[intMatch + 1] && maskToken.matches[intMatch + 1].isGroup) { //reposition quantifier\n\t\t\t\t\tvar qt = maskToken.matches[match];\n\t\t\t\t\tmaskToken.matches.splice(match, 1);\n\t\t\t\t\tmaskToken.matches.splice(intMatch + 1, 0, qt);\n\t\t\t\t}\n\t\t\t\tif (maskToken.matches[match].matches !== undefined) {\n\t\t\t\t\tmaskToken.matches[match] = reverseTokens(maskToken.matches[match]);\n\t\t\t\t} else {\n\t\t\t\t\tmaskToken.matches[match] = reverseStatic(maskToken.matches[match]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn maskToken;\n\t}\n\n\tfunction groupify(matches) {\n\t\tvar groupToken = new MaskToken(true);\n\t\tgroupToken.openGroup = false;\n\t\tgroupToken.matches = matches;\n\t\treturn groupToken;\n\t}\n\n\tfunction closeGroup() {\n\t\t// Group closing\n\t\topeningToken = openenings.pop();\n\t\topeningToken.openGroup = false; //mark group as complete\n\t\tif (openingToken !== undefined) {\n\t\t\tif (openenings.length > 0) {\n\t\t\t\tcurrentOpeningToken = openenings[openenings.length - 1];\n\t\t\t\tcurrentOpeningToken.matches.push(openingToken);\n\t\t\t\tif (currentOpeningToken.isAlternator) { //handle alternator (a) | (b) case\n\t\t\t\t\talternator = openenings.pop();\n\t\t\t\t\tfor (var mndx = 0; mndx < alternator.matches.length; mndx++) {\n\t\t\t\t\t\talternator.matches[mndx].isGroup = false; //don't mark alternate groups as group\n\t\t\t\t\t\talternator.matches[mndx].alternatorGroup = false;\n\t\t\t\t\t}\n\t\t\t\t\tif (openenings.length > 0) {\n\t\t\t\t\t\tcurrentOpeningToken = openenings[openenings.length - 1];\n\t\t\t\t\t\tcurrentOpeningToken.matches.push(alternator);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrentToken.matches.push(alternator);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcurrentToken.matches.push(openingToken);\n\t\t\t}\n\t\t} else {\n\t\t\tdefaultCase();\n\t\t}\n\t}\n\n\tfunction groupQuantifier(matches) {\n\t\tvar lastMatch = matches.pop();\n\t\tif (lastMatch.isQuantifier) {\n\t\t\tlastMatch = groupify([matches.pop(), lastMatch]);\n\t\t}\n\t\treturn lastMatch;\n\t}\n\n\tif (regexMask) {\n\t\topts.optionalmarker[0] = undefined;\n\t\topts.optionalmarker[1] = undefined;\n\t}\n\twhile ((match = regexMask ? regexTokenizer.exec(mask) : tokenizer.exec(mask))) {\n\t\tm = match[0];\n\n\t\tif (regexMask) {\n\t\t\tswitch (m.charAt(0)) {\n\t\t\t\t//Quantifier\n\t\t\t\tcase \"?\":\n\t\t\t\t\tm = \"{0,1}\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"+\":\n\t\t\t\tcase \"*\":\n\t\t\t\t\tm = \"{\" + m + \"}\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"|\":\n\t\t\t\t\t//regex mask alternator  ex: [01][0-9]|2[0-3] => ([01][0-9]|2[0-3])\n\t\t\t\t\tif (openenings.length === 0) { //wrap the mask in a group to form a regex alternator  ([01][0-9]|2[0-3])\n\t\t\t\t\t\tvar altRegexGroup = groupify(currentToken.matches);\n\t\t\t\t\t\taltRegexGroup.openGroup = true;\n\t\t\t\t\t\topenenings.push(altRegexGroup);\n\t\t\t\t\t\tcurrentToken.matches = [];\n\t\t\t\t\t\tcloseRegexGroup = true;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (escaped) {\n\t\t\tdefaultCase();\n\t\t\tcontinue;\n\t\t}\n\t\tswitch (m.charAt(0)) {\n\t\t\tcase \"$\":\n\t\t\tcase \"^\":\n\t\t\t\t//ignore beginswith and endswith as in masking this makes no point\n\t\t\t\tif (!regexMask) {\n\t\t\t\t\tdefaultCase();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"(?=\": //lookahead\n\t\t\t\tbreak;\n\t\t\tcase \"(?!\": //negative lookahead\n\t\t\t\tbreak;\n\t\t\tcase \"(?<=\": //lookbehind\n\t\t\t\tbreak;\n\t\t\tcase \"(?<!\": //negative lookbehind\n\t\t\t\tbreak;\n\t\t\tcase opts.escapeChar:\n\t\t\t\tescaped = true;\n\t\t\t\tif (regexMask) {\n\t\t\t\t\tdefaultCase();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t// optional closing\n\t\t\tcase opts.optionalmarker[1]:\n\t\t\tcase opts.groupmarker[1]:\n\t\t\t\tcloseGroup();\n\t\t\t\tbreak;\n\t\t\tcase opts.optionalmarker[0]:\n\t\t\t\t// optional opening\n\t\t\t\topenenings.push(new MaskToken(false, true));\n\t\t\t\tbreak;\n\t\t\tcase opts.groupmarker[0]:\n\t\t\t\t// Group opening\n\t\t\t\topenenings.push(new MaskToken(true));\n\t\t\t\tbreak;\n\t\t\tcase opts.quantifiermarker[0]:\n\t\t\t\t//Quantifier\n\t\t\t\tvar quantifier = new MaskToken(false, false, true);\n\n\t\t\t\tm = m.replace(/[{}]/g, \"\");\n\t\t\t\tvar mqj = m.split(\"|\"),\n\t\t\t\t\tmq = mqj[0].split(\",\"),\n\t\t\t\t\tmq0 = isNaN(mq[0]) ? mq[0] : parseInt(mq[0]),\n\t\t\t\t\tmq1 = mq.length === 1 ? mq0 : (isNaN(mq[1]) ? mq[1] : parseInt(mq[1]));\n\t\t\t\tif (mq0 === \"*\" || mq0 === \"+\") {\n\t\t\t\t\tmq0 = mq1 === \"*\" ? 0 : 1;\n\t\t\t\t}\n\t\t\t\tquantifier.quantifier = {\n\t\t\t\t\tmin: mq0,\n\t\t\t\t\tmax: mq1,\n\t\t\t\t\tjit: mqj[1]\n\t\t\t\t};\n\t\t\t\tvar matches = openenings.length > 0 ? openenings[openenings.length - 1].matches : currentToken.matches;\n\t\t\t\tmatch = matches.pop();\n\t\t\t\tif (match.isAlternator) { //handle quantifier in an alternation [0-9]{2}|[0-9]{3}\n\t\t\t\t\tmatches.push(match); //push back alternator\n\t\t\t\t\tmatches = match.matches; //remap target matches\n\t\t\t\t\tvar groupToken = new MaskToken(true);\n\t\t\t\t\tvar tmpMatch = matches.pop();\n\t\t\t\t\tmatches.push(groupToken); //push the group\n\t\t\t\t\tmatches = groupToken.matches;\n\t\t\t\t\tmatch = tmpMatch;\n\t\t\t\t}\n\t\t\t\tif (!match.isGroup) {\n\t\t\t\t\t// if (regexMask && match.fn === null) { //why is this needed???\n\t\t\t\t\t//     if (match.def === \".\") match.fn = new RegExp(match.def, opts.casing ? \"i\" : \"\");\n\t\t\t\t\t// }\n\n\t\t\t\t\tmatch = groupify([match]);\n\t\t\t\t}\n\t\t\t\tmatches.push(match);\n\t\t\t\tmatches.push(quantifier);\n\n\t\t\t\tbreak;\n\t\t\tcase opts.alternatormarker:\n\n\n\t\t\t\tif (openenings.length > 0) {\n\t\t\t\t\tcurrentOpeningToken = openenings[openenings.length - 1];\n\t\t\t\t\tvar subToken = currentOpeningToken.matches[currentOpeningToken.matches.length - 1];\n\t\t\t\t\tif (currentOpeningToken.openGroup && //regexp alt syntax\n\t\t\t\t\t\t(subToken.matches === undefined || (subToken.isGroup === false && subToken.isAlternator === false))) { //alternations within group\n\t\t\t\t\t\tlastMatch = openenings.pop();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlastMatch = groupQuantifier(currentOpeningToken.matches);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlastMatch = groupQuantifier(currentToken.matches);\n\t\t\t\t}\n\t\t\t\tif (lastMatch.isAlternator) {\n\t\t\t\t\topenenings.push(lastMatch);\n\t\t\t\t} else {\n\t\t\t\t\tif (lastMatch.alternatorGroup) {\n\t\t\t\t\t\talternator = openenings.pop();\n\t\t\t\t\t\tlastMatch.alternatorGroup = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\talternator = new MaskToken(false, false, false, true);\n\t\t\t\t\t}\n\t\t\t\t\talternator.matches.push(lastMatch);\n\t\t\t\t\topenenings.push(alternator);\n\t\t\t\t\tif (lastMatch.openGroup) { //regexp alt syntax\n\t\t\t\t\t\tlastMatch.openGroup = false;\n\t\t\t\t\t\tvar alternatorGroup = new MaskToken(true);\n\t\t\t\t\t\talternatorGroup.alternatorGroup = true;\n\t\t\t\t\t\topenenings.push(alternatorGroup);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tdefaultCase();\n\t\t}\n\t}\n\n\tif (closeRegexGroup) closeGroup();\n\n\twhile (openenings.length > 0) {\n\t\topeningToken = openenings.pop();\n\t\tcurrentToken.matches.push(openingToken);\n\t}\n\tif (currentToken.matches.length > 0) {\n\t\tverifyGroupMarker(currentToken);\n\t\tmaskTokens.push(currentToken);\n\t}\n\n\tif (opts.numericInput || opts.isRTL) {\n\t\treverseTokens(maskTokens[0]);\n\t}\n\t// console.log(JSON.stringify(maskTokens));\n\treturn maskTokens;\n}\n","export default {\n\t\"9\": { //\\uFF11-\\uFF19 #1606\n\t\tvalidator: \"[0-9\\uFF10-\\uFF19]\",\n\t\tdefinitionSymbol: \"*\"\n\t},\n\t\"a\": { //\\u0410-\\u044F\\u0401\\u0451\\u00C0-\\u00FF\\u00B5 #76\n\t\tvalidator: \"[A-Za-z\\u0410-\\u044F\\u0401\\u0451\\u00C0-\\u00FF\\u00B5]\",\n\t\tdefinitionSymbol: \"*\"\n\t},\n\t\"*\": {\n\t\tvalidator: \"[0-9\\uFF10-\\uFF19A-Za-z\\u0410-\\u044F\\u0401\\u0451\\u00C0-\\u00FF\\u00B5]\"\n\t}\n}","export default {\n\t_maxTestPos: 500,\n\tplaceholder: \"_\",\n\toptionalmarker: [\"[\", \"]\"],\n\tquantifiermarker: [\"{\", \"}\"],\n\tgroupmarker: [\"(\", \")\"],\n\talternatormarker: \"|\",\n\tescapeChar: \"\\\\\",\n\tmask: null, //needs tobe null instead of undefined as the extend method does not consider props with the undefined value\n\tregex: null, //regular expression as a mask\n\toncomplete: () => {\n\t}, //executes when the mask is complete\n\tonincomplete: () => {\n\t}, //executes when the mask is incomplete and focus is lost\n\toncleared: () => {\n\t}, //executes when the mask is cleared\n\trepeat: 0, //repetitions of the mask: * ~ forever, otherwise specify an integer\n\tgreedy: false, //true: allocated buffer for the mask and repetitions - false: allocate only if needed\n\tautoUnmask: false, //automatically unmask when retrieving the value with $.fn.val or value if the browser supports __lookupGetter__ or getOwnPropertyDescriptor\n\tremoveMaskOnSubmit: false, //remove the mask before submitting the form.\n\tclearMaskOnLostFocus: true,\n\tinsertMode: true, //insert the input or overwrite the input\n\tinsertModeVisual: true, //show selected caret when insertmode = false\n\tclearIncomplete: false, //clear the incomplete input on blur\n\talias: null,\n\tonKeyDown: () => {\n\t}, //callback to implement autocomplete on certain keys for example. args => event, buffer, caretPos, opts\n\tonBeforeMask: null, //executes before masking the initial value to allow preprocessing of the initial value.\targs => initialValue, opts => return processedValue\n\tonBeforePaste: function (pastedValue, opts) {\n\t\treturn typeof opts.onBeforeMask === \"function\" ? opts.onBeforeMask.call(this, pastedValue, opts) : pastedValue;\n\t}, //executes before masking the pasted value to allow preprocessing of the pasted value.\targs => pastedValue, opts => return processedValue\n\tonBeforeWrite: null, //executes before writing to the masked element. args => event, opts\n\tonUnMask: null, //executes after unmasking to allow postprocessing of the unmaskedvalue.\targs => maskedValue, unmaskedValue, opts\n\tshowMaskOnFocus: true, //show the mask-placeholder when the input has focus\n\tshowMaskOnHover: true, //show the mask-placeholder when hovering the empty input\n\tonKeyValidation: () => {\n\t}, //executes on every key-press with the result of isValid. Params: key, result, opts\n\tskipOptionalPartCharacter: \" \", //a character which can be used to skip an optional part of a mask\n\tnumericInput: false, //numericInput input direction style (input shifts to the left while holding the caret position)\n\trightAlign: false, //align to the right\n\tundoOnEscape: true, //pressing escape reverts the value to the value before focus\n\t//numeric basic properties\n\tradixPoint: \"\", //\".\", // | \",\"\n\t_radixDance: false, //dance around the radixPoint\n\tgroupSeparator: \"\", //\",\", // | \".\"\n\t//numeric basic properties\n\tkeepStatic: null, //try to keep the mask static while typing. Decisions to alter the mask will be posponed if possible\n\tpositionCaretOnTab: true, //when enabled the caret position is set after the latest valid position on TAB\n\ttabThrough: false, //allows for tabbing through the different parts of the masked field\n\tsupportsInputType: [\"text\", \"tel\", \"url\", \"password\", \"search\"], //list with the supported input types\n\t//specify keyCodes which should not be considered in the keypress event, otherwise the preventDefault will stop their default behavior especially in FF\n\tignorables: [8, 9, 19, 27, 33, 34, 35, 36, 37, 38, 39, 40, 45, 46, 93, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 0, 229],\n\tisComplete: null, //override for isComplete - args => buffer, opts - return true || false\n\tpreValidation: null, //hook to preValidate the input.  Usefull for validating regardless the definition.\targs => buffer, pos, char, isSelection, opts, maskset, caretPos, strict => return true/false/command object\n\tpostValidation: null, //hook to postValidate the result from isValid.\tUsefull for validating the entry as a whole.\targs => buffer, pos, c, currentResult, opts, maskset, strict, fromCheckval => return true/false/json\n\tstaticDefinitionSymbol: undefined, //specify a definitionSymbol for static content, used to make matches for alternators\n\tjitMasking: false, //just in time masking ~ only mask while typing, can n (number), true or false\n\tnullable: true, //return nothing instead of the buffertemplate when the user hasn't entered anything.\n\tinputEventOnly: false, //dev option - testing inputfallback behavior\n\tnoValuePatching: false, //disable value property patching\n\tpositionCaretOnClick: \"lvp\", //none, lvp (based on the last valid position (default), radixFocus (position caret to radixpoint on initial click), select (select the whole input), ignore (ignore the click and continue the mask)\n\tcasing: null, //mask-level casing. Options: null, \"upper\", \"lower\" or \"title\" or callback args => elem, test, pos, validPositions return charValue\n\tinputmode: \"text\", //specify the inputmode\n\timportDataAttributes: true, //import data-inputmask attributes\n\tshiftPositions: true, //shift position of the mask entries on entry and deletion.\n\tusePrototypeDefinitions: true //use the default defined definitions from the prototype\n};","/*\n * Input Mask Core\n * http://github.com/RobinHerbots/jquery.inputmask\n * Copyright (c) Robin Herbots\n * Licensed under the MIT license\n */\nimport \"./getPrototypeOf\";\nimport {mask} from \"./mask\";\nimport $ from \"./dependencyLibs/inputmask.dependencyLib\";\nimport window from \"./global/window\";\nimport {generateMaskSet, analyseMask} from \"./mask-lexer\";\nimport {getMaskTemplate} from \"./validation-tests\";\nimport {determineLastRequiredPosition, getBuffer, getBufferTemplate, isMask} from \"./positioning\";\nimport {isComplete} from \"./validation\";\nimport {checkVal, unmaskedvalue} from \"./inputHandling\";\nimport {EventRuler} from \"./eventruler\";\nimport definitions from \"./definitions\";\nimport defaults from \"./defaults\";\n\nconst document = window.document, dataKey = \"_inputmask_opts\";\n\nfunction Inputmask(alias, options, internal) {\n\t//allow instanciating without new\n\tif (!(this instanceof Inputmask)) {\n\t\treturn new Inputmask(alias, options, internal);\n\t}\n\n\tthis.dependencyLib = $;\n\tthis.el = undefined;\n\tthis.events = {};\n\tthis.maskset = undefined;\n\n\tif (internal !== true) {\n\t\t//init options\n\t\tif (Object.prototype.toString.call(alias) === \"[object Object]\") {\n\t\t\toptions = alias;\n\t\t} else {\n\t\t\toptions = options || {};\n\t\t\tif (alias) options.alias = alias;\n\t\t}\n\t\tthis.opts = $.extend(true, {}, this.defaults, options);\n\t\tthis.noMasksCache = options && options.definitions !== undefined;\n\t\tthis.userOptions = options || {}; //user passed options\n\t\tresolveAlias(this.opts.alias, options, this.opts);\n\t}\n\n\t//maskscope properties\n\tthis.refreshValue = false; //indicate a refresh from the inputvalue is needed (form.reset)\n\tthis.undoValue = undefined;\n\tthis.$el = undefined;\n\tthis.skipKeyPressEvent = false; //Safari 5.1.x - modal dialog fires keypress twice workaround\n\tthis.skipInputEvent = false; //skip when triggered from within inputmask\n\tthis.validationEvent = false;\n\tthis.ignorable = false;\n\tthis.maxLength;\n\tthis.mouseEnter = false;\n\tthis.originalPlaceholder = undefined; //needed for FF\n\tthis.isComposing = false; //keydowncode == 229  compositionevent fallback\n}\n\nInputmask.prototype = {\n\tdataAttribute: \"data-inputmask\", //data attribute prefix used for attribute binding\n\t//options default\n\tdefaults: defaults,\n\tdefinitions: definitions,\n\taliases: {}, //aliases definitions\n\tmasksCache: {},\n\tget isRTL() {\n\t\treturn this.opts.isRTL || this.opts.numericInput;\n\t},\n\tmask: function (elems) {\n\t\tvar that = this;\n\t\tif (typeof elems === \"string\") {\n\t\t\telems = document.getElementById(elems) || document.querySelectorAll(elems);\n\t\t}\n\t\telems = elems.nodeName ? [elems] : elems;\n\t\telems.forEach(function (el, ndx) {\n\t\t\tvar scopedOpts = $.extend(true, {}, that.opts);\n\t\t\tif (importAttributeOptions(el, scopedOpts, $.extend(true, {}, that.userOptions), that.dataAttribute)) {\n\t\t\t\tvar maskset = generateMaskSet(scopedOpts, that.noMasksCache);\n\t\t\t\tif (maskset !== undefined) {\n\t\t\t\t\tif (el.inputmask !== undefined) {\n\t\t\t\t\t\tel.inputmask.opts.autoUnmask = true; //force autounmasking when remasking\n\t\t\t\t\t\tel.inputmask.remove();\n\t\t\t\t\t}\n\t\t\t\t\t//store inputmask instance on the input with element reference\n\t\t\t\t\tel.inputmask = new Inputmask(undefined, undefined, true);\n\t\t\t\t\tel.inputmask.opts = scopedOpts;\n\t\t\t\t\tel.inputmask.noMasksCache = that.noMasksCache;\n\t\t\t\t\tel.inputmask.userOptions = $.extend(true, {}, that.userOptions);\n\t\t\t\t\t// el.inputmask.isRTL = scopedOpts.isRTL || scopedOpts.numericInput;\n\t\t\t\t\tel.inputmask.el = el;\n\t\t\t\t\tel.inputmask.$el = $(el);\n\t\t\t\t\tel.inputmask.maskset = maskset;\n\n\t\t\t\t\t$.data(el, dataKey, that.userOptions);\n\t\t\t\t\tmask.call(el.inputmask);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn elems && elems[0] ? (elems[0].inputmask || this) : this;\n\t},\n\toption: function (options, noremask) { //set extra options || retrieve value of a current option\n\t\tif (typeof options === \"string\") {\n\t\t\treturn this.opts[options];\n\t\t} else if (typeof options === \"object\") {\n\t\t\t$.extend(this.userOptions, options); //user passed options\n\t\t\t//remask\n\t\t\tif (this.el && noremask !== true) {\n\t\t\t\tthis.mask(this.el);\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t},\n\tunmaskedvalue: function (value) {\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\tif (this.el === undefined || value !== undefined) {\n\t\t\tvar valueBuffer = (typeof this.opts.onBeforeMask === \"function\" ? (this.opts.onBeforeMask.call(this, value, this.opts) || value) : value).split(\"\");\n\t\t\tcheckVal.call(this, undefined, false, false, valueBuffer);\n\t\t\tif (typeof this.opts.onBeforeWrite === \"function\") this.opts.onBeforeWrite.call(this, undefined, getBuffer.call(this), 0, this.opts);\n\t\t}\n\t\treturn unmaskedvalue.call(this, this.el);\n\t},\n\tremove: function () {\n\t\tif (this.el) {\n\t\t\t$.data(this.el, dataKey, null); //invalidate\n\t\t\t//writeout the value\n\t\t\tvar cv = this.opts.autoUnmask ? unmaskedvalue(this.el) : this._valueGet(this.opts.autoUnmask);\n\t\t\tif (cv !== getBufferTemplate.call(this).join(\"\")) this._valueSet(cv, this.opts.autoUnmask); else this._valueSet(\"\");\n\t\t\t//unbind all events\n\t\t\tEventRuler.off(this.el);\n\n\t\t\t//restore the value property\n\t\t\tvar valueProperty;\n\t\t\tif (Object.getOwnPropertyDescriptor && Object.getPrototypeOf) {\n\t\t\t\tvalueProperty = Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this.el), \"value\");\n\t\t\t\tif (valueProperty) {\n\t\t\t\t\tif (this.__valueGet) {\n\t\t\t\t\t\tObject.defineProperty(this.el, \"value\", {\n\t\t\t\t\t\t\tget: this.__valueGet,\n\t\t\t\t\t\t\tset: this.__valueSet,\n\t\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (document.__lookupGetter__ && this.el.__lookupGetter__(\"value\")) {\n\t\t\t\tif (this.__valueGet) {\n\t\t\t\t\tthis.el.__defineGetter__(\"value\", this.__valueGet);\n\t\t\t\t\tthis.el.__defineSetter__(\"value\", this.__valueSet);\n\t\t\t\t}\n\t\t\t}\n\t\t\t//clear data\n\t\t\tthis.el.inputmask = undefined;\n\t\t}\n\t\treturn this.el;\n\t},\n\tgetemptymask: function () { //return the default (empty) mask value, usefull for setting the default value in validation\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\treturn getBufferTemplate.call(this).join(\"\");\n\t},\n\thasMaskedValue: function () { //check wheter the returned value is masked or not; currently only works reliable when using jquery.val fn to retrieve the value\n\t\treturn !this.opts.autoUnmask;\n\t},\n\tisComplete: function () {\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\treturn isComplete.call(this, getBuffer.call(this));\n\t},\n\tgetmetadata: function () { //return mask metadata if exists\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\tif (Array.isArray(this.maskset.metadata)) {\n\t\t\tvar maskTarget = getMaskTemplate.call(this, true, 0, false).join(\"\");\n\t\t\tthis.maskset.metadata.forEach(function (mtdt) {\n\t\t\t\tif (mtdt.mask === maskTarget) {\n\t\t\t\t\tmaskTarget = mtdt;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t});\n\t\t\treturn maskTarget;\n\t\t}\n\t\treturn this.maskset.metadata;\n\t},\n\tisValid: function (value) {\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\tif (value) {\n\t\t\tvar valueBuffer = (typeof this.opts.onBeforeMask === \"function\" ? (this.opts.onBeforeMask.call(this, value, this.opts) || value) : value).split(\"\");\n\t\t\tcheckVal.call(this, undefined, true, false, valueBuffer);\n\t\t} else {\n\t\t\tvalue = this.isRTL ? getBuffer.call(this).slice().reverse().join(\"\") : getBuffer.call(this).join(\"\");\n\t\t}\n\t\tvar buffer = getBuffer.call(this);\n\t\tvar rl = determineLastRequiredPosition.call(this),\n\t\t\tlmib = buffer.length - 1;\n\t\tfor (; lmib > rl; lmib--) {\n\t\t\tif (isMask.call(this, lmib)) break;\n\t\t}\n\t\tbuffer.splice(rl, lmib + 1 - rl);\n\n\t\treturn isComplete.call(this, buffer) && value === (this.isRTL ? getBuffer.call(this).slice().reverse().join(\"\") : getBuffer.call(this).join(\"\"));\n\n\t},\n\tformat: function (value, metadata) {\n\t\tthis.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache);\n\t\tlet valueBuffer = (typeof this.opts.onBeforeMask === \"function\" ? (this.opts.onBeforeMask.call(this, value, this.opts) || value) : value).split(\"\");\n\t\tcheckVal.call(this, undefined, true, false, valueBuffer);\n\t\tlet formattedValue = this.isRTL ? getBuffer.call(this).slice().reverse().join(\"\") : getBuffer.call(this).join(\"\");\n\t\treturn metadata ? {\n\t\t\tvalue: formattedValue,\n\t\t\tmetadata: this.getmetadata()\n\t\t} : formattedValue;\n\t},\n\tsetValue: function (value) {\n\t\tif (this.el) {\n\t\t\t$(this.el).trigger(\"setvalue\", [value]);\n\t\t}\n\t},\n\tanalyseMask: analyseMask\n};\n\nfunction resolveAlias(aliasStr, options, opts) {\n\tvar aliasDefinition = Inputmask.prototype.aliases[aliasStr];\n\tif (aliasDefinition) {\n\t\tif (aliasDefinition.alias) resolveAlias(aliasDefinition.alias, undefined, opts); //alias is another alias\n\t\t$.extend(true, opts, aliasDefinition); //merge alias definition in the options\n\t\t$.extend(true, opts, options); //reapply extra given options\n\t\treturn true;\n\t} else //alias not found - try as mask\n\tif (opts.mask === null) {\n\t\topts.mask = aliasStr;\n\t}\n\n\treturn false;\n}\n\nfunction importAttributeOptions(npt, opts, userOptions, dataAttribute) {\n\tfunction importOption(option, optionData) {\n\t\tconst attrOption = dataAttribute === \"\" ? option : dataAttribute + \"-\" + option;\n\t\toptionData = optionData !== undefined ? optionData : npt.getAttribute(attrOption);\n\t\tif (optionData !== null) {\n\t\t\tif (typeof optionData === \"string\") {\n\t\t\t\tif (option.indexOf(\"on\") === 0) {\n\t\t\t\t\toptionData = window[optionData];\n\t\t\t\t}//get function definition\n\t\t\t\telse if (optionData === \"false\") {\n\t\t\t\t\toptionData = false;\n\t\t\t\t} else if (optionData === \"true\") optionData = true;\n\t\t\t}\n\t\t\tuserOptions[option] = optionData;\n\t\t}\n\t}\n\n\tif (opts.importDataAttributes === true) {\n\t\tvar attrOptions = npt.getAttribute(dataAttribute), option, dataoptions, optionData, p;\n\n\t\tif (attrOptions && attrOptions !== \"\") {\n\t\t\tattrOptions = attrOptions.replace(/'/g, \"\\\"\");\n\t\t\tdataoptions = JSON.parse(\"{\" + attrOptions + \"}\");\n\t\t}\n\n\t\t//resolve aliases\n\t\tif (dataoptions) { //pickup alias from dataAttribute\n\t\t\toptionData = undefined;\n\t\t\tfor (p in dataoptions) {\n\t\t\t\tif (p.toLowerCase() === \"alias\") {\n\t\t\t\t\toptionData = dataoptions[p];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\timportOption(\"alias\", optionData); //pickup alias from dataAttribute-alias\n\t\tif (userOptions.alias) {\n\t\t\tresolveAlias(userOptions.alias, userOptions, opts);\n\t\t}\n\n\t\tfor (option in opts) {\n\t\t\tif (dataoptions) {\n\t\t\t\toptionData = undefined;\n\t\t\t\tfor (p in dataoptions) {\n\t\t\t\t\tif (p.toLowerCase() === option.toLowerCase()) {\n\t\t\t\t\t\toptionData = dataoptions[p];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\timportOption(option, optionData);\n\t\t}\n\t}\n\t$.extend(true, opts, userOptions);\n\n\t//handle dir=rtl\n\tif (npt.dir === \"rtl\" || opts.rightAlign) {\n\t\tnpt.style.textAlign = \"right\";\n\t}\n\n\tif (npt.dir === \"rtl\" || opts.numericInput) {\n\t\tnpt.dir = \"ltr\";\n\t\tnpt.removeAttribute(\"dir\");\n\t\topts.isRTL = true;\n\t}\n\n\treturn Object.keys(userOptions).length;\n}\n\n//apply defaults, definitions, aliases\nInputmask.extendDefaults = function (options) {\n\t$.extend(true, Inputmask.prototype.defaults, options);\n};\nInputmask.extendDefinitions = function (definition) {\n\t$.extend(true, Inputmask.prototype.definitions, definition);\n};\nInputmask.extendAliases = function (alias) {\n\t$.extend(true, Inputmask.prototype.aliases, alias);\n};\n//static fn on inputmask\nInputmask.format = function (value, options, metadata) {\n\treturn Inputmask(options).format(value, metadata);\n};\nInputmask.unmask = function (value, options) {\n\treturn Inputmask(options).unmaskedvalue(value);\n};\nInputmask.isValid = function (value, options) {\n\treturn Inputmask(options).isValid(value);\n};\nInputmask.remove = function (elems) {\n\tif (typeof elems === \"string\") {\n\t\telems = document.getElementById(elems) || document.querySelectorAll(elems);\n\t}\n\telems = elems.nodeName ? [elems] : elems;\n\telems.forEach(function (el) {\n\t\tif (el.inputmask) el.inputmask.remove();\n\t});\n};\nInputmask.setValue = function (elems, value) {\n\tif (typeof elems === \"string\") {\n\t\telems = document.getElementById(elems) || document.querySelectorAll(elems);\n\t}\n\telems = elems.nodeName ? [elems] : elems;\n\telems.forEach(function (el) {\n\t\tif (el.inputmask) el.inputmask.setValue(value); else $(el).trigger(\"setvalue\", [value]);\n\t});\n};\n\nInputmask.dependencyLib = $;\n\n//make inputmask available\nwindow.Inputmask = Inputmask;\nexport default Inputmask;\n","import errors from \"../modules/Errors\";\r\nimport Inputmask from \"inputmask/lib/inputmask\";\r\n\r\nclass KbfForm {\r\n\r\n    constructor(formConfig, lang) {\r\n\r\n        let $ = window.$;\r\n\r\n        this.formConfig = formConfig;\r\n        this.formName = this.formConfig.formName;\r\n        this.formElement = document.forms[this.formName];\r\n        this.lang = lang || 'pl';\r\n\r\n        // Sprawdz czy formularz o podanej nazwie istnieje\r\n        if (!this.formElement) throw errors.formNotFound(this.formName);\r\n\r\n        this.$formElement = $(this.formElement);\r\n\r\n        // Error message\r\n        this.$errorMessageElement = $('.kbf-error-message');\r\n\r\n        // Sprawdz czy walidator istnieje\r\n        if (!$.fn.validate) throw errors.noValidator();\r\n\r\n        // Konfiguracja walidatora\r\n        this.validatorConfig = formConfig.validator;\r\n\r\n        // Domyslna konfiguracja walidatora\r\n        this.defaultValidatorConfig = {\r\n\r\n            ignore: [],\r\n\r\n            // Umiejscowienie komunikatu o bledzie\r\n            errorPlacement: function ($label, $element) {\r\n                $label.addClass('kbf-error-message');\r\n\r\n                let $column = $element.closest('[class*=\"col\"]');\r\n\r\n                if ($column.length > 0) {\r\n                    $column.append($label);\r\n                } else $label.insertAfter($element);\r\n            }\r\n        };\r\n\r\n        this.init();\r\n        this.addListeners();\r\n\r\n    }\r\n\r\n    init() {\r\n\r\n        // Ustaw maski\r\n        Array.from(this.formElement.elements).forEach(function (formElement) {\r\n            new Inputmask().mask(formElement)\r\n        })\r\n\r\n    }\r\n\r\n    addListeners() {\r\n\r\n    }\r\n\r\n    validate() {\r\n        this.$formElement.validate({ ...this.defaultValidatorConfig, ...this.validatorConfig });\r\n        this.handleErrorMessage();\r\n    }\r\n\r\n    // Ustawia error message jezeli istnieje\r\n    handleErrorMessage() {\r\n\r\n        this.formIsValid = this.$formElement.valid();\r\n\r\n        // Wyswietl komunikat o bledzie jeżeli pole komunikatu istnieje\r\n        if (this.$errorMessageElement.length > 0) {\r\n            if(this.formIsValid && !this.$errorMessageElement.hasClass('d-none')) this.$errorMessageElement.addClass('d-none');\r\n            if(!this.formIsValid && this.$errorMessageElement.hasClass('d-none')) this.$errorMessageElement.removeClass('d-none');\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default KbfForm;","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","import errors from \"../modules/Errors\";\r\n\r\nclass KbfPreloaderButton extends EventTarget {\r\n\r\n    constructor(selector, auto=true) {\r\n\r\n        super();\r\n        let $ = window.$;\r\n\r\n        this.$preloaderButton = $(selector);\r\n\r\n        // Emituj wyjatek gdy nie podano selektora albo element nie zostal znaleziony\r\n        if (!selector || this.$preloaderButton.length === 0) throw errors.elementNotFound(selector);\r\n\r\n        this.auto = auto; // Czy automatycznie dodawac listener\r\n\r\n        this.init();\r\n        this.addListeners();\r\n\r\n    }\r\n\r\n    init() {\r\n\r\n        // Aliasy\r\n        this.on = this.addEventListener;\r\n        this.off = this.removeEventListener;\r\n        this.emit = this.dispatchEvent;\r\n\r\n        this.buttonCurrentContents = this.$preloaderButton.html(); // Aktualna zawartosc\r\n\r\n    }\r\n\r\n    triggerStart(buttonElement) {\r\n\r\n        let buttonGeometry = buttonElement.getBoundingClientRect(); // Aktualna geometria\r\n\r\n        let $buttonElement = $(buttonElement);\r\n        let bgColor;\r\n\r\n\r\n        $buttonElement.on('click', function () {\r\n            console.log('not touch')\r\n            bgColor = getComputedStyle(buttonElement, ':hover').backgroundColor;\r\n        })\r\n\r\n\r\n        this.$preloaderButton.trigger({\r\n            type: 'start-preloader',\r\n            buttonGeometry,\r\n            bgColor\r\n        });\r\n\r\n        this.emit(new CustomEvent('click'));\r\n    }\r\n\r\n    // Startuje preloader\r\n    startPreloader(buttonElement, buttonGeometry, bgColor) {\r\n\r\n        let $ = window.$;\r\n\r\n        let $buttonElement = $(buttonElement);\r\n\r\n        $buttonElement.attr('disabled', 'disabled');\r\n        $buttonElement.css('width', buttonGeometry.width + 'px');\r\n        $buttonElement.css('height', buttonGeometry.height + 'px');\r\n        $buttonElement.css('padding', 0);\r\n        $buttonElement.css('background-color', bgColor);\r\n        $buttonElement.html(KbfPreloaderButton.preloaderMarkup);\r\n\r\n    }\r\n\r\n    // Zatrzymuje preloader\r\n    stopPreloader() {\r\n        this.$preloaderButton.html(this.buttonCurrentContents).attr('style', '');\r\n        this.$preloaderButton.removeAttr('disabled');\r\n    }\r\n\r\n    addListeners() {\r\n\r\n        let instance = this;\r\n\r\n        // Rejestruj handler warunkowo\r\n        if (this.auto) {\r\n            this.$preloaderButton.on('click', function () {\r\n               instance.triggerStart(this);\r\n            });\r\n        }\r\n\r\n        this.$preloaderButton.on('start-preloader', function (e) {\r\n            instance.startPreloader(this, e.buttonGeometry, e.bgColor);\r\n        })\r\n\r\n    }\r\n}\r\n\r\nKbfPreloaderButton.preloaderMarkup = '<div class=\"kbf-button-preloader\"><div id=\"dots\"><span></span><span></span><span></span></div></div>';\r\nexport default KbfPreloaderButton;","let config = {\r\n\r\n    env: 'dev',\r\n    url: 'https://webplanet.biz',\r\n    apiEndpoint: 'https://webplanet.biz/kbf/'\r\n\r\n};\r\n\r\nexport default config;","import KbfForm from \"../../components/KbfForm\";\r\nimport KbfPreloaderButton from \"../../components/KbfPreloaderButton\";\r\nimport config from \"../../config/config\";\r\n\r\nclass KbfSendCv extends KbfForm {\r\n\r\n    constructor() {\r\n        super({ formName: 'send-cv'}, 'pl');\r\n    }\r\n\r\n    init() {\r\n\r\n        super.init();\r\n\r\n        this.$jobNameField = $('input[name=\"job_name\"]');\r\n        this.$jobURLField = $('input[name=\"job_url\"]');\r\n        this.$confirmationPageURLField = $('input[name=\"confirmation_page_url\"]');\r\n        this.$jobIdField = $('input[name=\"job_id\"]');\r\n        this.$nameField = $('input[name=\"name\"]');\r\n        this.$phoneField = $('input[name=\"phone\"]');\r\n        this.$emailField = $('input[name=\"email\"]');\r\n        this.$companyEmailField = $('input[name=\"company_email\"]');\r\n        this.$companyIdField = $('input[name=\"company_id\"]');\r\n        this.$attachmentField = $('input[name=\"attachment\"]');\r\n\r\n        this.$submitButton = $('button.send-cv[type=\"submit\"]');\r\n        this.formData = new FormData();\r\n\r\n        // this.preloaderButton = new KbfPreloaderButton('button.send-cv[type=\"submit\"]');\r\n\r\n\r\n    }\r\n\r\n    addListeners() {\r\n\r\n        let instance = this;\r\n\r\n        this.$submitButton.on('click', function (e) {\r\n\r\n            e.preventDefault();\r\n            instance.hostname = window.location.hostname;\r\n\r\n            instance.formData.append('subject', `Aplikacja na stanowisko: \"${instance.$jobNameField.val()}\"`);\r\n            instance.formData.append('to', instance.$companyEmailField.val());\r\n            instance.formData.append('from', 'administrator@webplanet.biz');\r\n\r\n            instance.formData.append('name', instance.$nameField.val());\r\n            instance.formData.append('phone', instance.$phoneField.val());\r\n            instance.formData.append('email', instance.$emailField.val());\r\n\r\n            instance.formData.append('attachment', instance.$attachmentField[0].files[0]);\r\n\r\n            let message = `\r\n                <p style=\"font-weight: bold\">Dzień dobry.</p>\r\n                <p>W załączeniu przesyłam swoją aplikację.</p>\r\n                <p>Link do ogłoszenia : <a href=\"${instance.hostname + instance.$jobURLField.val()}\">${instance.hostname + instance.$jobURLField.val()}</a> </p>\r\n                <p>Dane kontaktowe :</p>\r\n                <p>Numer telefonu: ${instance.$phoneField.val()}</p>\r\n                <p>Adres e-mail: ${instance.$emailField.val()}</p>\r\n                <p style=\"font-weight: bold\">Pozdrawiam,</p>\r\n                <p>${instance.$nameField.val()}</p>\r\n            `;\r\n\r\n            instance.formData.append('bodyHTML', message);\r\n            instance.validate();\r\n\r\n            if (instance.formIsValid) {\r\n                $.ajax(`${config.apiEndpoint}api/mail-cv/`, {\r\n                    type: 'POST',\r\n                    data: instance.formData,\r\n                    processData: false,\r\n                    contentType: false,\r\n\r\n                }).done(function (res) {\r\n                    console.log(res);\r\n                    window.location.replace(window.location.protocol + '//' + instance.hostname + instance.$confirmationPageURLField.val() + `?company_id=${instance.$companyIdField.val()}&job_id=${instance.$jobIdField.val()}`);\r\n\r\n                }).fail(function () {\r\n                    console.log('Error sending CV.');\r\n                })\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default KbfSendCv;","import errors from \"../modules/Errors\";\r\nimport KbfPreloaderButton from \"./KbfPreloaderButton\";\r\n\r\nclass KbfBackButton {\r\n\r\n    constructor(selector) {\r\n\r\n        let $ = window.$;\r\n        this.$backButton = $(selector);\r\n\r\n        // Emituj wyjatek gdy nie podano selektora albo element nie zostal znaleziony\r\n        if (!selector || this.$backButton.length === 0) throw errors.elementNotFound(selector);\r\n\r\n        this.init(selector);\r\n        this.addListeners();\r\n\r\n    }\r\n\r\n    init(selector) {\r\n\r\n        this.preloaderButton = new KbfPreloaderButton(selector);\r\n        this.$backButton.hide();\r\n\r\n        if (window.history.length > 1 ) this.$backButton.show();\r\n\r\n    }\r\n\r\n    addListeners() {\r\n\r\n        if (window.history.length > 1 ) {\r\n            this.$backButton.on('click', function () {\r\n                window.history.back();\r\n            })\r\n        }\r\n\r\n\r\n    }\r\n}\r\n\r\nexport default KbfBackButton","import KbfSendCv from \"./KbfSendCv\";\r\nimport KbfBackButton from \"../../components/KbfBackButton\";\r\n\r\nclass App {\r\n\r\n    constructor() {\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n\r\n        new KbfSendCv(); // Inicjuj formularz\r\n        new KbfBackButton('.kbf-back-button');\r\n\r\n    }\r\n}\r\n\r\nexport default App;","import App from './components/App';\r\n\r\n(function($){\r\n\r\n    $(document).ready(function () {\r\n\r\n        new App();\r\n\r\n    })\r\n\r\n})(window.$)"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_superPropBase","object","property","hasOwnProperty","call","_get","receiver","Reflect","get","base","superPropBase","desc","getOwnPropertyDescriptor","value","_setPrototypeOf","p","_inherits","subClass","superClass","create","constructor","_typeof","obj","Symbol","iterator","_assertThisInitialized","self","ReferenceError","_possibleConstructorReturn","assertThisInitialized","_defineProperty","errors","elementNotFound","selector","Error","formNotFound","formName","argumentNotFound","argumentName","substring","toUpperCase","noValidator","noGeoCoords","getLocator","tst","align","locator","alternation","undefined","mloc","getDecisionTaker","join","decisionTaker","split","toString","getPlaceholder","pos","test","returnPL","inputmask","opts","maskset","getTest","match","placeholder","static","validPositions","tests","getTests","staticAlternations","prevTest","def","optionality","optionalQuantifier","fn","push","charAt","getMaskTemplate","baseOnInput","minimalPos","includeMode","noJit","clearOptionalTail","greedy","maskTemplate","ndxIntlzr","testPos","jitRenderStatic","generatedInput","input","skipOptionalPartCharacter","determineTestTemplate","slice","nativeDef","getTestTemplate","jitMasking","jit","groupSeparator","isFinite","maxLength","pop","maskLength","tstPs","altTest","targetLocator","tstLocator","closest","bestMatch","ndx","distance","Math","abs","newBlockMarker","$","dependencyLib","el","maskTokens","maskToken","ndxInitializer","matches","insertStop","latestMatch","cacheDependency","resolveTestFromToken","loopNdx","quantifierRecurse","handleMatch","isFirstMatch","tokenGroup","firstMatch","indexOf","every","isQuantifier","resolveNdxInitializer","alternateNdx","targetAlternation","indexPos","lmnt","ndxPos","bestMatchAltIndex","isSubsetOf","source","expand","pattern","expanded","start","end","l","charCodeAt","String","fromCharCode","regex","RegExp","replace","staticCanMatchDefinition","setMergeLocators","targetMatch","altMatch","alternationNdx","shouldMerge","locNdx","keys","isSameLevel","_maxTestPos","mask","reverse","isGroup","isOptional","optionalToken","mtchsNdx","forEach","mtch","isAlternator","alternateToken","malternateMatches","maltMatches","currentMatches","loopNdxCnt","altIndex","shift","currentPos","ndxInitializerClone","altIndexArr","amndx","excludes","altIndexArrClone","exl","excludeSet","splice","keepStatic","parseInt","unMatchedAlternation","concat","ndx1","dropMatch","ndx2","altMatch2","includes","userOptions","qt","qndx","isNaN","quantifier","max","min","jitOffset","tndx","mergeLocators","Array","isArray","previousPos","cd","mtndx","casing","extend","ua","window","navigator","userAgent","ie","mobile","iemobile","iphone","applyInputValue","refreshValue","onBeforeMask","checkVal","undoValue","getBuffer","clearMaskOnLostFocus","clearIncomplete","_valueGet","getBufferTemplate","getLastValidPosition","_valueSet","buffer","template","writeOut","strict","nptvl","initiatingEvent","inputValue","charCodes","initialNdx","result","isTemplateMatch","targetTemplate","seekNext","charCodeNdx","isMask","nextPos","caretPos","begin","resetMaskSet","radixPoint","determineNewCaretPosition","staticMatches","prevCaretPos","charCode","isValid","keypress","Event","which","lvp","EventHandlers","keypressEvent","isRTL","forwardPosition","writeBuffer","sndx","validPos","nextValid","isComplete","nextSndx","type","HandleNativePlaceholder","npt","nptValue","removeAttribute","unmaskedvalue","umValue","vps","pndx","metadata","unmaskedValue","onUnMask","bufferValue","event","triggerEvents","onBeforeWrite","refreshFromBuffer","refresh","caret","keyCode","DELETE","BACKSPACE","$input","nptVal","skipInputEvent","trigger","setTimeout","keydownEvent","e","k","kdResult","onKeyDown","BACKSPACE_SAFARI","ctrlKey","X","preventDefault","handleRemove","END","PAGE_DOWN","shiftKey","HOME","PAGE_UP","undoOnEscape","ESCAPE","altKey","tabThrough","TAB","seekPrevious","insertModeVisual","insertMode","RIGHT","LEFT","translatePosition","ignorable","ignorables","checkval","metaKey","ENTER","location","c","writeOutBuffer","valResult","numericInput","onKeyValidation","keyupEvent","isComposing","KEY_229","$el","pasteEvent","tempValue","valueBeforeCaret","substr","valueAfterCaret","clipboardData","getData","pasteValue","onBeforePaste","inputFallBackEvent","ieMobileHandler","inputChar","iv","analyseChanges","frontPart","backPart","frontBufferPart","backBufferPart","fpl","bpl","bl","action","data","marker","unshift","newBuffer","oldBuffer","changes","shadowRoot","document","activeElement","focus","entry","keydown","compositionendEvent","setValueEvent","detail","arguments","focusEvent","showMaskOnFocus","positionCaretOnTab","mouseEnter","clickEvent","apply","invalidEvent","validationEvent","mouseleaveEvent","originalPlaceholder","tabbed","newCaretPosition","cutEvent","clipData","setData","execCommand","blurEvent","mouseenterEvent","showMaskOnHover","submitEvent","removeMaskOnSubmit","resetEvent","alternate","maskPos","fromIsValid","rAltPos","selection","validPsClone","tstClone","lastAlt","isValidRslt","returnRslt","altPos","prevAltPos","decisionPos","lAltPos","validInputs","resultPos","elem","toLowerCase","posBefore","SPACE","args","checkAlternationMatch","altArr1","altArr2","na","altArrC","isMatch","naArr","naNdx","alndx","pend","offset","revalidateMask","newPos","repeat","complete","lrp","determineLastRequiredPosition","aml","fromAlternate","validateOnly","fromCheckval","isSelection","posObj","processCommandObject","commandObj","remove","sort","a","b","insert","rewritePosition","_isValid","position","rslt","validatedPos","positionsClone","preValidation","currentPosValid","skip","nPos","snPos","trackbackPositions","postValidation","postResult","endResult","positionCanMatchDefinition","testDefinition","valid","shiftPositions","bffr","originalPos","fillOnly","ps","vp","np","cvpInput","validTest","IsEnclosedStatic","valids","posMatch","prevMatch","nextMatch","j","t","canMatch","notranslate","isDelete","range","scrollCalc","ownerDocument","defaultView","getComputedStyle","currentStyle","fontSize","scrollLeft","scrollWidth","setSelectionRange","getSelection","createRange","firstChild","textNode","createTextNode","appendChild","setStart","setEnd","collapse","sel","removeAllRanges","addRange","createTextRange","moveEnd","moveStart","select","selectionStart","selectionEnd","getRangeAt","commonAncestorContainer","parentNode","startOffset","endOffset","duplicate","text","returnDefinition","positions","lvTest","lvTestAlt","selectedCaret","doRadixFocus","clickPos","digits","radixPos","positionCaretOnClick","clickPosition","lvclickPosition","lastPosition","tt","noCache","_buffer","closestTo","before","after","posNdx","psNdx","fuzzy","testTemplate","testPlaceHolder","soft","newBlock","EventRuler","on","eventName","eventHandler","ev","originalEvent","that","nodeName","imOpts","off","Inputmask","disabled","readOnly","inputType","skipKeyPressEvent","blur","returnVal","stopPropagation","events","form","bind","evArr","isElementTypeSupported","patchValueProperty","valueGet","valueSet","patchValhook","valHooks","inputmaskpatch","valhookGet","valhookSet","set","autoUnmask","nullable","getter","setter","installNativeValueSetFallback","__valueGet","noValuePatching","valueProperty","tagName","textContent","__lookupGetter__","__lookupSetter__","__defineGetter__","__defineSetter__","__valueSet","overruleRTL","elementType","getAttribute","isSupported","supportsInputType","isContentEditable","createElement","setAttribute","inputMode","inputmode","autocomplete","oncomplete","onincomplete","oncleared","inputEventOnly","options","name","src","copy","copyIsArray","clone","deep","eval","owner","__data","isValidElement","Element","CustomEvent","params","bubbles","cancelable","evt","createEvent","initCustomEvent","handler","addEvent","namespace","addEventListener","attachEvent","eventRegistry","_events","endx","nsEvent","removeEvent","removeEventListener","detachEvent","nmsp","resolveNamespace","evts","hndx","hndL","evNdx","offEvents","offEventsL","evnt","dispatchEvent","createEventObject","eventType","fireEvent","DependencyLib","querySelector","generateMaskSet","nocache","ms","generateMask","regexMask","repeatStart","groupmarker","quantifiermarker","masksetDefinition","maskdefKey","masksCache","analyseMask","altMask","msk","alternatormarker","tokenizer","regexTokenizer","escaped","currentToken","MaskToken","m","openenings","openingToken","currentOpeningToken","alternator","lastMatch","closeRegexGroup","openGroup","alternatorGroup","insertTestDefinition","mtoken","element","staticDefinitionSymbol","maskdef","definitions","usePrototypeDefinitions","validator","definitionSymbol","generated","verifyGroupMarker","token","nextToken","defaultCase","mndx","reverseTokens","reverseStatic","st","optionalmarker","intMatch","groupify","groupToken","closeGroup","groupQuantifier","exec","altRegexGroup","escapeChar","mqj","mq","mq0","mq1","tmpMatch","subToken","alias","pastedValue","rightAlign","_radixDance","importDataAttributes","dataKey","internal","defaults","noMasksCache","resolveAlias","dataAttribute","aliases","elems","getElementById","querySelectorAll","scopedOpts","importAttributeOptions","option","noremask","valueBuffer","cv","getemptymask","hasMaskedValue","getmetadata","maskTarget","mtdt","rl","lmib","format","formattedValue","setValue","aliasStr","aliasDefinition","importOption","optionData","attrOption","attrOptions","dataoptions","JSON","parse","dir","style","textAlign","extendDefaults","extendDefinitions","definition","extendAliases","unmask","KbfForm","formConfig","lang","formElement","forms","$formElement","$errorMessageElement","validate","validatorConfig","defaultValidatorConfig","ignore","errorPlacement","$label","$element","addClass","$column","append","insertAfter","init","addListeners","from","elements","handleErrorMessage","formIsValid","hasClass","removeClass","_isNativeFunction","Function","_isNativeReflectConstruct","construct","sham","Proxy","Boolean","valueOf","_construct","Parent","Class","isNativeReflectConstruct","_wrapNativeSuper","_cache","Map","isNativeFunction","has","Wrapper","KbfPreloaderButton","auto","$preloaderButton","emit","buttonCurrentContents","html","buttonElement","buttonGeometry","getBoundingClientRect","$buttonElement","bgColor","console","log","backgroundColor","attr","css","width","height","preloaderMarkup","removeAttr","triggerStart","startPreloader","EventTarget","config","env","url","apiEndpoint","KbfSendCv","$jobNameField","$jobURLField","$confirmationPageURLField","$jobIdField","$nameField","$phoneField","$emailField","$companyEmailField","$companyIdField","$attachmentField","$submitButton","formData","FormData","hostname","val","files","message","ajax","processData","contentType","done","res","protocol","fail","KbfBackButton","$backButton","preloaderButton","hide","history","show","back","App","ready"],"mappings":"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"}